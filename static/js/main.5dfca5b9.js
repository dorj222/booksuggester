/*! For license information please see main.5dfca5b9.js.LICENSE.txt */
(()=>{var e={600:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===s)if(n.toString===Object.prototype.toString)for(var a in n)r.call(n,a)&&n[a]&&e.push(a);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},219:(e,t,n)=>{"use strict";var r=n(86),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var l=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=u(n);h&&(o=o.concat(h(n)));for(var a=c(t),m=c(n),g=0;g<o.length;++g){var y=o[g];if(!s[y]&&(!r||!r[y])&&(!m||!m[y])&&(!a||!a[y])){var v=d(n,y);try{l(t,y,v)}catch(w){}}}}return t}},123:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var s,o,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var l in s=Object(arguments[c]))n.call(s,l)&&(a[l]=s[l]);if(t){o=t(s);for(var u=0;u<o.length;u++)r.call(s,o[u])&&(a[o[u]]=s[o[u]])}}return a}},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(123),s=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var a=new Set,c={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(c[e]=t,e=0;e<t.length;e++)a.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},m={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function w(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(m,e)||!f.call(p,e)&&(d.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=60103,I=60106,S=60107,k=60108,T=60114,x=60109,C=60110,N=60112,A=60113,P=60120,O=60115,R=60116,D=60121,L=60128,M=60129,F=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;E=U("react.element"),I=U("react.portal"),S=U("react.fragment"),k=U("react.strict_mode"),T=U("react.profiler"),x=U("react.provider"),C=U("react.context"),N=U("react.forward_ref"),A=U("react.suspense"),P=U("react.suspense_list"),O=U("react.memo"),R=U("react.lazy"),D=U("react.block"),U("react.scope"),L=U("react.opaque.id"),M=U("react.debug_trace_mode"),F=U("react.offscreen"),j=U("react.legacy_hidden")}var V,z="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=z&&e[z]||e["@@iterator"])?e:null}function q(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var K=!1;function W(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=a);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function G(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case I:return"Portal";case T:return"Profiler";case k:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return H(e.type);case D:return H(e._render);case R:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function se(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ce(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function le(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,me,ge=(me=function(e,t){if(e.namespaceURI!==he.svg||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ve={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ve).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ve[t]=ve[e]}))}));var Ee=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,xe=null,Ce=null;function Ne(e){if(e=ni(e)){if("function"!==typeof Te)throw Error(o(280));var t=e.stateNode;t&&(t=ii(t),Te(e.stateNode,e.type,t))}}function Ae(e){xe?Ce?Ce.push(e):Ce=[e]:xe=e}function Pe(){if(xe){var e=xe,t=Ce;if(Ce=xe=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Oe(e,t){return e(t)}function Re(e,t,n,r,i){return e(t,n,r,i)}function De(){}var Le=Oe,Me=!1,Fe=!1;function je(){null===xe&&null===Ce||(De(),Pe())}function Ue(e,t){var n=e.stateNode;if(null===n)return null;var r=ii(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ve=!1;if(h)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(me){Ve=!1}function Be(e,t,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var qe=!1,Ke=null,We=!1,Ge=null,He={onError:function(e){qe=!0,Ke=e}};function Qe(e,t,n,r,i,s,o,a,c){qe=!1,Ke=null,Be.apply(He,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if($e(e)!==e)throw Error(o(188))}function Je(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Xe(i),e;if(s===r)return Xe(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,st=[],ot=null,at=null,ct=null,lt=new Map,ut=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":at=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ut.delete(t.pointerId)}}function mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e=ft(t,n,r,i,s),null!==t&&(null!==(t=ni(t))&&tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function gt(e){var t=ti(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){s.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ni(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function vt(e,t,n){yt(e)&&n.delete(t)}function wt(){for(it=!1;0<st.length;){var e=st[0];if(null!==e.blockedOn){null!==(e=ni(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&st.shift()}null!==ot&&yt(ot)&&(ot=null),null!==at&&yt(at)&&(at=null),null!==ct&&yt(ct)&&(ct=null),lt.forEach(vt),ut.forEach(vt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,wt)))}function _t(e){function t(t){return bt(t,e)}if(0<st.length){bt(st[0],e);for(var n=1;n<st.length;n++){var r=st[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ot&&bt(ot,e),null!==at&&bt(at,e),null!==ct&&bt(ct,e),lt.forEach(t),ut.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)gt(n),null===n.blockedOn&&ht.shift()}function Et(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionend:Et("Transition","TransitionEnd")},St={},kt={};function Tt(e){if(St[e])return St[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in kt)return St[e]=n[t];return e}h&&(kt=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var xt=Tt("animationend"),Ct=Tt("animationiteration"),Nt=Tt("animationstart"),At=Tt("transitionend"),Pt=new Map,Ot=new Map,Rt=["abort","abort",xt,"animationEnd",Ct,"animationIteration",Nt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",At,"transitionEnd","waiting","waiting"];function Dt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),Pt.set(r,i),l(i,[r])}}(0,s.unstable_now)();var Lt=8;function Mt(e){if(0!==(1&e))return Lt=15,1;if(0!==(2&e))return Lt=14,2;if(0!==(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!==(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!==(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!==(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!==(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!==(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,s=e.expiredLanes,o=e.suspendedLanes,a=e.pingedLanes;if(0!==s)r=s,i=Lt=15;else if(0!==(s=134217727&n)){var c=s&~o;0!==c?(r=Mt(c),i=Lt):0!==(a&=s)&&(r=Mt(a),i=Lt)}else 0!==(s=n&~o)?(r=Mt(s),i=Lt):0!==a&&(r=Mt(a),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-qt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Mt(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-qt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ut(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?Ut(10,t):e;case 10:return 0===(e=Vt(192&~t))?Ut(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&(0===(e=Vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Vt(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-qt(t)]=n}var qt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Kt(e)/Wt|0)|0},Kt=Math.log,Wt=Math.LN2;var Gt=s.unstable_UserBlockingPriority,Ht=s.unstable_runWithPriority,Qt=!0;function $t(e,t,n,r){Me||De();var i=Xt,s=Me;Me=!0;try{Re(i,e,t,n,r)}finally{(Me=s)||je()}}function Yt(e,t,n,r){Ht(Gt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if(Qt)if((i=0===(4&t))&&0<st.length&&-1<dt.indexOf(e))e=ft(null,e,t,n,r),st.push(e);else{var s=Jt(e,t,n,r);if(null===s)i&&pt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=ft(s,e,t,n,r),void st.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ot=mt(ot,e,t,n,r,i),!0;case"dragenter":return at=mt(at,e,t,n,r,i),!0;case"mouseover":return ct=mt(ct,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return lt.set(s,mt(lt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ut.set(s,mt(ut.get(s)||null,e,t,n,r,i)),!0}return!1}(s,e,t,n,r))return;pt(e,r)}Dr(e,t,r,null,n)}}}function Jt(e,t,n,r){var i=ke(r);if(null!==(i=ti(i))){var s=$e(i);if(null===s)i=null;else{var o=s.tag;if(13===o){if(null!==(i=Ye(s)))return i;i=null}else if(3===o){if(s.stateNode.hydrate)return 3===s.tag?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Dr(e,t,r,i,n),null}var Zt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sn(){return!0}function on(){return!1}function an(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?sn:on,this.isPropagationStopped=on,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sn)},persist:function(){},isPersistent:sn}),t}var cn,ln,un,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(hn),fn=i({},hn,{view:0,detail:0}),pn=an(fn),mn=i({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(cn=e.screenX-un.screenX,ln=e.screenY-un.screenY):ln=cn=0,un=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),gn=an(mn),yn=an(i({},mn,{dataTransfer:0})),vn=an(i({},fn,{relatedTarget:0})),wn=an(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(bn),En=an(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function xn(){return Tn}var Cn=i({},fn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=an(Cn),An=an(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=an(i({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),On=an(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Rn),Ln=[9,13,27,32],Mn=h&&"CompositionEvent"in window,Fn=null;h&&"documentMode"in document&&(Fn=document.documentMode);var jn=h&&"TextEvent"in window&&!Fn,Un=h&&(!Mn||Fn&&8<Fn&&11>=Fn),Vn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ae(r),0<(t=Mr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,$n=null;function Yn(e){Cr(e,0)}function Xn(e){if(X(ri(e)))return e}function Jn(e,t){if("change"===e)return t}var Zn=!1;if(h){var er;if(h){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Qn&&(Qn.detachEvent("onpropertychange",ir),$n=Qn=null)}function ir(e){if("value"===e.propertyName&&Xn($n)){var t=[];if(Hn(t,$n,e,ke(e)),e=Yn,Me)e(t);else{Me=!0;try{Oe(e,t)}finally{Me=!1,je()}}}}function sr(e,t,n){"focusin"===e?(rr(),$n=n,(Qn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn($n)}function ar(e,t){if("click"===e)return Xn(t)}function cr(e,t){if("input"===e||"change"===e)return Xn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ur=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ur.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=h&&"documentMode"in document&&11>=document.documentMode,vr=null,wr=null,br=null,_r=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==vr||vr!==J(r)||("selectionStart"in(r=vr)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Mr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}Dt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Dt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Dt(Rt,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sr=0;Sr<Ir.length;Sr++)Ot.set(Ir[Sr],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tr=new Set("cancel close invalid load scroll toggle".split(" ").concat(kr));function xr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,c,l){if(Qe.apply(this,arguments),qe){if(!qe)throw Error(o(198));var u=Ke;qe=!1,Ke=null,We||(We=!0,Ge=u)}}(r,t,void 0,e),e.currentTarget=null}function Cr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;xr(i,a,l),s=c}else for(o=0;o<r.length;o++){if(c=(a=r[o]).instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;xr(i,a,l),s=c}}}if(We)throw e=Ge,We=!1,Ge=null,e}function Nr(e,t){var n=si(t),r=e+"__bubble";n.has(r)||(Rr(t,e,2,!1),n.add(r))}var Ar="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){e[Ar]||(e[Ar]=!0,a.forEach((function(t){Tr.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=n;if("selectionchange"===e&&9!==n.nodeType&&(s=n.ownerDocument),null!==r&&!t&&Tr.has(e)){if("scroll"!==e)return;i|=2,s=r}var o=si(s),a=e+"__"+(t?"capture":"bubble");o.has(a)||(t&&(i|=4),Rr(s,e,i,t),o.add(a))}function Rr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=$t;break;case 1:i=Yt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Dr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=ti(a)))return;if(5===(c=o.tag)||6===c){r=s=o;continue e}a=a.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{return Le(e,t,n)}finally{Fe=!1,je()}}((function(){var r=s,i=ke(n),o=[];e:{var a=Pt.get(e);if(void 0!==a){var c=dn,l=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":c=Nn;break;case"focusin":l="focus",c=vn;break;case"focusout":l="blur",c=vn;break;case"beforeblur":case"afterblur":c=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Pn;break;case xt:case Ct:case Nt:c=wn;break;case At:c=On;break;case"scroll":c=pn;break;case"wheel":c=Dn;break;case"copy":case"cut":case"paste":c=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=An}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Ue(p,d))&&u.push(Lr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new c(a,l,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(l=n.relatedTarget||n.fromElement)||!ti(l)&&!l[Zr])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?ti(l):null)&&(l!==(h=$e(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=gn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==c?a:ri(c),f=null==l?a:ri(l),(a=new u(m,p+"leave",c,n,i)).target=h,a.relatedTarget=f,m=null,ti(i)===r&&((u=new u(d,p+"enter",l,n,i)).target=f,u.relatedTarget=h,m=u),h=m,c&&l)e:{for(d=l,p=0,f=u=c;f;f=Fr(f))p++;for(f=0,m=d;m;m=Fr(m))f++;for(;0<p-f;)u=Fr(u),p--;for(;0<f-p;)d=Fr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Fr(u),d=Fr(d)}u=null}else u=null;null!==c&&jr(o,a,c,u,!1),null!==l&&null!==h&&jr(o,h,l,u,!0)}if("select"===(c=(a=r?ri(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Jn;else if(Gn(a))if(Zn)g=cr;else{g=or;var y=sr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ar);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ie(a,"number",a.value)),y=r?ri(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(vr=y,wr=r,br=null);break;case"focusout":br=wr=vr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Er(o,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Er(o,n,i)}var v;if(Mn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Kn?Bn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Un&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Kn&&(v=nn()):(en="value"in(Zt=i)?Zt.value:Zt.textContent,Kn=!0)),0<(y=Mr(r,w)).length&&(w=new En(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=qn(n))&&(w.data=v))),(v=jn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(zn=!0,Vn);case"textInput":return(e=t.data)===Vn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!Mn&&Bn(e,t)?(e=nn(),tn=en=Zt=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Mr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Cr(o,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ue(e,n))&&r.unshift(Lr(e,s,i)),null!=(s=Ue(e,t))&&r.push(Lr(e,s,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=Ue(n,s))&&o.unshift(Lr(n,c,a)):i||null!=(c=Ue(n,s))&&o.push(Lr(n,c,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Ur(){}var Vr=null,zr=null;function Br(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function qr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Kr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Hr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Qr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var $r=0;var Yr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Yr,Jr="__reactProps$"+Yr,Zr="__reactContainer$"+Yr,ei="__reactEvents$"+Yr;function ti(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zr]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Qr(e);null!==e;){if(n=e[Xr])return n;e=Qr(e)}return t}n=(e=n).parentNode}return null}function ni(e){return!(e=e[Xr]||e[Zr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ri(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ii(e){return e[Jr]||null}function si(e){var t=e[ei];return void 0===t&&(t=e[ei]=new Set),t}var oi=[],ai=-1;function ci(e){return{current:e}}function li(e){0>ai||(e.current=oi[ai],oi[ai]=null,ai--)}function ui(e,t){ai++,oi[ai]=e.current,e.current=t}var hi={},di=ci(hi),fi=ci(!1),pi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function gi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function yi(){li(fi),li(di)}function vi(e,t,n){if(di.current!==hi)throw Error(o(168));ui(di,t),ui(fi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in e))throw Error(o(108,H(t)||"Unknown",s));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,pi=di.current,ui(di,e),ui(fi,fi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,li(fi),li(di),ui(di,e)):li(fi),ui(fi,n)}var Ei=null,Ii=null,Si=s.unstable_runWithPriority,ki=s.unstable_scheduleCallback,Ti=s.unstable_cancelCallback,xi=s.unstable_shouldYield,Ci=s.unstable_requestPaint,Ni=s.unstable_now,Ai=s.unstable_getCurrentPriorityLevel,Pi=s.unstable_ImmediatePriority,Oi=s.unstable_UserBlockingPriority,Ri=s.unstable_NormalPriority,Di=s.unstable_LowPriority,Li=s.unstable_IdlePriority,Mi={},Fi=void 0!==Ci?Ci:function(){},ji=null,Ui=null,Vi=!1,zi=Ni(),Bi=1e4>zi?Ni:function(){return Ni()-zi};function qi(){switch(Ai()){case Pi:return 99;case Oi:return 98;case Ri:return 97;case Di:return 96;case Li:return 95;default:throw Error(o(332))}}function Ki(e){switch(e){case 99:return Pi;case 98:return Oi;case 97:return Ri;case 96:return Di;case 95:return Li;default:throw Error(o(332))}}function Wi(e,t){return e=Ki(e),Si(e,t)}function Gi(e,t,n){return e=Ki(e),ki(e,t,n)}function Hi(){if(null!==Ui){var e=Ui;Ui=null,Ti(e)}Qi()}function Qi(){if(!Vi&&null!==ji){Vi=!0;var e=0;try{var t=ji;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),ki(Pi,Hi),n}finally{Vi=!1}}}var $i=_.ReactCurrentBatchConfig;function Yi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=ci(null),Ji=null,Zi=null,es=null;function ts(){es=Zi=Ji=null}function ns(e){var t=Xi.current;li(Xi),e.type._context._currentValue=t}function rs(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function is(e,t){Ji=e,es=Zi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function ss(e,t){if(es!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(es=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Zi){if(null===Ji)throw Error(o(308));Zi=t,Ji.dependencies={lanes:0,firstContext:t,responders:null}}else Zi=Zi.next=t;return e._currentValue}var os=!1;function as(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function cs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function us(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function hs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ds(e,t,n,r){var s=e.updateQueue;os=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(null!==c){s.shared.pending=null;var l=c,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==a&&(null===d?h.firstBaseUpdate=u:d.next=u,h.lastBaseUpdate=l)}}if(null!==o){for(d=s.baseState,a=0,h=u=l=null;;){c=o.lane;var f=o.eventTime;if((r&c)===c){null!==h&&(h=h.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(c=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,c);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(c="function"===typeof(p=m.payload)?p.call(f,d,c):p)||void 0===c)break e;d=i({},d,c);break e;case 2:os=!0}}null!==o.callback&&(e.flags|=32,null===(c=s.effects)?s.effects=[o]:c.push(o))}else f={eventTime:f,lane:c,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(u=h=f,l=d):h=h.next=f,a|=c;if(null===(o=o.next)){if(null===(c=s.shared.pending))break;o=c.next,c.next=null,s.lastBaseUpdate=c,s.shared.pending=null}}null===h&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,za|=a,e.lanes=a,e.memoizedState=d}}function fs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var ps=(new r.Component).refs;function ms(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var gs={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=dc(),i=fc(e),s=ls(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),us(e,s),pc(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=dc(),i=fc(e),s=ls(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),us(e,s),pc(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dc(),r=fc(e),i=ls(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),us(e,i),pc(e,r,n)}};function ys(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,s))}function vs(e,t,n){var r=!1,i=hi,s=t.contextType;return"object"===typeof s&&null!==s?s=ss(s):(i=gi(t)?pi:di.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):hi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=gs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ws(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gs.enqueueReplaceState(t,t.state,null)}function bs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ps,as(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=ss(s):(s=gi(t)?pi:di.current,i.context=mi(e,s)),ds(e,n,i,r),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ms(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&gs.enqueueReplaceState(i,i.state,null),ds(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var _s=Array.isArray;function Es(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ps&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Is(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ss(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Gc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Yc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Es(e,t,n),r.return=e,r):((r=Hc(n.type,n.key,n.props,null,e.mode,r)).ref=Es(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Qc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Yc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Hc(t.type,t.key,t.props,null,e.mode,n)).ref=Es(e,null,t),n.return=e,n;case I:return(t=Xc(t,e.mode,n)).return=e,t}if(_s(t)||B(t))return(t=Qc(t,e.mode,n,null)).return=e,t;Is(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?n.type===S?h(e,t,n.props.children,r,i):l(e,t,n,r):null;case I:return n.key===i?u(e,t,n,r):null}if(_s(n)||B(n))return null!==i?null:h(e,t,n,r,null);Is(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case E:return e=e.get(null===r.key?n:r.key)||null,r.type===S?h(t,e,r.props.children,i,r.key):l(t,e,r,i);case I:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_s(r)||B(r))return h(t,e=e.get(n)||null,r,i,null);Is(t,r)}return null}function m(i,o,a,c){for(var l=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],c);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,m),null===u?l=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),l;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],c))&&(o=s(h,o,m),null===u?l=h:u.sibling=h,u=h);return l}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),l}function g(i,a,c,l){var u=B(c);if("function"!==typeof u)throw Error(o(150));if(null==(c=u.call(c)))throw Error(o(151));for(var h=u=null,m=a,g=a=0,y=null,v=c.next();null!==m&&!v.done;g++,v=c.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,l);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=s(w,a,g),null===h?u=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),u;if(null===m){for(;!v.done;g++,v=c.next())null!==(v=d(i,v.value,l))&&(a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return u}for(m=r(i,m);!v.done;g++,v=c.next())null!==(v=p(m,i,g,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),u}return function(e,r,s,c){var l="object"===typeof s&&null!==s&&s.type===S&&null===s.key;l&&(s=s.props.children);var u="object"===typeof s&&null!==s;if(u)switch(s.$$typeof){case E:e:{for(u=s.key,l=r;null!==l;){if(l.key===u){if(7===l.tag){if(s.type===S){n(e,l.sibling),(r=i(l,s.props.children)).return=e,e=r;break e}}else if(l.elementType===s.type){n(e,l.sibling),(r=i(l,s.props)).ref=Es(e,l,s),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}s.type===S?((r=Qc(s.props.children,e.mode,c,s.key)).return=e,e=r):((c=Hc(s.type,s.key,s.props,null,e.mode,c)).ref=Es(e,r,s),c.return=e,e=c)}return a(e);case I:e:{for(l=s.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(e,r.sibling),(r=i(r,s.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xc(s,e.mode,c)).return=e,e=r}return a(e)}if("string"===typeof s||"number"===typeof s)return s=""+s,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,s)).return=e,e=r):(n(e,r),(r=Yc(s,e.mode,c)).return=e,e=r),a(e);if(_s(s))return m(e,r,s,c);if(B(s))return g(e,r,s,c);if(u&&Is(e,s),"undefined"===typeof s&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var ks=Ss(!0),Ts=Ss(!1),xs={},Cs=ci(xs),Ns=ci(xs),As=ci(xs);function Ps(e){if(e===xs)throw Error(o(174));return e}function Os(e,t){switch(ui(As,t),ui(Ns,e),ui(Cs,xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Cs),ui(Cs,t)}function Rs(){li(Cs),li(Ns),li(As)}function Ds(e){Ps(As.current);var t=Ps(Cs.current),n=fe(t,e.type);t!==n&&(ui(Ns,e),ui(Cs,n))}function Ls(e){Ns.current===e&&(li(Cs),li(Ns))}var Ms=ci(0);function Fs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var js=null,Us=null,Vs=!1;function zs(e,t){var n=Kc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Bs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function qs(e){if(Vs){var t=Us;if(t){var n=t;if(!Bs(e,t)){if(!(t=Hr(n.nextSibling))||!Bs(e,t))return e.flags=-1025&e.flags|2,Vs=!1,void(js=e);zs(js,n)}js=e,Us=Hr(t.firstChild)}else e.flags=-1025&e.flags|2,Vs=!1,js=e}}function Ks(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;js=e}function Ws(e){if(e!==js)return!1;if(!Vs)return Ks(e),Vs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!qr(t,e.memoizedProps))for(t=Us;t;)zs(e,t),t=Hr(t.nextSibling);if(Ks(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Us=Hr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Us=null}}else Us=js?Hr(e.stateNode.nextSibling):null;return!0}function Gs(){Us=js=null,Vs=!1}var Hs=[];function Qs(){for(var e=0;e<Hs.length;e++)Hs[e]._workInProgressVersionPrimary=null;Hs.length=0}var $s=_.ReactCurrentDispatcher,Ys=_.ReactCurrentBatchConfig,Xs=0,Js=null,Zs=null,eo=null,to=!1,no=!1;function ro(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function so(e,t,n,r,i,s){if(Xs=s,Js=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$s.current=null===e||null===e.memoizedState?Oo:Ro,e=n(r,i),no){s=0;do{if(no=!1,!(25>s))throw Error(o(301));s+=1,eo=Zs=null,t.updateQueue=null,$s.current=Do,e=n(r,i)}while(no)}if($s.current=Po,t=null!==Zs&&null!==Zs.next,Xs=0,eo=Zs=Js=null,to=!1,t)throw Error(o(300));return e}function oo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===eo?Js.memoizedState=eo=e:eo=eo.next=e,eo}function ao(){if(null===Zs){var e=Js.alternate;e=null!==e?e.memoizedState:null}else e=Zs.next;var t=null===eo?Js.memoizedState:eo.next;if(null!==t)eo=t,Zs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Zs=e).memoizedState,baseState:Zs.baseState,baseQueue:Zs.baseQueue,queue:Zs.queue,next:null},null===eo?Js.memoizedState=eo=e:eo=eo.next=e}return eo}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Zs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var c=a=s=null,l=i;do{var u=l.lane;if((Xs&u)===u)null!==c&&(c=c.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var h={lane:u,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===c?(a=c=h,s=r):c=c.next=h,Js.lanes|=u,za|=u}l=l.next}while(null!==l&&l!==i);null===c?s=r:c.next=a,lr(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function uo(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);lr(s,t.memoizedState)||(Mo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xs&e)===e)&&(t._workInProgressVersionPrimary=r,Hs.push(t))),e)return n(t._source);throw Hs.push(t),Error(o(350))}function fo(e,t,n,r){var i=Ra;if(null===i)throw Error(o(349));var s=t._getVersion,a=s(t._source),c=$s.current,l=c.useState((function(){return ho(i,t,n)})),u=l[1],h=l[0];l=eo;var d=e.memoizedState,f=d.refs,p=f.getSnapshot,m=d.source;d=d.subscribe;var g=Js;return e.memoizedState={refs:f,source:t,subscribe:r},c.useEffect((function(){f.getSnapshot=n,f.setSnapshot=u;var e=s(t._source);if(!lr(a,e)){e=n(t._source),lr(h,e)||(u(e),e=fc(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var c=31-qt(o),l=1<<c;r[c]|=e,o&=~l}}}),[n,t,r]),c.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=fc(g);i.mutableReadLanes|=r&i.pendingLanes}catch(s){n((function(){throw s}))}}))}),[t,r]),lr(p,n)&&lr(m,t)&&lr(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:h}).dispatch=u=Ao.bind(null,Js,e),l.queue=e,l.baseQueue=null,h=ho(i,t,n),l.memoizedState=l.baseState=h),h}function po(e,t,n){return fo(ao(),e,t,n)}function mo(e){var t=oo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ao.bind(null,Js,e),[t.memoizedState,e]}function go(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Js.updateQueue)?(t={lastEffect:null},Js.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},oo().memoizedState=e}function vo(){return ao().memoizedState}function wo(e,t,n,r){var i=oo();Js.flags|=e,i.memoizedState=go(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=ao();r=void 0===r?null:r;var s=void 0;if(null!==Zs){var o=Zs.memoizedState;if(s=o.destroy,null!==r&&io(r,o.deps))return void go(t,n,s,r)}Js.flags|=e,i.memoizedState=go(1|t,n,s,r)}function _o(e,t){return wo(516,4,e,t)}function Eo(e,t){return bo(516,4,e,t)}function Io(e,t){return bo(4,2,e,t)}function So(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ko(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,So.bind(null,t,e),n)}function To(){}function xo(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function No(e,t){var n=qi();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Ys.transition;Ys.transition=1;try{e(!1),t()}finally{Ys.transition=n}}))}function Ao(e,t,n){var r=dc(),i=fc(e),s={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?s.next=s:(s.next=o.next,o.next=s),t.pending=s,o=e.alternate,e===Js||null!==o&&o===Js)no=to=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,c=o(a,n);if(s.eagerReducer=o,s.eagerState=c,lr(c,a))return}catch(l){}pc(e,i,r)}}var Po={readContext:ss,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useLayoutEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useMutableSource:ro,useOpaqueIdentifier:ro,unstable_isNewReconciler:!1},Oo={readContext:ss,useCallback:function(e,t){return oo().memoizedState=[e,void 0===t?null:t],e},useContext:ss,useEffect:_o,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,So.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=oo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ao.bind(null,Js,e),[r.memoizedState,e]},useRef:yo,useState:mo,useDebugValue:To,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return _o((function(){var t=Ys.transition;Ys.transition=1;try{r(e)}finally{Ys.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return yo(e=No.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=oo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},fo(r,e,t,n)},useOpaqueIdentifier:function(){if(Vs){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+($r++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&Js.mode)&&(Js.flags|=516,go(5,(function(){n("r:"+($r++).toString(36))}),void 0,null)),t}return mo(t="r:"+($r++).toString(36)),t},unstable_isNewReconciler:!1},Ro={readContext:ss,useCallback:xo,useContext:ss,useEffect:Eo,useImperativeHandle:ko,useLayoutEffect:Io,useMemo:Co,useReducer:lo,useRef:vo,useState:function(){return lo(co)},useDebugValue:To,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return Eo((function(){var t=Ys.transition;Ys.transition=1;try{r(e)}finally{Ys.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[vo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Do={readContext:ss,useCallback:xo,useContext:ss,useEffect:Eo,useImperativeHandle:ko,useLayoutEffect:Io,useMemo:Co,useReducer:uo,useRef:vo,useState:function(){return uo(co)},useDebugValue:To,useDeferredValue:function(e){var t=uo(co),n=t[0],r=t[1];return Eo((function(){var t=Ys.transition;Ys.transition=1;try{r(e)}finally{Ys.transition=t}}),[e]),n},useTransition:function(){var e=uo(co)[0];return[vo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return uo(co)[0]},unstable_isNewReconciler:!1},Lo=_.ReactCurrentOwner,Mo=!1;function Fo(e,t,n,r){t.child=null===e?Ts(t,null,n,r):ks(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var s=t.ref;return is(t,i),r=so(e,t,n,r,s,i),null===e||Mo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,sa(e,t,i))}function Uo(e,t,n,r,i,s){if(null===e){var o=n.type;return"function"!==typeof o||Wc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Vo(e,t,o,r,i,s))}return o=e.child,0===(i&s)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?sa(e,t,s):(t.flags|=1,(e=Gc(o,r)).ref=t.ref,e.return=t,t.child=e)}function Vo(e,t,n,r,i,s){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Mo=!1,0===(s&i))return t.lanes=e.lanes,sa(e,t,s);0!==(16384&e.flags)&&(Mo=!0)}return qo(e,t,n,r,s)}function zo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},Ec(t,n);else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Ec(t,e),null;t.memoizedState={baseLanes:0},Ec(t,null!==s?s.baseLanes:n)}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ec(t,r);return Fo(e,t,i,n),t.child}function Bo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function qo(e,t,n,r,i){var s=gi(n)?pi:di.current;return s=mi(t,s),is(t,i),n=so(e,t,n,r,s,i),null===e||Mo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,sa(e,t,i))}function Ko(e,t,n,r,i){if(gi(n)){var s=!0;bi(t)}else s=!1;if(is(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),vs(t,n,r),bs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=ss(l):l=mi(t,l=gi(n)?pi:di.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||c!==l)&&ws(t,o,r,l),os=!1;var d=t.memoizedState;o.state=d,ds(t,r,o,i),c=t.memoizedState,a!==r||d!==c||fi.current||os?("function"===typeof u&&(ms(t,n,u,r),c=t.memoizedState),(a=os||ys(t,n,a,r,d,c,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,cs(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Yi(t.type,a),o.props=l,h=t.pendingProps,d=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=ss(c):c=mi(t,c=gi(n)?pi:di.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==c)&&ws(t,o,r,c),os=!1,d=t.memoizedState,o.state=d,ds(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||fi.current||os?("function"===typeof f&&(ms(t,n,f,r),p=t.memoizedState),(l=os||ys(t,n,l,r,d,p,c))?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,s,i)}function Wo(e,t,n,r,i,s){Bo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&_i(t,n,!1),sa(e,t,s);r=t.stateNode,Lo.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ks(t,e.child,null,s),t.child=ks(t,null,a,s)):Fo(e,t,a,s),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?vi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&vi(0,t.context,!1),Os(e,t.containerInfo)}var Ho,Qo,$o,Yo,Xo={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,i=t.pendingProps,s=Ms.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(s|=1),ui(Ms,1&s),null===e?(void 0!==i.fallback&&qs(t),e=i.children,s=i.fallback,o?(e=Zo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,t.lanes=33554432,e):((n=$c({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ta(e,t,i.children,i.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?{baseLanes:n}:{baseLanes:s.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Xo,i):(n=ea(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,s=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==s?(s.childLanes=0,s.pendingProps=t):s=$c(t,i,0,null),n=Qc(n,i,r,null),s.return=e,n.return=e,s.sibling=n,e.child=s,n}function ea(e,t,n,r){var i=e.child;return e=i.sibling,n=Gc(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ta(e,t,n,r,i){var s=t.mode,o=e.child;e=o.sibling;var a={mode:"hidden",children:n};return 0===(2&s)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=a,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Gc(o,a),null!==e?r=Gc(e,r):(r=Qc(r,s,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function na(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),rs(e.return,t)}function ra(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=s)}function ia(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=Ms.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&na(e,n);else if(19===e.tag)na(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ui(Ms,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ra(t,!1,i,n,s,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ra(t,!0,n,null,s,t.lastEffect);break;case"together":ra(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function sa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),za|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Gc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function oa(e,t){if(!Vs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function aa(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return gi(t.type)&&yi(),null;case 3:return Rs(),li(fi),li(di),Qs(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ws(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Qo(t),null;case 5:Ls(t);var s=Ps(As.current);if(n=t.type,null!==e&&null!=t.stateNode)$o(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ps(Cs.current),Ws(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Xr]=t,r[Jr]=a,n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(e=0;e<kr.length;e++)Nr(kr[e],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":ee(r,a),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Nr("invalid",r);break;case"textarea":ce(r,a),Nr("invalid",r)}for(var l in Ie(n,a),e=null,a)a.hasOwnProperty(l)&&(s=a[l],"children"===l?"string"===typeof s?r.textContent!==s&&(e=["children",s]):"number"===typeof s&&r.textContent!==""+s&&(e=["children",""+s]):c.hasOwnProperty(l)&&null!=s&&"onScroll"===l&&Nr("scroll",r));switch(n){case"input":Y(r),re(r,a,!0);break;case"textarea":Y(r),ue(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Ur)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(l=9===s.nodeType?s:s.ownerDocument,e===he.html&&(e=de(n)),e===he.html?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Xr]=t,e[Jr]=r,Ho(e,t,!1,!1),t.stateNode=e,l=Se(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),s=r;break;case"iframe":case"object":case"embed":Nr("load",e),s=r;break;case"video":case"audio":for(s=0;s<kr.length;s++)Nr(kr[s],e);s=r;break;case"source":Nr("error",e),s=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),s=r;break;case"details":Nr("toggle",e),s=r;break;case"input":ee(e,r),s=Z(e,r),Nr("invalid",e);break;case"option":s=se(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=i({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":ce(e,r),s=ae(e,r),Nr("invalid",e);break;default:s=r}Ie(n,s);var u=s;for(a in u)if(u.hasOwnProperty(a)){var h=u[a];"style"===a?_e(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&ge(e,h):"children"===a?"string"===typeof h?("textarea"!==n||""!==h)&&ye(e,h):"number"===typeof h&&ye(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(c.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Nr("scroll",e):null!=h&&b(e,a,h,l))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),ue(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?oe(e,!!r.multiple,a,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Ur)}Br(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ps(As.current),Ps(Cs.current),Ws(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return li(Ms),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ws(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ms.current)?0===ja&&(ja=3):(0!==ja&&3!==ja||(ja=4),null===Ra||0===(134217727&za)&&0===(134217727&Ba)||vc(Ra,La))),(r||n)&&(t.flags|=4),null);case 4:return Rs(),Qo(t),null===e&&Pr(t.stateNode.containerInfo),null;case 10:return ns(t),null;case 19:if(li(Ms),null===(r=t.memoizedState))return null;if(a=0!==(64&t.flags),null===(l=r.rendering))if(a)oa(r,!1);else{if(0!==ja||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=Fs(e))){for(t.flags|=64,oa(r,!1),null!==(a=l.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ui(Ms,1&Ms.current|2),t.child}e=e.sibling}null!==r.tail&&Bi()>Ga&&(t.flags|=64,a=!0,oa(r,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=Fs(l))){if(t.flags|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),oa(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!Vs)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bi()-r.renderingStartTime>Ga&&1073741824!==n&&(t.flags|=64,a=!0,oa(r,!1),t.lanes=33554432);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=r.last)?n.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bi(),n.sibling=null,t=Ms.current,ui(Ms,a?1&t|2:1&t),n):null;case 23:case 24:return Ic(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function ca(e){switch(e.tag){case 1:gi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Rs(),li(fi),li(di),Qs(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ls(e),null;case 13:return li(Ms),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Ms),null;case 4:return Rs(),null;case 10:return ns(e),null;case 23:case 24:return Ic(),null;default:return null}}function la(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i}}function ua(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Ho=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Qo=function(){},$o=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Ps(Cs.current);var o,a=null;switch(n){case"input":s=Z(e,s),r=Z(e,r),a=[];break;case"option":s=se(e,s),r=se(e,r),a=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),a=[];break;case"textarea":s=ae(e,s),r=ae(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Ur)}for(h in Ie(n,r),n=null,s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&null!=s[h])if("style"===h){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(c.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var u=r[h];if(l=null!=s?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(null!=u||null!=l))if("style"===h)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(h,n)),n=u;else"dangerouslySetInnerHTML"===h?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(h,u)):"children"===h?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(h,""+u):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(c.hasOwnProperty(h)?(null!=u&&"onScroll"===h&&Nr("scroll",e),a||l===u||(a=[])):"object"===typeof u&&null!==u&&u.$$typeof===L?u.toString():(a=a||[]).push(h,u))}n&&(a=a||[]).push("style",n);var h=a;(t.updateQueue=h)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var ha="function"===typeof WeakMap?WeakMap:Map;function da(e,t,n){(n=ls(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ya||(Ya=!0,Xa=r),ua(0,t)},n}function fa(e,t,n){(n=ls(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ua(0,t),r(i)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ja?Ja=new Set([this]):Ja.add(this),ua(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pa="function"===typeof WeakSet?WeakSet:Set;function ma(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vc(e,n)}else t.current=null}function ga(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function ya(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fc(n,e),Mc(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fs(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}fs(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Br(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(o(163))}function va(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function wa(e,t){if(Ii&&"function"===typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(Ei,t)}catch(s){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fc(t,n);else{r=t;try{i()}catch(s){Vc(r,s)}}n=n.next}while(n!==e)}break;case 1:if(ma(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(s){Vc(t,s)}break;case 5:ma(t);break;case 4:ka(e,t)}}function ba(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function _a(e){return 5===e.tag||3===e.tag||4===e.tag}function Ea(e){e:{for(var t=e.return;null!==t;){if(_a(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||_a(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Ia(e,n,t):Sa(e,n,t)}function Ia(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ur));else if(4!==r&&null!==(e=e.child))for(Ia(e,t,n),e=e.sibling;null!==e;)Ia(e,t,n),e=e.sibling}function Sa(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Sa(e,t,n),e=e.sibling;null!==e;)Sa(e,t,n),e=e.sibling}function ka(e,t){for(var n,r,i=t,s=!1;;){if(!s){s=i.return;e:for(;;){if(null===s)throw Error(o(160));switch(n=s.stateNode,s.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}s=s.return}s=!0}if(5===i.tag||6===i.tag){e:for(var a=e,c=i,l=c;;)if(wa(a,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===c)break e;for(;null===l.sibling;){if(null===l.return||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(a=n,c=i.stateNode,8===a.nodeType?a.parentNode.removeChild(c):a.removeChild(c)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(wa(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(s=!1)}i.sibling.return=i.return,i=i.sibling}}function Ta(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(n[Jr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Se(e,i),t=Se(e,r),i=0;i<s.length;i+=2){var a=s[i],c=s[i+1];"style"===a?_e(n,c):"dangerouslySetInnerHTML"===a?ge(n,c):"children"===a?ye(n,c):b(n,a,c,t)}switch(e){case"input":ne(n,r);break;case"textarea":le(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(s=r.value)?oe(n,!!r.multiple,s,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&(Wa=Bi(),va(t.child,!0)),void xa(t);case 19:return void xa(t);case 23:case 24:return void va(t,null!==t.memoizedState)}throw Error(o(163))}function xa(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pa),t.forEach((function(t){var r=Bc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ca(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Na=Math.ceil,Aa=_.ReactCurrentDispatcher,Pa=_.ReactCurrentOwner,Oa=0,Ra=null,Da=null,La=0,Ma=0,Fa=ci(0),ja=0,Ua=null,Va=0,za=0,Ba=0,qa=0,Ka=null,Wa=0,Ga=1/0;function Ha(){Ga=Bi()+500}var Qa,$a=null,Ya=!1,Xa=null,Ja=null,Za=!1,ec=null,tc=90,nc=[],rc=[],ic=null,sc=0,oc=null,ac=-1,cc=0,lc=0,uc=null,hc=!1;function dc(){return 0!==(48&Oa)?Bi():-1!==ac?ac:ac=Bi()}function fc(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===qi()?1:2;if(0===cc&&(cc=Va),0!==$i.transition){0!==lc&&(lc=null!==Ka?Ka.pendingLanes:0),e=cc;var t=4186112&~lc;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=qi(),0!==(4&Oa)&&98===e?e=Ut(12,cc):e=Ut(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),cc),e}function pc(e,t,n){if(50<sc)throw sc=0,oc=null,Error(o(185));if(null===(e=mc(e,t)))return null;Bt(e,t,n),e===Ra&&(Ba|=t,4===ja&&vc(e,La));var r=qi();1===t?0!==(8&Oa)&&0===(48&Oa)?wc(e):(gc(e,n),0===Oa&&(Ha(),Hi())):(0===(4&Oa)||98!==r&&99!==r||(null===ic?ic=new Set([e]):ic.add(e)),gc(e,n)),Ka=e}function mc(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function gc(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var c=31-qt(a),l=1<<c,u=s[c];if(-1===u){if(0===(l&r)||0!==(l&i)){u=t,Mt(l);var h=Lt;s[c]=10<=h?u+250:6<=h?u+5e3:-1}}else u<=t&&(e.expiredLanes|=l);a&=~l}if(r=Ft(e,e===Ra?La:0),t=Lt,0===r)null!==n&&(n!==Mi&&Ti(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&Ti(n)}15===t?(n=wc.bind(null,e),null===ji?(ji=[n],Ui=ki(Pi,Qi)):ji.push(n),n=Mi):14===t?n=Gi(99,wc.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,yc.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function yc(e){if(ac=-1,lc=cc=0,0!==(48&Oa))throw Error(o(327));var t=e.callbackNode;if(Lc()&&e.callbackNode!==t)return null;var n=Ft(e,e===Ra?La:0);if(0===n)return null;var r=n,i=Oa;Oa|=16;var s=Tc();for(Ra===e&&La===r||(Ha(),Sc(e,r));;)try{Nc();break}catch(c){kc(e,c)}if(ts(),Aa.current=s,Oa=i,null!==Da?r=0:(Ra=null,La=0,r=ja),0!==(Va&Ba))Sc(e,0);else if(0!==r){if(2===r&&(Oa|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=jt(e))&&(r=xc(e,n))),1===r)throw t=Ua,Sc(e,0),vc(e,n),gc(e,Bi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Oc(e);break;case 3:if(vc(e,n),(62914560&n)===n&&10<(r=Wa+500-Bi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){dc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Kr(Oc.bind(null,e),r);break}Oc(e);break;case 4:if(vc(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-qt(n);s=1<<a,(a=r[a])>i&&(i=a),n&=~s}if(n=i,10<(n=(120>(n=Bi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Na(n/1960))-n)){e.timeoutHandle=Kr(Oc.bind(null,e),n);break}Oc(e);break;default:throw Error(o(329))}}return gc(e,Bi()),e.callbackNode===t?yc.bind(null,e):null}function vc(e,t){for(t&=~qa,t&=~Ba,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qt(t),r=1<<n;e[n]=-1,t&=~r}}function wc(e){if(0!==(48&Oa))throw Error(o(327));if(Lc(),e===Ra&&0!==(e.expiredLanes&La)){var t=La,n=xc(e,t);0!==(Va&Ba)&&(n=xc(e,t=Ft(e,t)))}else n=xc(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Oa|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=jt(e))&&(n=xc(e,t))),1===n)throw n=Ua,Sc(e,0),vc(e,t),gc(e,Bi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Oc(e),gc(e,Bi()),null}function bc(e,t){var n=Oa;Oa|=1;try{return e(t)}finally{0===(Oa=n)&&(Ha(),Hi())}}function _c(e,t){var n=Oa;Oa&=-2,Oa|=8;try{return e(t)}finally{0===(Oa=n)&&(Ha(),Hi())}}function Ec(e,t){ui(Fa,Ma),Ma|=t,Va|=t}function Ic(){Ma=Fa.current,li(Fa)}function Sc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Da)for(n=Da.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:Rs(),li(fi),li(di),Qs();break;case 5:Ls(r);break;case 4:Rs();break;case 13:case 19:li(Ms);break;case 10:ns(r);break;case 23:case 24:Ic()}n=n.return}Ra=e,Da=Gc(e.current,null),La=Ma=Va=t,ja=0,Ua=null,qa=Ba=za=0}function kc(e,t){for(;;){var n=Da;try{if(ts(),$s.current=Po,to){for(var r=Js.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}to=!1}if(Xs=0,eo=Zs=Js=null,no=!1,Pa.current=null,null===n||null===n.return){ja=1,Ua=t,Da=null;break}e:{var s=e,o=n.return,a=n,c=t;if(t=La,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c;if(0===(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.lanes=u.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!==(1&Ms.current),d=o;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=d.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(f){var g=d.updateQueue;if(null===g){var y=new Set;y.add(l),d.updateQueue=y}else g.add(l);if(0===(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=ls(-1,1);v.tag=2,us(a,v)}a.lanes|=1;break e}c=void 0,a=t;var w=s.pingCache;if(null===w?(w=s.pingCache=new ha,c=new Set,w.set(l,c)):void 0===(c=w.get(l))&&(c=new Set,w.set(l,c)),!c.has(a)){c.add(a);var b=zc.bind(null,s,l,a);l.then(b,b)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);c=Error((H(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==ja&&(ja=2),c=la(c,a),d=o;do{switch(d.tag){case 3:s=c,d.flags|=4096,t&=-t,d.lanes|=t,hs(d,da(0,s,t));break e;case 1:s=c;var _=d.type,E=d.stateNode;if(0===(64&d.flags)&&("function"===typeof _.getDerivedStateFromError||null!==E&&"function"===typeof E.componentDidCatch&&(null===Ja||!Ja.has(E)))){d.flags|=4096,t&=-t,d.lanes|=t,hs(d,fa(d,s,t));break e}}d=d.return}while(null!==d)}Pc(n)}catch(I){t=I,Da===n&&null!==n&&(Da=n=n.return);continue}break}}function Tc(){var e=Aa.current;return Aa.current=Po,null===e?Po:e}function xc(e,t){var n=Oa;Oa|=16;var r=Tc();for(Ra===e&&La===t||Sc(e,t);;)try{Cc();break}catch(i){kc(e,i)}if(ts(),Oa=n,Aa.current=r,null!==Da)throw Error(o(261));return Ra=null,La=0,ja}function Cc(){for(;null!==Da;)Ac(Da)}function Nc(){for(;null!==Da&&!xi();)Ac(Da)}function Ac(e){var t=Qa(e.alternate,e,Ma);e.memoizedProps=e.pendingProps,null===t?Pc(e):Da=t,Pa.current=null}function Pc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=aa(n,t,Ma)))return void(Da=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ma)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=ca(t)))return n.flags&=2047,void(Da=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Da=t);Da=t=e}while(null!==t);0===ja&&(ja=5)}function Oc(e){var t=qi();return Wi(99,Rc.bind(null,e,t)),null}function Rc(e,t){do{Lc()}while(null!==ec);if(0!==(48&Oa))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,s=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,c=e.expirationTimes;0<s;){var l=31-qt(s),u=1<<l;i[l]=0,a[l]=-1,c[l]=-1,s&=~u}if(null!==ic&&0===(24&r)&&ic.has(e)&&ic.delete(e),e===Ra&&(Da=Ra=null,La=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Oa,Oa|=32,Pa.current=null,Vr=Qt,gr(a=mr())){if("selectionStart"in a)c={start:a.selectionStart,end:a.selectionEnd};else e:if(c=(c=a.ownerDocument)&&c.defaultView||window,(u=c.getSelection&&c.getSelection())&&0!==u.rangeCount){c=u.anchorNode,s=u.anchorOffset,l=u.focusNode,u=u.focusOffset;try{c.nodeType,l.nodeType}catch(T){c=null;break e}var h=0,d=-1,f=-1,p=0,m=0,g=a,y=null;t:for(;;){for(var v;g!==c||0!==s&&3!==g.nodeType||(d=h+s),g!==l||0!==u&&3!==g.nodeType||(f=h+u),3===g.nodeType&&(h+=g.nodeValue.length),null!==(v=g.firstChild);)y=g,g=v;for(;;){if(g===a)break t;if(y===c&&++p===s&&(d=h),y===l&&++m===u&&(f=h),null!==(v=g.nextSibling))break;y=(g=y).parentNode}g=v}c=-1===d||-1===f?null:{start:d,end:f}}else c=null;c=c||{start:0,end:0}}else c=null;zr={focusedElem:a,selectionRange:c},Qt=!1,uc=null,hc=!1,$a=r;do{try{Dc()}catch(T){if(null===$a)throw Error(o(330));Vc($a,T),$a=$a.nextEffect}}while(null!==$a);uc=null,$a=r;do{try{for(a=e;null!==$a;){var w=$a.flags;if(16&w&&ye($a.stateNode,""),128&w){var b=$a.alternate;if(null!==b){var _=b.ref;null!==_&&("function"===typeof _?_(null):_.current=null)}}switch(1038&w){case 2:Ea($a),$a.flags&=-3;break;case 6:Ea($a),$a.flags&=-3,Ta($a.alternate,$a);break;case 1024:$a.flags&=-1025;break;case 1028:$a.flags&=-1025,Ta($a.alternate,$a);break;case 4:Ta($a.alternate,$a);break;case 8:ka(a,c=$a);var E=c.alternate;ba(c),null!==E&&ba(E)}$a=$a.nextEffect}}catch(T){if(null===$a)throw Error(o(330));Vc($a,T),$a=$a.nextEffect}}while(null!==$a);if(_=zr,b=mr(),w=_.focusedElem,a=_.selectionRange,b!==w&&w&&w.ownerDocument&&pr(w.ownerDocument.documentElement,w)){null!==a&&gr(w)&&(b=a.start,void 0===(_=a.end)&&(_=b),"selectionStart"in w?(w.selectionStart=b,w.selectionEnd=Math.min(_,w.value.length)):(_=(b=w.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),c=w.textContent.length,E=Math.min(a.start,c),a=void 0===a.end?E:Math.min(a.end,c),!_.extend&&E>a&&(c=a,a=E,E=c),c=fr(w,E),s=fr(w,a),c&&s&&(1!==_.rangeCount||_.anchorNode!==c.node||_.anchorOffset!==c.offset||_.focusNode!==s.node||_.focusOffset!==s.offset)&&((b=b.createRange()).setStart(c.node,c.offset),_.removeAllRanges(),E>a?(_.addRange(b),_.extend(s.node,s.offset)):(b.setEnd(s.node,s.offset),_.addRange(b))))),b=[];for(_=w;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"===typeof w.focus&&w.focus(),w=0;w<b.length;w++)(_=b[w]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Qt=!!Vr,zr=Vr=null,e.current=n,$a=r;do{try{for(w=e;null!==$a;){var I=$a.flags;if(36&I&&ya(w,$a.alternate,$a),128&I){b=void 0;var S=$a.ref;if(null!==S){var k=$a.stateNode;$a.tag,b=k,"function"===typeof S?S(b):S.current=b}}$a=$a.nextEffect}}catch(T){if(null===$a)throw Error(o(330));Vc($a,T),$a=$a.nextEffect}}while(null!==$a);$a=null,Fi(),Oa=i}else e.current=n;if(Za)Za=!1,ec=e,tc=t;else for($a=r;null!==$a;)t=$a.nextEffect,$a.nextEffect=null,8&$a.flags&&((I=$a).sibling=null,I.stateNode=null),$a=t;if(0===(r=e.pendingLanes)&&(Ja=null),1===r?e===oc?sc++:(sc=0,oc=e):sc=0,n=n.stateNode,Ii&&"function"===typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(Ei,n,void 0,64===(64&n.current.flags))}catch(T){}if(gc(e,Bi()),Ya)throw Ya=!1,e=Xa,Xa=null,e;return 0!==(8&Oa)||Hi(),null}function Dc(){for(;null!==$a;){var e=$a.alternate;hc||null===uc||(0!==(8&$a.flags)?Ze($a,uc)&&(hc=!0):13===$a.tag&&Ca(e,$a)&&Ze($a,uc)&&(hc=!0));var t=$a.flags;0!==(256&t)&&ga(e,$a),0===(512&t)||Za||(Za=!0,Gi(97,(function(){return Lc(),null}))),$a=$a.nextEffect}}function Lc(){if(90!==tc){var e=97<tc?97:tc;return tc=90,Wi(e,jc)}return!1}function Mc(e,t){nc.push(t,e),Za||(Za=!0,Gi(97,(function(){return Lc(),null})))}function Fc(e,t){rc.push(t,e),Za||(Za=!0,Gi(97,(function(){return Lc(),null})))}function jc(){if(null===ec)return!1;var e=ec;if(ec=null,0!==(48&Oa))throw Error(o(331));var t=Oa;Oa|=32;var n=rc;rc=[];for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"===typeof a)try{a()}catch(l){if(null===s)throw Error(o(330));Vc(s,l)}}for(n=nc,nc=[],r=0;r<n.length;r+=2){i=n[r],s=n[r+1];try{var c=i.create;i.destroy=c()}catch(l){if(null===s)throw Error(o(330));Vc(s,l)}}for(c=e.current.firstEffect;null!==c;)e=c.nextEffect,c.nextEffect=null,8&c.flags&&(c.sibling=null,c.stateNode=null),c=e;return Oa=t,Hi(),!0}function Uc(e,t,n){us(e,t=da(0,t=la(n,t),1)),t=dc(),null!==(e=mc(e,1))&&(Bt(e,1,t),gc(e,t))}function Vc(e,t){if(3===e.tag)Uc(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Uc(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ja||!Ja.has(r))){var i=fa(n,e=la(t,e),1);if(us(n,i),i=dc(),null!==(n=mc(n,1)))Bt(n,1,i),gc(n,i);else if("function"===typeof r.componentDidCatch&&(null===Ja||!Ja.has(r)))try{r.componentDidCatch(t,e)}catch(s){}break}}n=n.return}}function zc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=dc(),e.pingedLanes|=e.suspendedLanes&n,Ra===e&&(La&n)===n&&(4===ja||3===ja&&(62914560&La)===La&&500>Bi()-Wa?Sc(e,0):qa|=n),gc(e,t)}function Bc(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===qi()?1:2:(0===cc&&(cc=Va),0===(t=Vt(62914560&~cc))&&(t=4194304))),n=dc(),null!==(e=mc(e,t))&&(Bt(e,t,n),gc(e,n))}function qc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Kc(e,t,n,r){return new qc(e,t,n,r)}function Wc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gc(e,t){var n=e.alternate;return null===n?((n=Kc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Wc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Qc(n.children,i,s,t);case M:a=8,i|=16;break;case k:a=8,i|=1;break;case T:return(e=Kc(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=s,e;case A:return(e=Kc(13,n,t,i)).type=A,e.elementType=A,e.lanes=s,e;case P:return(e=Kc(19,n,t,i)).elementType=P,e.lanes=s,e;case F:return $c(n,i,s,t);case j:return(e=Kc(24,n,t,i)).elementType=j,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:a=10;break e;case C:a=9;break e;case N:a=11;break e;case O:a=14;break e;case R:a=16,r=null;break e;case D:a=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Kc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Qc(e,t,n,r){return(e=Kc(7,e,r,t)).lanes=n,e}function $c(e,t,n,r){return(e=Kc(23,e,r,t)).elementType=F,e.lanes=n,e}function Yc(e,t,n){return(e=Kc(6,e,null,t)).lanes=n,e}function Xc(e,t,n){return(t=Kc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jc(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Zc(e,t,n,r){var i=t.current,s=dc(),a=fc(i);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(gi(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(o(171))}if(1===n.tag){var l=n.type;if(gi(l)){n=wi(n,l,c);break e}}n=c}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=ls(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),us(i,t),pc(i,a,s),a}function el(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nl(e,t){tl(e,t),(e=e.alternate)&&tl(e,t)}function rl(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Jc(e,t,null!=n&&!0===n.hydrate),t=Kc(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,as(t),e[Zr]=n.current,Pr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function il(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function sl(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if("function"===typeof i){var a=i;i=function(){var e=el(o);a.call(e)}}Zc(t,o,e,i)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rl(e,0,t?{hydrate:!0}:void 0)}(n,r),o=s._internalRoot,"function"===typeof i){var c=i;i=function(){var e=el(o);c.call(e)}}_c((function(){Zc(t,o,e,i)}))}return el(o)}function ol(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!il(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:I,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Qa=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fi.current)Mo=!0;else{if(0===(n&r)){switch(Mo=!1,t.tag){case 3:Go(t),Gs();break;case 5:Ds(t);break;case 1:gi(t.type)&&bi(t);break;case 4:Os(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ui(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Jo(e,t,n):(ui(Ms,1&Ms.current),null!==(t=sa(e,t,n))?t.sibling:null);ui(Ms,1&Ms.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return ia(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ui(Ms,Ms.current),r)break;return null;case 23:case 24:return t.lanes=0,zo(e,t,n)}return sa(e,t,n)}Mo=0!==(16384&e.flags)}else Mo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),is(t,n),i=so(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(r)){var s=!0;bi(t)}else s=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,as(t);var a=r.getDerivedStateFromProps;"function"===typeof a&&ms(t,r,a,e),i.updater=gs,t.stateNode=i,i._reactInternals=t,bs(t,r,e,n),t=Wo(null,t,r,!0,s,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"===typeof e)return Wc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===O)return 14}return 2}(i),e=Yi(i,e),s){case 0:t=qo(null,t,i,e,n);break e;case 1:t=Ko(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Uo(null,t,i,Yi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,qo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,cs(e,t),ds(t,r,null,n),(r=t.memoizedState.element)===i)Gs(),t=sa(e,t,n);else{if((s=(i=t.stateNode).hydrate)&&(Us=Hr(t.stateNode.containerInfo.firstChild),js=t,s=Vs=!0),s){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(s=e[i])._workInProgressVersionPrimary=e[i+1],Hs.push(s);for(n=Ts(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Gs();t=t.child}return t;case 5:return Ds(t),null===e&&qs(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,qr(r,i)?a=null:null!==s&&qr(r,s)&&(t.flags|=16),Bo(e,t),Fo(e,t,a,n),t.child;case 6:return null===e&&qs(t),null;case 13:return Jo(e,t,n);case 4:return Os(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ks(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value;var c=t.type._context;if(ui(Xi,c._currentValue),c._currentValue=s,null!==a)if(c=a.value,0===(s=lr(c,s)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(c,s):1073741823))){if(a.children===i.children&&!fi.current){t=sa(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var l=c.dependencies;if(null!==l){a=c.child;for(var u=l.firstContext;null!==u;){if(u.context===r&&0!==(u.observedBits&s)){1===c.tag&&((u=ls(-1,n&-n)).tag=2,us(c,u)),c.lanes|=n,null!==(u=c.alternate)&&(u.lanes|=n),rs(c.return,n),l.lanes|=n;break}u=u.next}}else a=10===c.tag&&c.type===t.type?null:c.child;if(null!==a)a.return=c;else for(a=c;null!==a;){if(a===t){a=null;break}if(null!==(c=a.sibling)){c.return=a.return,a=c;break}a=a.return}c=a}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(s=t.pendingProps).children,is(t,n),r=r(i=ss(i,s.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return s=Yi(i=t.type,t.pendingProps),Uo(e,t,i,s=Yi(i.type,s),r,n);case 15:return Vo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,gi(r)?(e=!0,bi(t)):e=!1,is(t,n),vs(t,r,i),bs(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return ia(e,t,n);case 23:case 24:return zo(e,t,n)}throw Error(o(156,t.tag))},rl.prototype.render=function(e){Zc(e,this._internalRoot,null,null)},rl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zc(null,e,null,(function(){t[Zr]=null}))},et=function(e){13===e.tag&&(pc(e,4,dc()),nl(e,4))},tt=function(e){13===e.tag&&(pc(e,67108864,dc()),nl(e,67108864))},nt=function(e){if(13===e.tag){var t=dc(),n=fc(e);pc(e,n,t),nl(e,n)}},rt=function(e,t){return t()},Te=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ii(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=bc,Re=function(e,t,n,r,i){var s=Oa;Oa|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Oa=s)&&(Ha(),Hi())}},De=function(){0===(49&Oa)&&(function(){if(null!==ic){var e=ic;ic=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,gc(e,Bi())}))}Hi()}(),Lc())},Le=function(e,t){var n=Oa;Oa|=2;try{return e(t)}finally{0===(Oa=n)&&(Ha(),Hi())}};var al={Events:[ni,ri,ii,Ae,Pe,Lc,{current:!1}]},cl={findFiberByHostInstance:ti,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},ll={bundleType:cl.bundleType,version:cl.version,rendererPackageName:cl.rendererPackageName,rendererConfig:cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:cl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ul.isDisabled&&ul.supportsFiber)try{Ei=ul.inject(ll),Ii=ul}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=al,t.createPortal=ol,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Oa;if(0!==(48&n))return e(t);Oa|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Oa=n,Hi()}},t.hydrate=function(e,t,n){if(!il(t))throw Error(o(200));return sl(null,e,t,!0,n)},t.render=function(e,t,n){if(!il(t))throw Error(o(200));return sl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!il(e))throw Error(o(40));return!!e._reactRootContainer&&(_c((function(){sl(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zr]=null}))})),!0)},t.unstable_batchedUpdates=bc,t.unstable_createPortal=function(e,t){return ol(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!il(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return sl(e,t,n,!1,r)},t.version="17.0.2"},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},82:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case l:case d:case g:case m:case c:return e;default:return t}}case i:return t}}}function E(e){return _(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=c,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return E(e)||_(e)===u},t.isConcurrentMode=E,t.isContextConsumer=function(e){return _(e)===l},t.isContextProvider=function(e){return _(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===s},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===h||e===a||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===v||e.$$typeof===w||e.$$typeof===b||e.$$typeof===y)},t.typeOf=_},86:(e,t,n)=>{"use strict";e.exports=n(82)},292:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},340:(e,t,n)=>{var r=n(292);e.exports=f,e.exports.parse=s,e.exports.compile=function(e,t){return a(s(e,t),t)},e.exports.tokensToFunction=a,e.exports.tokensToRegExp=d;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function s(e,t){for(var n,r=[],s=0,o=0,a="",u=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],d=n[1],f=n.index;if(a+=e.slice(o,f),o=f+h.length,d)a+=d[1];else{var p=e[o],m=n[2],g=n[3],y=n[4],v=n[5],w=n[6],b=n[7];a&&(r.push(a),a="");var _=null!=m&&null!=p&&p!==m,E="+"===w||"*"===w,I="?"===w||"*"===w,S=n[2]||u,k=y||v;r.push({name:g||s++,prefix:m||"",delimiter:S,optional:I,repeat:E,partial:_,asterisk:!!b,pattern:k?l(k):b?".*":"[^"+c(S)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function a(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var s="",a=t||{},c=(i||{}).pretty?o:encodeURIComponent,l=0;l<e.length;l++){var u=e[l];if("string"!==typeof u){var h,d=a[u.name];if(null==d){if(u.optional){u.partial&&(s+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(r(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<d.length;f++){if(h=c(d[f]),!n[l].test(h))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(h)+"`");s+=(0===f?u.prefix:u.delimiter)+h}}else{if(h=u.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):c(d),!n[l].test(h))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+h+'"');s+=u.prefix+h}}else s+=u}return s}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,s=!1!==n.end,o="",a=0;a<e.length;a++){var l=e[a];if("string"===typeof l)o+=c(l);else{var d=c(l.prefix),f="(?:"+l.pattern+")";t.push(l),l.repeat&&(f+="(?:"+d+f+")*"),o+=f=l.optional?l.partial?d+"("+f+")?":"(?:"+d+"("+f+"))?":d+"("+f+")"}}var p=c(n.delimiter||"/"),m=o.slice(-p.length)===p;return i||(o=(m?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=s?"$":i&&m?"":"(?="+p+"|$)",u(new RegExp("^"+o,h(n)),t)}function f(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(f(e[i],t,n).source);return u(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return d(s(e,n),t,n)}(e,t,n)}},153:(e,t,n)=>{"use strict";n(123);var r=n(43),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var s=Symbol.for;i=s("react.element"),t.Fragment=s("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,s={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!c.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:s,_owner:o.current}}t.jsx=l,t.jsxs=l},202:(e,t,n)=>{"use strict";var r=n(123),i=60103,s=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,a=60110,c=60112;t.Suspense=60113;var l=60115,u=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),s=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),a=h("react.context"),c=h("react.forward_ref"),t.Suspense=h("react.suspense"),l=h("react.memo"),u=h("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var w=v.prototype=new y;w.constructor=v,r(w,g.prototype),w.isPureReactComponent=!0;var b={current:null},_=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,n){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,r)&&!E.hasOwnProperty(r)&&(s[r]=t[r]);var c=arguments.length-2;if(1===c)s.children=n;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===s[r]&&(s[r]=c[r]);return{$$typeof:i,type:e,key:o,ref:a,props:s,_owner:b.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var k=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function x(e,t,n,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case i:case s:c=!0}}if(c)return o=o(c=e),e=""===r?"."+T(c,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(k,"$&/")+"/"),x(o,t,n,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(c=0,r=""===r?".":r+":",Array.isArray(e))for(var l=0;l<e.length;l++){var u=r+T(a=e[l],l);c+=x(a,t,n,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=x(a=a.value,t,n,u=r+T(a,l++),o);else if("object"===a)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function C(e,t,n){if(null==e)return e;var r=[],i=0;return x(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function P(){var e=A.current;if(null===e)throw Error(f(321));return e}var O={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error(f(143));return e}},t.Component=g,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(f(267,e));var s=r({},e.props),o=e.key,a=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,c=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)_.call(t,u)&&!E.hasOwnProperty(u)&&(s[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)s.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];s.children=l}return{$$typeof:i,type:e.type,key:o,ref:a,props:s,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return P().useCallback(e,t)},t.useContext=function(e,t){return P().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return P().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return P().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return P().useLayoutEffect(e,t)},t.useMemo=function(e,t){return P().useMemo(e,t)},t.useReducer=function(e,t,n){return P().useReducer(e,t,n)},t.useRef=function(e){return P().useRef(e)},t.useState=function(e){return P().useState(e)},t.version="17.0.2"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";var n,r,i,s;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,u=null,h=function(){if(null!==l)try{var e=t.unstable_now();l(!0,e),l=null}catch(n){throw setTimeout(h,0),n}};n=function(e){null!==l?setTimeout(n,0,e):(l=e,setTimeout(h,0))},r=function(e,t){u=setTimeout(e,t)},i=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,y=-1,v=5,w=0;t.unstable_shouldYield=function(){return t.unstable_now()>=w},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,_=b.port2;b.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();w=e+v;try{g(!0,e)?_.postMessage(null):(m=!1,g=null)}catch(n){throw _.postMessage(null),n}}else m=!1},n=function(e){g=e,m||(m=!0,_.postMessage(null))},r=function(e,n){y=d((function(){e(t.unstable_now())}),n)},i=function(){f(y),y=-1}}function E(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<k(i,t)))break e;e[r]=t,e[n]=i,n=r}}function I(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var s=2*(r+1)-1,o=e[s],a=s+1,c=e[a];if(void 0!==o&&0>k(o,n))void 0!==c&&0>k(c,o)?(e[r]=c,e[a]=n,r=a):(e[r]=o,e[s]=n,r=s);else{if(!(void 0!==c&&0>k(c,n)))break e;e[r]=c,e[a]=n,r=a}}}return t}return null}function k(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],x=[],C=1,N=null,A=3,P=!1,O=!1,R=!1;function D(e){for(var t=I(x);null!==t;){if(null===t.callback)S(x);else{if(!(t.startTime<=e))break;S(x),t.sortIndex=t.expirationTime,E(T,t)}t=I(x)}}function L(e){if(R=!1,D(e),!O)if(null!==I(T))O=!0,n(M);else{var t=I(x);null!==t&&r(L,t.startTime-e)}}function M(e,n){O=!1,R&&(R=!1,i()),P=!0;var s=A;try{for(D(n),N=I(T);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,A=N.priorityLevel;var a=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?N.callback=a:N===I(T)&&S(T),D(n)}else S(T);N=I(T)}if(null!==N)var c=!0;else{var l=I(x);null!==l&&r(L,l.startTime-n),c=!1}return c}finally{N=null,A=s,P=!1}}var F=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||P||(O=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return I(T)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,s,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return e={id:C++,callback:s,priorityLevel:e,startTime:o,expirationTime:c=o+c,sortIndex:-1},o>a?(e.sortIndex=o,E(x,e),null===I(T)&&e===I(x)&&(R?i():R=!0,r(L,o-a))):(e.sortIndex=c,E(T,e),O||P||(O=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),c=0;c<s.length;c++){var l=s[c];if(!a(l))return!1;var u=e[l],h=t[l];if(!1===(i=n?n.call(r,u,h,l):void 0)||void 0===i&&u!==h)return!1}return!0}},440:e=>{"use strict";var t=function(){};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/booksuggester/",n.nc=void 0,(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>wt,SDK_VERSION:()=>Sn,_DEFAULT_ENTRY_NAME:()=>dn,_addComponent:()=>gn,_addOrOverwriteComponent:()=>yn,_apps:()=>pn,_clearComponents:()=>_n,_components:()=>mn,_getProvider:()=>wn,_registerComponent:()=>vn,_removeServiceInstance:()=>bn,deleteApp:()=>Cn,getApp:()=>Tn,getApps:()=>xn,initializeApp:()=>kn,onLog:()=>An,registerVersion:()=>Nn,setLogLevel:()=>Pn});var t=n(43),r=n(950);function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var s=n(579);class o extends t.Component{constructor(e){super(e),this.state={showInfo:!1}}toggleHoverState(e){return{showInfo:!e.showInfo}}render(){const{title:e,background:t,authors:n,subject:r,genre:i}=this.props,{showInfo:o}=this.state;return(0,s.jsx)("div",{className:"card-container",style:{backgroundColor:t},onMouseEnter:()=>this.setState(this.toggleHoverState),onMouseLeave:()=>this.setState(this.toggleHoverState),children:o?(0,s.jsx)("div",{className:"detail",children:[{label:"Title",value:e},{label:"Authors",value:n},{label:"Subject",value:r},{label:"Category",value:i}].map(((e,t)=>e.value&&(0,s.jsx)("span",{className:"detail",children:"".concat(e.label,": ").concat(e.value)},t)))}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h6",{children:e}),(0,s.jsx)("span",{className:"font12",children:n})]})})}}function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){i=!0,s=c}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var d=function(){},f={},p={},m={mark:d,measure:d};try{"undefined"!==typeof window&&(f=window),"undefined"!==typeof document&&(p=document),"undefined"!==typeof MutationObserver&&MutationObserver,"undefined"!==typeof performance&&(m=performance)}catch(SP){}var g=(f.navigator||{}).userAgent,y=void 0===g?"":g,v=f,w=p,b=m,_=(v.document,!!w.documentElement&&!!w.head&&"function"===typeof w.addEventListener&&"function"===typeof w.createElement),E=(~y.indexOf("MSIE")||y.indexOf("Trident/"),"___FONT_AWESOME___"),I="fa",S="svg-inline--fa",k="data-fa-i2svg",T=(function(){try{return!0}catch(SP){return!1}}(),[1,2,3,4,5,6,7,8,9,10]),x=T.concat([11,12,13,14,15,16,17,18,19,20]),C={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},N=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",C.GROUP,C.SWAP_OPACITY,C.PRIMARY,C.SECONDARY].concat(T.map((function(e){return"".concat(e,"x")}))).concat(x.map((function(e){return"w-".concat(e)}))),v.FontAwesomeConfig||{});if(w&&"function"===typeof w.querySelector){[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=h(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=w.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(N[r]=i)}))}var A=u({},{familyPrefix:I,replacementClass:S,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},N);A.autoReplaceSvg||(A.observeMutations=!1);var P=u({},A);v.FontAwesomeConfig=P;var O=v||{};O[E]||(O[E]={}),O[E].styles||(O[E].styles={}),O[E].hooks||(O[E].hooks={}),O[E].shims||(O[E].shims=[]);var R=O[E],D=[];_&&((w.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(w.readyState)||w.addEventListener("DOMContentLoaded",(function e(){w.removeEventListener("DOMContentLoaded",e),1,D.map((function(e){return e()}))})));var L,M="pending",F="settled",j="fulfilled",U="rejected",V=function(){},z="undefined"!==typeof n.g&&"undefined"!==typeof n.g.process&&"function"===typeof n.g.process.emit,B="undefined"===typeof setImmediate?setTimeout:setImmediate,q=[];function K(){for(var e=0;e<q.length;e++)q[e][0](q[e][1]);q=[],L=!1}function W(e,t){q.push([e,t]),L||(L=!0,B(K,0))}function G(e){var t=e.owner,n=t._state,r=t._data,i=e[n],s=e.then;if("function"===typeof i){n=j;try{r=i(r)}catch(SP){Y(s,SP)}}H(s,r)||(n===j&&Q(s,r),n===U&&Y(s,r))}function H(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"===typeof t||"object"===a(t))){var r=t.then;if("function"===typeof r)return r.call(t,(function(r){n||(n=!0,t===r?$(e,r):Q(e,r))}),(function(t){n||(n=!0,Y(e,t))})),!0}}catch(SP){return n||Y(e,SP),!0}return!1}function Q(e,t){e!==t&&H(e,t)||$(e,t)}function $(e,t){e._state===M&&(e._state=F,e._data=t,W(J,e))}function Y(e,t){e._state===M&&(e._state=F,e._data=t,W(Z,e))}function X(e){e._then=e._then.forEach(G)}function J(e){e._state=j,X(e)}function Z(e){e._state=U,X(e),!e._handled&&z&&n.g.process.emit("unhandledRejection",e._data,e)}function ee(e){n.g.process.emit("rejectionHandled",e)}function te(e){if("function"!==typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof te===!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function n(e){Y(t,e)}try{e((function(e){Q(t,e)}),n)}catch(SP){n(SP)}}(e,this)}te.prototype={constructor:te,_state:M,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(V),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===U&&z&&W(ee,this)),this._state===j||this._state===U?W(G,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},te.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new te((function(t,n){var r=[],i=0;function s(e){return i++,function(n){r[e]=n,--i||t(r)}}for(var o,a=0;a<e.length;a++)(o=e[a])&&"function"===typeof o.then?o.then(s(a),n):r[a]=o;i||t(r)}))},te.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new te((function(t,n){for(var r,i=0;i<e.length;i++)(r=e[i])&&"function"===typeof r.then?r.then(t,n):t(r)}))},te.resolve=function(e){return e&&"object"===a(e)&&e.constructor===te?e:new te((function(t){t(e)}))},te.reject=function(e){return new te((function(t,n){n(e)}))};var ne={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function re(e){if(e&&_){var t=w.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=w.head.childNodes,r=null,i=n.length-1;i>-1;i--){var s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}return w.head.insertBefore(t,r),e}}var ie="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function se(){for(var e=12,t="";e-- >0;)t+=ie[62*Math.random()|0];return t}function oe(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ae(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n],";")}),"")}function ce(e){return e.size!==ne.size||e.x!==ne.x||e.y!==ne.y||e.rotate!==ne.rotate||e.flipX||e.flipY}function le(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),a="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(s," ").concat(o," ").concat(a)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}var ue={x:0,y:0,width:"100%",height:"100%"};function he(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function de(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,s=e.iconName,o=e.transform,a=e.symbol,c=e.title,l=e.maskId,h=e.titleId,d=e.extra,f=e.watchable,p=void 0!==f&&f,m=r.found?r:n,g=m.width,y=m.height,v="fak"===i,w=v?"":"fa-w-".concat(Math.ceil(g/y*16)),b=[P.replacementClass,s?"".concat(P.familyPrefix,"-").concat(s):"",w].filter((function(e){return-1===d.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(d.classes).join(" "),_={children:[],attributes:u({},d.attributes,{"data-prefix":i,"data-icon":s,class:b,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(g," ").concat(y)})},E=v&&!~d.classes.indexOf("fa-fw")?{width:"".concat(g/y*16*.0625,"em")}:{};p&&(_.attributes[k]=""),c&&_.children.push({tag:"title",attributes:{id:_.attributes["aria-labelledby"]||"title-".concat(h||se())},children:[c]});var I=u({},_,{prefix:i,iconName:s,main:n,mask:r,maskId:l,transform:o,symbol:a,styles:u({},E,d.styles)}),S=r.found&&n.found?function(e){var t,n=e.children,r=e.attributes,i=e.main,s=e.mask,o=e.maskId,a=e.transform,c=i.width,l=i.icon,h=s.width,d=s.icon,f=le({transform:a,containerWidth:h,iconWidth:c}),p={tag:"rect",attributes:u({},ue,{fill:"white"})},m=l.children?{children:l.children.map(he)}:{},g={tag:"g",attributes:u({},f.inner),children:[he(u({tag:l.tag,attributes:u({},l.attributes,f.path)},m))]},y={tag:"g",attributes:u({},f.outer),children:[g]},v="mask-".concat(o||se()),w="clip-".concat(o||se()),b={tag:"mask",attributes:u({},ue,{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,y]},_={tag:"defs",children:[{tag:"clipPath",attributes:{id:w},children:(t=d,"g"===t.tag?t.children:[t])},b]};return n.push(_,{tag:"rect",attributes:u({fill:"currentColor","clip-path":"url(#".concat(w,")"),mask:"url(#".concat(v,")")},ue)}),{children:n,attributes:r}}(I):function(e){var t=e.children,n=e.attributes,r=e.main,i=e.transform,s=ae(e.styles);if(s.length>0&&(n.style=s),ce(i)){var o=le({transform:i,containerWidth:r.width,iconWidth:r.width});t.push({tag:"g",attributes:u({},o.outer),children:[{tag:"g",attributes:u({},o.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:u({},r.icon.attributes,o.path)}]}]})}else t.push(r.icon);return{children:t,attributes:n}}(I),T=S.children,x=S.attributes;return I.children=T,I.attributes=x,a?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,s=e.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:u({},i,{id:!0===s?"".concat(t,"-").concat(P.familyPrefix,"-").concat(n):s}),children:r}]}]}(I):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,s=e.styles,o=e.transform;if(ce(o)&&n.found&&!r.found){var a={x:n.width/n.height/2,y:.5};i.style=ae(u({},s,{"transform-origin":"".concat(a.x+o.x/16,"em ").concat(a.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(I)}var fe=function(){},pe=(P.measurePerformance&&b&&b.mark&&b.measure,function(e,t,n,r){var i,s,o,a=Object.keys(e),c=a.length,l=void 0!==r?function(e,t){return function(n,r,i,s){return e.call(t,n,r,i,s)}}(t,r):t;for(void 0===n?(i=1,o=e[a[0]]):(i=0,o=n);i<c;i++)o=l(o,e[s=a[i]],s,e);return o});function me(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==n&&n,i=Object.keys(t).reduce((function(e,n){var r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e}),{});"function"!==typeof R.hooks.addPack||r?R.styles[e]=u({},R.styles[e]||{},i):R.hooks.addPack(e,i),"fas"===e&&me("fa",t)}var ge=R.styles,ye=R.shims,ve=function(){var e=function(e){return pe(ge,(function(t,n,r){return t[r]=pe(n,e,{}),t}),{})};e((function(e,t,n){return t[3]&&(e[t[3]]=n),e})),e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in ge;pe(ye,(function(e,n){var r=n[0],i=n[1],s=n[2];return"far"!==i||t||(i="fas"),e[r]={prefix:i,iconName:s},e}),{})};ve();R.styles;function we(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}function be(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,s=void 0===i?[]:i;return"string"===typeof e?oe(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(oe(e[n]),'" ')}),"").trim()}(r),">").concat(s.map(be).join(""),"</").concat(t,">")}var _e=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),t):t};function Ee(e){this.name="MissingIcon",this.message=e||"Icon unavailable",this.stack=(new Error).stack}Ee.prototype=Object.create(Error.prototype),Ee.prototype.constructor=Ee;var Ie={fill:"currentColor"},Se={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},ke={tag:"path",attributes:u({},Ie,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})},Te=u({},Se,{attributeName:"opacity"});u({},Ie,{cx:"256",cy:"364",r:"28"}),u({},Se,{attributeName:"r",values:"28;14;28;28;14;28;"}),u({},Te,{values:"1;0;1;1;0;1;"}),u({},Ie,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),u({},Te,{values:"1;0;0;0;0;1;"}),u({},Ie,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),u({},Te,{values:"0;0;1;1;0;0;"}),R.styles;function xe(e){var t=e[0],n=e[1],r=h(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(P.familyPrefix,"-").concat(C.GROUP)},children:[{tag:"path",attributes:{class:"".concat(P.familyPrefix,"-").concat(C.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(P.familyPrefix,"-").concat(C.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}R.styles;var Ce='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';function Ne(){var e=I,t=S,n=P.familyPrefix,r=P.replacementClass,i=Ce;if(n!==e||r!==t){var s=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),a=new RegExp("\\.".concat(t),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}var Ae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=u({},e.definitions[t]||{},i[t]),me(t,i[t]),ve()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,s=r.iconName,o=r.icon;e[i]||(e[i]={}),e[i][s]=o})),e}}],n&&c(t.prototype,n),r&&c(t,r),e}();function Pe(){P.autoAddCss&&!Le&&(re(Ne()),Le=!0)}function Oe(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return be(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(_){var t=w.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function Re(e){var t=e.prefix,n=void 0===t?"fa":t,r=e.iconName;if(r)return we(De.definitions,n,r)||we(R.styles,n,r)}var De=new Ae,Le=!1,Me={transform:function(e){return _e(e)}},Fe=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:Re(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:Re(i||{})),e(r,u({},n,{mask:i}))}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?ne:n,i=t.symbol,s=void 0!==i&&i,o=t.mask,a=void 0===o?null:o,c=t.maskId,l=void 0===c?null:c,h=t.title,d=void 0===h?null:h,f=t.titleId,p=void 0===f?null:f,m=t.classes,g=void 0===m?[]:m,y=t.attributes,v=void 0===y?{}:y,w=t.styles,b=void 0===w?{}:w;if(e){var _=e.prefix,E=e.iconName,I=e.icon;return Oe(u({type:"icon"},e),(function(){return Pe(),P.autoA11y&&(d?v["aria-labelledby"]="".concat(P.replacementClass,"-title-").concat(p||se()):(v["aria-hidden"]="true",v.focusable="false")),de({icons:{main:xe(I),mask:a?xe(a.icon):{found:!1,width:null,height:null,icon:{}}},prefix:_,iconName:E,transform:u({},ne,r),symbol:s,title:d,maskId:l,titleId:p,extra:{attributes:v,styles:b,classes:g}})}))}})),je=n(173),Ue=n.n(je);function Ve(e){return Ve="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function We(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ge(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var He=!1;try{He=!0}catch(SP){}function Qe(e){return e&&"object"===Ve(e)&&e.prefix&&e.iconName&&e.icon?e:Me.icon?Me.icon(e):null===e?null:e&&"object"===Ve(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function $e(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?ze({},e,t):{}}function Ye(e){var t=e.forwardedRef,n=Ke(e,["forwardedRef"]),r=n.icon,i=n.mask,s=n.symbol,o=n.className,a=n.title,c=n.titleId,l=Qe(r),u=$e("classes",[].concat(We(function(e){var t,n=e.spin,r=e.pulse,i=e.fixedWidth,s=e.inverse,o=e.border,a=e.listItem,c=e.flip,l=e.size,u=e.rotation,h=e.pull,d=(ze(t={"fa-spin":n,"fa-pulse":r,"fa-fw":i,"fa-inverse":s,"fa-border":o,"fa-li":a,"fa-flip-horizontal":"horizontal"===c||"both"===c,"fa-flip-vertical":"vertical"===c||"both"===c},"fa-".concat(l),"undefined"!==typeof l&&null!==l),ze(t,"fa-rotate-".concat(u),"undefined"!==typeof u&&null!==u&&0!==u),ze(t,"fa-pull-".concat(h),"undefined"!==typeof h&&null!==h),ze(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(d).map((function(e){return d[e]?e:null})).filter((function(e){return e}))}(n)),We(o.split(" ")))),h=$e("transform","string"===typeof n.transform?Me.transform(n.transform):n.transform),d=$e("mask",Qe(i)),f=Fe(l,qe({},u,{},h,{},d,{symbol:s,title:a,titleId:c}));if(!f)return function(){var e;!He&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",l),null;var p=f.abstract,m={ref:t};return Object.keys(n).forEach((function(e){Ye.defaultProps.hasOwnProperty(e)||(m[e]=n[e])})),Xe(p[0],m)}Ye.displayName="FontAwesomeIcon",Ye.propTypes={border:Ue().bool,className:Ue().string,mask:Ue().oneOfType([Ue().object,Ue().array,Ue().string]),fixedWidth:Ue().bool,inverse:Ue().bool,flip:Ue().oneOf(["horizontal","vertical","both"]),icon:Ue().oneOfType([Ue().object,Ue().array,Ue().string]),listItem:Ue().bool,pull:Ue().oneOf(["right","left"]),pulse:Ue().bool,rotation:Ue().oneOf([0,90,180,270]),size:Ue().oneOf(["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Ue().bool,symbol:Ue().oneOfType([Ue().bool,Ue().string]),title:Ue().string,transform:Ue().oneOfType([Ue().string,Ue().object]),swapOpacity:Ue().bool},Ye.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var Xe=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),s=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=function(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=Ge(t.slice(0,r)),s=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=s:e[i]=s,e}),{})}(r);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[Ge(t)]=r}return e}),{attrs:{}}),o=r.style,a=void 0===o?{}:o,c=Ke(r,["style"]);return s.attrs.style=qe({},s.attrs.style,{},a),t.apply(void 0,[n.tag,qe({},s.attrs,{},c)].concat(We(i)))}.bind(null,t.createElement),Je={prefix:"fas",iconName:"bookmark",icon:[384,512,[],"f02e","M0 512V48C0 21.49 21.49 0 48 0h288c26.51 0 48 21.49 48 48v464L192 400 0 512z"]},Ze={prefix:"fas",iconName:"forward",icon:[512,512,[],"f04e","M500.5 231.4l-192-160C287.9 54.3 256 68.6 256 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2zm-256 0l-192-160C31.9 54.3 0 68.6 0 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2z"]},et={prefix:"fas",iconName:"heart",icon:[512,512,[],"f004","M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"]},tt={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"]};const nt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},rt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(nt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new it;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class it extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const st=function(e){return function(e){const t=nt(e);return rt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ot=function(e){try{return rt.decodeString(e,!0)}catch(SP){console.error("base64Decode failed: ",SP)}return null};function at(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&ct(n)&&(e[n]=at(e[n],t[n]));return e}function ct(e){return"__proto__"!==e}const lt=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ut=()=>{try{return lt()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(SP){return}const t=e&&ot(e[1]);return t&&JSON.parse(t)})()}catch(SP){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(SP))}},ht=()=>{var e;return null===(e=ut())||void 0===e?void 0:e.config};class dt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function ft(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function pt(){var e;const t=null===(e=ut())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(SP){return!1}}function mt(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function gt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function yt(){const e=ft();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function vt(){try{return"object"===typeof indexedDB}catch(SP){return!1}}class wt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,wt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bt.prototype.create)}}class bt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(_t,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new wt(n,s,t)}}const _t=/\{\$([^}]+)}/g;function Et(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function It(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(St(n)&&St(s)){if(!It(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function St(e){return null!==e&&"object"===typeof e}function kt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Tt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function xt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Ct(e,t){const n=new Nt(e,t);return n.subscribe.bind(n)}class Nt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=At),void 0===r.error&&(r.error=At),void 0===r.complete&&(r.complete=At);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(SP){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(SP){"undefined"!==typeof console&&console.error&&console.error(SP)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function At(){}function Pt(e){return e&&e._delegate?e._delegate:e}class Ot{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Rt="[DEFAULT]";class Dt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new dt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(SP){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(SP){if(r)return null;throw SP}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Rt})}catch(SP){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(SP){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(Lg){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Lt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(Lg){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;return this.component?this.component.multipleInstances?e:Rt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function Lt(e){return e===Rt?void 0:e}class Mt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Dt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ft=[];var jt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(jt||(jt={}));const Ut={debug:jt.DEBUG,verbose:jt.VERBOSE,info:jt.INFO,warn:jt.WARN,error:jt.ERROR,silent:jt.SILENT},Vt=jt.INFO,zt={[jt.DEBUG]:"log",[jt.VERBOSE]:"log",[jt.INFO]:"info",[jt.WARN]:"warn",[jt.ERROR]:"error"},Bt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=zt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class qt{constructor(e){this.name=e,this._logLevel=Vt,this._logHandler=Bt,this._userLogHandler=null,Ft.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in jt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ut[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jt.DEBUG,...t),this._logHandler(this,jt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jt.VERBOSE,...t),this._logHandler(this,jt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jt.INFO,...t),this._logHandler(this,jt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jt.WARN,...t),this._logHandler(this,jt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jt.ERROR,...t),this._logHandler(this,jt.ERROR,...t)}}const Kt=(e,t)=>t.some((t=>e instanceof t));let Wt,Gt;const Ht=new WeakMap,Qt=new WeakMap,$t=new WeakMap,Yt=new WeakMap,Xt=new WeakMap;let Jt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Qt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$t.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Zt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Gt||(Gt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(nn(this),n),tn(Ht.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return tn(e.apply(nn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(nn(this),t,...r);return $t.set(s,t.sort?t.sort():[t]),tn(s)}}function en(e){return"function"===typeof e?Zt(e):(e instanceof IDBTransaction&&function(e){if(Qt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Qt.set(e,t)}(e),Kt(e,Wt||(Wt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Jt):e)}function tn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(tn(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Ht.set(t,e)})).catch((()=>{})),Xt.set(t,e),t}(e);if(Yt.has(e))return Yt.get(e);const t=en(e);return t!==e&&(Yt.set(e,t),Xt.set(t,e)),t}const nn=e=>Xt.get(e);const rn=["get","getKey","getAll","getAllKeys","count"],sn=["put","add","delete","clear"],on=new Map;function an(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(on.get(t))return on.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=sn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!rn.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return on.set(t,s),s}Jt=(e=>({...e,get:(t,n,r)=>an(t,n)||e.get(t,n,r),has:(t,n)=>!!an(t,n)||e.has(t,n)}))(Jt);class cn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const ln="@firebase/app",un="0.9.13",hn=new qt("@firebase/app"),dn="[DEFAULT]",fn={[ln]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},pn=new Map,mn=new Map;function gn(e,t){try{e.container.addComponent(t)}catch(SP){hn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),SP)}}function yn(e,t){e.container.addOrOverwriteComponent(t)}function vn(e){const t=e.name;if(mn.has(t))return hn.debug("There were multiple attempts to register component ".concat(t,".")),!1;mn.set(t,e);for(const n of pn.values())gn(n,e);return!0}function wn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function bn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dn;wn(e,t).clearInstance(n)}function _n(){mn.clear()}const En=new bt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class In{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ot("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw En.create("app-deleted",{appName:this._name})}}const Sn="9.23.0";function kn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:dn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw En.create("bad-app-name",{appName:String(i)});if(n||(n=ht()),!n)throw En.create("no-options");const s=pn.get(i);if(s){if(It(n,s.options)&&It(r,s.config))return s;throw En.create("duplicate-app",{appName:i})}const o=new Mt(i);for(const c of mn.values())o.addComponent(c);const a=new In(n,r,o);return pn.set(i,a),a}function Tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn;const t=pn.get(e);if(!t&&e===dn&&ht())return kn();if(!t)throw En.create("no-app",{appName:e});return t}function xn(){return Array.from(pn.values())}async function Cn(e){const t=e.name;pn.has(t)&&(pn.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Nn(e,t,n){var r;let i=null!==(r=fn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void hn.warn(e.join(" "))}vn(new Ot("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function An(e,t){if(null!==e&&"function"!==typeof e)throw En.create("invalid-log-argument");!function(e,t){for(const n of Ft){let r=null;t&&t.level&&(r=Ut[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:jt[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Pn(e){var t;t=e,Ft.forEach((e=>{e.setLogLevel(t)}))}const On="firebase-heartbeat-database",Rn=1,Dn="firebase-heartbeat-store";let Ln=null;function Mn(){return Ln||(Ln=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=tn(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(tn(o.result),e.oldVersion,e.newVersion,tn(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(On,Rn,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Dn)}}).catch((e=>{throw En.create("idb-open",{originalErrorMessage:e.message})}))),Ln}async function Fn(e,t){try{const n=(await Mn()).transaction(Dn,"readwrite"),r=n.objectStore(Dn);await r.put(t,jn(e)),await n.done}catch(SP){if(SP instanceof wt)hn.warn(SP.message);else{const t=En.create("idb-set",{originalErrorMessage:null===SP||void 0===SP?void 0:SP.message});hn.warn(t.message)}}}function jn(e){return"".concat(e.name,"!").concat(e.options.appId)}class Un{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new zn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Vn();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Vn(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Bn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Bn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=st(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Vn(){return(new Date).toISOString().substring(0,10)}class zn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!vt()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Mn();return await t.transaction(Dn).objectStore(Dn).get(jn(e))}catch(SP){if(SP instanceof wt)hn.warn(SP.message);else{const t=En.create("idb-get",{originalErrorMessage:null===SP||void 0===SP?void 0:SP.message});hn.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Fn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Fn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Bn(e){return st(JSON.stringify({version:2,heartbeats:e})).length}var qn;qn="",vn(new Ot("platform-logger",(e=>new cn(e)),"PRIVATE")),vn(new Ot("heartbeat",(e=>new Un(e)),"PRIVATE")),Nn(ln,un,qn),Nn(ln,un,"esm2017"),Nn("fire-js","");class Kn{constructor(e,t){this._delegate=e,this.firebase=t,gn(e,new Ot("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Cn(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dn;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dn;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){gn(this._delegate,e)}_addOrOverwriteComponent(e){yn(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Wn=new bt("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Gn=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=kn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Et(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Nn,setLogLevel:Pn,onLog:An,apps:null,SDK_VERSION:Sn,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(vn(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw Wn.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&at(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Et(n,e=e||dn))throw Wn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Kn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){at(n,e)},createSubscribe:Ct,ErrorFactory:bt,deepExtend:at}),n}(),Hn=new qt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Hn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Hn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Qn=Gn;!function(e){Nn("@firebase/app-compat","0.2.13",e)}();Qn.registerVersion("firebase","9.23.0","app-compat");var $n,Yn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Xn={},Jn=Jn||{},Zn=Yn||self;function er(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function tr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var nr="closure_uid_"+(1e9*Math.random()>>>0),rr=0;function ir(e,t,n){return e.call.apply(e.bind,arguments)}function sr(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function or(e,t,n){return(or=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ir:sr).apply(null,arguments)}function ar(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function cr(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function lr(){this.s=this.s,this.o=this.o}lr.prototype.s=!1,lr.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,nr)&&e[nr]||(e[nr]=++rr))},lr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ur=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function hr(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function dr(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(er(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function fr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}fr.prototype.h=function(){this.defaultPrevented=!0};var pr=function(){if(!Zn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Zn.addEventListener("test",(()=>{}),t),Zn.removeEventListener("test",(()=>{}),t)}catch(n){}return e}();function mr(e){return/^[\s\xa0]*$/.test(e)}function gr(){var e=Zn.navigator;return e&&(e=e.userAgent)?e:""}function yr(e){return-1!=gr().indexOf(e)}function vr(e){return vr[" "](e),e}vr[" "]=function(){};var wr,br,_r=yr("Opera"),Er=yr("Trident")||yr("MSIE"),Ir=yr("Edge"),Sr=Ir||Er,kr=yr("Gecko")&&!(-1!=gr().toLowerCase().indexOf("webkit")&&!yr("Edge"))&&!(yr("Trident")||yr("MSIE"))&&!yr("Edge"),Tr=-1!=gr().toLowerCase().indexOf("webkit")&&!yr("Edge");function xr(){var e=Zn.document;return e?e.documentMode:void 0}e:{var Cr="",Nr=function(){var e=gr();return kr?/rv:([^\);]+)(\)|;)/.exec(e):Ir?/Edge\/([\d\.]+)/.exec(e):Er?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Tr?/WebKit\/(\S+)/.exec(e):_r?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Nr&&(Cr=Nr?Nr[1]:""),Er){var Ar=xr();if(null!=Ar&&Ar>parseFloat(Cr)){wr=String(Ar);break e}}wr=Cr}if(Zn.document&&Er){var Pr=xr();br=Pr||(parseInt(wr,10)||void 0)}else br=void 0;var Or=br;function Rr(e,t){if(fr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(kr){e:{try{vr(t.nodeName);var i=!0;break e}catch(jk){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Dr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Rr.$.h.call(this)}}cr(Rr,fr);var Dr={2:"touch",3:"pen",4:"mouse"};Rr.prototype.h=function(){Rr.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Lr="closure_listenable_"+(1e6*Math.random()|0),Mr=0;function Fr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Mr,this.fa=this.ia=!1}function jr(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Ur(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Vr(e){const t={};for(const n in e)t[n]=e[n];return t}const zr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Br(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<zr.length;t++)n=zr[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function qr(e){this.src=e,this.g={},this.h=0}function Kr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=ur(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(jr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Wr(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}qr.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Wr(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Fr(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Gr="closure_lm_"+(1e6*Math.random()|0),Hr={};function Qr(e,t,n,r,i){if(r&&r.once)return Yr(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Qr(e,t[s],n,r,i);return null}return n=ri(n),e&&e[Lr]?e.O(t,n,tr(r)?!!r.capture:!!r,i):$r(e,t,n,!1,r,i)}function $r(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=tr(i)?!!i.capture:!!i,a=ti(e);if(a||(e[Gr]=a=new qr(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ei;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)pr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Zr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Yr(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Yr(e,t[s],n,r,i);return null}return n=ri(n),e&&e[Lr]?e.P(t,n,tr(r)?!!r.capture:!!r,i):$r(e,t,n,!0,r,i)}function Xr(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Xr(e,t[s],n,r,i);else r=tr(r)?!!r.capture:!!r,n=ri(n),e&&e[Lr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Wr(s=e.g[t],n,r,i))&&(jr(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=ti(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Wr(t,n,r,i)),(n=-1<e?t[e]:null)&&Jr(n))}function Jr(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Lr])Kr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Zr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ti(t))?(Kr(n,e),0==n.h&&(n.src=null,t[Gr]=null)):jr(e)}}}function Zr(e){return e in Hr?Hr[e]:Hr[e]="on"+e}function ei(e,t){if(e.fa)e=!0;else{t=new Rr(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Jr(e),e=n.call(r,t)}return e}function ti(e){return(e=e[Gr])instanceof qr?e:null}var ni="__closure_events_fn_"+(1e9*Math.random()>>>0);function ri(e){return"function"===typeof e?e:(e[ni]||(e[ni]=function(t){return e.handleEvent(t)}),e[ni])}function ii(){lr.call(this),this.i=new qr(this),this.S=this,this.J=null}function si(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new fr(t,e);else if(t instanceof fr)t.target=t.target||e;else{var i=t;Br(t=new fr(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=oi(o,r,!0,t)&&i}if(i=oi(o=t.g=e,r,!0,t)&&i,i=oi(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=oi(o=t.g=n[s],r,!1,t)&&i}function oi(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Kr(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}cr(ii,lr),ii.prototype[Lr]=!0,ii.prototype.removeEventListener=function(e,t,n,r){Xr(this,e,t,n,r)},ii.prototype.N=function(){if(ii.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)jr(n[r]);delete t.g[e],t.h--}}this.J=null},ii.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ii.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ai=Zn.JSON.stringify;function ci(){var e=mi;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var li=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new ui),(e=>e.reset()));class ui{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function hi(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function di(e){Zn.setTimeout((()=>{throw e}),0)}let fi,pi=!1,mi=new class{constructor(){this.h=this.g=null}add(e,t){const n=li.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},gi=()=>{const e=Zn.Promise.resolve(void 0);fi=()=>{e.then(yi)}};var yi=()=>{for(var e;e=ci();){try{e.h.call(e.g)}catch(n){di(n)}var t=li;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}pi=!1};function vi(e,t){ii.call(this),this.h=e||1,this.g=t||Zn,this.j=or(this.qb,this),this.l=Date.now()}function wi(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function bi(e,t,n){if("function"===typeof e)n&&(e=or(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=or(e.handleEvent,e)}return 2147483647<Number(t)?-1:Zn.setTimeout(e,t||0)}function _i(e){e.g=bi((()=>{e.g=null,e.i&&(e.i=!1,_i(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}cr(vi,ii),($n=vi.prototype).ga=!1,$n.T=null,$n.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),si(this,"tick"),this.ga&&(wi(this),this.start()))}},$n.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},$n.N=function(){vi.$.N.call(this),wi(this),delete this.g};class Ei extends lr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:_i(this)}N(){super.N(),this.g&&(Zn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ii(e){lr.call(this),this.h=e,this.g={}}cr(Ii,lr);var Si=[];function ki(e,t,n,r){Array.isArray(n)||(n&&(Si[0]=n.toString()),n=Si);for(var i=0;i<n.length;i++){var s=Qr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ti(e){Ur(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Jr(e)}),e),e.g={}}function xi(){this.g=!0}function Ci(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ai(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Ii.prototype.N=function(){Ii.$.N.call(this),Ti(this)},Ii.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xi.prototype.Ea=function(){this.g=!1},xi.prototype.info=function(){};var Ni={},Ai=null;function Pi(){return Ai=Ai||new ii}function Oi(e){fr.call(this,Ni.Ta,e)}function Ri(e){const t=Pi();si(t,new Oi(t))}function Di(e,t){fr.call(this,Ni.STAT_EVENT,e),this.stat=t}function Li(e){const t=Pi();si(t,new Di(t,e))}function Mi(e,t){fr.call(this,Ni.Ua,e),this.size=t}function Fi(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Zn.setTimeout((function(){e()}),t)}Ni.Ta="serverreachability",cr(Oi,fr),Ni.STAT_EVENT="statevent",cr(Di,fr),Ni.Ua="timingevent",cr(Mi,fr);var ji={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ui={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Vi(){}function zi(e){return e.h||(e.h=e.i())}function Bi(){}Vi.prototype.h=null;var qi,Ki={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Wi(){fr.call(this,"d")}function Gi(){fr.call(this,"c")}function Hi(){}function Qi(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Ii(this),this.P=Yi,e=Sr?125:void 0,this.V=new vi(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new $i}function $i(){this.i=null,this.g="",this.h=!1}cr(Wi,fr),cr(Gi,fr),cr(Hi,Vi),Hi.prototype.g=function(){return new XMLHttpRequest},Hi.prototype.i=function(){return{}},qi=new Hi;var Yi=45e3,Xi={},Ji={};function Zi(e,t,n){e.L=1,e.v=vs(fs(t)),e.s=n,e.S=!0,es(e,null)}function es(e,t){e.G=Date.now(),is(e),e.A=fs(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Ps(n.i,"t",r),e.C=0,n=e.l.J,e.h=new $i,e.g=Ro(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Ei(or(e.Pa,e,e.g),e.O)),ki(e.U,e.g,"readystatechange",e.nb),t=e.I?Vr(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Ri(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function ts(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function ns(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=rs(e,n),r==Ji){4==t&&(e.o=4,Li(14),i=!1),Ci(e.j,e.m,null,"[Incomplete Response]");break}if(r==Xi){e.o=4,Li(15),Ci(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ci(e.j,e.m,r,null),ls(e,r)}ts(e)&&r!=Ji&&r!=Xi&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Li(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ko(t),t.M=!0,Li(11))):(Ci(e.j,e.m,n,"[Invalid Chunked Response]"),cs(e),as(e))}function rs(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ji:(n=Number(t.substring(n,r)),isNaN(n)?Xi:(r+=1)+n>t.length?Ji:(t=t.slice(r,r+n),e.C=r+n,t))}function is(e){e.Y=Date.now()+e.P,ss(e,e.P)}function ss(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Fi(or(e.lb,e),t)}function os(e){e.B&&(Zn.clearTimeout(e.B),e.B=null)}function as(e){0==e.l.H||e.J||Co(e.l,e)}function cs(e){os(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,wi(e.V),Ti(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function ls(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||js(n.i,e)))if(!e.K&&js(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(Uk){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;xo(n),yo(n)}So(n),Li(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Fi(or(n.ib,n),6e3));if(1>=Fs(n.i)&&n.oa){try{n.oa()}catch(Uk){}n.oa=void 0}}else Ao(n,11)}else if((e.K||n.g==e)&&xo(n),!mr(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Us(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,ys(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Oo(r,r.J?r.pa:null,r.Y),o.K){Vs(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.B&&(os(a),is(a)),r.g=o}else Io(r);0<n.j.length&&wo(n)}else"stop"!=l[0]&&"close"!=l[0]||Ao(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Ao(n,7):go(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Ri()}catch(Uk){}}function us(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(er(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(er(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(er(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}($n=Qi.prototype).setTimeout=function(e){this.P=e},$n.nb=function(e){e=e.target;const t=this.M;t&&3==lo(e)?t.l():this.Pa(e)},$n.Pa=function(e){try{if(e==this.g)e:{const u=lo(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Sr||this.g&&(this.h.h||this.g.ja()||uo(this.g)))){this.J||4!=u||7==t||Ri(),os(this);var n=this.g.da();this.ca=n;t:if(ts(this)){var r=uo(this.g);e="";var i=r.length,s=4==lo(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){cs(this),as(this);var o="";break t}this.h.i=new Zn.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mr(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.o=3,Li(12),cs(this),as(this);break e}Ci(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ls(this,n)}this.S?(ns(this,u,o),Sr&&this.i&&3==u&&(ki(this.U,this.V,"tick",this.mb),this.V.start())):(Ci(this.j,this.m,o,null),ls(this,o)),4==u&&cs(this),this.i&&!this.J&&(4==u?Co(this.l,this):(this.i=!1,is(this)))}else(function(e){const t={};e=(e.g&&2<=lo(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(mr(e[r]))continue;var n=hi(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Li(12)):(this.o=0,Li(13)),cs(this),as(this)}}}catch(u){}},$n.mb=function(){if(this.g){var e=lo(this.g),t=this.g.ja();this.C<t.length&&(os(this),ns(this,e,t),this.i&&4!=e&&is(this))}},$n.cancel=function(){this.J=!0,cs(this)},$n.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Ri(),Li(17)),cs(this),this.o=2,as(this)):ss(this,this.Y-e)};var hs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ds(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ds){this.h=e.h,ps(this,e.j),this.s=e.s,this.g=e.g,ms(this,e.m),this.l=e.l;var t=e.i,n=new xs;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),gs(this,n),this.o=e.o}else e&&(t=String(e).match(hs))?(this.h=!1,ps(this,t[1]||"",!0),this.s=ws(t[2]||""),this.g=ws(t[3]||"",!0),ms(this,t[4]),this.l=ws(t[5]||"",!0),gs(this,t[6]||"",!0),this.o=ws(t[7]||"")):(this.h=!1,this.i=new xs(null,this.h))}function fs(e){return new ds(e)}function ps(e,t,n){e.j=n?ws(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ms(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function gs(e,t,n){t instanceof xs?(e.i=t,function(e,t){t&&!e.j&&(Cs(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ns(this,t),Ps(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=bs(t,ks)),e.i=new xs(t,e.h))}function ys(e,t,n){e.i.set(t,n)}function vs(e){return ys(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ws(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function bs(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,_s),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function _s(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ds.prototype.toString=function(){var e=[],t=this.j;t&&e.push(bs(t,Es,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(bs(t,Es,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(bs(n,"/"==n.charAt(0)?Ss:Is,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",bs(n,Ts)),e.join("")};var Es=/[#\/\?@]/g,Is=/[#\?:]/g,Ss=/[#\?]/g,ks=/[#\?@]/g,Ts=/#/g;function xs(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Cs(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ns(e,t){Cs(e),t=Os(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function As(e,t){return Cs(e),t=Os(e,t),e.g.has(t)}function Ps(e,t,n){Ns(e,t),0<n.length&&(e.i=null,e.g.set(Os(e,t),hr(n)),e.h+=n.length)}function Os(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}($n=xs.prototype).add=function(e,t){Cs(this),this.i=null,e=Os(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},$n.forEach=function(e,t){Cs(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},$n.ta=function(){Cs(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},$n.Z=function(e){Cs(this);let t=[];if("string"===typeof e)As(this,e)&&(t=t.concat(this.g.get(Os(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},$n.set=function(e,t){return Cs(this),this.i=null,As(this,e=Os(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},$n.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},$n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Rs=class{constructor(e,t){this.g=e,this.map=t}};function Ds(e){this.l=e||Ls,Zn.PerformanceNavigationTiming?e=0<(e=Zn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Zn.g&&Zn.g.Ka&&Zn.g.Ka()&&Zn.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ls=10;function Ms(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Fs(e){return e.h?1:e.g?e.g.size:0}function js(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Us(e,t){e.g?e.g.add(t):e.h=t}function Vs(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function zs(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return hr(e.i)}Ds.prototype.cancel=function(){if(this.i=zs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Bs,qs=class{stringify(e){return Zn.JSON.stringify(e,void 0)}parse(e){return Zn.JSON.parse(e,void 0)}};function Ks(){this.g=new qs}function Ws(e,t,n){const r=n||"";try{us(e,(function(e,n){let i=e;tr(e)&&(i=ai(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(SP){throw t.push(r+"type="+encodeURIComponent("_badmap")),SP}}function Gs(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(jk){}}function Hs(e){this.l=e.fc||null,this.j=e.ob||!1}function Qs(e,t){ii.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=$s,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}cr(Hs,Vi),Hs.prototype.g=function(){return new Qs(this.l,this.j)},Hs.prototype.i=(Bs={},function(){return Bs}),cr(Qs,ii);var $s=0;function Ys(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Xs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Js(e)}function Js(e){e.onreadystatechange&&e.onreadystatechange.call(e)}($n=Qs.prototype).open=function(e,t){if(this.readyState!=$s)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Js(this)},$n.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Zn).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},$n.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Xs(this)),this.readyState=$s},$n.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Js(this)),this.g&&(this.readyState=3,Js(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Zn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ys(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},$n.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Xs(this):Js(this),3==this.readyState&&Ys(this)}},$n.Za=function(e){this.g&&(this.response=this.responseText=e,Xs(this))},$n.Ya=function(e){this.g&&(this.response=e,Xs(this))},$n.ka=function(){this.g&&Xs(this)},$n.setRequestHeader=function(e,t){this.v.append(e,t)},$n.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},$n.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Qs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Zs=Zn.JSON.parse;function eo(e){ii.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=to,this.L=this.M=!1}cr(eo,ii);var to="",no=/^https?$/i,ro=["POST","PUT"];function io(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,so(e),ao(e)}function so(e){e.F||(e.F=!0,si(e,"complete"),si(e,"error"))}function oo(e){if(e.h&&"undefined"!=typeof Jn&&(!e.C[1]||4!=lo(e)||2!=e.da()))if(e.v&&4==lo(e))bi(e.La,0,e);else if(si(e,"readystatechange"),4==lo(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(hs)[1]||null;!i&&Zn.self&&Zn.self.location&&(i=Zn.self.location.protocol.slice(0,-1)),r=!no.test(i?i.toLowerCase():"")}n=r}if(n)si(e,"complete"),si(e,"success");else{e.m=6;try{var s=2<lo(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",so(e)}}finally{ao(e)}}}function ao(e,t){if(e.g){co(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||si(e,"ready");try{n.onreadystatechange=r}catch(SP){}}}function co(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Zn.clearTimeout(e.A),e.A=null)}function lo(e){return e.g?e.g.readyState:0}function uo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case to:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ga){return null}}function ho(e){let t="";return Ur(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function fo(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ho(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ys(e,t,n))}function po(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function mo(e){this.Ga=0,this.j=[],this.l=new xi,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=po("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=po("baseRetryDelayMs",5e3,e),this.hb=po("retryDelaySeedMs",1e4,e),this.eb=po("forwardChannelMaxRetries",2,e),this.xa=po("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Ds(e&&e.concurrentRequestLimit),this.Ja=new Ks,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function go(e){if(vo(e),3==e.H){var t=e.W++,n=fs(e.I);if(ys(n,"SID",e.K),ys(n,"RID",t),ys(n,"TYPE","terminate"),_o(e,n),(t=new Qi(e,e.l,t)).L=2,t.v=vs(fs(n)),n=!1,Zn.navigator&&Zn.navigator.sendBeacon)try{n=Zn.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Zn.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ro(t.l,null),t.g.ha(t.v)),t.G=Date.now(),is(t)}Po(e)}function yo(e){e.g&&(ko(e),e.g.cancel(),e.g=null)}function vo(e){yo(e),e.u&&(Zn.clearTimeout(e.u),e.u=null),xo(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Zn.clearTimeout(e.m),e.m=null)}function wo(e){if(!Ms(e.i)&&!e.m){e.m=!0;var t=e.Na;fi||gi(),pi||(fi(),pi=!0),mi.add(t,e),e.C=0}}function bo(e,t){var n;n=t?t.m:e.W++;const r=fs(e.I);ys(r,"SID",e.K),ys(r,"RID",n),ys(r,"AID",e.V),_o(e,r),e.o&&e.s&&fo(r,e.o,e.s),n=new Qi(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Eo(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Us(e.i,n),Zi(n,r,t)}function _o(e,t){e.na&&Ur(e.na,(function(e,n){ys(t,n,e)})),e.h&&us({},(function(e,n){ys(t,n,e)}))}function Eo(e,t,n){n=Math.min(e.j.length,n);var r=e.h?or(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Ws(a,e,"req"+n+"_")}catch(xa){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Io(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;fi||gi(),pi||(fi(),pi=!0),mi.add(t,e),e.A=0}}function So(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Fi(or(e.Ma,e),No(e,e.A)),e.A++,!0)}function ko(e){null!=e.B&&(Zn.clearTimeout(e.B),e.B=null)}function To(e){e.g=new Qi(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=fs(e.wa);ys(t,"RID","rpc"),ys(t,"SID",e.K),ys(t,"AID",e.V),ys(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ys(t,"TO",e.qa),ys(t,"TYPE","xmlhttp"),_o(e,t),e.o&&e.s&&fo(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=vs(fs(t)),n.s=null,n.S=!0,es(n,e)}function xo(e){null!=e.v&&(Zn.clearTimeout(e.v),e.v=null)}function Co(e,t){var n=null;if(e.g==t){xo(e),ko(e),e.g=null;var r=2}else{if(!js(e.i,t))return;n=t.F,Vs(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;si(r=Pi(),new Mi(r,n)),wo(e)}else Io(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Fs(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Fi(or(e.Na,e,t),No(e,e.C)),e.C++,!0))}(e,t)||2==r&&So(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ao(e,5);break;case 4:Ao(e,10);break;case 3:Ao(e,6);break;default:Ao(e,2)}}function No(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Ao(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=or(e.pb,e);n||(n=new ds("//www.google.com/images/cleardot.gif"),Zn.location&&"http"==Zn.location.protocol||ps(n,"https"),vs(n)),function(e,t){const n=new xi;if(Zn.Image){const r=new Image;r.onload=ar(Gs,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ar(Gs,n,r,"TestLoadImage: error",!1,t),r.onabort=ar(Gs,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ar(Gs,n,r,"TestLoadImage: timeout",!1,t),Zn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Li(2);e.H=0,e.h&&e.h.za(t),Po(e),vo(e)}function Po(e){if(e.H=0,e.ma=[],e.h){const t=zs(e.i);0==t.length&&0==e.j.length||(dr(e.ma,t),dr(e.ma,e.j),e.i.i.length=0,hr(e.j),e.j.length=0),e.h.ya()}}function Oo(e,t,n){var r=n instanceof ds?fs(n):new ds(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ms(r,r.m);else{var i=Zn.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new ds(null);r&&ps(s,r),t&&(s.g=t),i&&ms(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&ys(r,n,t),ys(r,"VER",e.ra),_o(e,r),r}function Ro(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new eo(new Hs({ob:!0})):new eo(e.va)).Oa(e.J),t}function Do(){}function Lo(){if(Er&&!(10<=Number(Or)))throw Error("Environmental error: no available transport.")}function Mo(e,t){ii.call(this),this.g=new mo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!mr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!mr(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Uo(this)}function Fo(e){Wi.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function jo(){Gi.call(this),this.status=1}function Uo(e){this.g=e}function Vo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function zo(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Bo(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}($n=eo.prototype).Oa=function(e){this.M=e},$n.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():qi.g(),this.C=this.u?zi(this.u):zi(qi),this.g.onreadystatechange=or(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(jk){return void io(this,jk)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Zn.FormData&&e instanceof Zn.FormData,!(0<=ur(ro,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{co(this),0<this.B&&((this.L=function(e){return Er&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=or(this.ua,this)):this.A=bi(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(jk){io(this,jk)}},$n.ua=function(){"undefined"!=typeof Jn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,si(this,"timeout"),this.abort(8))},$n.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,si(this,"complete"),si(this,"abort"),ao(this))},$n.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ao(this,!0)),eo.$.N.call(this)},$n.La=function(){this.s||(this.G||this.v||this.l?oo(this):this.kb())},$n.kb=function(){oo(this)},$n.isActive=function(){return!!this.g},$n.da=function(){try{return 2<lo(this)?this.g.status:-1}catch(Bs){return-1}},$n.ja=function(){try{return this.g?this.g.responseText:""}catch(Bs){return""}},$n.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Zs(t)}},$n.Ia=function(){return this.m},$n.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},($n=mo.prototype).ra=8,$n.H=1,$n.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Qi(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Vr(s),Br(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Eo(this,i,t),ys(n=fs(this.I),"RID",e),ys(n,"CVER",22),this.F&&ys(n,"X-HTTP-Session-Id",this.F),_o(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(ho(s)))+"&"+t:this.o&&fo(n,this.o,s)),Us(this.i,i),this.bb&&ys(n,"TYPE","init"),this.P?(ys(n,"$req",t),ys(n,"SID","null"),i.aa=!0,Zi(i,n,null)):Zi(i,n,t),this.H=2}}else 3==this.H&&(e?bo(this,e):0==this.j.length||Ms(this.i)||bo(this))},$n.Ma=function(){if(this.u=null,To(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Fi(or(this.jb,this),e)}},$n.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Li(10),yo(this),To(this))},$n.ib=function(){null!=this.v&&(this.v=null,yo(this),So(this),Li(19))},$n.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Li(2)):(this.l.info("Failed to ping google.com"),Li(1))},$n.isActive=function(){return!!this.h&&this.h.isActive(this)},($n=Do.prototype).Ba=function(){},$n.Aa=function(){},$n.za=function(){},$n.ya=function(){},$n.isActive=function(){return!0},$n.Va=function(){},Lo.prototype.g=function(e,t){return new Mo(e,t)},cr(Mo,ii),Mo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Li(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Oo(e,null,e.Y),wo(e)},Mo.prototype.close=function(){go(this.g)},Mo.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ai(e),e=n);t.j.push(new Rs(t.fb++,e)),3==t.H&&wo(t)},Mo.prototype.N=function(){this.g.h=null,delete this.j,go(this.g),delete this.g,Mo.$.N.call(this)},cr(Fo,Wi),cr(jo,Gi),cr(Uo,Do),Uo.prototype.Ba=function(){si(this.g,"a")},Uo.prototype.Aa=function(e){si(this.g,new Fo(e))},Uo.prototype.za=function(e){si(this.g,new jo)},Uo.prototype.ya=function(){si(this.g,"b")},cr(Vo,(function(){this.blockSize=-1})),Vo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Vo.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)zo(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){zo(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){zo(this,r),i=0;break}}this.h=i,this.i+=t},Vo.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var qo={};function Ko(e){return-128<=e&&128>e?function(e,t){var n=qo;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Bo([0|e],0>e?-1:0)})):new Bo([0|e],0>e?-1:0)}function Wo(e){if(isNaN(e)||!isFinite(e))return Ho;if(0>e)return Jo(Wo(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Go;return new Bo(t,0)}var Go=4294967296,Ho=Ko(0),Qo=Ko(1),$o=Ko(16777216);function Yo(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Xo(e){return-1==e.h}function Jo(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Bo(n,~e.h).add(Qo)}function Zo(e,t){return e.add(Jo(t))}function ea(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function ta(e,t){this.g=e,this.h=t}function na(e,t){if(Yo(t))throw Error("division by zero");if(Yo(e))return new ta(Ho,Ho);if(Xo(e))return t=na(Jo(e),t),new ta(Jo(t.g),Jo(t.h));if(Xo(t))return t=na(e,Jo(t)),new ta(Jo(t.g),t.h);if(30<e.g.length){if(Xo(e)||Xo(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Qo,r=t;0>=r.X(e);)n=ra(n),r=ra(r);var i=ia(n,1),s=ia(r,1);for(r=ia(r,2),n=ia(n,2);!Yo(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=ia(r,1),n=ia(n,1)}return t=Zo(e,i.R(t)),new ta(i,t)}for(i=Ho;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Wo(n)).R(t);Xo(o)||0<o.X(e);)o=(s=Wo(n-=r)).R(t);Yo(s)&&(s=Qo),i=i.add(s),e=Zo(e,o)}return new ta(i,e)}function ra(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Bo(n,e.h)}function ia(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Bo(i,e.h)}($n=Bo.prototype).ea=function(){if(Xo(this))return-Jo(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Go+r)*t,t*=Go}return e},$n.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Yo(this))return"0";if(Xo(this))return"-"+Jo(this).toString(e);for(var t=Wo(Math.pow(e,6)),n=this,r="";;){var i=na(n,t).g,s=((0<(n=Zo(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Yo(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},$n.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},$n.X=function(e){return Xo(e=Zo(this,e))?-1:Yo(e)?0:1},$n.abs=function(){return Xo(this)?Jo(this):this},$n.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Bo(n,-2147483648&n[n.length-1]?-1:0)},$n.R=function(e){if(Yo(this)||Yo(e))return Ho;if(Xo(this))return Xo(e)?Jo(this).R(Jo(e)):Jo(Jo(this).R(e));if(Xo(e))return Jo(this.R(Jo(e)));if(0>this.X($o)&&0>e.X($o))return Wo(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,ea(n,2*r+2*i),n[2*r+2*i+1]+=s*c,ea(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,ea(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,ea(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Bo(n,0)},$n.gb=function(e){return na(this,e).h},$n.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Bo(n,this.h&e.h)},$n.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Bo(n,this.h|e.h)},$n.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Bo(n,this.h^e.h)},Lo.prototype.createWebChannel=Lo.prototype.g,Mo.prototype.send=Mo.prototype.u,Mo.prototype.open=Mo.prototype.m,Mo.prototype.close=Mo.prototype.close,ji.NO_ERROR=0,ji.TIMEOUT=8,ji.HTTP_ERROR=6,Ui.COMPLETE="complete",Bi.EventType=Ki,Ki.OPEN="a",Ki.CLOSE="b",Ki.ERROR="c",Ki.MESSAGE="d",ii.prototype.listen=ii.prototype.O,eo.prototype.listenOnce=eo.prototype.P,eo.prototype.getLastError=eo.prototype.Sa,eo.prototype.getLastErrorCode=eo.prototype.Ia,eo.prototype.getStatus=eo.prototype.da,eo.prototype.getResponseJson=eo.prototype.Wa,eo.prototype.getResponseText=eo.prototype.ja,eo.prototype.send=eo.prototype.ha,eo.prototype.setWithCredentials=eo.prototype.Oa,Vo.prototype.digest=Vo.prototype.l,Vo.prototype.reset=Vo.prototype.reset,Vo.prototype.update=Vo.prototype.j,Bo.prototype.add=Bo.prototype.add,Bo.prototype.multiply=Bo.prototype.R,Bo.prototype.modulo=Bo.prototype.gb,Bo.prototype.compare=Bo.prototype.X,Bo.prototype.toNumber=Bo.prototype.ea,Bo.prototype.toString=Bo.prototype.toString,Bo.prototype.getBits=Bo.prototype.D,Bo.fromNumber=Wo,Bo.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Jo(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Wo(Math.pow(n,8)),i=Ho,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Wo(Math.pow(n,o)),i=i.R(o).add(Wo(a))):i=(i=i.R(r)).add(Wo(a))}return i};var sa=Xn.createWebChannelTransport=function(){return new Lo},oa=Xn.getStatEventTarget=function(){return Pi()},aa=Xn.ErrorCode=ji,ca=Xn.EventType=Ui,la=Xn.Event=Ni,ua=Xn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ha=Xn.FetchXmlHttpFactory=Hs,da=Xn.WebChannel=Bi,fa=Xn.XhrIo=eo,pa=Xn.Md5=Vo,ma=Xn.Integer=Bo;const ga="@firebase/firestore";class ya{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ya.UNAUTHENTICATED=new ya(null),ya.GOOGLE_CREDENTIALS=new ya("google-credentials-uid"),ya.FIRST_PARTY=new ya("first-party-uid"),ya.MOCK_USER=new ya("mock-user");let va="9.23.0";const wa=new qt("@firebase/firestore");function ba(){return wa.logLevel}function _a(e){if(wa.logLevel<=jt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Sa);wa.debug("Firestore (".concat(va,"): ").concat(e),...i)}}function Ea(e){if(wa.logLevel<=jt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Sa);wa.error("Firestore (".concat(va,"): ").concat(e),...i)}}function Ia(e){if(wa.logLevel<=jt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Sa);wa.warn("Firestore (".concat(va,"): ").concat(e),...i)}}function Sa(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ka(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(va,") INTERNAL ASSERTION FAILED: ")+e;throw Ea(t),new Error(t)}function Ta(e,t){e||ka()}function xa(e,t){return e}const Ca={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Na extends wt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Aa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Pa{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Oa{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ya.UNAUTHENTICATED)))}shutdown(){}}class Ra{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Da{constructor(e){this.t=e,this.currentUser=ya.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Aa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Aa,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{_a("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(_a("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Aa)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(_a("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ta("string"==typeof t.accessToken),new Pa(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ta(null===e||"string"==typeof e),new ya(e)}}class La{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=ya.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Ma{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new La(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(ya.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Fa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ja{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&_a("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,_a("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{_a("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):_a("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ta("string"==typeof e.token),this.T=e.token,new Fa(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ua(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Va{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Ua(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function za(e,t){return e<t?-1:e>t?1:0}function Ba(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function qa(e){return e+"\0"}class Ka{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Na(Ca.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Na(Ca.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Na(Ca.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Na(Ca.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ka.fromMillis(Date.now())}static fromDate(e){return Ka.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ka(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?za(this.nanoseconds,e.nanoseconds):za(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Wa{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Wa(e)}static min(){return new Wa(new Ka(0,0))}static max(){return new Wa(new Ka(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ga{constructor(e,t,n){void 0===t?t=0:t>e.length&&ka(),void 0===n?n=e.length-t:n>e.length-t&&ka(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ga.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ga?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ha extends Ga{construct(e,t,n){return new Ha(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Na(Ca.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Ha(e)}static emptyPath(){return new Ha([])}}const Qa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $a extends Ga{construct(e,t,n){return new $a(e,t,n)}static isValidIdentifier(e){return Qa.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$a.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new $a(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Na(Ca.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Na(Ca.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Na(Ca.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Na(Ca.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $a(t)}static emptyPath(){return new $a([])}}class Ya{constructor(e){this.path=e}static fromPath(e){return new Ya(Ha.fromString(e))}static fromName(e){return new Ya(Ha.fromString(e).popFirst(5))}static empty(){return new Ya(Ha.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ha.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ha.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ya(new Ha(e.slice()))}}class Xa{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Ja(e){return e.fields.find((e=>2===e.kind))}function Za(e){return e.fields.filter((e=>2!==e.kind))}Xa.UNKNOWN_ID=-1;class ec{constructor(e,t){this.fieldPath=e,this.kind=t}}class tc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new tc(0,ic.min())}}function nc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Wa.fromTimestamp(1e9===r?new Ka(n+1,0):new Ka(n,r));return new ic(i,Ya.empty(),t)}function rc(e){return new ic(e.readTime,e.key,-1)}class ic{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ic(Wa.min(),Ya.empty(),-1)}static max(){return new ic(Wa.max(),Ya.empty(),-1)}}function sc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ya.comparator(e.documentKey,t.documentKey),0!==n?n:za(e.largestBatchId,t.largestBatchId))}const oc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ac{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function cc(e){if(e.code!==Ca.FAILED_PRECONDITION||e.message!==oc)throw e;_a("LocalStore","Unexpectedly lost primary lease")}class lc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ka(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new lc(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof lc?t:lc.resolve(t)}catch(e){return lc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):lc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):lc.reject(t)}static resolve(e){return new lc(((t,n)=>{t(e)}))}static reject(e){return new lc(((t,n)=>{n(e)}))}static waitFor(e){return new lc(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=lc.resolve(!1);for(const n of e)t=t.next((e=>e?lc.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new lc(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new lc(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class uc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Aa,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new fc(e,t.error)):this.v.resolve()},this.transaction.onerror=t=>{const n=vc(t.target.error);this.v.reject(new fc(e,n))}}static open(e,t,n,r){try{return new uc(t,e.transaction(r,n))}catch(e){throw new fc(t,e)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(_a("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new mc(t)}}class hc{constructor(e,t,n){this.name=e,this.version=t,this.V=n,12.2===hc.S(ft())&&Ea("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return _a("SimpleDb","Removing database:",e),gc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!vt())return!1;if(hc.C())return!0;const e=ft(),t=hc.S(e),n=0<t&&t<10,r=hc.N(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static N(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async $(e){return this.db||(_a("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new fc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Na(Ca.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Na(Ca.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new fc(e,r))},r.onupgradeneeded=e=>{_a("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.V.O(t,r.transaction,e.oldVersion,this.version).next((()=>{_a("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.F&&(this.db.onversionchange=e=>this.F(e)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.$(e);const t=uc.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.P(),e))).catch((e=>(t.abort(e),lc.reject(e)))).toPromise();return s.catch((()=>{})),await t.R,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(_a("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class dc{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return gc(this.L.delete())}}class fc extends Na{constructor(e,t){super(Ca.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function pc(e){return"IndexedDbTransactionError"===e.name}class mc{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(_a("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(_a("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),gc(n)}add(e){return _a("SimpleDb","ADD",this.store.name,e,e),gc(this.store.add(e))}get(e){return gc(this.store.get(e)).next((t=>(void 0===t&&(t=null),_a("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return _a("SimpleDb","DELETE",this.store.name,e),gc(this.store.delete(e))}count(){return _a("SimpleDb","COUNT",this.store.name),gc(this.store.count())}j(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new lc(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new lc(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}J(e,t){_a("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}X(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Z(e){const t=this.cursor({});return new lc(((n,r)=>{t.onerror=e=>{const t=vc(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new lc(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new dc(i),o=t(i.primaryKey,i.value,s);if(o instanceof lc){const e=o.catch((e=>(s.done(),lc.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>lc.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function gc(e){return new lc(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=vc(e.target.error);n(t)}}))}let yc=!1;function vc(e){const t=hc.S(ft());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Na("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return yc||(yc=!0,setTimeout((()=>{throw e}),0)),e}}return e}class wc{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){_a("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{_a("IndexBackiller","Documents written: ".concat(await this.tt.nt()))}catch(e){pc(e)?_a("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await cc(e)}await this.et(6e4)}))}}class bc{constructor(e,t){this.localStore=e,this.persistence=t}async nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.st(t,e)))}st(e,t){const n=new Set;let r=t,i=!0;return lc.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return _a("IndexBackiller","Processing collection: ".concat(t)),this.it(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}it(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.rt(r,n))).next((n=>(_a("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}rt(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=rc(t);sc(r,n)>0&&(n=r)})),new ic(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class _c{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function Ec(e){return null==e}function Ic(e){return 0===e&&1/e==-1/0}function Sc(e){return"number"==typeof e&&Number.isInteger(e)&&!Ic(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function kc(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=xc(t)),t=Tc(e.get(n),t);return xc(t)}function Tc(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function xc(e){return e+"\x01\x01"}function Cc(e){const t=e.length;if(Ta(t>=2),2===t)return Ta("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ha.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&ka(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:ka()}s=t+2}return new Ha(r)}_c.ct=-1;const Nc=["userId","batchId"];function Ac(e,t){return[e,kc(t)]}function Pc(e,t,n){return[e,kc(t),n]}const Oc={},Rc=["prefixPath","collectionGroup","readTime","documentId"],Dc=["prefixPath","collectionGroup","documentId"],Lc=["collectionGroup","readTime","prefixPath","documentId"],Mc=["canonicalId","targetId"],Fc=["targetId","path"],jc=["path","targetId"],Uc=["collectionId","parent"],Vc=["indexId","uid"],zc=["uid","sequenceNumber"],Bc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],qc=["indexId","uid","orderedDocumentKey"],Kc=["userId","collectionPath","documentId"],Wc=["userId","collectionPath","largestBatchId"],Gc=["userId","collectionGroup","largestBatchId"],Hc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Qc=[...Hc,"documentOverlays"],$c=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Yc=$c,Xc=[...Yc,"indexConfiguration","indexState","indexEntries"];class Jc extends ac{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Zc(e,t){const n=xa(e);return hc.M(n.ht,t)}function el(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function tl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function nl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class rl{constructor(e,t){this.comparator=e,this.root=t||sl.EMPTY}insert(e,t){return new rl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sl.BLACK,null,null))}remove(e){return new rl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new il(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new il(this.root,e,this.comparator,!1)}getReverseIterator(){return new il(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new il(this.root,e,this.comparator,!0)}}class il{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sl{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:sl.RED,this.left=null!=r?r:sl.EMPTY,this.right=null!=i?i:sl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new sl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return sl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return sl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ka();if(this.right.isRed())throw ka();const e=this.left.check();if(e!==this.right.check())throw ka();return e+(this.isRed()?0:1)}}sl.EMPTY=null,sl.RED=!0,sl.BLACK=!1,sl.EMPTY=new class{constructor(){this.size=0}get key(){throw ka()}get value(){throw ka()}get color(){throw ka()}get left(){throw ka()}get right(){throw ka()}copy(e,t,n,r,i){return this}insert(e,t,n){return new sl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ol{constructor(e){this.comparator=e,this.data=new rl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new al(this.data.getIterator())}getIteratorFrom(e){return new al(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof ol))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ol(this.comparator);return t.data=e,t}}class al{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cl(e){return e.hasNext()?e.getNext():void 0}class ll{constructor(e){this.fields=e,e.sort($a.comparator)}static empty(){return new ll([])}unionWith(e){let t=new ol($a.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ll(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ba(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class ul extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ul("Invalid base64 string: "+e):e}}(e);return new hl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new hl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return za(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hl.EMPTY_BYTE_STRING=new hl("");const dl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fl(e){if(Ta(!!e),"string"==typeof e){let t=0;const n=dl.exec(e);if(Ta(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:pl(e.seconds),nanos:pl(e.nanos)}}function pl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ml(e){return"string"==typeof e?hl.fromBase64String(e):hl.fromUint8Array(e)}function gl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function yl(e){const t=e.mapValue.fields.__previous_value__;return gl(t)?yl(t):t}function vl(e){const t=fl(e.mapValue.fields.__local_write_time__.timestampValue);return new Ka(t.seconds,t.nanos)}class wl{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class bl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new bl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof bl&&e.projectId===this.projectId&&e.database===this.database}}const _l={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},El={nullValue:"NULL_VALUE"};function Il(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?gl(e)?4:Fl(e)?9007199254740991:10:ka()}function Sl(e,t){if(e===t)return!0;const n=Il(e);if(n!==Il(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return vl(e).isEqual(vl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=fl(e.timestampValue),r=fl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ml(e.bytesValue).isEqual(ml(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return pl(e.geoPointValue.latitude)===pl(t.geoPointValue.latitude)&&pl(e.geoPointValue.longitude)===pl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return pl(e.integerValue)===pl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=pl(e.doubleValue),r=pl(t.doubleValue);return n===r?Ic(n)===Ic(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ba(e.arrayValue.values||[],t.arrayValue.values||[],Sl);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(el(n)!==el(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Sl(n[i],r[i])))return!1;return!0}(e,t);default:return ka()}}function kl(e,t){return void 0!==(e.values||[]).find((e=>Sl(e,t)))}function Tl(e,t){if(e===t)return 0;const n=Il(e),r=Il(t);if(n!==r)return za(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return za(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=pl(e.integerValue||e.doubleValue),r=pl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return xl(e.timestampValue,t.timestampValue);case 4:return xl(vl(e),vl(t));case 5:return za(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ml(e),r=ml(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=za(n[i],r[i]);if(0!==e)return e}return za(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=za(pl(e.latitude),pl(t.latitude));return 0!==n?n:za(pl(e.longitude),pl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Tl(n[i],r[i]);if(e)return e}return za(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===_l.mapValue&&t===_l.mapValue)return 0;if(e===_l.mapValue)return 1;if(t===_l.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=za(r[o],s[o]);if(0!==e)return e;const t=Tl(n[r[o]],i[s[o]]);if(0!==t)return t}return za(r.length,s.length)}(e.mapValue,t.mapValue);default:throw ka()}}function xl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return za(e,t);const n=fl(e),r=fl(t),i=za(n.seconds,r.seconds);return 0!==i?i:za(n.nanos,r.nanos)}function Cl(e){return Nl(e)}function Nl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=fl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ml(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Ya.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Nl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Nl(e.fields[i]));return n+"}"}(e.mapValue):ka();var t,n}function Al(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Pl(e){return!!e&&"integerValue"in e}function Ol(e){return!!e&&"arrayValue"in e}function Rl(e){return!!e&&"nullValue"in e}function Dl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ll(e){return!!e&&"mapValue"in e}function Ml(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return tl(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Ml(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ml(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Fl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function jl(e){return"nullValue"in e?El:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Al(bl.empty(),Ya.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ka()}function Ul(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Al(bl.empty(),Ya.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?_l:ka()}function Vl(e,t){const n=Tl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function zl(e,t){const n=Tl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Bl{constructor(e){this.value=e}static empty(){return new Bl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ll(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ml(t)}setAll(e){let t=$a.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ml(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ll(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ll(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){tl(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Bl(Ml(this.value))}}function ql(e){const t=[];return tl(e.fields,((e,n)=>{const r=new $a([e]);if(Ll(n)){const e=ql(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new ll(t)}class Kl{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Kl(e,0,Wa.min(),Wa.min(),Wa.min(),Bl.empty(),0)}static newFoundDocument(e,t,n,r){return new Kl(e,1,t,Wa.min(),n,r,0)}static newNoDocument(e,t){return new Kl(e,2,t,Wa.min(),Wa.min(),Bl.empty(),0)}static newUnknownDocument(e,t){return new Kl(e,3,t,Wa.min(),Wa.min(),Bl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Wa.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wa.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Kl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Wl{constructor(e,t){this.position=e,this.inclusive=t}}function Gl(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Ya.comparator(Ya.fromName(o.referenceValue),n.key):Tl(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Hl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Sl(e.position[n],t.position[n]))return!1;return!0}class Ql{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function $l(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Yl{}class Xl extends Yl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new au(e,t,n):"array-contains"===t?new hu(e,n):"in"===t?new du(e,n):"not-in"===t?new fu(e,n):"array-contains-any"===t?new pu(e,n):new Xl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new cu(e,n):new lu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Tl(t,this.value)):null!==t&&Il(this.value)===Il(t)&&this.matchesComparison(Tl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ka()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Jl extends Yl{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Jl(e,t)}matches(e){return Zl(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Zl(e){return"and"===e.op}function eu(e){return"or"===e.op}function tu(e){return nu(e)&&Zl(e)}function nu(e){for(const t of e.filters)if(t instanceof Jl)return!1;return!0}function ru(e){if(e instanceof Xl)return e.field.canonicalString()+e.op.toString()+Cl(e.value);if(tu(e))return e.filters.map((e=>ru(e))).join(",");{const t=e.filters.map((e=>ru(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function iu(e,t){return e instanceof Xl?function(e,t){return t instanceof Xl&&e.op===t.op&&e.field.isEqual(t.field)&&Sl(e.value,t.value)}(e,t):e instanceof Jl?function(e,t){return t instanceof Jl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&iu(n,t.filters[r])),!0)}(e,t):void ka()}function su(e,t){const n=e.filters.concat(t);return Jl.create(n,e.op)}function ou(e){return e instanceof Xl?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Cl(e.value))}(e):e instanceof Jl?function(e){return e.op.toString()+" {"+e.getFilters().map(ou).join(" ,")+"}"}(e):"Filter"}class au extends Xl{constructor(e,t,n){super(e,t,n),this.key=Ya.fromName(n.referenceValue)}matches(e){const t=Ya.comparator(e.key,this.key);return this.matchesComparison(t)}}class cu extends Xl{constructor(e,t){super(e,"in",t),this.keys=uu("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lu extends Xl{constructor(e,t){super(e,"not-in",t),this.keys=uu("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function uu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Ya.fromName(e.referenceValue)))}class hu extends Xl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ol(t)&&kl(t.arrayValue,this.value)}}class du extends Xl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&kl(this.value.arrayValue,t)}}class fu extends Xl{constructor(e,t){super(e,"not-in",t)}matches(e){if(kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!kl(this.value.arrayValue,t)}}class pu extends Xl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ol(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>kl(this.value.arrayValue,e)))}}class mu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.dt=null}}function gu(e){return new mu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function yu(e){const t=xa(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ru(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ec(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Cl(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Cl(e))).join(",")),t.dt=e}return t.dt}function vu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!$l(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!iu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Hl(e.startAt,t.startAt)&&Hl(e.endAt,t.endAt)}function wu(e){return Ya.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function bu(e,t){return e.filters.filter((e=>e instanceof Xl&&e.field.isEqual(t)))}function _u(e,t,n){let r=El,i=!0;for(const s of bu(e,t)){let e=El,t=!0;switch(s.op){case"<":case"<=":e=jl(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=El}Vl({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Vl({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Eu(e,t,n){let r=_l,i=!0;for(const s of bu(e,t)){let e=_l,t=!0;switch(s.op){case">=":case">":e=Ul(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=_l}zl({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];zl({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Iu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function Su(e,t,n,r,i,s,o,a){return new Iu(e,t,n,r,i,s,o,a)}function ku(e){return new Iu(e)}function Tu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function xu(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Cu(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Nu(e){return null!==e.collectionGroup}function Au(e){const t=xa(e);if(null===t.wt){t.wt=[];const e=Cu(t),n=xu(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new Ql(e)),t.wt.push(new Ql($a.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Ql($a.keyField(),e))}}}return t.wt}function Pu(e){const t=xa(e);if(!t._t)if("F"===t.limitType)t._t=gu(t.path,t.collectionGroup,Au(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of Au(t)){const t="desc"===i.dir?"asc":"desc";e.push(new Ql(i.field,t))}const n=t.endAt?new Wl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Wl(t.startAt.position,t.startAt.inclusive):null;t._t=gu(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function Ou(e,t){t.getFirstInequalityField(),Cu(e);const n=e.filters.concat([t]);return new Iu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ru(e,t,n){return new Iu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Du(e,t){return vu(Pu(e),Pu(t))&&e.limitType===t.limitType}function Lu(e){return"".concat(yu(Pu(e)),"|lt:").concat(e.limitType)}function Mu(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>ou(e))).join(", "),"]")),Ec(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Cl(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Cl(e))).join(",")),"Target(".concat(t,")")}(Pu(e)),"; limitType=").concat(e.limitType,")")}function Fu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ya.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Au(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Gl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Au(e),t))&&!(e.endAt&&!function(e,t,n){const r=Gl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Au(e),t))}(e,t)}function ju(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Uu(e){return(t,n)=>{let r=!1;for(const i of Au(e)){const e=Vu(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Vu(e,t,n){const r=e.field.isKeyField()?Ya.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Tl(r,i):ka()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ka()}}class zu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){tl(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return nl(this.inner)}size(){return this.innerSize}}const Bu=new rl(Ya.comparator);function qu(){return Bu}const Ku=new rl(Ya.comparator);function Wu(){let e=Ku;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Gu(e){let t=Ku;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Hu(){return $u()}function Qu(){return $u()}function $u(){return new zu((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Yu=new rl(Ya.comparator),Xu=new ol(Ya.comparator);function Ju(){let e=Xu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Zu=new ol(za);function eh(){return Zu}function th(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ic(t)?"-0":t}}function nh(e){return{integerValue:""+e}}function rh(e,t){return Sc(t)?nh(t):th(e,t)}class ih{constructor(){this._=void 0}}function sh(e,t,n){return e instanceof ch?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&gl(t)&&(t=yl(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof lh?uh(e,t):e instanceof hh?dh(e,t):function(e,t){const n=ah(e,t),r=ph(n)+ph(e.gt);return Pl(n)&&Pl(e.gt)?nh(r):th(e.serializer,r)}(e,t)}function oh(e,t,n){return e instanceof lh?uh(e,t):e instanceof hh?dh(e,t):n}function ah(e,t){return e instanceof fh?Pl(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class ch extends ih{}class lh extends ih{constructor(e){super(),this.elements=e}}function uh(e,t){const n=mh(t);for(const r of e.elements)n.some((e=>Sl(e,r)))||n.push(r);return{arrayValue:{values:n}}}class hh extends ih{constructor(e){super(),this.elements=e}}function dh(e,t){let n=mh(t);for(const r of e.elements)n=n.filter((e=>!Sl(e,r)));return{arrayValue:{values:n}}}class fh extends ih{constructor(e,t){super(),this.serializer=e,this.gt=t}}function ph(e){return pl(e.integerValue||e.doubleValue)}function mh(e){return Ol(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class gh{constructor(e,t){this.field=e,this.transform=t}}class yh{constructor(e,t){this.version=e,this.transformResults=t}}class vh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vh}static exists(e){return new vh(void 0,e)}static updateTime(e){return new vh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class bh{}function _h(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ph(e.key,vh.none()):new Th(e.key,e.data,vh.none());{const n=e.data,r=Bl.empty();let i=new ol($a.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new xh(e.key,r,new ll(i.toArray()),vh.none())}}function Eh(e,t,n){e instanceof Th?function(e,t,n){const r=e.value.clone(),i=Nh(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof xh?function(e,t,n){if(!wh(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Nh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ch(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ih(e,t,n,r){return e instanceof Th?function(e,t,n,r){if(!wh(e.precondition,t))return n;const i=e.value.clone(),s=Ah(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof xh?function(e,t,n,r){if(!wh(e.precondition,t))return n;const i=Ah(e.fieldTransforms,r,t),s=t.data;return s.setAll(Ch(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return wh(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Sh(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ah(r.transform,e||null);null!=i&&(null===n&&(n=Bl.empty()),n.set(r.field,i))}return n||null}function kh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ba(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof lh&&t instanceof lh||e instanceof hh&&t instanceof hh?Ba(e.elements,t.elements,Sl):e instanceof fh&&t instanceof fh?Sl(e.gt,t.gt):e instanceof ch&&t instanceof ch}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Th extends bh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class xh extends bh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ch(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Nh(e,t,n){const r=new Map;Ta(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,oh(o,a,n[i]))}return r}function Ah(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,sh(e,s,t))}return r}class Ph extends bh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Oh extends bh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Rh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Eh(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ih(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ih(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Qu();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=_h(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Wa.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ju())}isEqual(e){return this.batchId===e.batchId&&Ba(this.mutations,e.mutations,((e,t)=>kh(e,t)))&&Ba(this.baseMutations,e.baseMutations,((e,t)=>kh(e,t)))}}class Dh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ta(e.mutations.length===n.length);let r=Yu;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Dh(e,t,n,r)}}class Lh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Mh{constructor(e,t){this.count=e,this.unchangedNames=t}}var Fh,jh;function Uh(e){switch(e){default:return ka();case Ca.CANCELLED:case Ca.UNKNOWN:case Ca.DEADLINE_EXCEEDED:case Ca.RESOURCE_EXHAUSTED:case Ca.INTERNAL:case Ca.UNAVAILABLE:case Ca.UNAUTHENTICATED:return!1;case Ca.INVALID_ARGUMENT:case Ca.NOT_FOUND:case Ca.ALREADY_EXISTS:case Ca.PERMISSION_DENIED:case Ca.FAILED_PRECONDITION:case Ca.ABORTED:case Ca.OUT_OF_RANGE:case Ca.UNIMPLEMENTED:case Ca.DATA_LOSS:return!0}}function Vh(e){if(void 0===e)return Ea("GRPC error has no .code"),Ca.UNKNOWN;switch(e){case Fh.OK:return Ca.OK;case Fh.CANCELLED:return Ca.CANCELLED;case Fh.UNKNOWN:return Ca.UNKNOWN;case Fh.DEADLINE_EXCEEDED:return Ca.DEADLINE_EXCEEDED;case Fh.RESOURCE_EXHAUSTED:return Ca.RESOURCE_EXHAUSTED;case Fh.INTERNAL:return Ca.INTERNAL;case Fh.UNAVAILABLE:return Ca.UNAVAILABLE;case Fh.UNAUTHENTICATED:return Ca.UNAUTHENTICATED;case Fh.INVALID_ARGUMENT:return Ca.INVALID_ARGUMENT;case Fh.NOT_FOUND:return Ca.NOT_FOUND;case Fh.ALREADY_EXISTS:return Ca.ALREADY_EXISTS;case Fh.PERMISSION_DENIED:return Ca.PERMISSION_DENIED;case Fh.FAILED_PRECONDITION:return Ca.FAILED_PRECONDITION;case Fh.ABORTED:return Ca.ABORTED;case Fh.OUT_OF_RANGE:return Ca.OUT_OF_RANGE;case Fh.UNIMPLEMENTED:return Ca.UNIMPLEMENTED;case Fh.DATA_LOSS:return Ca.DATA_LOSS;default:return ka()}}(jh=Fh||(Fh={}))[jh.OK=0]="OK",jh[jh.CANCELLED=1]="CANCELLED",jh[jh.UNKNOWN=2]="UNKNOWN",jh[jh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jh[jh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jh[jh.NOT_FOUND=5]="NOT_FOUND",jh[jh.ALREADY_EXISTS=6]="ALREADY_EXISTS",jh[jh.PERMISSION_DENIED=7]="PERMISSION_DENIED",jh[jh.UNAUTHENTICATED=16]="UNAUTHENTICATED",jh[jh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jh[jh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jh[jh.ABORTED=10]="ABORTED",jh[jh.OUT_OF_RANGE=11]="OUT_OF_RANGE",jh[jh.UNIMPLEMENTED=12]="UNIMPLEMENTED",jh[jh.INTERNAL=13]="INTERNAL",jh[jh.UNAVAILABLE=14]="UNAVAILABLE",jh[jh.DATA_LOSS=15]="DATA_LOSS";class zh{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Bh}static getOrCreateInstance(){return null===Bh&&(Bh=new zh),Bh}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let Bh=null;function qh(){return new TextEncoder}const Kh=new ma([4294967295,4294967295],0);function Wh(e){const t=qh().encode(e),n=new pa;return n.update(t),new Uint8Array(n.digest())}function Gh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ma([n,r],0),new ma([i,s],0)]}class Hh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Qh("Invalid padding: ".concat(t));if(n<0)throw new Qh("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Qh("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Qh("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=ma.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(ma.fromNumber(n)));return 1===r.compare(Kh)&&(r=new ma([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Wh(e),[n,r]=Gh(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Hh(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.It)return;const t=Wh(e),[n,r]=Gh(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Qh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class $h{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Yh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new $h(Wa.min(),r,new rl(za),qu(),Ju())}}class Yh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Yh(n,t,Ju(),Ju(),Ju())}}class Xh{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class Jh{constructor(e,t){this.targetId=e,this.Vt=t}}class Zh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ed{constructor(){this.St=0,this.Dt=rd(),this.Ct=hl.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Ju(),t=Ju(),n=Ju();return this.Dt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ka()}})),new Yh(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=rd()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class td{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=qu(),this.zt=nd(),this.Wt=new rl(za)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:ka()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const s=i.target;if(wu(s))if(0===r){const e=new Ya(s.path);this.Yt(n,e,Kl.newNoDocument(e,Wa.min()))}else Ta(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=zh.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,s,o,a,c;const l={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(l.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(s=null===(i=null==u?void 0:u.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(c=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==c?c:0}),l}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,c;try{a=ml(i).toUint8Array()}catch(e){if(e instanceof ul)return Ia("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{c=new Hh(a,s,o)}catch(e){return Ia(e instanceof Qh?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===c.It?1:r!==t-this.oe(e.targetId,c)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Gt.ue(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());t.vt(s)||(this.Yt(e,n,null),r++)})),r}ce(e){const t=new Map;this.Qt.forEach(((n,r)=>{const i=this.se(r);if(i){if(n.current&&wu(i.target)){const t=new Ya(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,Kl.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}}));let n=Ju();this.zt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const r=new $h(e,t,this.Wt,this.jt,n);return this.jt=qu(),this.zt=nd(),this.Wt=new rl(za),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new ed,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new ol(za),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||_a("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new ed),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function nd(){return new rl(Ya.comparator)}function rd(){return new rl(Ya.comparator)}const id={asc:"ASCENDING",desc:"DESCENDING"},sd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},od={and:"AND",or:"OR"};class ad{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cd(e,t){return e.useProto3Json||Ec(t)?t:{value:t}}function ld(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ud(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function hd(e,t){return ld(e,t.toTimestamp())}function dd(e){return Ta(!!e),Wa.fromTimestamp(function(e){const t=fl(e);return new Ka(t.seconds,t.nanos)}(e))}function fd(e,t){return function(e){return new Ha(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function pd(e){const t=Ha.fromString(e);return Ta(Md(t)),t}function md(e,t){return fd(e.databaseId,t.path)}function gd(e,t){const n=pd(t);if(n.get(1)!==e.databaseId.projectId)throw new Na(Ca.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Na(Ca.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ya(bd(n))}function yd(e,t){return fd(e.databaseId,t)}function vd(e){const t=pd(e);return 4===t.length?Ha.emptyPath():bd(t)}function wd(e){return new Ha(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function bd(e){return Ta(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function _d(e,t,n){return{name:md(e,t),fields:n.value.mapValue.fields}}function Ed(e,t,n){const r=gd(e,t.name),i=dd(t.updateTime),s=t.createTime?dd(t.createTime):Wa.min(),o=new Bl({mapValue:{fields:t.fields}}),a=Kl.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Id(e,t){let n;if(t instanceof Th)n={update:_d(e,t.key,t.value)};else if(t instanceof Ph)n={delete:md(e,t.key)};else if(t instanceof xh)n={update:_d(e,t.key,t.data),updateMask:Ld(t.fieldMask)};else{if(!(t instanceof Oh))return ka();n={verify:md(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof ch)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof lh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof hh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof fh)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw ka()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:hd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ka()}(e,t.precondition)),n}function Sd(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?vh.updateTime(dd(e.updateTime)):void 0!==e.exists?vh.exists(e.exists):vh.none()}(t.currentDocument):vh.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Ta("REQUEST_TIME"===t.setToServerValue),n=new ch;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new lh(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new hh(e)}else"increment"in t?n=new fh(e,t.increment):ka();const r=$a.fromServerFormat(t.fieldPath);return new gh(r,n)}(e,t))):[];if(t.update){t.update.name;const i=gd(e,t.update.name),s=new Bl({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new ll(t.map((e=>$a.fromServerFormat(e))))}(t.updateMask);return new xh(i,s,e,n,r)}return new Th(i,s,n,r)}if(t.delete){const r=gd(e,t.delete);return new Ph(r,n)}if(t.verify){const r=gd(e,t.verify);return new Oh(r,n)}return ka()}function kd(e,t){return{documents:[yd(e,t.path)]}}function Td(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=yd(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=yd(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return Dd(Jl.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Od(e.field),direction:Nd(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=cd(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function xd(e){let t=vd(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ta(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Cd(e);return t instanceof Jl&&tu(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new Ql(Rd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ec(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new Wl(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new Wl(n,t)}(n.endAt)),Su(t,i,o,s,a,"F",c,l)}function Cd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Rd(e.unaryFilter.field);return Xl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Rd(e.unaryFilter.field);return Xl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Rd(e.unaryFilter.field);return Xl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Rd(e.unaryFilter.field);return Xl.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ka()}}(e):void 0!==e.fieldFilter?function(e){return Xl.create(Rd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ka()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Jl.create(e.compositeFilter.filters.map((e=>Cd(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ka()}}(e.compositeFilter.op))}(e):ka()}function Nd(e){return id[e]}function Ad(e){return sd[e]}function Pd(e){return od[e]}function Od(e){return{fieldPath:e.canonicalString()}}function Rd(e){return $a.fromServerFormat(e.fieldPath)}function Dd(e){return e instanceof Xl?function(e){if("=="===e.op){if(Dl(e.value))return{unaryFilter:{field:Od(e.field),op:"IS_NAN"}};if(Rl(e.value))return{unaryFilter:{field:Od(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Dl(e.value))return{unaryFilter:{field:Od(e.field),op:"IS_NOT_NAN"}};if(Rl(e.value))return{unaryFilter:{field:Od(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Od(e.field),op:Ad(e.op),value:e.value}}}(e):e instanceof Jl?function(e){const t=e.getFilters().map((e=>Dd(e)));return 1===t.length?t[0]:{compositeFilter:{op:Pd(e.op),filters:t}}}(e):ka()}function Ld(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Md(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Fd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Wa.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Wa.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:hl.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Fd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class jd{constructor(e){this.fe=e}}function Ud(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Vd(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:md(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ld(e,t.version.toTimestamp()),createTime:ld(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:zd(t.version)};else{if(!t.isUnknownDocument())return ka();r.unknownDocument={path:n.path.toArray(),version:zd(t.version)}}return r}function Vd(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function zd(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Bd(e){const t=new Ka(e.seconds,e.nanoseconds);return Wa.fromTimestamp(t)}function qd(e,t){const n=(t.baseMutations||[]).map((t=>Sd(e.fe,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Sd(e.fe,t))),i=Ka.fromMillis(t.localWriteTimeMs);return new Rh(t.batchId,i,n,r)}function Kd(e){const t=Bd(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Bd(e.lastLimboFreeSnapshotVersion):Wa.min();let r;var i;return void 0!==e.query.documents?(Ta(1===(i=e.query).documents.length),r=Pu(ku(vd(i.documents[0])))):r=function(e){return Pu(xd(e))}(e.query),new Fd(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,hl.fromBase64String(e.resumeToken))}function Wd(e,t){const n=zd(t.snapshotVersion),r=zd(t.lastLimboFreeSnapshotVersion);let i;i=wu(t.target)?kd(e.fe,t.target):Td(e.fe,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:yu(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Gd(e){const t=xd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ru(t,t.limit,"L"):t}function Hd(e,t){return new Lh(t.largestBatchId,Sd(e.fe,t.overlayMutation))}function Qd(e,t){const n=t.path.lastSegment();return[e,kc(t.path.popLast()),n]}function $d(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:zd(r.readTime),documentKey:kc(r.documentKey.path),largestBatchId:r.largestBatchId}}class Yd{getBundleMetadata(e,t){return Xd(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:Bd(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return Xd(e).put({bundleId:(n=t).id,createTime:zd(dd(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return Jd(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:Gd(t.bundledQuery),readTime:Bd(t.readTime)};var t}))}saveNamedQuery(e,t){return Jd(e).put(function(e){return{name:e.name,readTime:zd(dd(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Xd(e){return Zc(e,"bundles")}function Jd(e){return Zc(e,"namedQueries")}class Zd{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){const n=t.uid||"";return new Zd(e,n)}getOverlay(e,t){return ef(e).get(Qd(this.userId,t)).next((e=>e?Hd(this.serializer,e):null))}getOverlays(e,t){const n=Hu();return lc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Lh(t,i);r.push(this.we(e,s))})),lc.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(kc(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(ef(e).J("collectionPathOverlayIndex",r))})),lc.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Hu(),i=kc(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return ef(e).j("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=Hd(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Hu();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ef(e).X({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=Hd(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}we(e,t){return ef(e).put(function(e,t,n){const[r,i,s]=Qd(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Id(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}function ef(e){return Zc(e,"documentOverlays")}class tf{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(pl(e.integerValue));else if("doubleValue"in e){const n=pl(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Ic(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(ml(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?Fl(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ka()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),Ya.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function nf(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function rf(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=nf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}tf.Ve=new tf;class sf{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.De(n.value),n=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ne(n.value),n=t.next();this.ke()}Me(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.De(e);else if(e<2048)this.De(960|e>>>6),this.De(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.De(480|e>>>12),this.De(128|63&e>>>6),this.De(128|63&e);else{const e=t.codePointAt(0);this.De(240|e>>>18),this.De(128|63&e>>>12),this.De(128|63&e>>>6),this.De(128|63&e)}}this.Ce()}$e(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ne(e);else if(e<2048)this.Ne(960|e>>>6),this.Ne(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e);else{const e=t.codePointAt(0);this.Ne(240|e>>>18),this.Ne(128|63&e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e)}}this.ke()}Oe(e){const t=this.Fe(e),n=rf(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Le(e){const t=this.Fe(e),n=rf(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class of{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class af{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class cf{constructor(){this.je=new sf,this.ze=new of(this.je),this.We=new af(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class lf{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new lf(this.indexId,this.documentKey,this.arrayValue,n)}}function uf(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=hf(e.arrayValue,t.arrayValue),0!==n?n:(n=hf(e.directionalValue,t.directionalValue),0!==n?n:Ya.comparator(e.documentKey,t.documentKey)))}function hf(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class df{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const e=t;e.isInequality()?this.Ze=e:this.Xe.push(e)}}tn(e){Ta(e.collectionGroup===this.collectionId);const t=Ja(e);if(void 0!==t&&!this.en(t))return!1;const n=Za(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const e=n[i];if(!this.nn(this.Ze,e)||!this.sn(this.Ye[s++],e))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Ye.length||!this.sn(this.Ye[s++],e))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function ff(e){var t,n;if(Ta(e instanceof Xl||e instanceof Jl),e instanceof Xl){if(e instanceof du){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Xl.create(e.field,"==",t))))||[];return Jl.create(r,"or")}return e}const r=e.filters.map((e=>ff(e)));return Jl.create(r,e.op)}function pf(e){if(0===e.getFilters().length)return[];const t=vf(ff(e));return Ta(yf(t)),mf(t)||gf(t)?[t]:t.getFilters()}function mf(e){return e instanceof Xl}function gf(e){return e instanceof Jl&&tu(e)}function yf(e){return mf(e)||gf(e)||function(e){if(e instanceof Jl&&eu(e)){for(const t of e.getFilters())if(!mf(t)&&!gf(t))return!1;return!0}return!1}(e)}function vf(e){if(Ta(e instanceof Xl||e instanceof Jl),e instanceof Xl)return e;if(1===e.filters.length)return vf(e.filters[0]);const t=e.filters.map((e=>vf(e)));let n=Jl.create(t,e.op);return n=_f(n),yf(n)?n:(Ta(n instanceof Jl),Ta(Zl(n)),Ta(n.filters.length>1),n.filters.reduce(((e,t)=>wf(e,t))))}function wf(e,t){let n;return Ta(e instanceof Xl||e instanceof Jl),Ta(t instanceof Xl||t instanceof Jl),n=e instanceof Xl?t instanceof Xl?function(e,t){return Jl.create([e,t],"and")}(e,t):bf(e,t):t instanceof Xl?bf(t,e):function(e,t){if(Ta(e.filters.length>0&&t.filters.length>0),Zl(e)&&Zl(t))return su(e,t.getFilters());const n=eu(e)?e:t,r=eu(e)?t:e,i=n.filters.map((e=>wf(e,r)));return Jl.create(i,"or")}(e,t),_f(n)}function bf(e,t){if(Zl(t))return su(t,e.getFilters());{const n=t.filters.map((t=>wf(e,t)));return Jl.create(n,"or")}}function _f(e){if(Ta(e instanceof Xl||e instanceof Jl),e instanceof Xl)return e;const t=e.getFilters();if(1===t.length)return _f(t[0]);if(nu(e))return e;const n=t.map((e=>_f(e))),r=[];return n.forEach((t=>{t instanceof Xl?r.push(t):t instanceof Jl&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Jl.create(r,e.op)}class Ef{constructor(){this.rn=new If}addToCollectionParentIndex(e,t){return this.rn.add(t),lc.resolve()}getCollectionParents(e,t){return lc.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return lc.resolve()}deleteFieldIndex(e,t){return lc.resolve()}getDocumentsMatchingTarget(e,t){return lc.resolve(null)}getIndexType(e,t){return lc.resolve(0)}getFieldIndexes(e,t){return lc.resolve([])}getNextCollectionGroupToUpdate(e){return lc.resolve(null)}getMinOffset(e,t){return lc.resolve(ic.min())}getMinOffsetFromCollectionGroup(e,t){return lc.resolve(ic.min())}updateCollectionGroup(e,t,n){return lc.resolve()}updateIndexEntries(e,t){return lc.resolve()}}class If{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ol(Ha.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ol(Ha.comparator)).toArray()}}const Sf=new Uint8Array(0);class kf{constructor(e,t){this.user=e,this.databaseId=t,this.on=new If,this.un=new zu((e=>yu(e)),((e,t)=>vu(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.on.add(t)}));const i={collectionId:n,parent:kc(r)};return Tf(e).put(i)}return lc.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[qa(t),""],!1,!0);return Tf(e).j(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Cc(r.parent))}return n}))}addFieldIndex(e,t){const n=Cf(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Nf(e);return i.next((e=>{n.put($d(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Cf(e),r=Nf(e),i=xf(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}getDocumentsMatchingTarget(e,t){const n=xf(e);let r=!0;const i=new Map;return lc.forEach(this.cn(t),(t=>this.an(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Ju();const r=[];return lc.forEach(i,((i,s)=>{var o;_a("IndexedDbIndexManager","Using index ".concat((o=i,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(",")))," to execute ").concat(yu(t)));const a=function(e,t){const n=Ja(t);if(void 0===n)return null;for(const r of bu(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),c=function(e,t){const n=new Map;for(const r of Za(t))for(const t of bu(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Za(t)){const t=0===i.kind?_u(e,i.fieldPath,e.startAt):Eu(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Wl(n,r)}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of Za(t)){const t=0===i.kind?Eu(e,i.fieldPath,e.endAt):_u(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Wl(n,r)}(s,i),h=this.hn(i,s,l),d=this.hn(i,s,u),f=this.ln(i,s,c),p=this.fn(i.indexId,a,h,l.inclusive,d,u.inclusive,f);return lc.forEach(p,(i=>n.H(i,t.limit).next((t=>{t.forEach((t=>{const n=Ya.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return lc.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:pf(Jl.create(e.filters,"and")).map((t=>gu(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}fn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.dn(t[u/c]):Sf,h=this.wn(e,a,n[u%c],r),d=this._n(e,a,i[u%c],s),f=o.map((t=>this.wn(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}wn(e,t,n,r){const i=new lf(e,Ya.empty(),t,n);return r?i:i.Je()}_n(e,t,n,r){const i=new lf(e,Ya.empty(),t,n);return r?i.Je():i}an(e,t){const n=new df(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return lc.forEach(r,(t=>this.an(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new ol($a.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}mn(e,t){const n=new cf;for(const r of Za(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.He(r.kind);tf.Ve._e(e,i)}return n.Qe()}dn(e){const t=new cf;return tf.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const n=new cf;return tf.Ve._e(Al(this.databaseId,t),n.He(function(e){const t=Za(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}ln(e,t,n){if(null===n)return[];let r=[];r.push(new cf);let i=0;for(const s of Za(e)){const e=n[i++];for(const n of r)if(this.yn(t,s.fieldPath)&&Ol(e))r=this.pn(r,s,e);else{const t=n.He(s.kind);tf.Ve._e(e,t)}}return this.In(r)}hn(e,t,n){return this.ln(e,t,n.position)}In(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Qe();return t}pn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new cf;n.seed(e.Qe()),tf.Ve._e(s,n.He(t.kind)),i.push(n)}return i}yn(e,t){return!!e.filters.find((e=>e instanceof Xl&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Cf(e),r=Nf(e);return(t?n.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.j()).next((e=>{const t=[];return lc.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new tc(t.sequenceNumber,new ic(Bd(t.readTime),new Ya(Cc(t.documentKey)),t.largestBatchId)):tc.empty(),r=e.fields.map((e=>{let[t,n]=e;return new ec($a.fromServerFormat(t),n)}));return new Xa(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:za(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Cf(e),i=Nf(e);return this.Tn(e).next((e=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>lc.forEach(t,(t=>i.put($d(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return lc.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?lc.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),lc.forEach(i,(n=>this.En(e,t,n).next((t=>{const i=this.An(r,n);return t.isEqual(i)?lc.resolve():this.vn(e,r,n,t,i)})))))))}))}Rn(e,t,n,r){return xf(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,n,r){return xf(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}En(e,t,n){const r=xf(e);let i=new ol(uf);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},((e,r)=>{i=i.add(new lf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}An(e,t){let n=new ol(uf);const r=this.mn(t,e);if(null==r)return n;const i=Ja(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Ol(s))for(const i of s.arrayValue.values||[])n=n.add(new lf(t.indexId,e.key,this.dn(i),r))}else n=n.add(new lf(t.indexId,e.key,Sf,r));return n}vn(e,t,n,r,i){_a("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=cl(s),c=cl(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=cl(o)):t?(i(a),a=cl(s)):(a=cl(s),c=cl(o))}}(r,i,uf,(r=>{s.push(this.Rn(e,t,n,r))}),(r=>{s.push(this.Pn(e,t,n,r))})),lc.waitFor(s)}Tn(e){let t=1;return Nf(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>uf(e,t))).filter(((e,t,n)=>!t||0!==uf(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=uf(s,e),i=uf(s,t);if(0===n)r[0]=e.Je();else if(n>0&&i<0)r.push(s),r.push(s.Je());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Sf,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Sf,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return uf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Af)}getMinOffset(e,t){return lc.mapArray(this.cn(t),(t=>this.an(e,t).next((e=>e||ka())))).next(Af)}}function Tf(e){return Zc(e,"collectionParents")}function xf(e){return Zc(e,"indexEntries")}function Cf(e){return Zc(e,"indexConfiguration")}function Nf(e){return Zc(e,"indexState")}function Af(e){Ta(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;sc(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ic(t.readTime,t.documentKey,n)}const Pf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Of{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Of(e,Of.DEFAULT_COLLECTION_PERCENTILE,Of.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Rf(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.X({range:o},((e,t,n)=>(a++,n.delete())));s.push(c.next((()=>{Ta(1===a)})));const l=[];for(const u of n.mutations){const e=Pc(t,u.key.path,n.batchId);s.push(i.delete(e)),l.push(u.key)}return lc.waitFor(s).next((()=>l))}function Df(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ka();t=e.noDocument}return JSON.stringify(t).length}Of.DEFAULT_COLLECTION_PERCENTILE=10,Of.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Of.DEFAULT=new Of(41943040,Of.DEFAULT_COLLECTION_PERCENTILE,Of.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Of.DISABLED=new Of(-1,0,0);class Lf{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Vn={}}static de(e,t,n,r){Ta(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Lf(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ff(e).X({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=jf(e),s=Ff(e);return s.add({}).next((o=>{Ta("number"==typeof o);const a=new Rh(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>Id(e.fe,t))),i=n.mutations.map((t=>Id(e.fe,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let u=new ol(((e,t)=>za(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Pc(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(s.put(c)),l.push(i.put(t,Oc))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Vn[o]=a.keys()})),lc.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return Ff(e).get(t).next((e=>e?(Ta(e.userId===this.userId),qd(this.serializer,e)):null))}Sn(e,t){return this.Vn[t]?lc.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Vn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Ff(e).X({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Ta(t.batchId>=n),i=qd(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Ff(e).X({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ff(e).j("userMutationsIndex",t).next((e=>e.map((e=>qd(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Ac(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return jf(e).X({range:r},((n,r,s)=>{const[o,a,c]=n,l=Cc(a);if(o===this.userId&&t.path.isEqual(l))return Ff(e).get(c).next((e=>{if(!e)throw ka();Ta(e.userId===this.userId),i.push(qd(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ol(za);const r=[];return t.forEach((t=>{const i=Ac(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=jf(e).X({range:s},((e,r,i)=>{const[s,o,a]=e,c=Cc(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),lc.waitFor(r).next((()=>this.Dn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Ac(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new ol(za);return jf(e).X({range:s},((e,t,i)=>{const[s,a,c]=e,l=Cc(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()})).next((()=>this.Dn(e,o)))}Dn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Ff(e).get(t).next((e=>{if(null===e)throw ka();Ta(e.userId===this.userId),n.push(qd(this.serializer,e))})))})),lc.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Rf(e.ht,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Cn(t.batchId)})),lc.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return lc.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return jf(e).X({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Cc(e[1]);r.push(t)}else n.done()})).next((()=>{Ta(0===r.length)}))}))}containsKey(e,t){return Mf(e,this.userId,t)}xn(e){return Uf(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Mf(e,t,n){const r=Ac(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return jf(e).X({range:s,Y:!0},((e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Ff(e){return Zc(e,"mutations")}function jf(e){return Zc(e,"documentMutations")}function Uf(e){return Zc(e,"mutationQueues")}class Vf{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Vf(0)}static Mn(){return new Vf(-1)}}class zf{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next((t=>{const n=new Vf(t.highestTargetId);return t.highestTargetId=n.next(),this.On(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.$n(e).next((e=>Wa.fromTimestamp(new Ka(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.$n(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.$n(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r))))}addTargetData(e,t){return this.Fn(e,t).next((()=>this.$n(e).next((n=>(n.targetCount+=1,this.Bn(t,n),this.On(e,n))))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Bf(e).delete(t.targetId))).next((()=>this.$n(e))).next((t=>(Ta(t.targetCount>0),t.targetCount-=1,this.On(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Bf(e).X(((s,o)=>{const a=Kd(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>lc.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Bf(e).X(((e,n)=>{const r=Kd(n);t(r)}))}$n(e){return qf(e).get("targetGlobalKey").next((e=>(Ta(null!==e),e)))}On(e,t){return qf(e).put("targetGlobalKey",t)}Fn(e,t){return Bf(e).put(Wd(this.serializer,t))}Bn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.$n(e).next((e=>e.targetCount))}getTargetData(e,t){const n=yu(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Bf(e).X({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Kd(n);vu(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Kf(e);return t.forEach((t=>{const s=kc(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),lc.waitFor(r)}removeMatchingKeys(e,t,n){const r=Kf(e);return lc.forEach(t,(t=>{const i=kc(t.path);return lc.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Kf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Kf(e);let i=Ju();return r.X({range:n,Y:!0},((e,t,n)=>{const r=Cc(e[1]),s=new Ya(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=kc(t.path),r=IDBKeyRange.bound([n],[qa(n)],!1,!0);let i=0;return Kf(e).X({index:"documentTargetsIndex",Y:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}le(e,t){return Bf(e).get(t).next((e=>e?Kd(e):null))}}function Bf(e){return Zc(e,"targets")}function qf(e){return Zc(e,"targetGlobal")}function Kf(e){return Zc(e,"targetDocuments")}function Wf(e,t){let[n,r]=e,[i,s]=t;const o=za(n,i);return 0===o?za(r,s):o}class Gf{constructor(e){this.Ln=e,this.buffer=new ol(Wf),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Wf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Hf{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){_a("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){pc(e)?_a("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await cc(e)}await this.Qn(3e5)}))}}class Qf{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return lc.resolve(_c.ct);const n=new Gf(t);return this.jn.forEachTarget(e,(e=>n.Kn(e.sequenceNumber))).next((()=>this.jn.Wn(e,(e=>n.Kn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(_a("LruGarbageCollector","Garbage collection skipped; disabled"),lc.resolve(Pf)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(_a("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Pf):this.Hn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let n,r,i,s,o,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(_a("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),ba()<=jt.DEBUG&&_a("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),lc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function $f(e,t){return new Qf(e,t)}class Yf{constructor(e,t){this.db=e,this.garbageCollector=$f(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Jn(e){let t=0;return this.Wn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,((e,n)=>t(n)))}addReference(e,t,n){return Xf(e,n)}removeReference(e,t,n){return Xf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Xf(e,t)}Xn(e,t){return function(e,t){let n=!1;return Uf(e).Z((r=>Mf(e,r,t).next((e=>(e&&(n=!0),lc.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Yn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Wa.min()),Kf(e).delete([0,kc(s.path)]))))}));r.push(t)}})).next((()=>lc.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Xf(e,t)}Yn(e,t){const n=Kf(e);let r,i=_c.ct;return n.X({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:c}=n;0===s?(i!==_c.ct&&t(new Ya(Cc(r)),i),i=c,r=a):i=_c.ct})).next((()=>{i!==_c.ct&&t(new Ya(Cc(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Xf(e,t){return Kf(e).put(function(e,t){return{targetId:0,path:kc(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Jf{constructor(){this.changes=new zu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?lc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Zf{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return rp(e).put(n)}removeEntry(e,t,n){return rp(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Vd(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Zn(e,n))))}getEntry(e,t){let n=Kl.newInvalidDocument(t);return rp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ip(t))},((e,r)=>{n=this.ts(t,r)})).next((()=>n))}es(e,t){let n={size:0,document:Kl.newInvalidDocument(t)};return rp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ip(t))},((e,r)=>{n={document:this.ts(t,r),size:Df(r)}})).next((()=>n))}getEntries(e,t){let n=qu();return this.ns(e,t,((e,t)=>{const r=this.ts(e,t);n=n.insert(e,r)})).next((()=>n))}ss(e,t){let n=qu(),r=new rl(Ya.comparator);return this.ns(e,t,((e,t)=>{const i=this.ts(e,t);n=n.insert(e,i),r=r.insert(e,Df(t))})).next((()=>({documents:n,rs:r})))}ns(e,t,n){if(t.isEmpty())return lc.resolve();let r=new ol(op);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(ip(r.first()),ip(r.last())),s=r.getIterator();let o=s.getNext();return rp(e).X({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Ya.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&op(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.G(ip(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r){const i=t.path,s=[i.popLast().toArray(),i.lastSegment(),Vd(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return rp(e).j(IDBKeyRange.bound(s,o,!0)).next((e=>{let n=qu();for(const i of e){const e=this.ts(Ya.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Fu(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=qu();const s=sp(t,n),o=sp(t,ic.max());return rp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.ts(Ya.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new tp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return np(e).get("remoteDocumentGlobalKey").next((e=>(Ta(!!e),e)))}Zn(e,t){return np(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Ed(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Ya.fromSegments(t.noDocument.path),r=Bd(t.noDocument.readTime);n=Kl.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ka();{const e=Ya.fromSegments(t.unknownDocument.path),r=Bd(t.unknownDocument.version);n=Kl.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Ka(e[0],e[1]);return Wa.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Wa.min()))return e}return Kl.newInvalidDocument(e)}}function ep(e){return new Zf(e)}class tp extends Jf{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new zu((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new ol(((e,t)=>za(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.us.get(i);if(t.push(this.os.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Ud(this.os.serializer,s);r=r.add(i.path.popLast());const c=Df(a);n+=c-o.size,t.push(this.os.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Ud(this.os.serializer,s.convertToNoDocument(Wa.min()));t.push(this.os.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.os.updateMetadata(e,n)),lc.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next((e=>(this.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.os.ss(e,t).next((e=>{let{documents:t,rs:n}=e;return n.forEach(((e,n)=>{this.us.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function np(e){return Zc(e,"remoteDocumentGlobal")}function rp(e){return Zc(e,"remoteDocumentsV14")}function ip(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function sp(e,t){const n=t.documentKey.path.toArray();return[e,Vd(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function op(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=za(n[s],r[s]),i)return i;return i=za(n.length,r.length),i||(i=za(n[n.length-2],r[r.length-2]),i||za(n[n.length-1],r[r.length-1]))}class ap{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class cp{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Ih(n.mutation,e,ll.empty(),Ka.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Ju()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ju();const r=Hu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Wu();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Hu();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ju())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=qu();const s=$u(),o=$u();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof xh)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Ih(o.mutation,t,o.mutation.getFieldMask(),Ka.now())):s.set(t.key,ll.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new ap(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=$u();let r=new rl(((e,t)=>e-t)),i=Ju();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||ll.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Ju()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=Qu();c.forEach((e=>{if(!i.has(e)){const r=_h(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return lc.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return Ya.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Nu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):lc.resolve(Hu());let o=-1,a=i;return s.next((t=>lc.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?lc.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Ju()))).next((e=>({batchId:o,changes:Gu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ya(t)).next((e=>{let t=Wu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=Wu();return this.indexManager.getCollectionParents(e,r).next((s=>lc.forEach(s,(s=>{const o=function(e,t){return new Iu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Kl.newInvalidDocument(r)))}));let n=Wu();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&Ih(s.mutation,i,ll.empty(),Ka.now()),Fu(t,i)&&(n=n.insert(e,i))})),n}))}}class lp{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return lc.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:dd(n.createTime)}),lc.resolve()}getNamedQuery(e,t){return lc.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Gd(e.bundledQuery),readTime:dd(e.readTime)}}(t)),lc.resolve()}}class up{constructor(){this.overlays=new rl(Ya.comparator),this.ls=new Map}getOverlay(e,t){return lc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Hu();return lc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.we(e,t,r)})),lc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),lc.resolve()}getOverlaysForCollection(e,t,n){const r=Hu(),i=t.length+1,s=new Ya(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return lc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new rl(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Hu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Hu(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return lc.resolve(o)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Lh(t,n));let i=this.ls.get(t);void 0===i&&(i=Ju(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class hp{constructor(){this.fs=new ol(dp.ds),this.ws=new ol(dp._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new dp(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new dp(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new Ya(new Ha([])),n=new dp(t,e),r=new dp(t,e+1),i=[];return this.ws.forEachInRange([n,r],(e=>{this.ys(e),i.push(e.key)})),i}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ya(new Ha([])),n=new dp(t,e),r=new dp(t,e+1);let i=Ju();return this.ws.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new dp(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class dp{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ya.comparator(e.key,t.key)||za(e.As,t.As)}static _s(e,t){return za(e.As,t.As)||Ya.comparator(e.key,t.key)}}class fp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new ol(dp.ds)}checkEmpty(e){return lc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Rh(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Rs=this.Rs.add(new dp(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return lc.resolve(s)}lookupMutationBatch(e,t){return lc.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return lc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return lc.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return lc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new dp(t,0),r=new dp(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],(e=>{const t=this.Ps(e.As);i.push(t)})),lc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ol(za);return t.forEach((e=>{const t=new dp(e,0),r=new dp(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],(e=>{n=n.add(e.As)}))})),lc.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ya.isDocumentKey(i)||(i=i.child(""));const s=new dp(new Ya(i),0);let o=new ol(za);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),s),lc.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ta(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return lc.forEach(t.mutations,(r=>{const i=new dp(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new dp(t,0),r=this.Rs.firstAfterOrEqual(n);return lc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,lc.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class pp{constructor(e){this.Ds=e,this.docs=new rl(Ya.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return lc.resolve(n?n.document.mutableCopy():Kl.newInvalidDocument(t))}getEntries(e,t){let n=qu();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Kl.newInvalidDocument(e))})),lc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=qu();const s=t.path,o=new Ya(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||sc(rc(o),n)<=0||(r.has(o.key)||Fu(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return lc.resolve(i)}getAllFromCollectionGroup(e,t,n,r){ka()}Cs(e,t){return lc.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new mp(this)}getSize(e){return lc.resolve(this.size)}}class mp extends Jf{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)})),lc.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class gp{constructor(e){this.persistence=e,this.xs=new zu((e=>yu(e)),vu),this.lastRemoteSnapshotVersion=Wa.min(),this.highestTargetId=0,this.Ns=0,this.ks=new hp,this.targetCount=0,this.Ms=Vf.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),lc.resolve()}getLastRemoteSnapshotVersion(e){return lc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return lc.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),lc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),lc.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Vf(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,lc.resolve()}updateTargetData(e,t){return this.Fn(t),lc.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,lc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),lc.waitFor(i).next((()=>r))}getTargetCount(e){return lc.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return lc.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),lc.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),lc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),lc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return lc.resolve(n)}containsKey(e,t){return lc.resolve(this.ks.containsKey(t))}}class yp{constructor(e,t){this.$s={},this.overlays={},this.Os=new _c(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new gp(this),this.indexManager=new Ef,this.remoteDocumentCache=function(e){return new pp(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new jd(t),this.qs=new lp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new up,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new fp(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){_a("MemoryPersistence","Starting transaction:",e);const r=new vp(this.Os.next());return this.referenceDelegate.Us(),n(r).next((e=>this.referenceDelegate.Ks(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gs(e,t){return lc.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class vp extends ac{constructor(e){super(),this.currentSequenceNumber=e}}class wp{constructor(e){this.persistence=e,this.Qs=new hp,this.js=null}static zs(e){return new wp(e)}get Ws(){if(this.js)return this.js;throw ka()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),lc.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),lc.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),lc.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lc.forEach(this.Ws,(n=>{const r=Ya.fromPath(n);return this.Hs(e,r).next((e=>{e||t.removeEntry(r,Wa.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return lc.or([()=>lc.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class bp{constructor(e){this.serializer=e}O(e,t,n,r){const i=new uc("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nc,{unique:!0}),e.createObjectStore("documentMutations")}(e),_p(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=lc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),_p(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Wa.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").j().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nc,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return lc.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Ys(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(i))))),n<7&&r>=7&&(s=s.next((()=>this.Zs(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ei(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Kc});t.createIndex("collectionPathOverlayIndex",Wc,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Gc,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Rc});t.createIndex("documentKeyIndex",Dc),t.createIndex("collectionGroupIndex",Lc)}(e))).next((()=>this.ni(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Vc}).createIndex("sequenceNumberIndex",zc,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Bc}).createIndex("documentKeyIndex",qc,{unique:!1})}(e)))),s}Xs(e){let t=0;return e.store("remoteDocuments").X(((e,n)=>{t+=Df(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Ys(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.j().next((t=>lc.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.j("userMutationsIndex",r).next((n=>lc.forEach(n,(n=>{Ta(n.userId===t.userId);const r=qd(this.serializer,n);return Rf(e,t.userId,r).next((()=>{}))}))))}))))}Zs(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.X(((n,i)=>{const s=new Ha(n),o=function(e){return[0,kc(e)]}(s);r.push(t.get(o).next((n=>n?lc.resolve():(n=>t.put({targetId:0,path:kc(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>lc.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Uc});const n=t.store("collectionParents"),r=new If,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:kc(r)})}};return t.store("remoteDocuments").X({Y:!0},((e,t)=>{const n=new Ha(e);return i(n.popLast())})).next((()=>t.store("documentMutations").X({Y:!0},((e,t)=>{let[n,r,s]=e;const o=Cc(r);return i(o.popLast())}))))}ei(e){const t=e.store("targets");return t.X(((e,n)=>{const r=Kd(n),i=Wd(this.serializer,r);return t.put(i)}))}ni(e,t){const n=t.store("remoteDocuments"),r=[];return n.X(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=(o=n,o.document?new Ya(Ha.fromString(o.document.name).popFirst(5)):o.noDocument?Ya.fromSegments(o.noDocument.path):o.unknownDocument?Ya.fromSegments(o.unknownDocument.path):ka()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))})).next((()=>lc.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=ep(this.serializer),i=new yp(wp.zs,this.serializer.fe);return n.j().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Ju();qd(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),lc.forEach(n,((e,n)=>{const s=new ya(n),o=Zd.de(this.serializer,s),a=i.getIndexManager(s),c=Lf.de(s,this.serializer,a,i.referenceDelegate);return new cp(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Jc(t,_c.ct),e).next()}))}))}}function _p(e){e.createObjectStore("targetDocuments",{keyPath:Fc}).createIndex("documentTargetsIndex",jc,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Mc,{unique:!0}),e.createObjectStore("targetGlobal")}const Ep="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ip{constructor(e,t,n,r,i,s,o,a,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ii=i,this.window=s,this.document=o,this.ri=c,this.oi=l,this.ui=u,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=e=>Promise.resolve(),!Ip.D())throw new Na(Ca.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Yf(this,r),this.di=t+"main",this.serializer=new jd(a),this.wi=new hc(this.di,this.ui,new bp(this.serializer)),this.Bs=new zf(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ep(this.serializer),this.qs=new Yd,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&Ea("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Na(Ca.FAILED_PRECONDITION,Ep);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Bs.getHighestSequenceNumber(e)))})).then((e=>{this.Os=new _c(e,this.ri)})).then((()=>{this.Fs=!0})).catch((e=>(this.wi&&this.wi.close(),Promise.reject(e))))}Ii(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>kp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ti(e).next((e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))))}))})).next((()=>this.Ei(e))).next((t=>this.isPrimary&&!t?this.Ai(e).next((()=>!1)):!!t&&this.vi(e).next((()=>!0)))))).catch((e=>{if(pc(e))return _a("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return _a("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ii.enqueueRetryable((()=>this.fi(e))),this.isPrimary=e}))}Ti(e){return Sp(e).get("owner").next((e=>lc.resolve(this.Ri(e))))}Pi(e){return kp(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Zc(e,"clientMetadata");return t.j().next((e=>{const n=this.Si(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return lc.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this._i)for(const t of e)this._i.removeItem(this.Di(t.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.bi())).then((()=>this.pi()))))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?lc.resolve(!0):Sp(e).get("owner").next((t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Na(Ca.FAILED_PRECONDITION,Ep);return!1}}return!(!this.networkEnabled||!this.inForeground)||kp(e).j().next((e=>void 0===this.Si(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&_a("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Jc(e,_c.ct);return this.Ai(t).next((()=>this.Pi(t)))})),this.wi.close(),this.Mi()}Si(e,t){return e.filter((e=>this.Vi(e.updateTimeMs,t)&&!this.Ci(e.clientId)))}$i(){return this.runTransaction("getActiveClients","readonly",(e=>kp(e).j().next((e=>this.Si(e,18e5).map((e=>e.clientId))))))}get started(){return this.Fs}getMutationQueue(e,t){return Lf.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new kf(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Zd.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,n){_a("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=15===(s=this.ui)?Xc:14===s?Yc:13===s?$c:12===s?Qc:11===s?Hc:void ka();var s;let o;return this.wi.runTransaction(e,r,i,(r=>(o=new Jc(r,this.Os?this.Os.next():_c.ct),"readwrite-primary"===t?this.Ti(o).next((e=>!!e||this.Ei(o))).next((t=>{if(!t)throw Ea("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))),new Na(Ca.FAILED_PRECONDITION,oc);return n(o)})).next((e=>this.vi(o).next((()=>e)))):this.Oi(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}Oi(e){return Sp(e).get("owner").next((e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Na(Ca.FAILED_PRECONDITION,Ep)}))}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Sp(e).put("owner",t)}static D(){return hc.D()}Ai(e){const t=Sp(e);return t.get("owner").next((e=>this.Ri(e)?(_a("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):lc.resolve()))}Vi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Ea("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.mi())))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;!pt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return _a("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ea("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Ea("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Sp(e){return Zc(e,"owner")}function kp(e){return Zc(e,"clientMetadata")}function Tp(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class xp{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=Ju(),r=Ju();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new xp(e,t.fromCache,n,r)}}class Cp{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next((i=>i||this.Gi(e,t,r,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(Tu(t))return lc.resolve(null);let n=Pu(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Ru(t,null,"F"),n=Pu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Ju(...r);return this.Ui.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ji(t,r);return this.zi(t,s,i,n.readTime)?this.Ki(e,Ru(t,null,"F")):this.Wi(e,s,t,n)}))))})))))}Gi(e,t,n,r){return Tu(t)||r.isEqual(Wa.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((i=>{const s=this.ji(t,i);return this.zi(t,s,n,r)?this.Qi(e,t):(ba()<=jt.DEBUG&&_a("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Mu(t)),this.Wi(e,s,t,nc(r,-1)))}))}ji(e,t){let n=new ol(Uu(e));return t.forEach(((t,r)=>{Fu(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return ba()<=jt.DEBUG&&_a("QueryEngine","Using full collection scan to execute query:",Mu(t)),this.Ui.getDocumentsMatchingQuery(e,t,ic.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Np{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new rl(za),this.Yi=new zu((e=>yu(e)),vu),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cp(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function Ap(e,t,n,r){return new Np(e,t,n,r)}async function Pp(e,t){const n=xa(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Ju();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({er:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Op(e){const t=xa(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function Rp(e,t,n){let r=Ju(),i=Ju();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=qu();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Wa.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):_a("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{nr:r,sr:i}}))}function Dp(e,t){const n=xa(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Lp(e,t){const n=xa(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Bs.getTargetData(e,t).next((i=>i?(r=i,lc.resolve(r)):n.Bs.allocateTargetId(e).next((i=>(r=new Fd(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function Mp(e,t,n){const r=xa(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!pc(e))throw e;_a("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function Fp(e,t,n){const r=xa(e);let i=Wa.min(),s=Ju();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=xa(e),i=r.Yi.get(n);return void 0!==i?lc.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Pu(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:Wa.min(),n?s:Ju()))).next((e=>(Vp(r,ju(t),e),{documents:e,ir:s})))))}function jp(e,t){const n=xa(e),r=xa(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.le(e,t).next((e=>e?e.target:null))))}function Up(e,t){const n=xa(e),r=n.Xi.get(t)||Wa.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.Zi.getAllFromCollectionGroup(e,t,nc(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Vp(n,t,e),e)))}function Vp(e,t,n){let r=e.Xi.get(t)||Wa.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}async function zp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ju();const r=await Lp(e,Pu(Gd(t.bundledQuery))),i=xa(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=dd(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.qs.saveNamedQuery(e,t);const o=r.withResumeToken(hl.EMPTY_BYTE_STRING,s);return i.Ji=i.Ji.insert(o.targetId,o),i.Bs.updateTargetData(e,o).next((()=>i.Bs.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Bs.addMatchingKeys(e,n,r.targetId))).next((()=>i.qs.saveNamedQuery(e,t)))}))}function Bp(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function qp(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Kp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Wp{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static ar(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Na(r.error.code,r.error.message))),s?new Wp(e,t,r.state,i):(Ea("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gp{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static ar(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Na(n.error.code,n.error.message))),i?new Gp(e,n.state,r):(Ea("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=eh();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Sc(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Hp(e,i):(Ea("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Qp{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Qp(t.clientId,t.onlineState):(Ea("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class $p{constructor(){this.activeTargetIds=eh()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yp{constructor(e,t,n,r,i){this.window=e,this.ii=t,this.persistenceKey=n,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new rl(za),this.started=!1,this.yr=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.pr=Bp(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new $p),this.Tr=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const n of e){if(n===this.wr)continue;const e=this.getItem(Bp(this.persistenceKey,n));if(e){const t=Hp.ar(n,e);t&&(this.gr=this.gr.insert(t.clientId,t))}}this.Pr();const t=this.storage.getItem(this.vr);if(t){const e=this.br(t);e&&this.Vr(e)}for(const n of this.yr)this.mr(n);this.yr=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,n){this.Dr(e,t,n),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Kp(this.persistenceKey,e));if(n){const r=Gp.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Kp(this.persistenceKey,e))}updateQueryState(e,t,n){this.kr(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Cr(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return _a("SharedClientState","READ",e,t),t}setItem(e,t){_a("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){_a("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){const t=e;if(t.storageArea===this.storage){if(_a("SharedClientState","EVENT",t.key,t.newValue),t.key===this.pr)return void Ea("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Tr.test(t.key)){if(null==t.newValue){const e=this.Or(t.key);return this.Fr(e,null)}{const e=this.Br(t.key,t.newValue);if(e)return this.Fr(e.clientId,e)}}else if(this.Er.test(t.key)){if(null!==t.newValue){const e=this.Lr(t.key,t.newValue);if(e)return this.qr(e)}}else if(this.Ar.test(t.key)){if(null!==t.newValue){const e=this.Ur(t.key,t.newValue);if(e)return this.Kr(e)}}else if(t.key===this.vr){if(null!==t.newValue){const e=this.br(t.newValue);if(e)return this.Vr(e)}}else if(t.key===this.Ir){const e=function(e){let t=_c.ct;if(null!=e)try{const n=JSON.parse(e);Ta("number"==typeof n),t=n}catch(e){Ea("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==_c.ct&&this.sequenceNumberHandler(e)}else if(t.key===this.Rr){const e=this.Gr(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Qr(e))))}}else this.yr.push(t)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,n){const r=new Wp(this.currentUser,e,t,n),i=qp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}Cr(e){const t=qp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){const t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}kr(e,t,n){const r=Kp(this.persistenceKey,e),i=new Gp(e,t,n);this.setItem(r,i.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const n=this.Or(e);return Hp.ar(n,t)}Lr(e,t){const n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Wp.ar(new ya(i),r,t)}Ur(e,t){const n=this.Ar.exec(e),r=Number(n[1]);return Gp.ar(r,t)}br(e){return Qp.ar(e)}Gr(e){return JSON.parse(e)}async qr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.jr(e.batchId,e.state,e.error);_a("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const n=t?this.gr.insert(e,t):this.gr.remove(e),r=this.Sr(this.gr),i=this.Sr(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Wr(s,o).then((()=>{this.gr=n}))}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=eh();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Xp{constructor(){this.Hr=new $p,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new $p,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Jp{Yr(e){}shutdown(){}}class Zp{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){_a("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){_a("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let em=null;function tm(){return null===em?em=268435456+Math.round(2147483648*Math.random()):em++,"0x"+em.toString(16)}const nm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rm{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const im="WebChannelConnection";class sm extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const s=tm(),o=this.To(e,t);_a("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={};return this.Eo(a,r,i),this.Ao(e,o,a,n).then((t=>(_a("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Ia("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+va,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=nm[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=tm();return new Promise(((s,o)=>{const a=new fa;a.setWithCredentials(!0),a.listenOnce(ca.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case aa.NO_ERROR:const t=a.getResponseJson();_a(im,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case aa.TIMEOUT:_a(im,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Na(Ca.DEADLINE_EXCEEDED,"Request time out"));break;case aa.HTTP_ERROR:const n=a.getStatus();if(_a(im,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ca).indexOf(t)>=0?t:Ca.UNKNOWN}(t.status);o(new Na(e,t.message))}else o(new Na(Ca.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Na(Ca.UNAVAILABLE,"Connection failed."));break;default:ka()}}finally{_a(im,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);_a(im,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)}))}Ro(e,t,n){const r=tm(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=sa(),o=oa(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new ha({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");_a(im,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new rm({ro:t=>{d?_a(im,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(_a(im,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),_a(im,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,da.EventType.OPEN,(()=>{d||_a(im,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,da.EventType.CLOSE,(()=>{d||(d=!0,_a(im,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())})),p(u,da.EventType.ERROR,(t=>{d||(d=!0,Ia(im,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new Na(Ca.UNAVAILABLE,"The operation could not be completed")))})),p(u,da.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Ta(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){_a(im,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Fh[e];if(void 0!==t)return Vh(t)}(t),i=o.message;void 0===n&&(n=Ca.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.wo(new Na(n,i)),u.close()}else _a(im,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f._o(i)}})),p(o,la.STAT_EVENT,(t=>{t.stat===ua.PROXY?_a(im,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===ua.NOPROXY&&_a(im,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function om(){return"undefined"!=typeof window?window:null}function am(){return"undefined"!=typeof document?document:null}function cm(e){return new ad(e,!0)}class lm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&_a("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class um{constructor(e,t,n,r,i,s,o,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new lm(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===Ca.RESOURCE_EXHAUSTED?(Ea(t.toString()),Ea("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===Ca.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)}),(t=>{e((()=>{const e=new Na(Ca.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return _a("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(_a("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class hm extends um{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ka()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ta(void 0===t||"string"==typeof t),hl.fromBase64String(t||"")):(Ta(void 0===t||t instanceof Uint8Array),hl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Ca.UNKNOWN:Vh(e.code);return new Na(t,e.message||"")}(o);n=new Zh(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=gd(e,r.document.name),s=dd(r.document.updateTime),o=r.document.createTime?dd(r.document.createTime):Wa.min(),a=new Bl({mapValue:{fields:r.document.fields}}),c=Kl.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Xh(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=gd(e,r.document),s=r.readTime?dd(r.readTime):Wa.min(),o=Kl.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Xh([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=gd(e,r.document),s=r.removedTargetIds||[];n=new Xh([],s,i,null)}else{if(!("filter"in t))return ka();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Mh(r,i),o=e.targetId;n=new Jh(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Wa.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Wa.min():t.readTime?dd(t.readTime):Wa.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=wd(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=wu(r)?{documents:kd(e,r)}:{query:Td(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ud(e,t.resumeToken);const r=cd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Wa.min())>0){n.readTime=ld(e,t.snapshotVersion.toTimestamp());const r=cd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ka()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=wd(this.serializer),t.removeTarget=e,this.Wo(t)}}class dm extends um{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Ta(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Ta(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?dd(e.updateTime):dd(t);return n.isEqual(Wa.min())&&(n=dd(t)),new yh(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=dd(e.commitTime);return this.listener.cu(n,t)}return Ta(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=wd(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Id(this.serializer,e)))};this.Wo(t)}}class fm extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Na(Ca.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.Io(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ca.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Na(Ca.UNKNOWN,e.toString())}))}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.vo(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ca.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Na(Ca.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class pm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Ea(t),this.mu=!1):_a("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class mm{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{Sm(this)&&(_a("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=xa(e);t.vu.add(4),await ym(t),t.bu.set("Unknown"),t.vu.delete(4),await gm(t)}(this))}))})),this.bu=new pm(n,r)}}async function gm(e){if(Sm(e))for(const t of e.Ru)await t(!0)}async function ym(e){for(const t of e.Ru)await t(!1)}function vm(e,t){const n=xa(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Im(n)?Em(n):Bm(n).Ko()&&bm(n,t))}function wm(e,t){const n=xa(e),r=Bm(n);n.Au.delete(t),r.Ko()&&_m(n,t),0===n.Au.size&&(r.Ko()?r.jo():Sm(n)&&n.bu.set("Unknown"))}function bm(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Wa.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Bm(e).su(t)}function _m(e,t){e.Vu.qt(t),Bm(e).iu(t)}function Em(e){e.Vu=new td({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),Bm(e).start(),e.bu.gu()}function Im(e){return Sm(e)&&!Bm(e).Uo()&&e.Au.size>0}function Sm(e){return 0===xa(e).vu.size}function km(e){e.Vu=void 0}async function Tm(e){e.Au.forEach(((t,n)=>{bm(e,t)}))}async function xm(e,t){km(e),Im(e)?(e.bu.Iu(t),Em(e)):e.bu.set("Unknown")}async function Cm(e,t,n){if(e.bu.set("Online"),t instanceof Zh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){_a("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Nm(e,n)}else if(t instanceof Xh?e.Vu.Ht(t):t instanceof Jh?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Wa.min()))try{const t=await Op(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(hl.EMPTY_BYTE_STRING,r.snapshotVersion)),_m(e,t);const i=new Fd(r.target,t,n,r.sequenceNumber);bm(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){_a("RemoteStore","Failed to raise snapshot:",t),await Nm(e,t)}}async function Nm(e,t,n){if(!pc(t))throw t;e.vu.add(1),await ym(e),e.bu.set("Offline"),n||(n=()=>Op(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{_a("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await gm(e)}))}function Am(e,t){return t().catch((n=>Nm(e,n,t)))}async function Pm(e){const t=xa(e),n=qm(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;Om(t);)try{const e=await Dp(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,Rm(t,e)}catch(e){await Nm(t,e)}Dm(t)&&Lm(t)}function Om(e){return Sm(e)&&e.Eu.length<10}function Rm(e,t){e.Eu.push(t);const n=qm(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Dm(e){return Sm(e)&&!qm(e).Uo()&&e.Eu.length>0}function Lm(e){qm(e).start()}async function Mm(e){qm(e).hu()}async function Fm(e){const t=qm(e);for(const n of e.Eu)t.uu(n.mutations)}async function jm(e,t,n){const r=e.Eu.shift(),i=Dh.from(r,t,n);await Am(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Pm(e)}async function Um(e,t){t&&qm(e).ou&&await async function(e,t){if(Uh(n=t.code)&&n!==Ca.ABORTED){const n=e.Eu.shift();qm(e).Qo(),await Am(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Pm(e)}var n}(e,t),Dm(e)&&Lm(e)}async function Vm(e,t){const n=xa(e);n.asyncQueue.verifyOperationInProgress(),_a("RemoteStore","RemoteStore received new credentials");const r=Sm(n);n.vu.add(3),await ym(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await gm(n)}async function zm(e,t){const n=xa(e);t?(n.vu.delete(2),await gm(n)):t||(n.vu.add(2),await ym(n),n.bu.set("Unknown"))}function Bm(e){return e.Su||(e.Su=function(e,t,n){const r=xa(e);return r.fu(),new hm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Tm.bind(null,e),ao:xm.bind(null,e),nu:Cm.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),Im(e)?Em(e):e.bu.set("Unknown")):(await e.Su.stop(),km(e))}))),e.Su}function qm(e){return e.Du||(e.Du=function(e,t,n){const r=xa(e);return r.fu(),new dm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Mm.bind(null,e),ao:Um.bind(null,e),au:Fm.bind(null,e),cu:jm.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await Pm(e)):(await e.Du.stop(),e.Eu.length>0&&(_a("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))}))),e.Du}class Km{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Aa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Km(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Na(Ca.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wm(e,t){if(Ea("AsyncQueue","".concat(t,": ").concat(e)),pc(e))return new Na(Ca.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Gm{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ya.comparator(t.key,n.key):(e,t)=>Ya.comparator(e.key,t.key),this.keyedMap=Wu(),this.sortedSet=new rl(this.comparator)}static emptySet(e){return new Gm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Gm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Gm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Hm{constructor(){this.Cu=new rl(Ya.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ka():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Qm{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Qm(e,t,Gm.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Du(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class $m{constructor(){this.Nu=void 0,this.listeners=[]}}class Ym{constructor(){this.queries=new zu((e=>Lu(e)),Du),this.onlineState="Unknown",this.ku=new Set}}async function Xm(e,t){const n=xa(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new $m),i)try{s.Nu=await n.onListen(r)}catch(e){const n=Wm(e,"Initialization of query '".concat(Mu(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&tg(n)}async function Jm(e,t){const n=xa(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Zm(e,t){const n=xa(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&tg(n)}function eg(e,t,n){const r=xa(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function tg(e){e.ku.forEach((e=>{e.next()}))}class ng{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Qm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=Qm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class rg{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class ig{constructor(e){this.serializer=e}rr(e){return gd(this.serializer,e)}ur(e){return e.metadata.exists?Ed(this.serializer,e.document,!1):Kl.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return dd(e)}}class sg{constructor(e,t,n){this.ju=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=og(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const n=Ha.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,n=new ig(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.rr(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Ju()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=xa(e);let s=Ju(),o=qu();for(const l of n){const e=t.rr(l.metadata.name);l.document&&(s=s.add(e));const n=t.ur(l);n.setReadTime(t.cr(l.metadata.readTime)),o=o.insert(e,n)}const a=i.Zi.newChangeBuffer({trackRemovals:!0}),c=await Lp(i,function(e){return Pu(ku(Ha.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Rp(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Bs.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.Bs.addMatchingKeys(e,s,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr))).next((()=>t.nr))))))}(this.localStore,new ig(this.serializer),this.documents,this.ju.id),t=this.Wu(this.documents);for(const n of this.queries)await zp(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:e}}}function og(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class ag{constructor(e){this.key=e}}class cg{constructor(e){this.key=e}}class lg{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Ju(),this.mutatedKeys=Ju(),this.tc=Uu(e),this.ec=new Gm(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new Hm,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=Fu(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.rc(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.tc(u,a)>0||c&&this.tc(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:o,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ka()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const s=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==i.length||a?{snapshot:new Qm(this.query,e.ec,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Hm,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Ju(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new cg(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new ag(n))})),t}hc(e){this.Yu=e.ir,this.Zu=Ju();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Qm.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class ug{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class hg{constructor(e){this.key=e,this.fc=!1}}class dg{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new zu((e=>Lu(e)),Du),this._c=new Map,this.mc=new Set,this.gc=new rl(Ya.comparator),this.yc=new Map,this.Ic=new hp,this.Tc={},this.Ec=new Map,this.Ac=Vf.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function fg(e,t){const n=Ug(e);let r,i;const s=n.wc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const e=await Lp(n.localStore,Pu(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await pg(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&vm(n.remoteStore,e)}return i}async function pg(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await Fp(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.sc(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return kg(e,t.targetId,o.cc),o.snapshot}(e,t,n,r);const s=await Fp(e.localStore,t,!0),o=new lg(t,s.ir),a=o.sc(s.documents),c=Yh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,c);kg(e,n,l.cc);const u=new ug(t,n,o);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),l.snapshot}async function mg(e,t){const n=xa(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter((e=>!Du(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Mp(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),wm(n.remoteStore,r.targetId),Ig(n,r.targetId)})).catch(cc)):(Ig(n,r.targetId),await Mp(n.localStore,r.targetId,!0))}async function gg(e,t){const n=xa(e);try{const e=await function(e,t){const n=xa(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(hl.EMPTY_BYTE_STRING,Wa.min()).withLastLimboFreeSnapshotVersion(Wa.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Bs.updateTargetData(e,l))}));let a=qu(),c=Ju();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Rp(e,s,t.documentUpdates).next((e=>{a=e.nr,c=e.sr}))),!r.isEqual(Wa.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return lc.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.Ji=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.yc.get(t);r&&(Ta(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?Ta(r.fc):e.removedDocuments.size>0&&(Ta(r.fc),r.fc=!1))})),await Cg(n,e,t)}catch(e){await cc(e)}}function yg(e,t,n){const r=xa(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach(((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=xa(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)})),r&&tg(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function vg(e,t,n){const r=xa(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),s=i&&i.key;if(s){let e=new rl(Ya.comparator);e=e.insert(s,Kl.newNoDocument(s,Wa.min()));const n=Ju().add(s),i=new $h(Wa.min(),new Map,new rl(za),e,n);await gg(r,i),r.gc=r.gc.remove(s),r.yc.delete(t),xg(r)}else await Mp(r.localStore,t,!1).then((()=>Ig(r,t,n))).catch(cc)}async function wg(e,t){const n=xa(e),r=t.batch.batchId;try{const e=await function(e,t){const n=xa(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=lc.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Ta(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ju();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Eg(n,r,null),_g(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Cg(n,e)}catch(e){await cc(e)}}async function bg(e,t,n){const r=xa(e);try{const e=await function(e,t){const n=xa(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ta(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Eg(r,t,n),_g(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Cg(r,e)}catch(n){await cc(n)}}function _g(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function Eg(e,t,n){const r=xa(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function Ig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||Sg(e,t)}))}function Sg(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(wm(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),xg(e))}function kg(e,t,n){for(const r of n)r instanceof ag?(e.Ic.addReference(r.key,t),Tg(e,r)):r instanceof cg?(_a("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||Sg(e,r.key)):ka()}function Tg(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(_a("SyncEngine","New document in limbo: "+n),e.mc.add(r),xg(e))}function xg(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new Ya(Ha.fromString(t)),r=e.Ac.next();e.yc.set(r,new hg(n)),e.gc=e.gc.insert(n,r),vm(e.remoteStore,new Fd(Pu(ku(n.path)),r,"TargetPurposeLimboResolution",_c.ct))}}async function Cg(e,t,n){const r=xa(e),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach(((e,a)=>{o.push(r.Rc(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=xp.Li(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.dc.nu(i),await async function(e,t){const n=xa(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>lc.forEach(t,(t=>lc.forEach(t.Fi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>lc.forEach(t.Bi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!pc(e))throw e;_a("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,s))}async function Ng(e,t){const n=xa(e);if(!n.currentUser.isEqual(t)){_a("SyncEngine","User change. New user:",t.toKey());const e=await Pp(n.localStore,t);n.currentUser=t,function(e,t){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new Na(Ca.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Cg(n,e.er)}}function Ag(e,t){const n=xa(e),r=n.yc.get(t);if(r&&r.fc)return Ju().add(r.key);{let e=Ju();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}async function Pg(e,t){const n=xa(e),r=await Fp(n.localStore,t.query,!0),i=t.view.hc(r);return n.isPrimaryClient&&kg(n,t.targetId,i.cc),i}async function Og(e,t){const n=xa(e);return Up(n.localStore,t).then((e=>Cg(n,e)))}async function Rg(e,t,n,r){const i=xa(e),s=await function(e,t){const n=xa(e),r=xa(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Sn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):lc.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Pm(i.remoteStore):"acknowledged"===n||"rejected"===n?(Eg(i,t,r||null),_g(i,t),function(e,t){xa(xa(e).mutationQueue).Cn(t)}(i.localStore,t)):ka(),await Cg(i,s)):_a("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Dg(e,t,n){const r=xa(e),i=[],s=[];for(const o of t){let e;const t=r._c.get(o);if(t&&0!==t.length){e=await Lp(r.localStore,Pu(t[0]));for(const e of t){const t=r.wc.get(e),n=await Pg(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await jp(r.localStore,o);e=await Lp(r.localStore,t),await pg(r,Lg(t),o,!1,e.resumeToken)}i.push(e)}return r.dc.nu(s),i}function Lg(e){return Su(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Mg(e){const t=xa(e);return xa(xa(t.localStore).persistence).$i()}async function Fg(e,t,n,r){const i=xa(e);if(i.vc)return void _a("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Up(i.localStore,ju(s[0])),r=$h.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,hl.EMPTY_BYTE_STRING);await Cg(i,e,r);break}case"rejected":await Mp(i.localStore,t,!0),Ig(i,t,r);break;default:ka()}}async function jg(e,t,n){const r=Ug(e);if(r.vc){for(const e of t){if(r._c.has(e)){_a("SyncEngine","Adding an already active target "+e);continue}const t=await jp(r.localStore,e),n=await Lp(r.localStore,t);await pg(r,Lg(t),n.targetId,!1,n.resumeToken),vm(r.remoteStore,n)}for(const e of n)r._c.has(e)&&await Mp(r.localStore,e,!1).then((()=>{wm(r.remoteStore,e),Ig(r,e)})).catch(cc)}}function Ug(e){const t=xa(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ag.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=vg.bind(null,t),t.dc.nu=Zm.bind(null,t.eventManager),t.dc.Pc=eg.bind(null,t.eventManager),t}function Vg(e){const t=xa(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bg.bind(null,t),t}class zg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=cm(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Ap(this.persistence,new Cp,e.initialUser,this.serializer)}createPersistence(e){return new yp(wp.zs,this.serializer)}createSharedClientState(e){return new Xp}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Bg extends zg{constructor(e,t,n){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await Vg(this.Vc.syncEngine),await Pm(this.Vc.remoteStore),await this.persistence.Ii((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Ap(this.persistence,new Cp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Hf(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new bc(t,this.persistence);return new wc(e.asyncQueue,n)}createPersistence(e){const t=Tp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Of.withCacheSize(this.cacheSizeBytes):Of.DEFAULT;return new Ip(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,om(),am(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Xp}}class qg extends Bg{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Vc.syncEngine;this.sharedClientState instanceof Yp&&(this.sharedClientState.syncEngine={jr:Rg.bind(null,t),zr:Fg.bind(null,t),Wr:jg.bind(null,t),$i:Mg.bind(null,t),Qr:Og.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ii((async e=>{await async function(e,t){const n=xa(e);if(Ug(n),Vg(n),!0===t&&!0!==n.vc){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Dg(n,e.toArray());n.vc=!0,await zm(n.remoteStore,!0);for(const r of t)vm(n.remoteStore,r)}else if(!1===t&&!1!==n.vc){const e=[];let t=Promise.resolve();n._c.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Ig(n,i),Mp(n.localStore,i,!0)))),wm(n.remoteStore,i)})),await t,await Dg(n,e),function(e){const t=xa(e);t.yc.forEach(((e,n)=>{wm(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new rl(Ya.comparator)}(n),n.vc=!1,await zm(n.remoteStore,!1)}}(this.Vc.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=om();if(!Yp.D(t))throw new Na(Ca.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Tp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Kg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>yg(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ng.bind(null,this.syncEngine),await zm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ym}createDatastore(e){const t=cm(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new sm(r));var r;return function(e,t,n,r){return new fm(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>yg(this.syncEngine,e,0),s=Zp.D()?new Zp:new Jp,new mm(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new dg(e,t,n,r,i,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=xa(e);_a("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await ym(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}function Wg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Gg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ea("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Hg{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Aa,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((e=>{e&&e.Qu()?this.metadata.resolve(e.Gu.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(e=>this.metadata.reject(e)))}close(){return this.Cc.cancel()}async getMetadata(){return this.metadata.promise}async bc(){return await this.getMetadata(),this.Nc()}async Nc(){const e=await this.kc();if(null===e)return null;const t=this.xc.decode(e),n=Number(t);isNaN(n)&&this.Mc("length string (".concat(t,") is not valid number"));const r=await this.$c(n);return new rg(JSON.parse(r),e.length+n)}Oc(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async kc(){for(;this.Oc()<0&&!await this.Fc(););if(0===this.buffer.length)return null;const e=this.Oc();e<0&&this.Mc("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $c(e){for(;this.buffer.length<e;)await this.Fc()&&this.Mc("Reached the end of bundle when more is expected.");const t=this.xc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Mc(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}async Fc(){const e=await this.Cc.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Qg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Na(Ca.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=xa(e),r=wd(n.serializer)+"/documents",i={documents:t.map((e=>md(n.serializer,e)))},s=await n.vo("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Ta(!!t.found),t.found.name,t.found.updateTime;const n=gd(e,t.found.name),r=dd(t.found.updateTime),i=t.found.createTime?dd(t.found.createTime):Wa.min(),s=new Bl({mapValue:{fields:t.found.fields}});return Kl.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Ta(!!t.missing),Ta(!!t.readTime);const n=gd(e,t.missing),r=dd(t.readTime);return Kl.newNoDocument(n,r)}(e,t):ka()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Ta(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ph(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Ya.fromPath(t);this.mutations.push(new Oh(n,this.precondition(n)))})),await async function(e,t){const n=xa(e),r=wd(n.serializer)+"/documents",i={writes:t.map((e=>Id(n.serializer,e)))};await n.Io("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ka();t=Wa.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Na(Ca.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Wa.min())?vh.exists(!1):vh.updateTime(t):vh.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Wa.min()))throw new Na(Ca.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vh.updateTime(t)}return vh.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class $g{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Bc=n.maxAttempts,this.qo=new lm(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No((async()=>{const e=new Qg(this.datastore),t=this.qc(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Uc(e)}))))})).catch((e=>{this.Uc(e)}))}))}qc(e){try{const t=this.updateFunction(e);return!Ec(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((()=>(this.Lc(),Promise.resolve())))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Uh(t)}return!1}}class Yg{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ya.UNAUTHENTICATED,this.clientId=Va.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{_a("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(_a("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Na(Ca.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Aa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(SP){const n=Wm(SP,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Xg(e,t){e.asyncQueue.verifyOperationInProgress(),_a("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Pp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Jg(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ey(e);_a("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>Vm(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Vm(t.remoteStore,n))),e._onlineComponents=t}function Zg(e){return"FirebaseError"===e.name?e.code===Ca.FAILED_PRECONDITION||e.code===Ca.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function ey(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){_a("FirestoreClient","Using user provided OfflineComponentProvider");try{await Xg(e,e._uninitializedComponentsProvider._offline)}catch(SP){const n=SP;if(!Zg(n))throw n;Ia("Error using user provided cache. Falling back to memory cache: "+n),await Xg(e,new zg)}}else _a("FirestoreClient","Using default OfflineComponentProvider"),await Xg(e,new zg);return e._offlineComponents}async function ty(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(_a("FirestoreClient","Using user provided OnlineComponentProvider"),await Jg(e,e._uninitializedComponentsProvider._online)):(_a("FirestoreClient","Using default OnlineComponentProvider"),await Jg(e,new Kg))),e._onlineComponents}function ny(e){return ey(e).then((e=>e.persistence))}function ry(e){return ey(e).then((e=>e.localStore))}function iy(e){return ty(e).then((e=>e.remoteStore))}function sy(e){return ty(e).then((e=>e.syncEngine))}function oy(e){return ty(e).then((e=>e.datastore))}async function ay(e){const t=await ty(e),n=t.eventManager;return n.onListen=fg.bind(null,t.syncEngine),n.onUnlisten=mg.bind(null,t.syncEngine),n}function cy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Aa;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Gg({next:s=>{t.enqueueAndForget((()=>Jm(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Na(Ca.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Na(Ca.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new ng(ku(n.path),s,{includeMetadataChanges:!0,Ku:!0});return Xm(e,o)}(await ay(e),e.asyncQueue,t,n,r))),r.promise}function ly(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Aa;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Gg({next:n=>{t.enqueueAndForget((()=>Jm(e,o))),n.fromCache&&"server"===r.source?i.reject(new Na(Ca.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new ng(n,s,{includeMetadataChanges:!0,Ku:!0});return Xm(e,o)}(await ay(e),e.asyncQueue,t,n,r))),r.promise}function uy(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?qh().encode(e):e,function(e,t){return new Hg(e,t)}(function(e,t){if(e instanceof Uint8Array)return Wg(e,t);if(e instanceof ArrayBuffer)return Wg(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,cm(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=xa(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=xa(e),r=dd(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.qs.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(og(r));const i=new sg(r,e.localStore,t.serializer);let s=await t.bc();for(;s;){const e=await i.zu(s);e&&n._updateProgress(e),s=await t.bc()}const o=await i.complete();return await Cg(e,o.Ju,void 0),await function(e,t){const n=xa(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.qs.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Hu)}catch(e){return Ia("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await sy(e),i,r)}))}function hy(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const dy=new Map;function fy(e,t,n){if(!n)throw new Na(Ca.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function py(e,t,n,r){if(!0===t&&!0===r)throw new Na(Ca.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function my(e){if(!Ya.isDocumentKey(e))throw new Na(Ca.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function gy(e){if(Ya.isDocumentKey(e))throw new Na(Ca.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function yy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":ka()}function vy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Na(Ca.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yy(e);throw new Na(Ca.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function wy(e,t){if(t<=0)throw new Na(Ca.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class by{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Na(Ca.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Na(Ca.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}py("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hy(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Na(Ca.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Na(Ca.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Na(Ca.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class _y{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new by({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Na(Ca.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Na(Ca.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new by(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Oa;switch(e.type){case"firstParty":return new Ma(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Na(Ca.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=dy.get(e);t&&(_a("ComponentProvider","Removing Datastore"),dy.delete(e),t.terminate())}(this),Promise.resolve()}}function Ey(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=vy(e,_y))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ya.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[st(JSON.stringify({alg:"none",type:"JWT"})),st(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Na(Ca.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ya(s)}e._authCredentials=new Ra(new Pa(t,n))}}class Iy{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ky(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Iy(this.firestore,e,this._key)}}class Sy{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Sy(this.firestore,e,this._query)}}class ky extends Sy{constructor(e,t,n){super(e,t,ku(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Iy(this.firestore,null,new Ya(e))}withConverter(e){return new ky(this.firestore,e,this._path)}}function Ty(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Pt(e),fy("collection","path",t),e instanceof _y){const n=Ha.fromString(t,...r);return gy(n),new ky(e,null,n)}{if(!(e instanceof Iy||e instanceof ky))throw new Na(Ca.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ha.fromString(t,...r));return gy(n),new ky(e.firestore,null,n)}}function xy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Pt(e),1===arguments.length&&(t=Va.A()),fy("doc","path",t),e instanceof _y){const n=Ha.fromString(t,...r);return my(n),new Iy(e,null,new Ya(n))}{if(!(e instanceof Iy||e instanceof ky))throw new Na(Ca.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ha.fromString(t,...r));return my(n),new Iy(e.firestore,e instanceof ky?e.converter:null,new Ya(n))}}function Cy(e,t){return e=Pt(e),t=Pt(t),(e instanceof Iy||e instanceof ky)&&(t instanceof Iy||t instanceof ky)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Ny(e,t){return e=Pt(e),t=Pt(t),e instanceof Sy&&t instanceof Sy&&e.firestore===t.firestore&&Du(e._query,t._query)&&e.converter===t.converter}class Ay{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new lm(this,"async_queue_retry"),this.Xc=()=>{const e=am();e&&_a("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=am();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=am();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new Aa;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!pc(e))throw e;_a("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ea("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=Km.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(r),r}Zc(){this.Wc&&ka()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Py(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class Oy{constructor(){this._progressObserver={},this._taskCompletionResolver=new Aa,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ry extends _y{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Ay,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ly(this),this._firestoreClient.terminate()}}function Dy(e){return e._firestoreClient||Ly(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ly(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new wl(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,hy(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Yg(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function My(e,t,n){const r=new Aa;return e.asyncQueue.enqueue((async()=>{try{await Xg(e,n),await Jg(e,t),r.resolve()}catch(e){const n=e;if(!Zg(n))throw n;Ia("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Fy(e){return function(e){const t=new Aa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=xa(e);Sm(n.remoteStore)||_a("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=xa(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ec.get(e)||[];r.push(t),n.Ec.set(e,r)}catch(e){const n=Wm(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await sy(e),t))),t.promise}(Dy(e=vy(e,Ry)))}function jy(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await ny(e),n=await iy(e);return t.setNetworkEnabled(!0),function(e){const t=xa(e);return t.vu.delete(0),gm(t)}(n)}))}(Dy(e=vy(e,Ry)))}function Uy(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await ny(e),n=await iy(e);return t.setNetworkEnabled(!1),async function(e){const t=xa(e);t.vu.add(0),await ym(t),t.bu.set("Offline")}(n)}))}(Dy(e=vy(e,Ry)))}function Vy(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=xa(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.qs.getNamedQuery(e,t)))}(await ry(e),t)))}(Dy(e=vy(e,Ry)),t).then((t=>t?new Sy(e,null,t.query):null))}function zy(e){if(e._initialized||e._terminated)throw new Na(Ca.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class By{constructor(e){this._byteString=e}static fromBase64String(e){try{return new By(hl.fromBase64String(e))}catch(e){throw new Na(Ca.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new By(hl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class qy{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Na(Ca.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $a(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ky{constructor(e){this._methodName=e}}class Wy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Na(Ca.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Na(Ca.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return za(this._lat,e._lat)||za(this._long,e._long)}}const Gy=/^__.*__$/;class Hy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new xh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Th(e,this.data,t,this.fieldTransforms)}}class Qy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new xh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $y(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ka()}}class Yy{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Yy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return gv(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if($y(this.ca)&&Gy.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Xy{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||cm(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Yy({ca:e,methodName:t,ga:n,path:$a.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jy(e){const t=e._freezeSettings(),n=cm(e._databaseId);return new Xy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Zy(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ya(s.merge||s.mergeFields?2:0,t,n,i);dv("Data must be an object, but it was:",o,r);const a=uv(r,o);let c,l;if(s.merge)c=new ll(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=fv(t,r,n);if(!o.contains(i))throw new Na(Ca.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));yv(e,i)||e.push(i)}c=new ll(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new Hy(new Bl(a),c,l)}class ev extends Ky{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ev}}function tv(e,t,n){return new Yy({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class nv extends Ky{_toFieldTransform(e){return new gh(e.path,new ch)}isEqual(e){return e instanceof nv}}class rv extends Ky{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=tv(this,e,!0),n=this.pa.map((e=>lv(e,t))),r=new lh(n);return new gh(e.path,r)}isEqual(e){return this===e}}class iv extends Ky{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=tv(this,e,!0),n=this.pa.map((e=>lv(e,t))),r=new hh(n);return new gh(e.path,r)}isEqual(e){return this===e}}class sv extends Ky{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new fh(e.serializer,rh(e.serializer,this.Ia));return new gh(e.path,t)}isEqual(e){return this===e}}function ov(e,t,n,r){const i=e.ya(1,t,n);dv("Data must be an object, but it was:",i,r);const s=[],o=Bl.empty();tl(r,((e,r)=>{const a=mv(t,e,n);r=Pt(r);const c=i.da(a);if(r instanceof ev)s.push(a);else{const e=lv(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new ll(s);return new Qy(o,a,i.fieldTransforms)}function av(e,t,n,r,i,s){const o=e.ya(1,t,n),a=[fv(t,r,n)],c=[i];if(s.length%2!=0)throw new Na(Ca.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(fv(t,s[d])),c.push(s[d+1]);const l=[],u=Bl.empty();for(let d=a.length-1;d>=0;--d)if(!yv(l,a[d])){const e=a[d];let t=c[d];t=Pt(t);const n=o.da(e);if(t instanceof ev)l.push(e);else{const r=lv(t,n);null!=r&&(l.push(e),u.set(e,r))}}const h=new ll(l);return new Qy(u,h,o.fieldTransforms)}function cv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return lv(n,e.ya(r?4:3,t))}function lv(e,t){if(hv(e=Pt(e)))return dv("Unsupported field value:",t,e),uv(e,t);if(e instanceof Ky)return function(e,t){if(!$y(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=lv(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Pt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return rh(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ka.fromDate(e);return{timestampValue:ld(t.serializer,n)}}if(e instanceof Ka){const n=new Ka(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ld(t.serializer,n)}}if(e instanceof Wy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof By)return{bytesValue:ud(t.serializer,e._byteString)};if(e instanceof Iy){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:fd(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(yy(e)))}(e,t)}function uv(e,t){const n={};return nl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):tl(e,((e,r)=>{const i=lv(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function hv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ka||e instanceof Wy||e instanceof By||e instanceof Iy||e instanceof Ky)}function dv(e,t,n){if(!hv(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=yy(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function fv(e,t,n){if((t=Pt(t))instanceof qy)return t._internalPath;if("string"==typeof t)return mv(e,t);throw gv("Field path arguments must be of type string or ",e,!1,void 0,n)}const pv=new RegExp("[~\\*/\\[\\]]");function mv(e,t,n){if(t.search(pv)>=0)throw gv("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new qy(...t.split("."))._internalPath}catch(r){throw gv("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function gv(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field ".concat(r)),o&&(c+=" in document ".concat(i)),c+=")"),new Na(Ca.INVALID_ARGUMENT,a+e+c)}function yv(e,t){return e.some((e=>e.isEqual(t)))}class vv{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Iy(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new wv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class wv extends vv{data(){return super.data()}}function bv(e,t){return"string"==typeof t?mv(e,t):t instanceof qy?t._internalPath:t._delegate._internalPath}function _v(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Na(Ca.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ev{}class Iv extends Ev{}function Sv(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Ev&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Tv)).length,n=e.filter((e=>e instanceof kv)).length;if(t>1||t>0&&n>0)throw new Na(Ca.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class kv extends Iv{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new kv(e,t,n)}_apply(e){const t=this._parse(e);return Dv(e._query,t),new Sy(e.firestore,e.converter,Ou(e._query,t))}_parse(e){const t=Jy(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Na(Ca.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Rv(o,s);const t=[];for(const n of o)t.push(Ov(r,e,n));a={arrayValue:{values:t}}}else a=Ov(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Rv(o,s),a=cv(n,"where",o,"in"===s||"not-in"===s);return Xl.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Tv extends Ev{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Tv(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Jl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Dv(n,i),n=Ou(n,i)}(e._query,t),new Sy(e.firestore,e.converter,Ou(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class xv extends Iv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xv(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Na(Ca.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Na(Ca.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Ql(t,n);return function(e,t){if(null===xu(e)){const n=Cu(e);null!==n&&Lv(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Sy(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Iu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Cv extends Iv{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Cv(e,t,n)}_apply(e){return new Sy(e.firestore,e.converter,Ru(e._query,this._limit,this._limitType))}}class Nv extends Iv{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Nv(e,t,n)}_apply(e){const t=Pv(e,this.type,this._docOrFields,this._inclusive);return new Sy(e.firestore,e.converter,function(e,t){return new Iu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Av extends Iv{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Av(e,t,n)}_apply(e){const t=Pv(e,this.type,this._docOrFields,this._inclusive);return new Sy(e.firestore,e.converter,function(e,t){return new Iu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Pv(e,t,n,r){if(n[0]=Pt(n[0]),n[0]instanceof vv)return function(e,t,n,r,i){if(!r)throw new Na(Ca.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Au(e))if(o.field.isKeyField())s.push(Al(t,r.key));else{const e=r.data.field(o.field);if(gl(e))throw new Na(Ca.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Na(Ca.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new Wl(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Jy(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Na(Ca.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new Na(Ca.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Nu(e)&&-1!==s.indexOf("/"))throw new Na(Ca.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(Ha.fromString(s));if(!Ya.isDocumentKey(n))throw new Na(Ca.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Ya(n);a.push(Al(t,i))}else{const e=cv(n,r,s);a.push(e)}}return new Wl(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Ov(e,t,n){if("string"==typeof(n=Pt(n))){if(""===n)throw new Na(Ca.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nu(t)&&-1!==n.indexOf("/"))throw new Na(Ca.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Ha.fromString(n));if(!Ya.isDocumentKey(r))throw new Na(Ca.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Al(e,new Ya(r))}if(n instanceof Iy)return Al(e,n._key);throw new Na(Ca.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(yy(n),"."))}function Rv(e,t){if(!Array.isArray(e)||0===e.length)throw new Na(Ca.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Dv(e,t){if(t.isInequality()){const n=Cu(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Na(Ca.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));const i=xu(e);null!==i&&Lv(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Na(Ca.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Na(Ca.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function Lv(e,t,n){if(!n.isEqual(t))throw new Na(Ca.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}class Mv{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Il(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ml(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ka()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return tl(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Wy(pl(e.latitude),pl(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=yl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(vl(e));default:return null}}convertTimestamp(e){const t=fl(e);return new Ka(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ha.fromString(e);Ta(Md(n));const r=new bl(n.get(1),n.get(3)),i=new Ya(n.popFirst(5));return r.isEqual(t)||Ea("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Fv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class jv extends Mv{constructor(e){super(),this.firestore=e}convertBytes(e){return new By(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Iy(this.firestore,null,t)}}class Uv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vv extends vv{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new zv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(bv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class zv extends Vv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Bv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Uv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new zv(this._firestore,this._userDataWriter,n.key,n,new Uv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Na(Ca.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new zv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Uv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new zv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Uv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:qv(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function qv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ka()}}function Kv(e,t){return e instanceof Vv&&t instanceof Vv?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Bv&&t instanceof Bv&&e._firestore===t._firestore&&Ny(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class Wv extends Mv{constructor(e){super(),this.firestore=e}convertBytes(e){return new By(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Iy(this.firestore,null,t)}}function Gv(e){e=vy(e,Iy);const t=vy(e.firestore,Ry),n=Dy(t),r=new Wv(t);return function(e,t){const n=new Aa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=xa(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Na(Ca.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Wm(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await ry(e),t,n))),n.promise}(n,e._key).then((n=>new Vv(t,r,e._key,n,new Uv(null!==n&&n.hasLocalMutations,!0),e.converter)))}function Hv(e){e=vy(e,Sy);const t=vy(e.firestore,Ry),n=Dy(t),r=new Wv(t);return function(e,t){const n=new Aa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Fp(e,t,!0),i=new lg(t,r.ir),s=i.sc(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Wm(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await ry(e),t,n))),n.promise}(n,e._query).then((n=>new Bv(t,r,e,n)))}function Qv(e,t,n){e=vy(e,Iy);const r=vy(e.firestore,Ry),i=Fv(e.converter,t,n);return Jv(r,[Zy(Jy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,vh.none())])}function $v(e,t,n){e=vy(e,Iy);const r=vy(e.firestore,Ry),i=Jy(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(t=Pt(t))||t instanceof qy?av(i,"updateDoc",e._key,t,n,a):ov(i,"updateDoc",e._key,t),Jv(r,[s.toMutation(e._key,vh.exists(!0))])}function Yv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Pt(e);let a={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||Py(n[c])||(a=n[c],c++);const l={includeMetadataChanges:a.includeMetadataChanges};if(Py(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[c+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof Iy)h=vy(e.firestore,Ry),d=ku(e._key.path),u={next:t=>{n[c]&&n[c](Zv(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=vy(e,Sy);h=vy(t.firestore,Ry),d=t._query;const r=new Wv(h);u={next:e=>{n[c]&&n[c](new Bv(h,r,t,e))},error:n[c+1],complete:n[c+2]},_v(e._query)}return function(e,t,n,r){const i=new Gg(r),s=new ng(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Xm(await ay(e),s))),()=>{i.Dc(),e.asyncQueue.enqueueAndForget((async()=>Jm(await ay(e),s)))}}(Dy(h),d,l,u)}function Xv(e,t){return function(e,t){const n=new Gg(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){xa(e).ku.add(t),t.next()}(await ay(e),n))),()=>{n.Dc(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){xa(e).ku.delete(t)}(await ay(e),n)))}}(Dy(e=vy(e,Ry)),Py(t)?t:{next:t})}function Jv(e,t){return function(e,t){const n=new Aa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Vg(e);try{const e=await function(e,t){const n=xa(e),r=Ka.now(),i=t.reduce(((e,t)=>e.add(t.key)),Ju());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=qu(),c=Ju();return n.Zi.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Sh(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new xh(e.key,t,ql(t.value.mapValue),vh.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Gu(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new rl(za)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Cg(r,e.changes),await Pm(r.remoteStore)}catch(e){const t=Wm(e,"Failed to persist write");n.reject(t)}}(await sy(e),t,n))),n.promise}(Dy(e),t)}function Zv(e,t,n){const r=n.docs.get(t._key),i=new Wv(e);return new Vv(e,i,t._key,r,new Uv(n.hasPendingWrites,n.fromCache),t.converter)}const ew={maxAttempts:5};class tw{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Jy(e)}set(e,t,n){this._verifyNotCommitted();const r=nw(e,this._firestore),i=Fv(r.converter,t,n),s=Zy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,vh.none())),this}update(e,t,n){this._verifyNotCommitted();const r=nw(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Pt(t))||t instanceof qy?av(this._dataReader,"WriteBatch.update",r._key,t,n,o):ov(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,vh.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=nw(e,this._firestore);return this._mutations=this._mutations.concat(new Ph(t._key,vh.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Na(Ca.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nw(e,t){if((e=Pt(e)).firestore!==t)throw new Na(Ca.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class rw extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Jy(e)}get(e){const t=nw(e,this._firestore),n=new jv(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return ka();const r=e[0];if(r.isFoundDocument())return new vv(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new vv(this._firestore,n,t._key,null,t.converter);throw ka()}))}set(e,t,n){const r=nw(e,this._firestore),i=Fv(r.converter,t,n),s=Zy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=nw(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Pt(t))||t instanceof qy?av(this._dataReader,"Transaction.update",r._key,t,n,o):ov(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=nw(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=nw(e,this._firestore),n=new Wv(this._firestore);return super.get(e).then((e=>new Vv(this._firestore,n,t._key,e._document,new Uv(!1,!1),t.converter)))}}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){va=e}(Sn),vn(new Ot("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Ry(new Da(e.getProvider("auth-internal")),new ja(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Na(Ca.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bl(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Nn(ga,"3.13.0",e),Nn(ga,"3.13.0","esm2017")}();function iw(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Na("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function sw(){if("undefined"===typeof Uint8Array)throw new Na("unimplemented","Uint8Arrays are not available in this environment.")}function ow(){if("undefined"==typeof atob)throw new Na("unimplemented","Blobs are unavailable in Firestore in this environment.")}class aw{constructor(e){this._delegate=e}static fromBase64String(e){return ow(),new aw(By.fromBase64String(e))}static fromUint8Array(e){return sw(),new aw(By.fromUint8Array(e))}toBase64(){return ow(),this._delegate.toBase64()}toUint8Array(){return sw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function cw(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class lw{enableIndexedDbPersistence(e,t){return function(e,t){zy(e=vy(e,Ry));const n=Dy(e);if(n._uninitializedComponentsProvider)throw new Na(Ca.FAILED_PRECONDITION,"SDK cache is already specified.");Ia("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new Kg;return My(n,i,new Bg(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){zy(e=vy(e,Ry));const t=Dy(e);if(t._uninitializedComponentsProvider)throw new Na(Ca.FAILED_PRECONDITION,"SDK cache is already specified.");Ia("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new Kg;return My(t,r,new qg(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Na(Ca.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Aa;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!hc.D())return Promise.resolve();const t=e+"main";await hc.delete(t)}(Tp(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class uw{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof bl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Ia("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ey(this._delegate,e,t,n)}enableNetwork(){return jy(this._delegate)}disableNetwork(){return Uy(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,py("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Fy(this._delegate)}onSnapshotsInSync(e){return Xv(this._delegate,e)}get app(){if(!this._appCompat)throw new Na("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Sw(this,Ty(this._delegate,e))}catch(SP){throw gw(SP,"collection()","Firestore.collection()")}}doc(e){try{return new mw(this,xy(this._delegate,e))}catch(SP){throw gw(SP,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _w(this,function(e,t){if(e=vy(e,_y),fy("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Na(Ca.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Sy(e,null,function(e){return new Iu(Ha.emptyPath(),e)}(t))}(this._delegate,e))}catch(SP){throw gw(SP,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=vy(e,Ry);const r=Object.assign(Object.assign({},ew),n);return function(e){if(e.maxAttempts<1)throw new Na(Ca.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Aa;return e.asyncQueue.enqueueAndForget((async()=>{const i=await oy(e);new $g(e.asyncQueue,i,n,t,r).run()})),r.promise}(Dy(e),(n=>t(new rw(e,n))),r)}(this._delegate,(t=>e(new dw(this,t))))}batch(){return Dy(this._delegate),new fw(new tw(this._delegate,(e=>Jv(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Dy(e=vy(e,Ry)),r=new Oy;return uy(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Vy(this._delegate,e).then((e=>e?new _w(this,e):null))}}class hw extends Mv{constructor(e){super(),this.firestore=e}convertBytes(e){return new aw(new By(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return mw.forKey(t,this.firestore,null)}}class dw{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new hw(e)}get(e){const t=kw(e);return this._delegate.get(t).then((e=>new ww(this._firestore,new Vv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=kw(e);return n?(iw("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=kw(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=kw(e);return this._delegate.delete(t),this}}class fw{constructor(e){this._delegate=e}set(e,t,n){const r=kw(e);return n?(iw("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=kw(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=kw(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class pw{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new zv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bw(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=pw.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new pw(e,new hw(e),t),r.set(t,i)),i}}pw.INSTANCES=new WeakMap;class mw{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hw(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Na("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new mw(t,new Iy(t._delegate,n,new Ya(e)))}static forKey(e,t,n){return new mw(t,new Iy(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Sw(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Sw(this.firestore,Ty(this._delegate,e))}catch(SP){throw gw(SP,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Pt(e))instanceof Iy&&Cy(this._delegate,e)}set(e,t){t=iw("DocumentReference.set",t);try{return t?Qv(this._delegate,e,t):Qv(this._delegate,e)}catch(SP){throw gw(SP,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?$v(this._delegate,e):$v(this._delegate,e,t,...r)}catch(SP){throw gw(SP,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return Jv(vy(e.firestore,Ry),[new Ph(e._key,vh.none())])}(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=yw(t),i=vw(t,(e=>new ww(this.firestore,new Vv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Yv(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Gv(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=vy(e,Iy);const t=vy(e.firestore,Ry);return cy(Dy(t),e._key,{source:"server"}).then((n=>Zv(t,e,n)))}(this._delegate):function(e){e=vy(e,Iy);const t=vy(e.firestore,Ry);return cy(Dy(t),e._key).then((n=>Zv(t,e,n)))}(this._delegate),t.then((e=>new ww(this.firestore,new Vv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new mw(this.firestore,e?this._delegate.withConverter(pw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function gw(e,t,n){return e.message=e.message.replace(t,n),e}function yw(e){for(const t of e)if("object"===typeof t&&!cw(t))return t;return{}}function vw(e,t){var n,r;let i;return i=cw(e[0])?e[0]:cw(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ww{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new mw(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Kv(this._delegate,e._delegate)}}class bw extends ww{data(e){const t=this._delegate.data(e);return function(e,t){e||ka()}(void 0!==t),t}}class _w{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hw(e)}where(e,t,n){try{return new _w(this.firestore,Sv(this._delegate,function(e,t,n){const r=t,i=bv("where",e);return kv._create(i,r,n)}(e,t,n)))}catch(SP){throw gw(SP,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new _w(this.firestore,Sv(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=bv("orderBy",e);return xv._create(n,t)}(e,t)))}catch(SP){throw gw(SP,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new _w(this.firestore,Sv(this._delegate,function(e){return wy("limit",e),Cv._create("limit",e,"F")}(e)))}catch(SP){throw gw(SP,"limit()","Query.limit()")}}limitToLast(e){try{return new _w(this.firestore,Sv(this._delegate,function(e){return wy("limitToLast",e),Cv._create("limitToLast",e,"L")}(e)))}catch(SP){throw gw(SP,"limitToLast()","Query.limitToLast()")}}startAt(){try{return new _w(this.firestore,Sv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Nv._create("startAt",t,!0)}(...arguments)))}catch(SP){throw gw(SP,"startAt()","Query.startAt()")}}startAfter(){try{return new _w(this.firestore,Sv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Nv._create("startAfter",t,!1)}(...arguments)))}catch(SP){throw gw(SP,"startAfter()","Query.startAfter()")}}endBefore(){try{return new _w(this.firestore,Sv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Av._create("endBefore",t,!1)}(...arguments)))}catch(SP){throw gw(SP,"endBefore()","Query.endBefore()")}}endAt(){try{return new _w(this.firestore,Sv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Av._create("endAt",t,!0)}(...arguments)))}catch(SP){throw gw(SP,"endAt()","Query.endAt()")}}isEqual(e){return Ny(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Hv(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=vy(e,Sy);const t=vy(e.firestore,Ry),n=Dy(t),r=new Wv(t);return ly(n,e._query,{source:"server"}).then((n=>new Bv(t,r,e,n)))}(this._delegate):function(e){e=vy(e,Sy);const t=vy(e.firestore,Ry),n=Dy(t),r=new Wv(t);return _v(e._query),ly(n,e._query).then((n=>new Bv(t,r,e,n)))}(this._delegate),t.then((e=>new Iw(this.firestore,new Bv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=yw(t),i=vw(t,(e=>new Iw(this.firestore,new Bv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Yv(this._delegate,r,i)}withConverter(e){return new _w(this.firestore,e?this._delegate.withConverter(pw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Ew{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new bw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Iw{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new _w(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new bw(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Ew(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new bw(this._firestore,n))}))}isEqual(e){return Kv(this._delegate,e._delegate)}}class Sw extends _w{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new mw(this.firestore,e):null}doc(e){try{return new mw(this.firestore,void 0===e?xy(this._delegate):xy(this._delegate,e))}catch(SP){throw gw(SP,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=vy(e.firestore,Ry),r=xy(e),i=Fv(e.converter,t);return Jv(n,[Zy(Jy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,vh.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new mw(this.firestore,e)))}isEqual(e){return Cy(this._delegate,e._delegate)}withConverter(e){return new Sw(this.firestore,e?this._delegate.withConverter(pw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function kw(e){return vy(e,Iy)}class Tw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new qy(...t)}static documentId(){return new Tw($a.keyField().canonicalString())}isEqual(e){return(e=Pt(e))instanceof qy&&this._delegate._internalPath.isEqual(e._internalPath)}}class xw{constructor(e){this._delegate=e}static serverTimestamp(){const e=new nv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new xw(e)}static delete(){const e=new ev("deleteField");return e._methodName="FieldValue.delete",new xw(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new rv("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new xw(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new iv("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new xw(e)}static increment(e){const t=function(e){return new sv("increment",e)}(e);return t._methodName="FieldValue.increment",new xw(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Cw={Firestore:uw,GeoPoint:Wy,Timestamp:Ka,Blob:aw,Transaction:dw,WriteBatch:fw,DocumentReference:mw,DocumentSnapshot:ww,Query:_w,QueryDocumentSnapshot:bw,QuerySnapshot:Iw,CollectionReference:Sw,FieldPath:Tw,FieldValue:xw,setLogLevel:function(e){!function(e){wa.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};var Nw;(function(e,t){e.INTERNAL.registerComponent(new Ot("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Cw)))})(Nw=Qn,((e,t)=>new uw(e,t,new lw))),Nw.registerVersion("@firebase/firestore-compat","0.3.12");function Aw(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const Pw={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ow="EMAIL_SIGNIN",Rw="PASSWORD_RESET",Dw="RECOVER_EMAIL",Lw="REVERT_SECOND_FACTOR_ADDITION",Mw="VERIFY_AND_CHANGE_EMAIL",Fw="VERIFY_EMAIL";function jw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Uw=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Vw=jw,zw=new bt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Bw=new qt("@firebase/auth");function qw(e){if(Bw.logLevel<=jt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Bw.error("Auth (".concat(Sn,"): ").concat(e),...n)}}function Kw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Qw(e,...n)}function Ww(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Qw(e,...n)}function Gw(e,t,n){const r=Object.assign(Object.assign({},Vw()),{[t]:n});return new bt("auth","Firebase",r).create(t,{appName:e.name})}function Hw(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Kw(e,"argument-error"),Gw(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Qw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return zw.create(e,...n)}function $w(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Qw(t,...r)}}function Yw(e){const t="INTERNAL ASSERTION FAILED: "+e;throw qw(t),new Error(t)}function Xw(e,t){e||Yw(t)}function Jw(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Zw(){return"http:"===eb()||"https:"===eb()}function eb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class tb{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xw(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())||gt()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Zw()||mt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function nb(e,t){Xw(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class rb{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Yw("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Yw("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Yw("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ib={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},sb=new tb(3e4,6e4);function ob(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ab(e,t,n,r){return cb(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=kt(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),rb.fetch()(ub(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function cb(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},ib),t);try{const t=new hb(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw db(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw db(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw db(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw db(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Gw(e,a,o);Kw(e,a)}}catch(SP){if(SP instanceof wt)throw SP;Kw(e,"network-request-failed",{message:String(SP)})}}async function lb(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await ab(e,t,n,r,i);return"mfaPendingCredential"in s&&Kw(e,"multi-factor-auth-required",{_serverResponse:s}),s}function ub(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?nb(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}class hb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Ww(this.auth,"network-request-failed"))),sb.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function db(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ww(e,t,r);return i.customData._tokenResponse=n,i}function fb(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(SP){}}function pb(e){return 1e3*Number(e)}function mb(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return qw("JWT malformed, contained fewer than 3 sections"),null;try{const e=ot(n);return e?JSON.parse(e):(qw("Failed to decode base64 JWT payload"),null)}catch(SP){return qw("Caught error parsing JWT payload as JSON",null===SP||void 0===SP?void 0:SP.toString()),null}}async function gb(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(SP){throw SP instanceof wt&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(SP)&&e.auth.currentUser===e&&await e.auth.signOut(),SP}}class yb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(SP){return void((null===SP||void 0===SP?void 0:SP.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class vb{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fb(this.lastLoginAt),this.creationTime=fb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function wb(e){var t;const n=e.auth,r=await e.getIdToken(),i=await gb(e,async function(e,t){return ab(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));$w(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Aw(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new vb(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class bb{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$w(e.idToken,"internal-error"),$w("undefined"!==typeof e.idToken,"internal-error"),$w("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=mb(e);return $w(t,"internal-error"),$w("undefined"!==typeof t.exp,"internal-error"),$w("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return $w(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await cb(e,{},(async()=>{const n=kt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=ub(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",rb.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new bb;return n&&($w("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&($w("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&($w("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bb,this.toJSON())}_performRefresh(){return Yw("not implemented")}}function _b(e,t){$w("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Eb{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Aw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new vb(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await gb(this,this.stsTokenManager.getToken(this.auth,e));return $w(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Pt(e),r=await n.getIdToken(t),i=mb(r);$w(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:fb(pb(i.auth_time)),issuedAtTime:fb(pb(i.iat)),expirationTime:fb(pb(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Pt(e);await wb(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&($w(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Eb(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){$w(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await wb(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await gb(this,async function(e,t){return ab(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;$w(v&&E,e,"internal-error");const I=bb.fromJSON(this.name,E);$w("string"===typeof v,e,"internal-error"),_b(u,e.name),_b(h,e.name),$w("boolean"===typeof w,e,"internal-error"),$w("boolean"===typeof b,e,"internal-error"),_b(d,e.name),_b(f,e.name),_b(p,e.name),_b(m,e.name),_b(g,e.name),_b(y,e.name);const S=new Eb({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(S.providerData=_.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new bb;r.updateFromServerResponse(t);const i=new Eb({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await wb(i),i}}const Ib=new Map;function Sb(e){Xw(e instanceof Function,"Expected a class definition");let t=Ib.get(e);return t?(Xw(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ib.set(e,t),t)}class kb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}kb.type="NONE";const Tb=kb;function xb(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Cb{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=xb(this.userKey,r.apiKey,i),this.fullPersistenceKey=xb("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Eb._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Cb(Sb(Tb),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Sb(Tb);const s=xb(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Eb._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(Lg){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(Lg){}}))),new Cb(i,e,n)):new Cb(i,e,n)}}function Nb(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Rb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ab(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Lb(t))return"Blackberry";if(Mb(t))return"Webos";if(Pb(t))return"Safari";if((t.includes("chrome/")||Ob(t))&&!t.includes("edge/"))return"Chrome";if(Db(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ab(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/firefox\//i.test(e)}function Pb(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ob(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/crios\//i.test(e)}function Rb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/iemobile/i.test(e)}function Db(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/android/i.test(e)}function Lb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/blackberry/i.test(e)}function Mb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/webos/i.test(e)}function Fb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function jb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return Fb(e)||Db(e)||Mb(e)||Lb(e)||/windows phone/i.test(e)||Rb(e)}function Ub(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Nb(ft());break;case"Worker":t="".concat(Nb(ft()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Sn,"/").concat(r)}async function Vb(e,t){return ab(e,"GET","/v2/recaptchaConfig",ob(e,t))}function zb(e){return void 0!==e&&void 0!==e.getResponse}function Bb(e){return void 0!==e&&void 0!==e.enterprise}class qb{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function Kb(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ww("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Wb(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Gb{constructor(e){this.type="recaptcha-enterprise",this.auth=Yb(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Bb(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Vb(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new qb(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Bb(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Kb("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Hb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Gb(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class Qb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(SP){r(SP)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(SP){t.reverse();for(const n of t)try{n()}catch(Wk){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===SP||void 0===SP?void 0:SP.message})}}}class $b{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xb(this),this.idTokenSubscription=new Xb(this),this.beforeStateQueue=new Qb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sb(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Cb.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(SP){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(SP){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(SP)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return $w(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(SP){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wb(e)}catch(SP){if((null===SP||void 0===SP?void 0:SP.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Pt(e):null;return t&&$w(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&$w(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Sb(e))}))}async initializeRecaptchaConfig(){const e=await Vb(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new qb(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new Gb(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sb(e)||this._popupRedirectResolver;$w(t,this,"argument-error"),this.redirectPersistenceManager=await Cb.create(this,[Sb(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return $w(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $w(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ub(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Bw.logLevel<=jt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Bw.warn("Auth (".concat(Sn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Yb(e){return Pt(e)}class Xb{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ct((e=>this.observer=e))}get next(){return $w(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Jb(e,t,n){const r=Yb(e);$w(r._canInitEmulator,r,"emulator-config-failed"),$w(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Zb(t),{host:o,port:a}=function(e){const t=Zb(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:e_(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:e_(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Zb(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function e_(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class t_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Yw("not implemented")}_getIdTokenResponse(e){return Yw("not implemented")}_linkToIdToken(e,t){return Yw("not implemented")}_getReauthenticationResolver(e){return Yw("not implemented")}}async function n_(e,t){return ab(e,"POST","/v1/accounts:resetPassword",ob(e,t))}async function r_(e,t){return ab(e,"POST","/v1/accounts:update",t)}async function i_(e,t){return lb(e,"POST","/v1/accounts:signInWithPassword",ob(e,t))}async function s_(e,t){return ab(e,"POST","/v1/accounts:sendOobCode",ob(e,t))}async function o_(e,t){return s_(e,t)}async function a_(e,t){return s_(e,t)}class c_ extends t_{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new c_(e,t,"password")}static _fromEmailAndCode(e,t){return new c_(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Hb(e,n,"signInWithPassword");return i_(e,t)}return i_(e,n).catch((async t=>{if(t.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Hb(e,n,"signInWithPassword");return i_(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return lb(e,"POST","/v1/accounts:signInWithEmailLink",ob(e,t))}(e,{email:this._email,oobCode:this._password});default:Kw(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return r_(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return lb(e,"POST","/v1/accounts:signInWithEmailLink",ob(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Kw(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function l_(e,t){return lb(e,"POST","/v1/accounts:signInWithIdp",ob(e,t))}class u_ extends t_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new u_(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Kw("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Aw(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new u_(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return l_(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,l_(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,l_(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=kt(t)}return e}}const h_={USER_NOT_FOUND:"user-not-found"};class d_ extends t_{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new d_({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new d_({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return lb(e,"POST","/v1/accounts:signInWithPhoneNumber",ob(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await lb(e,"POST","/v1/accounts:signInWithPhoneNumber",ob(e,t));if(n.temporaryProof)throw db(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return lb(e,"POST","/v1/accounts:signInWithPhoneNumber",ob(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),h_)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new d_({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class f_{constructor(e){var t,n,r,i,s,o;const a=Tt(xt(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);$w(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Tt(xt(e)).link,n=t?Tt(xt(t)).deep_link_id:null,r=Tt(xt(e)).deep_link_id;return(r?Tt(xt(r)).link:null)||r||n||t||e}(e);try{return new f_(t)}catch(Lg){return null}}}class p_{constructor(){this.providerId=p_.PROVIDER_ID}static credential(e,t){return c_._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=f_.parseLink(t);return $w(n,"argument-error"),c_._fromEmailAndCode(e,n.code,n.tenantId)}}p_.PROVIDER_ID="password",p_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p_.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class m_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class g_ extends m_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class y_ extends g_{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return $w("providerId"in t&&"signInMethod"in t,"argument-error"),u_._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return $w(e.idToken||e.accessToken,"argument-error"),u_._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return y_.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return y_.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new y_(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(SP){return null}}}class v_ extends g_{constructor(){super("facebook.com")}static credential(e){return u_._fromParams({providerId:v_.PROVIDER_ID,signInMethod:v_.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return v_.credentialFromTaggedObject(e)}static credentialFromError(e){return v_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return v_.credential(t.oauthAccessToken)}catch(Lg){return null}}}v_.FACEBOOK_SIGN_IN_METHOD="facebook.com",v_.PROVIDER_ID="facebook.com";class w_ extends g_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return u_._fromParams({providerId:w_.PROVIDER_ID,signInMethod:w_.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return w_.credentialFromTaggedObject(e)}static credentialFromError(e){return w_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return w_.credential(n,r)}catch(Lg){return null}}}w_.GOOGLE_SIGN_IN_METHOD="google.com",w_.PROVIDER_ID="google.com";class b_ extends g_{constructor(){super("github.com")}static credential(e){return u_._fromParams({providerId:b_.PROVIDER_ID,signInMethod:b_.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return b_.credentialFromTaggedObject(e)}static credentialFromError(e){return b_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return b_.credential(t.oauthAccessToken)}catch(Lg){return null}}}b_.GITHUB_SIGN_IN_METHOD="github.com",b_.PROVIDER_ID="github.com";class __ extends t_{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return l_(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,l_(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,l_(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new __(n,i):null}static _create(e,t){return new __(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class E_ extends m_{constructor(e){$w(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return E_.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return E_.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=__.fromJSON(e);return $w(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return __._create(r,n)}catch(SP){return null}}}class I_ extends g_{constructor(){super("twitter.com")}static credential(e,t){return u_._fromParams({providerId:I_.PROVIDER_ID,signInMethod:I_.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return I_.credentialFromTaggedObject(e)}static credentialFromError(e){return I_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return I_.credential(n,r)}catch(Lg){return null}}}async function S_(e,t){return lb(e,"POST","/v1/accounts:signUp",ob(e,t))}I_.TWITTER_SIGN_IN_METHOD="twitter.com",I_.PROVIDER_ID="twitter.com";class k_{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Eb._fromIdTokenResponse(e,n,r),s=T_(n);return new k_({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=T_(n);return new k_({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function T_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class x_ extends wt{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,x_.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new x_(e,t,n,r)}}function C_(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw x_._fromErrorAndOperation(e,n,t,r);throw n}))}function N_(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function A_(e,t){const n=Pt(e);await O_(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return ab(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=N_(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function P_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await gb(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return k_._forOperation(e,"link",r)}async function O_(e,t,n){await wb(t);const r=!1===e?"provider-already-linked":"no-such-provider";$w(N_(t.providerData).has(n)===e,t.auth,r)}async function R_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await gb(e,C_(r,i,t,e),n);$w(s.idToken,r,"internal-error");const o=mb(s.idToken);$w(o,r,"internal-error");const{sub:a}=o;return $w(e.uid===a,r,"user-mismatch"),k_._forOperation(e,i,s)}catch(SP){throw(null===SP||void 0===SP?void 0:SP.code)==="auth/".concat("user-not-found")&&Kw(r,"user-mismatch"),SP}}async function D_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await C_(e,r,t),s=await k_._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function L_(e,t){return D_(Yb(e),t)}async function M_(e,t){const n=Pt(e);return await O_(!1,n,t.providerId),P_(n,t)}async function F_(e,t){return R_(Pt(e),t)}async function j_(e,t){const n=Yb(e),r=await async function(e,t){return lb(e,"POST","/v1/accounts:signInWithCustomToken",ob(e,t))}(n,{token:t,returnSecureToken:!0}),i=await k_._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class U_{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?V_._fromServerResponse(e,t):"totpInfo"in t?z_._fromServerResponse(e,t):Kw(e,"internal-error")}}class V_ extends U_{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new V_(t)}}class z_ extends U_{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new z_(t)}}function B_(e,t,n){var r;$w((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),$w("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&($w(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&($w(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function q_(e,t){await async function(e,t){return ab(e,"POST","/v1/accounts:update",ob(e,t))}(Pt(e),{oobCode:t})}async function K_(e,t){const n=Pt(e),r=await n_(n,{oobCode:t}),i=r.requestType;switch($w(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$w(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$w(r.mfaInfo,n,"internal-error");default:$w(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=U_._fromServerResponse(Yb(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function W_(e,t){const n={identifier:t,continueUri:Zw()?Jw():"http://localhost"},{signinMethods:r}=await async function(e,t){return ab(e,"POST","/v1/accounts:createAuthUri",ob(e,t))}(Pt(e),n);return r||[]}async function G_(e,t){const n=Pt(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&B_(n.auth,r,t);const{email:i}=await async function(e,t){return s_(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function H_(e,t,n){const r=Pt(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&B_(r.auth,i,n);const{email:s}=await async function(e,t){return s_(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function Q_(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Pt(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await gb(i,async function(e,t){return ab(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function $_(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await gb(e,r_(r,i));await e._updateTokensIfNecessary(s,!0)}class Y_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class X_ extends Y_{constructor(e,t,n,r){super(e,t,n),this.username=r}}class J_ extends Y_{constructor(e,t){super(e,"facebook.com",t)}}class Z_ extends X_{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class eE extends Y_{constructor(e,t){super(e,"google.com",t)}}class tE extends X_{constructor(e,t,n){super(e,"twitter.com",t,n)}}function nE(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=mb(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Y_(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new J_(s,i);case"github.com":return new Z_(s,i);case"google.com":return new eE(s,i);case"twitter.com":return new tE(s,i,e.screenName||null);case"custom":case"anonymous":return new Y_(s,null);default:return new Y_(s,r,i)}}(n)}class rE{constructor(e,t,n){this.type=e,this.credential=t,this.auth=n}static _fromIdtoken(e,t){return new rE("enroll",e,t)}static _fromMfaPendingCredential(e){return new rE("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return rE._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return rE._fromIdtoken(e.multiFactorSession.idToken)}return null}}class iE{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Yb(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>U_._fromServerResponse(n,e)));$w(r.mfaPendingCredential,n,"internal-error");const s=rE._fromMfaPendingCredential(r.mfaPendingCredential);return new iE(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await k_._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return $w(t.user,n,"internal-error"),k_._forOperation(t.user,t.operationType,o);default:Kw(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class sE{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>U_._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new sE(e)}async getSession(){return rE._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,t){const n=e,r=await this.getSession(),i=await gb(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await gb(this.user,function(e,t){return ab(e,"POST","/v2/accounts/mfaEnrollment:withdraw",ob(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(SP){throw SP}}}const oE=new WeakMap;const aE="__sak";class cE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(aE,"1"),this.storage.removeItem(aE),Promise.resolve(!0)):Promise.resolve(!1)}catch(Lg){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class lE extends cE{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=ft();return Pb(e)||Fb(e)}()&&function(){try{return!(!window||window===window.top)}catch(SP){return!1}}(),this.fallbackToPolling=jb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);yt()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}lE.type="LOCAL";const uE=lE;class hE extends cE{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}hE.type="SESSION";const dE=hE;class fE{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new fE(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function pE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}fE.receivers=[];class mE{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=pE("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function gE(){return window}function yE(){return"undefined"!==typeof gE().WorkerGlobalScope&&"function"===typeof gE().importScripts}const vE="firebaseLocalStorageDb",wE="firebaseLocalStorage",bE="fbase_key";class _E{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function EE(e,t){return e.transaction([wE],t?"readwrite":"readonly").objectStore(wE)}function IE(){const e=indexedDB.open(vE,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(wE,{keyPath:bE})}catch(SP){n(SP)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(wE)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(vE);return new _E(e).toPromise()}(),t(await IE()))}))}))}async function SE(e,t,n){const r=EE(e,!0).put({[bE]:t,value:n});return new _E(r).toPromise()}function kE(e,t){const n=EE(e,!0).delete(t);return new _E(n).toPromise()}class TE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await IE()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(SP){if(t++>3)throw SP;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fE._getInstance(yE()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new mE(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(Lg){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await IE();return await SE(e,aE,"1"),await kE(e,aE),!0}catch(Lg){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>SE(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=EE(e,!1).get(t),r=await new _E(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>kE(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=EE(e,!1).getAll();return new _E(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}TE.type="LOCAL";const xE=TE;const CE=1e12;class NE{constructor(e){this.auth=e,this.counter=CE,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new AE(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||CE;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||CE;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||CE;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class AE{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;$w(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(SP){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(SP){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const PE=Wb("rcb"),OE=new tb(3e4,6e4);class RE{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=gE().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return $w(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&zb(gE().grecaptcha)?Promise.resolve(gE().grecaptcha):new Promise(((n,r)=>{const i=gE().setTimeout((()=>{r(Ww(e,"network-request-failed"))}),OE.get());gE()[PE]=()=>{gE().clearTimeout(i),delete gE()[PE];const s=gE().grecaptcha;if(!s||!zb(s))return void r(Ww(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Kb("".concat("https://www.google.com/recaptcha/api.js?","?").concat(kt({onload:PE,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(Ww(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=gE().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class DE{async load(e){return new NE(e)}clearedOneInstance(){}}const LE="recaptcha",ME={theme:"light",type:"image"};class FE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},ME),n=arguments.length>2?arguments[2]:void 0;this.parameters=t,this.type=LE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Yb(n),this.isInvisible="invisible"===this.parameters.size,$w("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof e?document.getElementById(e):e;$w(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new DE:new RE,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(SP){return Promise.reject(SP)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){$w(!this.parameters.sitekey,this.auth,"argument-error"),$w(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$w("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=gE()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){$w(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){$w(Zw()&&!yE(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await ab(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);$w(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return $w(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class jE{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=d_._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function UE(e,t,n){var r;const i=await n.verify();try{let s;if($w("string"===typeof i,e,"argument-error"),$w(n.type===LE,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){$w("enroll"===t.type,e,"internal-error");const n=await function(e,t){return ab(e,"POST","/v2/accounts/mfaEnrollment:start",ob(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{$w("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;$w(n,e,"missing-multi-factor-info");const o=await function(e,t){return ab(e,"POST","/v2/accounts/mfaSignIn:start",ob(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return ab(e,"POST","/v1/accounts:sendVerificationCode",ob(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class VE{constructor(e){this.providerId=VE.PROVIDER_ID,this.auth=Yb(e)}verifyPhoneNumber(e,t){return UE(this.auth,e,Pt(t))}static credential(e,t){return d_._fromVerification(e,t)}static credentialFromResult(e){const t=e;return VE.credentialFromTaggedObject(t)}static credentialFromError(e){return VE.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?d_._fromTokenResponse(n,r):null}}function zE(e,t){return t?Sb(t):($w(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}VE.PROVIDER_ID="phone",VE.PHONE_SIGN_IN_METHOD="phone";class BE extends t_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return l_(e,this._buildIdpRequest())}_linkToIdToken(e,t){return l_(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return l_(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qE(e){return D_(e.auth,new BE(e),e.bypassAuthState)}function KE(e){const{auth:t,user:n}=e;return $w(n,t,"internal-error"),R_(n,new BE(e),e.bypassAuthState)}async function WE(e){const{auth:t,user:n}=e;return $w(n,t,"internal-error"),P_(n,new BE(e),e.bypassAuthState)}class GE{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(SP){this.reject(SP)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(SP){this.reject(SP)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qE;case"linkViaPopup":case"linkViaRedirect":return WE;case"reauthViaPopup":case"reauthViaRedirect":return KE;default:Kw(this.auth,"internal-error")}}resolve(e){Xw(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xw(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const HE=new tb(2e3,1e4);class QE extends GE{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,QE.currentPopupAction&&QE.currentPopupAction.cancel(),QE.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $w(e,this.auth,"internal-error"),e}async onExecution(){Xw(1===this.filter.length,"Popup operations only handle one event");const e=pE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Ww(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ww(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,QE.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ww(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,HE.get())};e()}}QE.currentPopupAction=null;const $E="pendingRedirect",YE=new Map;class XE extends GE{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=YE.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=tI(t),r=eI(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(SP){e=()=>Promise.reject(SP)}YE.set(this.auth._key(),e)}return this.bypassAuthState||YE.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function JE(e,t){return eI(e)._set(tI(t),"true")}function ZE(e,t){YE.set(e._key(),t)}function eI(e){return Sb(e._redirectPersistence)}function tI(e){return xb($E,e.config.apiKey,e.name)}function nI(e,t,n){return async function(e,t,n){const r=Yb(e);Hw(e,t,m_),await r._initializationPromise;const i=zE(r,n);return await JE(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function rI(e,t,n){return async function(e,t,n){const r=Pt(e);Hw(r.auth,t,m_),await r.auth._initializationPromise;const i=zE(r.auth,n);await JE(i,r.auth);const s=await oI(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function iI(e,t,n){return async function(e,t,n){const r=Pt(e);Hw(r.auth,t,m_),await r.auth._initializationPromise;const i=zE(r.auth,n);await O_(!1,r,t.providerId),await JE(i,r.auth);const s=await oI(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function sI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Yb(e),i=zE(r,t),s=new XE(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function oI(e){const t=pE("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class aI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lI(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!lI(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ww(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(cI(e))}saveEventToCache(e){this.cachedEventUids.add(cI(e)),this.lastProcessedEventTime=Date.now()}}function cI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function lI(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function uI(e){return ab(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const hI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dI=/^https?/;function fI(e){const t=Jw(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!dI.test(n))return!1;if(hI.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const pI=new tb(3e4,6e4);function mI(){const e=gE().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let gI=null;function yI(e){return gI=gI||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){mI(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{mI(),n(Ww(e,"network-request-failed"))},timeout:pI.get()})}if(null===(i=null===(r=gE().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=gE().gapi)||void 0===s?void 0:s.load)){const t=Wb("iframefcb");return gE()[t]=()=>{gapi.load?o():n(Ww(e,"network-request-failed"))},Kb("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw gI=null,e}))}(e),gI}const vI=new tb(5e3,15e3),wI="__/auth/iframe",bI="emulator/auth/iframe",_I={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function II(e){const t=e.config;$w(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?nb(t,bI):"https://".concat(e.config.authDomain,"/").concat(wI),r={apiKey:t.apiKey,appName:e.name,v:Sn},i=EI.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(kt(r).slice(1))}const SI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class kI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(SP){}}}function TI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},SI),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ft().toLowerCase();n&&(a=Ob(l)?"_blank":n),Ab(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Fb(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new kI(null);const h=window.open(t||"",a,u);$w(h,e,"popup-blocked");try{h.focus()}catch(SP){}return new kI(h)}const xI="__/auth/handler",CI="emulator/auth/handler",NI=encodeURIComponent("fac");async function AI(e,t,n,r,i,s){$w(e.config.authDomain,e,"auth-domain-config-required"),$w(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Sn,eventId:i};if(t instanceof m_){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof g_){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=await e._getAppCheckToken(),l=c?"#".concat(NI,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(xI);return nb(t,CI)}(e),"?").concat(kt(a).slice(1)).concat(l)}const PI="webStorageSupport";const OI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dE,this._completeRedirectFn=sI,this._overrideRedirectResult=ZE}async _openPopup(e,t,n,r){var i;Xw(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return TI(e,await AI(e,t,n,Jw(),r),pE())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){gE().location.href=e}(await AI(e,t,n,Jw(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Xw(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await yI(e),n=gE().gapi;return $w(n,e,"internal-error"),t.open({where:document.body,url:II(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_I,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ww(e,"network-request-failed"),s=gE().setTimeout((()=>{r(i)}),vI.get());function o(){gE().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new aI(e);return t.register("authEvent",(t=>{$w(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(PI,{type:PI},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[PI];void 0!==i&&t(!!i),Kw(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await uI(e);for(const n of t)try{if(fI(n))return}catch(Lg){}Kw(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jb()||Pb()||Fb()}};class RI{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Yw("unexpected MultiFactorSessionType")}}}class DI extends RI{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new DI(e)}_finalizeEnroll(e,t,n){return function(e,t){return ab(e,"POST","/v2/accounts/mfaEnrollment:finalize",ob(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return ab(e,"POST","/v2/accounts/mfaSignIn:finalize",ob(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class LI{constructor(){}static assertion(e){return DI._fromCredential(e)}}LI.FACTOR_ID="phone";var MI="@firebase/auth",FI="0.23.2";class jI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$w(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=ut())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var UI;function VI(){return window}UI="Browser",vn(new Ot("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;$w(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:UI,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ub(UI)},l=new $b(r,i,s,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Sb);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),vn(new Ot("auth-internal",(e=>(e=>new jI(e))(Yb(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Nn(MI,FI,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(UI)),Nn(MI,FI,"esm2017");async function zI(e,t,n){var r;const{BuildInfo:i}=VI();Xw(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Xw(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return Fb()?o.ibi=i.packageName:Db()?o.apn=i.packageName:Kw(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,AI(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function BI(e){const{cordova:t}=VI();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const qI=20;class KI extends aI{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function WI(e){const t=await QI()._get($I(e));return t&&await QI()._remove($I(e)),t}function GI(e,t){var n,r;const i=function(e){const t=YI(e),n=t.link?decodeURIComponent(t.link):void 0,r=YI(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return YI(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=YI(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(SP){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Ww(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function HI(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<qI;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function QI(){return Sb(uE)}function $I(e){return xb("authEvent",e.config.apiKey,e.name)}function YI(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Tt(n.join("?"))}const XI=class{constructor(){this._redirectPersistence=dE,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=sI,this._overrideRedirectResult=ZE}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new KI(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Kw(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,c,l,u;const h=VI();$w("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$w("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$w("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$w("function"===typeof(null===(c=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$w("function"===typeof(null===(u=null===(l=null===h||void 0===h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),YE.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:HI(),postBody:null,tenantId:e.tenantId,error:Ww(e,"no-auth-event")}}(e,n,r);await function(e,t){return QI()._set($I(e),t)}(e,s);const o=await zI(e,s,t);return async function(e,t,n){const{cordova:r}=VI();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{o(Ww(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),Db()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await BI(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=VI(),n={};Fb()?n.iosBundleId=t.packageName:Db()?n.androidPackageName=t.packageName:Kw(e,"operation-not-supported-in-this-environment"),await uI(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=VI(),s=setTimeout((async()=>{await WI(e),t.onEvent(JI())}),500),o=async n=>{clearTimeout(s);const r=await WI(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=GI(r,n.url)),t.onEvent(i||JI())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,c="".concat(i.packageName.toLowerCase(),"://");VI().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&o({url:e}),"function"===typeof a)try{a(e)}catch(SP){console.error(SP)}}}};function JI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ww("no-auth-event")}}function ZI(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function eS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return!("file:"!==ZI()&&"ionic:"!==ZI()&&"capacitor:"!==ZI()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function tS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return yt()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/Edge\/\d+/.test(e)}(e)}function nS(){try{const e=self.localStorage,t=pE();if(e)return e.setItem(t,"1"),e.removeItem(t),!tS()||vt()}catch(SP){return rS()&&vt()}return!1}function rS(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function iS(){return("http:"===ZI()||"https:"===ZI()||mt()||eS())&&!(gt()||pt())&&nS()&&!rS()}function sS(){return eS()&&"undefined"!==typeof document}const oS={LOCAL:"local",NONE:"none",SESSION:"session"},aS=$w,cS="persistence";async function lS(e){await e._initializationPromise;const t=uS(),n=xb(cS,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function uS(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(SP){return null}}const hS=$w;class dS{constructor(){this.browserResolver=Sb(OI),this.cordovaResolver=Sb(XI),this.underlyingResolver=null,this._redirectPersistence=dE,this._completeRedirectFn=sI,this._overrideRedirectResult=ZE}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return sS()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return hS(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!sS()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function fS(e){return e.unwrap()}function pS(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new vS(e,function(e,t){var n;const r=Pt(e),i=t;return $w(t.customData.operationType,r,"argument-error"),$w(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),iE._fromError(r,i)}(e,t))}else if(r){const e=mS(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function mS(e){const{_tokenResponse:t}=e instanceof wt?e.customData:e;if(!t)return null;if(!(e instanceof wt)&&"temporaryProof"in t&&"phoneNumber"in t)return VE.credentialFromResult(e);const n=t.providerId;if(!n||n===Pw.PASSWORD)return null;let r;switch(n){case Pw.GOOGLE:r=w_;break;case Pw.FACEBOOK:r=v_;break;case Pw.GITHUB:r=b_;break;case Pw.TWITTER:r=I_;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?__._create(n,o):u_._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new y_(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof wt?r.credentialFromError(e):r.credentialFromResult(e)}function gS(e,t){return t.catch((t=>{throw t instanceof wt&&pS(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,mS(r)),additionalUserInfo:nE(e),user:wS.getOrCreate(n)};var r}))}async function yS(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>gS(e,n.confirm(t))}}class vS{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return gS(fS(this.auth),this.resolver.resolveSignIn(e))}}class wS{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Pt(e);return oE.has(t)||oE.set(t,sE._fromUser(t)),oE.get(t)}(e)}static getOrCreate(e){return wS.USER_MAP.has(e)||wS.USER_MAP.set(e,new wS(e)),wS.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return gS(this.auth,M_(this._delegate,e))}async linkWithPhoneNumber(e,t){return yS(this.auth,async function(e,t,n){const r=Pt(e);await O_(!1,r,"phone");const i=await UE(r.auth,t,Pt(n));return new jE(i,(e=>M_(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return gS(this.auth,async function(e,t,n){const r=Pt(e);Hw(r.auth,t,m_);const i=zE(r.auth,n);return new QE(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,dS))}async linkWithRedirect(e){return await lS(Yb(this.auth)),iI(this._delegate,e,dS)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return gS(this.auth,F_(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return yS(this.auth,async function(e,t,n){const r=Pt(e),i=await UE(r.auth,t,Pt(n));return new jE(i,(e=>F_(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return gS(this.auth,async function(e,t,n){const r=Pt(e);Hw(r.auth,t,m_);const i=zE(r.auth,n);return new QE(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,dS))}async reauthenticateWithRedirect(e){return await lS(Yb(this.auth)),rI(this._delegate,e,dS)}sendEmailVerification(e){return G_(this._delegate,e)}async unlink(e){return await A_(this._delegate,e),this}updateEmail(e){return function(e,t){return $_(Pt(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return $_(Pt(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await P_(Pt(e),t)}(this._delegate,e)}updateProfile(e){return Q_(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return H_(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}wS.USER_MAP=new WeakMap;const bS=$w;class _S{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;bS(n,"invalid-api-key",{appName:e.name}),bS(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?dS:void 0;this._delegate=t.initialize({options:{persistence:IS(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Uw),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?wS.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Jb(this._delegate,e,t)}applyActionCode(e){return q_(this._delegate,e)}checkActionCode(e){return K_(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await n_(Pt(e),{oobCode:t,newPassword:n})}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return gS(this._delegate,async function(e,t,n){var r;const i=Yb(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Hb(i,s,"signUpPassword");o=S_(i,e)}else o=S_(i,s).catch((async e=>{if(e.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await Hb(i,s,"signUpPassword");return S_(i,e)}return Promise.reject(e)}));const a=await o.catch((e=>Promise.reject(e))),c=await k_._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(c.user),c}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return W_(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=f_.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){bS(iS(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Yb(e)._initializationPromise,sI(e,t,!1)}(this._delegate,dS);return e?gS(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Yb(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=ES(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=ES(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){var r;const i=Yb(e),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function o(e,t){$w(t.handleCodeInApp,i,"argument-error"),t&&B_(i,e,t)}if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Hb(i,s,"getOobCode",!0);o(e,n),await a_(i,e)}else o(s,n),await a_(i,s).catch((async e=>{if(e.code!=="auth/".concat("missing-recaptcha-token"))return Promise.reject(e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const e=await Hb(i,s,"getOobCode",!0);o(e,n),await a_(i,e)}}))}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){var r;const i=Yb(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Hb(i,s,"getOobCode",!0);n&&B_(i,e,n),await o_(i,e)}else n&&B_(i,s,n),await o_(i,s).catch((async e=>{if(e.code!=="auth/".concat("missing-recaptcha-token"))return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const e=await Hb(i,s,"getOobCode",!0);n&&B_(i,e,n),await o_(i,e)}}))}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){aS(Object.values(oS).includes(t),e,"invalid-persistence-type"),gt()?aS(t!==oS.SESSION,e,"unsupported-persistence-type"):pt()?aS(t===oS.NONE,e,"unsupported-persistence-type"):rS()?aS(t===oS.NONE||t===oS.LOCAL&&vt(),e,"unsupported-persistence-type"):aS(t===oS.NONE||nS(),e,"unsupported-persistence-type")}(this._delegate,e),e){case oS.SESSION:t=dE;break;case oS.LOCAL:t=await Sb(xE)._isAvailable()?xE:uE;break;case oS.NONE:t=Tb;break;default:return Kw("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return gS(this._delegate,async function(e){var t;const n=Yb(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new k_({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await S_(n,{returnSecureToken:!0}),i=await k_._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return gS(this._delegate,L_(this._delegate,e))}signInWithCustomToken(e){return gS(this._delegate,j_(this._delegate,e))}signInWithEmailAndPassword(e,t){return gS(this._delegate,function(e,t,n){return L_(Pt(e),p_.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return gS(this._delegate,async function(e,t,n){const r=Pt(e),i=p_.credentialWithLink(t,n||Jw());return $w(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),L_(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return yS(this._delegate,async function(e,t,n){const r=Yb(e),i=await UE(r,t,Pt(n));return new jE(i,(e=>L_(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return bS(iS(),this._delegate,"operation-not-supported-in-this-environment"),gS(this._delegate,async function(e,t,n){const r=Yb(e);Hw(e,t,m_);const i=zE(r,n);return new QE(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,dS))}async signInWithRedirect(e){return bS(iS(),this._delegate,"operation-not-supported-in-this-environment"),await lS(this._delegate),nI(this._delegate,e,dS)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await K_(Pt(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function ES(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&wS.getOrCreate(e)),error:t,complete:n}}function IS(e,t){const n=function(e,t){const n=uS();if(!n)return[];const r=xb(cS,e,t);switch(n.getItem(r)){case oS.NONE:return[Tb];case oS.LOCAL:return[xE,dE];case oS.SESSION:return[dE];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(xE)||n.push(xE),"undefined"!==typeof window)for(const r of[uE,dE])n.includes(r)||n.push(r);return n.includes(Tb)||n.push(Tb),n}_S.Persistence=oS;class SS{constructor(){this.providerId="phone",this._delegate=new VE(fS(Qn.auth()))}static credential(e,t){return VE.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}SS.PHONE_SIGN_IN_METHOD=VE.PHONE_SIGN_IN_METHOD,SS.PROVIDER_ID=VE.PROVIDER_ID;const kS=$w;class TS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qn.app();var r;kS(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new FE(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new Ot("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new _S(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ow,PASSWORD_RESET:Rw,RECOVER_EMAIL:Dw,REVERT_SECOND_FACTOR_ADDITION:Lw,VERIFY_AND_CHANGE_EMAIL:Mw,VERIFY_EMAIL:Fw}},EmailAuthProvider:p_,FacebookAuthProvider:v_,GithubAuthProvider:b_,GoogleAuthProvider:w_,OAuthProvider:y_,SAMLAuthProvider:E_,PhoneAuthProvider:SS,PhoneMultiFactorGenerator:LI,RecaptchaVerifier:TS,TwitterAuthProvider:I_,Auth:_S,AuthCredential:t_,Error:wt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.4.2")}(Qn);const xS=async(e,t)=>{if(!e)return;const n=NS.doc("users/".concat(e.uid));if(!(await n.get()).exists){const{displayName:i,email:s}=e,o=new Date;try{await n.set({displayName:i,email:s,createAt:o,...t})}catch(r){console.log("error creating user: ",r.message)}}return n};Qn.initializeApp({apiKey:"AIzaSyAWo9SvxOW4qvYf-iyFg8Tq1ZYNzhmJ5GM",authDomain:"booksuggester-94bd1.firebaseapp.com",projectId:"booksuggester-94bd1",storageBucket:"booksuggester-94bd1.appspot.com",messagingSenderId:"1083435225479",appId:"1:1083435225479:web:2b08b2b9011a5be26cc322",measurementId:"G-G9Q0SQZYFS"});const CS=Qn.auth(),NS=Qn.firestore(),AS=new Qn.auth.GoogleAuthProvider;AS.setCustomParameters({prompt:"select_account"});const PS=n.p+"static/media/empty.d8b54aebec93fdf83b956c93284bfcb7.svg";const OS=function(e){return(0,s.jsx)("img",{src:PS,alt:"",style:{height:"80px"}})};var RS=function(){return RS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},RS.apply(this,arguments)};Object.create;function DS(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var LS=n(324),MS=n.n(LS),FS="-ms-",jS="-moz-",US="-webkit-",VS="comm",zS="rule",BS="decl",qS="@import",KS="@keyframes",WS="@layer",GS=Math.abs,HS=String.fromCharCode,QS=Object.assign;function $S(e){return e.trim()}function YS(e,t){return(e=t.exec(e))?e[0]:e}function XS(e,t,n){return e.replace(t,n)}function JS(e,t,n){return e.indexOf(t,n)}function ZS(e,t){return 0|e.charCodeAt(t)}function ek(e,t,n){return e.slice(t,n)}function tk(e){return e.length}function nk(e){return e.length}function rk(e,t){return t.push(e),e}function ik(e,t){return e.filter((function(e){return!YS(e,t)}))}var sk=1,ok=1,ak=0,ck=0,lk=0,uk="";function hk(e,t,n,r,i,s,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:sk,column:ok,length:o,return:"",siblings:a}}function dk(e,t){return QS(hk("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function fk(e){for(;e.root;)e=dk(e.root,{children:[e]});rk(e,e.siblings)}function pk(){return lk=ck>0?ZS(uk,--ck):0,ok--,10===lk&&(ok=1,sk--),lk}function mk(){return lk=ck<ak?ZS(uk,ck++):0,ok++,10===lk&&(ok=1,sk++),lk}function gk(){return ZS(uk,ck)}function yk(){return ck}function vk(e,t){return ek(uk,e,t)}function wk(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function bk(e){return sk=ok=1,ak=tk(uk=e),ck=0,[]}function _k(e){return uk="",e}function Ek(e){return $S(vk(ck-1,kk(91===e?e+2:40===e?e+1:e)))}function Ik(e){for(;(lk=gk())&&lk<33;)mk();return wk(e)>2||wk(lk)>3?"":" "}function Sk(e,t){for(;--t&&mk()&&!(lk<48||lk>102||lk>57&&lk<65||lk>70&&lk<97););return vk(e,yk()+(t<6&&32==gk()&&32==mk()))}function kk(e){for(;mk();)switch(lk){case e:return ck;case 34:case 39:34!==e&&39!==e&&kk(lk);break;case 40:41===e&&kk(e);break;case 92:mk()}return ck}function Tk(e,t){for(;mk()&&e+lk!==57&&(e+lk!==84||47!==gk()););return"/*"+vk(t,ck-1)+"*"+HS(47===e?e:mk())}function xk(e){for(;!wk(gk());)mk();return vk(e,ck)}function Ck(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function Nk(e,t,n,r){switch(e.type){case WS:if(e.children.length)break;case qS:case BS:return e.return=e.return||e.value;case VS:return"";case KS:return e.return=e.value+"{"+Ck(e.children,r)+"}";case zS:if(!tk(e.value=e.props.join(",")))return""}return tk(n=Ck(e.children,r))?e.return=e.value+"{"+n+"}":""}function Ak(e,t,n){switch(function(e,t){return 45^ZS(e,0)?(((t<<2^ZS(e,0))<<2^ZS(e,1))<<2^ZS(e,2))<<2^ZS(e,3):0}(e,t)){case 5103:return US+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return US+e+e;case 4789:return jS+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return US+e+jS+e+FS+e+e;case 5936:switch(ZS(e,t+11)){case 114:return US+e+FS+XS(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return US+e+FS+XS(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return US+e+FS+XS(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return US+e+FS+e+e;case 6165:return US+e+FS+"flex-"+e+e;case 5187:return US+e+XS(e,/(\w+).+(:[^]+)/,US+"box-$1$2"+FS+"flex-$1$2")+e;case 5443:return US+e+FS+"flex-item-"+XS(e,/flex-|-self/g,"")+(YS(e,/flex-|baseline/)?"":FS+"grid-row-"+XS(e,/flex-|-self/g,""))+e;case 4675:return US+e+FS+"flex-line-pack"+XS(e,/align-content|flex-|-self/g,"")+e;case 5548:return US+e+FS+XS(e,"shrink","negative")+e;case 5292:return US+e+FS+XS(e,"basis","preferred-size")+e;case 6060:return US+"box-"+XS(e,"-grow","")+US+e+FS+XS(e,"grow","positive")+e;case 4554:return US+XS(e,/([^-])(transform)/g,"$1"+US+"$2")+e;case 6187:return XS(XS(XS(e,/(zoom-|grab)/,US+"$1"),/(image-set)/,US+"$1"),e,"")+e;case 5495:case 3959:return XS(e,/(image-set\([^]*)/,US+"$1$`$1");case 4968:return XS(XS(e,/(.+:)(flex-)?(.*)/,US+"box-pack:$3"+FS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+US+e+e;case 4200:if(!YS(e,/flex-|baseline/))return FS+"grid-column-align"+ek(e,t)+e;break;case 2592:case 3360:return FS+XS(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,YS(e.props,/grid-\w+-end/)}))?~JS(e+(n=n[t].value),"span",0)?e:FS+XS(e,"-start","")+e+FS+"grid-row-span:"+(~JS(n,"span",0)?YS(n,/\d+/):+YS(n,/\d+/)-+YS(e,/\d+/))+";":FS+XS(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return YS(e.props,/grid-\w+-start/)}))?e:FS+XS(XS(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return XS(e,/(.+)-inline(.+)/,US+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(tk(e)-1-t>6)switch(ZS(e,t+1)){case 109:if(45!==ZS(e,t+4))break;case 102:return XS(e,/(.+:)(.+)-([^]+)/,"$1"+US+"$2-$3$1"+jS+(108==ZS(e,t+3)?"$3":"$2-$3"))+e;case 115:return~JS(e,"stretch",0)?Ak(XS(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return XS(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,r,i,s,o,a){return FS+n+":"+r+a+(i?FS+n+"-span:"+(s?o:+o-+r)+a:"")+e}));case 4949:if(121===ZS(e,t+6))return XS(e,":",":"+US)+e;break;case 6444:switch(ZS(e,45===ZS(e,14)?18:11)){case 120:return XS(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+US+(45===ZS(e,14)?"inline-":"")+"box$3$1"+US+"$2$3$1"+FS+"$2box$3")+e;case 100:return XS(e,":",":"+FS)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return XS(e,"scroll-","scroll-snap-")+e}return e}function Pk(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case BS:return void(e.return=Ak(e.value,e.length,n));case KS:return Ck([dk(e,{value:XS(e.value,"@","@"+US)})],r);case zS:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(YS(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":fk(dk(e,{props:[XS(t,/:(read-\w+)/,":"+jS+"$1")]})),fk(dk(e,{props:[t]})),QS(e,{props:ik(n,r)});break;case"::placeholder":fk(dk(e,{props:[XS(t,/:(plac\w+)/,":"+US+"input-$1")]})),fk(dk(e,{props:[XS(t,/:(plac\w+)/,":"+jS+"$1")]})),fk(dk(e,{props:[XS(t,/:(plac\w+)/,FS+"input-$1")]})),fk(dk(e,{props:[t]})),QS(e,{props:ik(n,r)})}return""}))}}function Ok(e){return _k(Rk("",null,null,null,[""],e=bk(e),0,[0],e))}function Rk(e,t,n,r,i,s,o,a,c){for(var l=0,u=0,h=o,d=0,f=0,p=0,m=1,g=1,y=1,v=0,w="",b=i,_=s,E=r,I=w;g;)switch(p=v,v=mk()){case 40:if(108!=p&&58==ZS(I,h-1)){-1!=JS(I+=XS(Ek(v),"&","&\f"),"&\f",GS(l?a[l-1]:0))&&(y=-1);break}case 34:case 39:case 91:I+=Ek(v);break;case 9:case 10:case 13:case 32:I+=Ik(p);break;case 92:I+=Sk(yk()-1,7);continue;case 47:switch(gk()){case 42:case 47:rk(Lk(Tk(mk(),yk()),t,n,c),c);break;default:I+="/"}break;case 123*m:a[l++]=tk(I)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+u:-1==y&&(I=XS(I,/\f/g,"")),f>0&&tk(I)-h&&rk(f>32?Mk(I+";",r,n,h-1,c):Mk(XS(I," ","")+";",r,n,h-2,c),c);break;case 59:I+=";";default:if(rk(E=Dk(I,t,n,l,u,i,a,w,b=[],_=[],h,s),s),123===v)if(0===u)Rk(I,t,E,E,b,s,h,a,_);else switch(99===d&&110===ZS(I,3)?100:d){case 100:case 108:case 109:case 115:Rk(e,E,E,r&&rk(Dk(e,E,E,0,0,i,a,w,i,b=[],h,_),_),i,_,h,a,r?b:_);break;default:Rk(I,E,E,E,[""],_,0,a,_)}}l=u=f=0,m=y=1,w=I="",h=o;break;case 58:h=1+tk(I),f=p;default:if(m<1)if(123==v)--m;else if(125==v&&0==m++&&125==pk())continue;switch(I+=HS(v),v*m){case 38:y=u>0?1:(I+="\f",-1);break;case 44:a[l++]=(tk(I)-1)*y,y=1;break;case 64:45===gk()&&(I+=Ek(mk())),d=gk(),u=h=tk(w=I+=xk(yk())),v++;break;case 45:45===p&&2==tk(I)&&(m=0)}}return s}function Dk(e,t,n,r,i,s,o,a,c,l,u,h){for(var d=i-1,f=0===i?s:[""],p=nk(f),m=0,g=0,y=0;m<r;++m)for(var v=0,w=ek(e,d+1,d=GS(g=o[m])),b=e;v<p;++v)(b=$S(g>0?f[v]+" "+w:XS(w,/&\f/g,f[v])))&&(c[y++]=b);return hk(e,t,n,0===i?zS:a,c,l,u,h)}function Lk(e,t,n,r){return hk(e,t,n,VS,HS(lk),ek(e,2,-2),0,r)}function Mk(e,t,n,r,i){return hk(e,t,n,BS,ek(e,0,r),ek(e,r+1,-1),r,i)}const Fk={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var jk="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",Uk="active",Vk="data-styled-version",zk="6.1.8",Bk="/*!sc*/\n",qk="undefined"!=typeof window&&"HTMLElement"in window,Kk=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),Wk=(new Set,Object.freeze([])),Gk=Object.freeze({});function Hk(e,t,n){return void 0===n&&(n=Gk),e.theme!==n.theme&&e.theme||t||n.theme}var Qk=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),$k=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Yk=/(^-|-$)/g;function Xk(e){return e.replace($k,"-").replace(Yk,"")}var Jk=/(a)(d)/gi,Zk=52,eT=function(e){return String.fromCharCode(e+(e>25?39:97))};function tT(e){var t,n="";for(t=Math.abs(e);t>Zk;t=t/Zk|0)n=eT(t%Zk)+n;return(eT(t%Zk)+n).replace(Jk,"$1-$2")}var nT,rT=5381,iT=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},sT=function(e){return iT(rT,e)};function oT(e){return tT(sT(e)>>>0)}function aT(e){return e.displayName||e.name||"Component"}function cT(e){return"string"==typeof e&&!0}var lT="function"==typeof Symbol&&Symbol.for,uT=lT?Symbol.for("react.memo"):60115,hT=lT?Symbol.for("react.forward_ref"):60112,dT={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},fT={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},pT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},mT=((nT={})[hT]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},nT[uT]=pT,nT);function gT(e){return("type"in(t=e)&&t.type.$$typeof)===uT?pT:"$$typeof"in e?mT[e.$$typeof]:dT;var t}var yT=Object.defineProperty,vT=Object.getOwnPropertyNames,wT=Object.getOwnPropertySymbols,bT=Object.getOwnPropertyDescriptor,_T=Object.getPrototypeOf,ET=Object.prototype;function IT(e,t,n){if("string"!=typeof t){if(ET){var r=_T(t);r&&r!==ET&&IT(e,r,n)}var i=vT(t);wT&&(i=i.concat(wT(t)));for(var s=gT(e),o=gT(t),a=0;a<i.length;++a){var c=i[a];if(!(c in fT||n&&n[c]||o&&c in o||s&&c in s)){var l=bT(t,c);try{yT(e,c,l)}catch(e){}}}}return e}function ST(e){return"function"==typeof e}function kT(e){return"object"==typeof e&&"styledComponentId"in e}function TT(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function xT(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function CT(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function NT(e,t,n){if(void 0===n&&(n=!1),!n&&!CT(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=NT(e[r],t[r]);else if(CT(t))for(var r in t)e[r]=NT(e[r],t[r]);return e}function AT(e,t){Object.defineProperty(e,"toString",{value:t})}function PT(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var OT=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw PT(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var s=r;s<i;s++)this.groupSizes[s]=0}for(var o=this.indexOfGroup(e+1),a=(s=0,t.length);s<a;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,s=r;s<i;s++)t+="".concat(this.tag.getRule(s)).concat(Bk);return t},e}(),RT=new Map,DT=new Map,LT=1,MT=function(e){if(RT.has(e))return RT.get(e);for(;DT.has(LT);)LT++;var t=LT++;return RT.set(e,t),DT.set(t,e),t},FT=function(e,t){LT=t+1,RT.set(e,t),DT.set(t,e)},jT="style[".concat(jk,"][").concat(Vk,'="').concat(zk,'"]'),UT=new RegExp("^".concat(jk,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),VT=function(e,t,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&e.registerName(t,r)},zT=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(Bk),i=[],s=0,o=r.length;s<o;s++){var a=r[s].trim();if(a){var c=a.match(UT);if(c){var l=0|parseInt(c[1],10),u=c[2];0!==l&&(FT(u,l),VT(e,u,c[3]),e.getTag().insertRules(l,i)),i.length=0}else i.push(a)}}};function BT(){return n.nc}var qT=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(jk,"]")));return t[t.length-1]}(n),s=void 0!==i?i.nextSibling:null;r.setAttribute(jk,Uk),r.setAttribute(Vk,zk);var o=BT();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},KT=function(){function e(e){this.element=qT(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw PT(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),WT=function(){function e(e){this.element=qT(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),GT=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),HT=qk,QT={isServer:!qk,useCSSOMInjection:!Kk},$T=function(){function e(e,t,n){void 0===e&&(e=Gk),void 0===t&&(t={});var r=this;this.options=RS(RS({},QT),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&qk&&HT&&(HT=!1,function(e){for(var t=document.querySelectorAll(jT),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(jk)!==Uk&&(zT(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this)),AT(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return DT.get(e)}(n);if(void 0===i)return"continue";var s=e.names.get(i),o=t.getGroup(n);if(void 0===s||0===o.length)return"continue";var a="".concat(jk,".g").concat(n,'[id="').concat(i,'"]'),c="";void 0!==s&&s.forEach((function(e){e.length>0&&(c+="".concat(e,","))})),r+="".concat(o).concat(a,'{content:"').concat(c,'"}').concat(Bk)},s=0;s<n;s++)i(s);return r}(r)}))}return e.registerId=function(e){return MT(e)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(RS(RS({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new GT(n):t?new KT(n):new WT(n)}(this.options),new OT(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(MT(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(MT(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(MT(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),YT=/&/g,XT=/^\s*\/\/.*$/gm;function JT(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=JT(e.children,t)),e}))}function ZT(e){var t,n,r,i=void 0===e?Gk:e,s=i.options,o=void 0===s?Gk:s,a=i.plugins,c=void 0===a?Wk:a,l=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},u=c.slice();u.push((function(e){e.type===zS&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(YT,n).replace(r,l))})),o.prefix&&u.push(Pk),u.push(Nk);var h=function(e,i,s,a){void 0===i&&(i=""),void 0===s&&(s=""),void 0===a&&(a="&"),t=a,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var c=e.replace(XT,""),l=Ok(s||i?"".concat(s," ").concat(i," { ").concat(c," }"):c);o.namespace&&(l=JT(l,o.namespace));var h=[];return Ck(l,function(e){var t=nk(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}(u.concat(function(e){return function(t){t.root||(t=t.return)&&e(t)}}((function(e){return h.push(e)}))))),h};return h.hash=c.length?c.reduce((function(e,t){return t.name||PT(15),iT(e,t.name)}),rT).toString():"",h}var ex=new $T,tx=ZT(),nx=t.createContext({shouldForwardProp:void 0,styleSheet:ex,stylis:tx}),rx=(nx.Consumer,t.createContext(void 0));function ix(){return(0,t.useContext)(nx)}function sx(e){var n=(0,t.useState)(e.stylisPlugins),r=n[0],i=n[1],s=ix().styleSheet,o=(0,t.useMemo)((function(){var t=s;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target,s]),a=(0,t.useMemo)((function(){return ZT({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:r})}),[e.enableVendorPrefixes,e.namespace,r]);(0,t.useEffect)((function(){MS()(r,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]);var c=(0,t.useMemo)((function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:o,stylis:a}}),[e.shouldForwardProp,o,a]);return t.createElement(nx.Provider,{value:c},t.createElement(rx.Provider,{value:a},e.children))}var ox=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=tx);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,AT(this,(function(){throw PT(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=tx),this.name+e.hash},e}(),ax=function(e){return e>="A"&&e<="Z"};function cx(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;ax(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var lx=function(e){return null==e||!1===e||""===e},ux=function(e){var t,n,r=[];for(var i in e){var s=e[i];e.hasOwnProperty(i)&&!lx(s)&&(Array.isArray(s)&&s.isCss||ST(s)?r.push("".concat(cx(i),":"),s,";"):CT(s)?r.push.apply(r,DS(DS(["".concat(i," {")],ux(s),!1),["}"],!1)):r.push("".concat(cx(i),": ").concat((t=i,null==(n=s)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in Fk||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function hx(e,t,n,r){return lx(e)?[]:kT(e)?[".".concat(e.styledComponentId)]:ST(e)?!ST(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:hx(e(t),t,n,r):e instanceof ox?n?(e.inject(n,r),[e.getName(r)]):[e]:CT(e)?ux(e):Array.isArray(e)?Array.prototype.concat.apply(Wk,e.map((function(e){return hx(e,t,n,r)}))):[e.toString()];var i}function dx(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(ST(n)&&!kT(n))return!1}return!0}var fx=sT(zk),px=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&dx(e),this.componentId=t,this.baseHash=iT(fx,t),this.baseStyle=n,$T.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=TT(r,this.staticRulesId);else{var i=xT(hx(this.rules,e,t,n)),s=tT(iT(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,s)){var o=n(i,".".concat(s),void 0,this.componentId);t.insertRules(this.componentId,s,o)}r=TT(r,s),this.staticRulesId=s}else{for(var a=iT(this.baseHash,n.hash),c="",l=0;l<this.rules.length;l++){var u=this.rules[l];if("string"==typeof u)c+=u;else if(u){var h=xT(hx(u,e,t,n));a=iT(a,h+l),c+=h}}if(c){var d=tT(a>>>0);t.hasNameForId(this.componentId,d)||t.insertRules(this.componentId,d,n(c,".".concat(d),void 0,this.componentId)),r=TT(r,d)}}return r},e}(),mx=t.createContext(void 0);mx.Consumer;var gx={};new Set;function yx(e,n,r){var i=kT(e),s=e,o=!cT(e),a=n.attrs,c=void 0===a?Wk:a,l=n.componentId,u=void 0===l?function(e,t){var n="string"!=typeof e?"sc":Xk(e);gx[n]=(gx[n]||0)+1;var r="".concat(n,"-").concat(oT(zk+n+gx[n]));return t?"".concat(t,"-").concat(r):r}(n.displayName,n.parentComponentId):l,h=n.displayName,d=void 0===h?function(e){return cT(e)?"styled.".concat(e):"Styled(".concat(aT(e),")")}(e):h,f=n.displayName&&n.componentId?"".concat(Xk(n.displayName),"-").concat(n.componentId):n.componentId||u,p=i&&s.attrs?s.attrs.concat(c).filter(Boolean):c,m=n.shouldForwardProp;if(i&&s.shouldForwardProp){var g=s.shouldForwardProp;if(n.shouldForwardProp){var y=n.shouldForwardProp;m=function(e,t){return g(e,t)&&y(e,t)}}else m=g}var v=new px(r,f,i?s.componentStyle:void 0);function w(e,n){return function(e,n,r){var i=e.attrs,s=e.componentStyle,o=e.defaultProps,a=e.foldedComponentIds,c=e.styledComponentId,l=e.target,u=t.useContext(mx),h=ix(),d=e.shouldForwardProp||h.shouldForwardProp,f=Hk(n,u,o)||Gk,p=function(e,t,n){for(var r,i=RS(RS({},t),{className:void 0,theme:n}),s=0;s<e.length;s+=1){var o=ST(r=e[s])?r(i):r;for(var a in o)i[a]="className"===a?TT(i[a],o[a]):"style"===a?RS(RS({},i[a]),o[a]):o[a]}return t.className&&(i.className=TT(i.className,t.className)),i}(i,n,f),m=p.as||l,g={};for(var y in p)void 0===p[y]||"$"===y[0]||"as"===y||"theme"===y&&p.theme===f||("forwardedAs"===y?g.as=p.forwardedAs:d&&!d(y,m)||(g[y]=p[y]));var v=function(e,t){var n=ix();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(s,p),w=TT(a,c);return v&&(w+=" "+v),p.className&&(w+=" "+p.className),g[cT(m)&&!Qk.has(m)?"class":"className"]=w,g.ref=r,(0,t.createElement)(m,g)}(b,e,n)}w.displayName=d;var b=t.forwardRef(w);return b.attrs=p,b.componentStyle=v,b.displayName=d,b.shouldForwardProp=m,b.foldedComponentIds=i?TT(s.foldedComponentIds,s.styledComponentId):"",b.styledComponentId=f,b.target=i?s.target:e,Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)NT(e,i[r],!0);return e}({},s.defaultProps,e):e}}),AT(b,(function(){return".".concat(b.styledComponentId)})),o&&IT(b,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),b}function vx(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var wx=function(e){return Object.assign(e,{isCss:!0})};function bx(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(ST(e)||CT(e))return wx(hx(vx(Wk,DS([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?hx(r):wx(hx(vx(r,t)))}function _x(e,t,n){if(void 0===n&&(n=Gk),!t)throw PT(1,t);var r=function(r){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return e(t,n,bx.apply(void 0,DS([r],i,!1)))};return r.attrs=function(r){return _x(e,t,RS(RS({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return _x(e,t,RS(RS({},n),r))},r}var Ex=function(e){return _x(yx,e)},Ix=Ex;Qk.forEach((function(e){Ix[e]=Ex(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=dx(e),$T.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,r){var i=r(xT(hx(this.rules,t,n,r)),""),s=this.componentId+e;n.insertRules(s,s,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&$T.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();var Sx,kx;(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString(),n=BT(),r=xT([n&&'nonce="'.concat(n,'"'),"".concat(jk,'="true"'),"".concat(Vk,'="').concat(zk,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw PT(2);return e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)throw PT(2);var r=((n={})[jk]="",n[Vk]=zk,n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),i=BT();return i&&(r.nonce=i),[t.createElement("style",RS({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new $T({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw PT(2);return t.createElement(sx,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw PT(3)}})(),"__sc-".concat(jk,"__");class Tx extends t.Component{constructor(){super(),this.state={books:[],hasHoveredOver:!1}}async componentDidMount(){try{const e=(await NS.collection("users").doc(this.props.currentUser.id).collection("books").get()).docs.map((e=>({id:e.id,...e.data()})));this.setState({books:e})}catch(e){console.error("Error fetching books:",e)}}handleClickDelete(e){(async()=>{await NS.collection("users").doc(this.props.currentUser.id).collection("books").doc(e).delete().then((e=>{console.log(e)})).catch((e=>{console.error("Error deleting a document: ",e)}))})(),this.componentDidMount()}handleClickUpdateRead(e,t){(async()=>{await NS.collection("users").doc(this.props.currentUser.id).collection("books").doc(e).update({hasRead:!t}).then((e=>{console.log(e)})).catch((e=>{console.error("Error updating a document: ",e)}))})(),this.componentDidMount()}render(){const{books:e}=this.state;return(0,s.jsx)(xx,{children:this.props.currentUser&&e.length>0?e.map((e=>(0,s.jsxs)("div",{children:[(0,s.jsx)(o,{className:"book",title:e.title,authors:e.authors,subject:e.subject,genre:e.genre,background:e.background},e.id),(0,s.jsxs)("button",{id:"btnDelete",onClick:()=>this.handleClickDelete(e.id),children:[(0,s.jsx)(Ye,{icon:tt})," delete"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)(Ye,{icon:Je}),"  ",(0,s.jsx)("span",{className:"checkmark",children:"read "})," ",(0,s.jsx)("input",{type:"checkbox",checked:e.hasRead,onChange:()=>this.handleClickUpdateRead(e.id,e.hasRead)})]})]},e.id))):(0,s.jsx)(Cx,{children:(0,s.jsxs)("div",{className:"flexColumn flexCenter",children:[(0,s.jsx)(OS,{}),(0,s.jsx)("span",{className:"font20",children:"No books found"})]})})})}}const xx=Ix.nav(Sx||(Sx=i(["\n    width: 75vw;\n    margin: 100px auto 60px;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: start; \n    gap: 20px;\n    min-height: 70vh;\n"]))),Cx=Ix.nav(kx||(kx=i(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%; \n"])));function Nx(e,t){return Nx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Nx(e,t)}function Ax(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Nx(e,t)}function Px(){return Px=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Px.apply(this,arguments)}function Ox(e){return"/"===e.charAt(0)}function Rx(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}const Dx=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],s=e&&Ox(e),o=t&&Ox(t),a=s||o;if(e&&Ox(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var c=i[i.length-1];n="."===c||".."===c||""===c}else n=!1;for(var l=0,u=i.length;u>=0;u--){var h=i[u];"."===h?Rx(i,u):".."===h?(Rx(i,u),l++):l&&(Rx(i,u),l--)}if(!a)for(;l--;l)i.unshift("..");!a||""===i[0]||i[0]&&Ox(i[0])||i.unshift("");var d=i.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d};var Lx=!0,Mx="Invariant failed";function Fx(e,t){if(!e){if(Lx)throw new Error(Mx);var n="function"===typeof t?t():t;throw new Error(n?Mx+": "+n:Mx)}}function jx(e){return"/"===e.charAt(0)?e:"/"+e}function Ux(e){return"/"===e.charAt(0)?e.substr(1):e}function Vx(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function zx(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function Bx(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function qx(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var s=t.indexOf("?");return-1!==s&&(n=t.substr(s),t=t.substr(0,s)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=Px({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(SP){throw SP instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):SP}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=Dx(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function Kx(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var s="function"===typeof e?e(t,n):e;"string"===typeof s?"function"===typeof r?r(s,i):i(!0):i(!1!==s)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var Wx=!("undefined"===typeof window||!window.document||!window.document.createElement);function Gx(e,t){t(window.confirm(e))}var Hx="popstate",Qx="hashchange";function $x(){try{return window.history.state||{}}catch(SP){return{}}}function Yx(e){void 0===e&&(e={}),Wx||Fx(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,s=i.forceRefresh,o=void 0!==s&&s,a=i.getUserConfirmation,c=void 0===a?Gx:a,l=i.keyLength,u=void 0===l?6:l,h=e.basename?zx(jx(e.basename)):"";function d(e){var t=e||{},n=t.key,r=t.state,i=window.location,s=i.pathname+i.search+i.hash;return h&&(s=Vx(s,h)),qx(s,r,n)}function f(){return Math.random().toString(36).substr(2,u)}var p=Kx();function m(e){Px(x,e),x.length=t.length,p.notifyListeners(x.location,x.action)}function g(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||w(d(e.state))}function y(){w(d($x()))}var v=!1;function w(e){if(v)v=!1,m();else{p.confirmTransitionTo(e,"POP",c,(function(t){t?m({action:"POP",location:e}):function(e){var t=x.location,n=_.indexOf(t.key);-1===n&&(n=0);var r=_.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(v=!0,I(i))}(e)}))}}var b=d($x()),_=[b.key];function E(e){return h+Bx(e)}function I(e){t.go(e)}var S=0;function k(e){1===(S+=e)&&1===e?(window.addEventListener(Hx,g),r&&window.addEventListener(Qx,y)):0===S&&(window.removeEventListener(Hx,g),r&&window.removeEventListener(Qx,y))}var T=!1;var x={length:t.length,action:"POP",location:b,createHref:E,push:function(e,r){var i="PUSH",s=qx(e,r,f(),x.location);p.confirmTransitionTo(s,i,c,(function(e){if(e){var r=E(s),a=s.key,c=s.state;if(n)if(t.pushState({key:a,state:c},null,r),o)window.location.href=r;else{var l=_.indexOf(x.location.key),u=_.slice(0,l+1);u.push(s.key),_=u,m({action:i,location:s})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",s=qx(e,r,f(),x.location);p.confirmTransitionTo(s,i,c,(function(e){if(e){var r=E(s),a=s.key,c=s.state;if(n)if(t.replaceState({key:a,state:c},null,r),o)window.location.replace(r);else{var l=_.indexOf(x.location.key);-1!==l&&(_[l]=s.key),m({action:i,location:s})}else window.location.replace(r)}}))},go:I,goBack:function(){I(-1)},goForward:function(){I(1)},block:function(e){void 0===e&&(e=!1);var t=p.setPrompt(e);return T||(k(1),T=!0),function(){return T&&(T=!1,k(-1)),t()}},listen:function(e){var t=p.appendListener(e);return k(1),function(){k(-1),t()}}};return x}var Xx="hashchange",Jx={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+Ux(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:Ux,decodePath:jx},slash:{encodePath:jx,decodePath:jx}};function Zx(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function eC(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function tC(e){window.location.replace(Zx(window.location.href)+"#"+e)}function nC(e){void 0===e&&{},Wx||Fx(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?Gx:r,s=n.hashType,o=void 0===s?"slash":s,a=e.basename?zx(jx(e.basename)):"",c=Jx[o],l=c.encodePath,u=c.decodePath;function h(){var e=u(eC());return a&&Vx(e,a),qx(e)}var d=Kx();function f(e){Px(k,e),k.length=t.length,d.notifyListeners(k.location,k.action)}var p=!1,m=null;function g(){var e=eC(),t=l(e);if(e!==t)tC(t);else{var n=h(),r=k.location;if(!p&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(m===Bx(n))return;null,function(e){if(p)!1,f();else{var t="POP";d.confirmTransitionTo(e,t,i,(function(n){n?f({action:t,location:e}):function(e){var t=k.location,n=b.lastIndexOf(Bx(t));-1===n&&0;var r=b.lastIndexOf(Bx(e));-1===r&&0;var i=n-r;i&&(!0,_(i))}(e)}))}}(n)}}var y=eC(),v=l(y);y!==v&&tC(v);var w=h(),b=[Bx(w)];function _(e){t.go(e)}var E=0;function I(e){1===(E+=e)&&1===e?window.addEventListener(Xx,g):0===E&&window.removeEventListener(Xx,g)}var S=!1;var k={length:t.length,action:"POP",location:w,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&Zx(window.location.href),n+"#"+l(a+Bx(e))},push:function(e,t){var n="PUSH",r=qx(e,void 0,void 0,k.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=Bx(r),i=l(a+t);if(eC()!==i){t,function(e){window.location.hash=e}(i);var s=b.lastIndexOf(Bx(k.location)),o=b.slice(0,s+1);o.push(t),o,f({action:n,location:r})}else f()}}))},replace:function(e,t){var n="REPLACE",r=qx(e,void 0,void 0,k.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=Bx(r),i=l(a+t);eC()!==i&&(t,tC(i));var s=b.indexOf(Bx(k.location));-1!==s&&(b[s]=t),f({action:n,location:r})}}))},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},block:function(e){void 0===e&&!1;var t=d.setPrompt(e);return S||(I(1),!0),function(){return S&&(!1,I(-1)),t()}},listen:function(e){var t=d.appendListener(e);return I(1),function(){I(-1),t()}}};return k}function rC(e,t,n){return Math.min(Math.max(e,t),n)}var iC=1073741823,sC="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var oC=t.createContext||function(e,n){var r,i,s="__create-react-context-"+function(){var e="__global_unique_id__";return sC[e]=(sC[e]||0)+1}()+"__",o=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}Ax(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[s]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):iC,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);o.childContextTypes=((r={})[s]=Ue().object.isRequired,r);var a=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}Ax(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?iC:t},r.componentDidMount=function(){this.context[s]&&this.context[s].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?iC:e},r.componentWillUnmount=function(){this.context[s]&&this.context[s].off(this.onUpdate)},r.getValue=function(){return this.context[s]?this.context[s].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return a.contextTypes=((i={})[s]=Ue().object,i),{Provider:o,Consumer:a}};const aC=oC;var cC=n(340),lC=n.n(cC);n(86);function uC(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var hC=n(219),dC=n.n(hC),fC=function(e){var t=aC();return t.displayName=e,t},pC=fC("Router-History"),mC=fC("Router"),gC=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}Ax(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return t.createElement(mC.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(pC.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;t.Component;var yC={},vC=1e4,wC=0;function bC(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,s=void 0!==i&&i,o=n.strict,a=void 0!==o&&o,c=n.sensitive,l=void 0!==c&&c;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=yC[n]||(yC[n]={});if(r[e])return r[e];var i=[],s={regexp:lC()(e,i,t),keys:i};return wC<vC&&(r[e]=s,wC++),s}(n,{end:s,strict:a,sensitive:l}),i=r.regexp,o=r.keys,c=i.exec(e);if(!c)return null;var u=c[0],h=c.slice(1),d=e===u;return s&&!d?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:d,params:o.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var _C=function(e){function n(){return e.apply(this,arguments)||this}return Ax(n,e),n.prototype.render=function(){var e=this;return t.createElement(mC.Consumer,null,(function(n){n||Fx(!1);var r=e.props.location||n.location,i=Px({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?bC(r.pathname,e.props):n.match}),s=e.props,o=s.children,a=s.component,c=s.render;return Array.isArray(o)&&function(e){return 0===t.Children.count(e)}(o)&&(o=null),t.createElement(mC.Provider,{value:i},i.match?o?"function"===typeof o?o(i):o:a?t.createElement(a,i):c?c(i):null:"function"===typeof o?o(i):null)}))},n}(t.Component);function EC(e){return"/"===e.charAt(0)?e:"/"+e}function IC(e,t){if(!e)return t;var n=EC(e);return 0!==t.pathname.indexOf(n)?t:Px({},t,{pathname:t.pathname.substr(n.length)})}function SC(e){return"string"===typeof e?e:Bx(e)}function kC(e){return function(){Fx(!1)}}function TC(){}t.Component;var xC=function(e){function n(){return e.apply(this,arguments)||this}return Ax(n,e),n.prototype.render=function(){var e=this;return t.createElement(mC.Consumer,null,(function(n){n||Fx(!1);var r,i,s=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var o=e.props.path||e.props.from;i=o?bC(s.pathname,Px({},e.props,{path:o})):n.match}})),i?t.cloneElement(r,{location:s,computedMatch:i}):null}))},n}(t.Component);function CC(e){var n="withRouter("+(e.displayName||e.name)+")",r=function(n){var r=n.wrappedComponentRef,i=uC(n,["wrappedComponentRef"]);return t.createElement(mC.Consumer,null,(function(n){return n||Fx(!1),t.createElement(e,Px({},i,n,{ref:r}))}))};return r.displayName=n,r.WrappedComponent=e,dC()(r,e)}t.useContext;var NC=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=Yx(t.props),t}return Ax(n,e),n.prototype.render=function(){return t.createElement(gC,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var AC=function(e,t){return"function"===typeof e?e(t):e},PC=function(e,t){return"string"===typeof e?qx(e,null,null,t):e},OC=function(e){return e},RC=t.forwardRef;"undefined"===typeof RC&&(RC=OC);var DC=RC((function(e,n){var r=e.innerRef,i=e.navigate,s=e.onClick,o=uC(e,["innerRef","navigate","onClick"]),a=o.target,c=Px({},o,{onClick:function(e){try{s&&s(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||a&&"_self"!==a||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return c.ref=OC!==RC&&n||r,t.createElement("a",c)}));var LC=RC((function(e,n){var r=e.component,i=void 0===r?DC:r,s=e.replace,o=e.to,a=e.innerRef,c=uC(e,["component","replace","to","innerRef"]);return t.createElement(mC.Consumer,null,(function(e){e||Fx(!1);var r=e.history,l=PC(AC(o,e.location),e.location),u=l?r.createHref(l):"",h=Px({},c,{href:u,navigate:function(){var t=AC(o,e.location),n=Bx(e.location)===Bx(PC(t));(s||n?r.replace:r.push)(t)}});return OC!==RC?h.ref=n||a:h.innerRef=a,t.createElement(i,h)}))})),MC=function(e){return e},FC=t.forwardRef;"undefined"===typeof FC&&(FC=MC);var jC=FC((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,s=e.activeClassName,o=void 0===s?"active":s,a=e.activeStyle,c=e.className,l=e.exact,u=e.isActive,h=e.location,d=e.sensitive,f=e.strict,p=e.style,m=e.to,g=e.innerRef,y=uC(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(mC.Consumer,null,(function(e){e||Fx(!1);var r=h||e.location,s=PC(AC(m,r),r),v=s.pathname,w=v&&v.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),b=w?bC(r.pathname,{path:w,exact:l,sensitive:d,strict:f}):null,_=!!(u?u(b,r):b),E="function"===typeof c?c(_):c,I="function"===typeof p?p(_):p;_&&(E=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(E,o),I=Px({},I,a));var S=Px({"aria-current":_&&i||null,className:E,style:I,to:s},y);return MC!==FC?S.ref=n||g:S.innerRef=g,t.createElement(LC,S)}))}));const UC=function(e){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:23.335,height:23.335,...e,children:(0,s.jsxs)("g",{"data-name":"Group 99",fill:"#fff",children:[(0,s.jsx)("path",{"data-name":"Rectangle 58",d:"M21.213 0l2.121 2.121L2.121 23.335 0 21.213z"}),(0,s.jsx)("path",{"data-name":"Rectangle 59",d:"M23.334 21.213l-2.121 2.121L-.001 2.121 2.121 0z"})]})})};const VC=n.p+"static/media/booksuggester.cd4082c51925227c2953c8290d3e50dd.svg";const zC=function(e){return(0,s.jsx)("img",{src:VC,alt:"",style:{height:"30px"}})};var BC,qC,KC,WC;function GC(e){let{sidebarOpen:t,toggleSidebar:n,currentUser:r}=e;return(0,s.jsxs)(HC,{className:"animate darkBg",sidebarOpen:t,children:[(0,s.jsxs)(QC,{className:"flexSpaceCenter",children:[(0,s.jsxs)("div",{className:"flexNullCenter",children:[(0,s.jsx)(zC,{}),(0,s.jsx)("h1",{className:"whiteColor font20",style:{marginLeft:"15px"},children:"BookSuggester"})]}),(0,s.jsx)($C,{onClick:()=>n(!t),className:"animate pointer",children:(0,s.jsx)(UC,{})})]}),(0,s.jsxs)(YC,{className:"flexNullCenter flexColumn",children:[(0,s.jsx)("li",{className:"semiBold font15 pointer",children:(0,s.jsx)(LC,{onClick:()=>n(!t),activeClass:"active",className:"whiteColor",style:{padding:"10px 15px"},to:"/",children:"Home"})}),(0,s.jsx)("li",{className:"semiBold font15 pointer",children:(0,s.jsx)(LC,{onClick:()=>n(!t),activeClass:"active",className:"whiteColor",style:{padding:"10px 15px"},to:"/bookshelf",children:"Bookshelf"})}),(0,s.jsx)("li",{className:"semiBold font15 pointer",children:r?(0,s.jsx)(LC,{onClick:()=>{CS.signOut(),n(!1)},className:"whiteColor",style:{padding:"10px 15px"},to:"/login",children:"Logout"}):(0,s.jsx)(LC,{onClick:()=>n(!t),className:"whiteColor",style:{padding:"10px 15px"},to:"/login",children:"Login"})})]})]})}const HC=Ix.nav(BC||(BC=i(["\n  width: 400px;\n  height: 100vh;\n  position: fixed;\n  top: 0;\n  padding: 0 30px;\n  right: ",";\n  z-index: 9999;\n  @media (max-width: 400px) {\n    width: 100%;\n  }\n"])),(e=>e.sidebarOpen?"0px":"-400px")),QC=Ix.div(qC||(qC=i(["\n  padding: 20px 0;\n"]))),$C=Ix.button(KC||(KC=i(["\n  border: 0px;\n  outline: none;\n  background-color: transparent;\n  padding: 10px;\n"]))),YC=Ix.ul(WC||(WC=i(["\n  padding: 40px;\n  li {\n    margin: 20px 0;\n  }\n"])));var XC;function JC(e){let{toggleSidebar:t}=e;return(0,s.jsx)(ZC,{className:"darkBg",onClick:()=>t(!1)})}const ZC=Ix.div(XC||(XC=i(["\n  width: 100%;\n  height: 100vh;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 99;\n  opacity: 0.8;\n"])));const eN=function(e){return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:28,height:22,viewBox:"0 0 28 22",...e,children:[(0,s.jsx)("path",{"data-name":"Line 5",fill:"none",stroke:"#0b093b",strokeLinecap:"round",strokeWidth:2,d:"M1 1h26"}),(0,s.jsx)("path",{"data-name":"Line 6",fill:"none",stroke:"#0b093b",strokeLinecap:"round",strokeWidth:2,d:"M1 11h26"}),(0,s.jsx)("path",{"data-name":"Line 7",fill:"none",stroke:"#0b093b",strokeLinecap:"round",strokeWidth:2,d:"M1 21h26"})]})};var tN,nN,rN,iN,sN,oN;function aN(e){const{currentUser:n}=e,[r,i]=(0,t.useState)(window.scrollY),[o,a]=(0,t.useState)(!1);return(0,t.useEffect)((()=>(window.addEventListener("scroll",(()=>i(window.scrollY))),()=>{window.removeEventListener("scroll",(()=>i(window.scrollY)))})),[r]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(GC,{sidebarOpen:o,toggleSidebar:a,currentUser:n}),o&&(0,s.jsx)(JC,{toggleSidebar:a}),(0,s.jsx)(cN,{style:{height:r>100?"60px":"80px"},children:(0,s.jsxs)(lN,{children:[(0,s.jsxs)(uN,{to:"/",className:"flexNullCenter pointer",activeClassName:"inactive",children:[(0,s.jsx)(zC,{}),(0,s.jsx)("h5",{style:{marginLeft:"5px",marginTop:"5px"},children:"BookSuggester"})]}),(0,s.jsx)(hN,{onClick:()=>a(!o),children:(0,s.jsx)(eN,{})}),(0,s.jsxs)(dN,{children:[(0,s.jsx)("li",{children:(0,s.jsx)(fN,{exact:!0,to:"/",activeClassName:"active",children:"Home"})}),(0,s.jsx)("li",{children:(0,s.jsx)(fN,{to:"/bookshelf",activeClassName:"active",children:"Bookshelf"})}),n?(0,s.jsx)("li",{children:(0,s.jsx)(fN,{to:"/login",activeClassName:"active",onClick:()=>CS.signOut(),children:"Logout"})}):(0,s.jsx)("li",{children:(0,s.jsx)(fN,{to:"/login",activeClassName:"active",children:"Login"})})]})]})})]})}const cN=Ix.nav(tN||(tN=i(["\n  width: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 999;\n  background-color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.2);\n"]))),lN=Ix.div(nN||(nN=i(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  max-width: 1200px;\n  padding: 0 20px;\n  height: 100%;\n"]))),uN=Ix(jC)(rN||(rN=i(["\n  display: flex;\n  align-items: center;\n  text-decoration: none;\n  color: black;\n  font-weight: bold;\n  font-size: 1.5rem;\n  cursor: pointer;\n"]))),hN=Ix.button(iN||(iN=i(["\n  display: none;\n  background: none;\n  border: none;\n  cursor: pointer;\n  @media (max-width: 760px) {\n    display: block;\n  }\n"]))),dN=Ix.ul(sN||(sN=i(["\n  display: flex;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  @media (max-width: 760px) {\n    display: none;\n  }\n"]))),fN=Ix(jC)(oN||(oN=i(["\n  text-decoration: none;\n  color: black;\n  font-weight: bold;\n  font-size: 1rem;\n  padding: 10px 15px;\n  cursor: pointer;\n  &.active {\n    border-bottom: 2px solid blue; /* You can adjust the active link styling */\n  }\n"])));var pN=n(600),mN=n.n(pN);function gN(e){var n=function(e){var n=(0,t.useRef)(e);return n.current=e,n}(e);(0,t.useEffect)((function(){return function(){return n.current()}}),[])}var yN=Math.pow(2,31)-1;function vN(e,t,n){var r=n-Date.now();e.current=r<=yN?setTimeout(t,r):setTimeout((function(){return vN(e,t,n)}),yN)}function wN(){var e=function(){var e=(0,t.useRef)(!0),n=(0,t.useRef)((function(){return e.current}));return(0,t.useEffect)((function(){return function(){e.current=!1}}),[]),n.current}(),n=(0,t.useRef)();return gN((function(){return clearTimeout(n.current)})),(0,t.useMemo)((function(){var t=function(){return clearTimeout(n.current)};return{set:function(r,i){void 0===i&&(i=0),e()&&(t(),i<=yN?n.current=setTimeout(r,i):vN(n,r,Date.now()+i))},clear:t}}),[])}const bN=!1,_N=t.createContext(null);var EN="unmounted",IN="exited",SN="entering",kN="entered",TN="exiting",xN=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var i,s=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?s?(i=IN,r.appearStatus=SN):i=kN:i=t.unmountOnExit||t.mountOnEnter?EN:IN,r.state={status:i},r.nextCallback=null,r}Ax(n,e),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===EN?{status:IN}:null};var i=n.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==SN&&n!==kN&&(t=SN):n!==SN&&n!==kN||(t=TN)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},i.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===SN?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===IN&&this.setState({status:EN})},i.performEnter=function(e){var t=this,n=this.props.enter,i=this.context?this.context.isMounting:e,s=this.props.nodeRef?[i]:[r.findDOMNode(this),i],o=s[0],a=s[1],c=this.getTimeouts(),l=i?c.appear:c.enter;!e&&!n||bN?this.safeSetState({status:kN},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:SN},(function(){t.props.onEntering(o,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:kN},(function(){t.props.onEntered(o,a)}))}))})))},i.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:r.findDOMNode(this);t&&!bN?(this.props.onExit(i),this.safeSetState({status:TN},(function(){e.props.onExiting(i),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:IN},(function(){e.props.onExited(i)}))}))}))):this.safeSetState({status:IN},(function(){e.props.onExited(i)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},i.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this),i=null==e&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var s=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=s[0],a=s[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===EN)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,uC(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(_N.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},n}(t.Component);function CN(){}xN.contextType=_N,xN.propTypes={},xN.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:CN,onEntering:CN,onEntered:CN,onExit:CN,onExiting:CN,onExited:CN},xN.UNMOUNTED=EN,xN.EXITED=IN,xN.ENTERING=SN,xN.ENTERED=kN,xN.EXITING=TN;const NN=xN;function AN(e){var t=function(e){return e&&e.ownerDocument||document}(e);return t&&t.defaultView||window}var PN=/([A-Z])/g;var ON=/^ms-/;function RN(e){return function(e){return e.replace(PN,"-$1").toLowerCase()}(e).replace(ON,"-ms-")}var DN=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const LN=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(RN(t))||function(e,t){return AN(e).getComputedStyle(e,t)}(e).getPropertyValue(RN(t));Object.keys(t).forEach((function(i){var s=t[i];s||0===s?!function(e){return!(!e||!DN.test(e))}(i)?n+=RN(i)+": "+s+";":r+=i+"("+s+") ":e.style.removeProperty(RN(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n},MN=!("undefined"===typeof window||!window.document||!window.document.createElement);var FN=!1,jN=!1;try{var UN={get passive(){return FN=!0},get once(){return jN=FN=!0}};MN&&(window.addEventListener("test",UN,UN),window.removeEventListener("test",UN,!0))}catch(SP){}const VN=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!jN){var i=r.once,s=r.capture,o=n;!jN&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,s),n.call(this,r)},n.__once=o),e.addEventListener(t,o,FN?r:s)}e.addEventListener(t,n,r)};const zN=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};const BN=function(e,t,n,r){return VN(e,t,n,r),function(){zN(e,t,n,r)}};function qN(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),s=BN(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),s()}}function KN(e,t,n,r){null==n&&(n=function(e){var t=LN(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=qN(e,n,r),s=BN(e,"transitionend",t);return function(){i(),s()}}function WN(e,t){const n=LN(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function GN(e,t){const n=WN(e,"transitionDuration"),r=WN(e,"transitionDelay"),i=KN(e,(n=>{n.target===e&&(i(),t(n))}),n+r)}var HN=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};const QN=function(e,n){return(0,t.useMemo)((function(){return function(e,t){var n=HN(e),r=HN(t);return function(e){n&&n(e),r&&r(e)}}(e,n)}),[e,n])};const $N=t.forwardRef(((e,n)=>{let{onEnter:i,onEntering:o,onEntered:a,onExit:c,onExiting:l,onExited:u,addEndListener:h,children:d,childRef:f,...p}=e;const m=(0,t.useRef)(null),g=QN(m,f),y=e=>{var t;g((t=e)&&"setState"in t?r.findDOMNode(t):null!=t?t:null)},v=e=>t=>{e&&m.current&&e(m.current,t)},w=(0,t.useCallback)(v(i),[i]),b=(0,t.useCallback)(v(o),[o]),_=(0,t.useCallback)(v(a),[a]),E=(0,t.useCallback)(v(c),[c]),I=(0,t.useCallback)(v(l),[l]),S=(0,t.useCallback)(v(u),[u]),k=(0,t.useCallback)(v(h),[h]);return(0,s.jsx)(NN,{ref:n,...p,onEnter:w,onEntered:_,onEntering:b,onExit:E,onExited:S,onExiting:I,addEndListener:k,nodeRef:m,children:"function"===typeof d?(e,t)=>d(e,{...t,ref:y}):t.cloneElement(d,{ref:y})})})),YN=$N,XN={[SN]:"show",[kN]:"show"},JN=t.forwardRef(((e,n)=>{let{className:r,children:i,transitionClasses:o={},...a}=e;const c=(0,t.useCallback)(((e,t)=>{!function(e){e.offsetHeight}(e),null==a.onEnter||a.onEnter(e,t)}),[a]);return(0,s.jsx)(YN,{ref:n,addEndListener:GN,...a,onEnter:c,childRef:i.ref,children:(e,n)=>t.cloneElement(i,{...n,className:mN()("fade",r,i.props.className,XN[e],o[e])})})}));JN.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},JN.displayName="Fade";const ZN=JN,eA={[SN]:"showing",[TN]:"showing show"},tA=t.forwardRef(((e,t)=>(0,s.jsx)(ZN,{...e,ref:t,transitionClasses:eA})));tA.displayName="ToastFade";const nA=tA;const rA=function(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e}),[e]),n};const iA=t.createContext({prefixes:{}}),{Consumer:sA,Provider:oA}=iA;function aA(e,n){const{prefixes:r}=(0,t.useContext)(iA);return e||r[n]||n}const cA={"aria-label":Ue().string,onClick:Ue().func,variant:Ue().oneOf(["white"])},lA=t.forwardRef(((e,t)=>{let{className:n,variant:r,...i}=e;return(0,s.jsx)("button",{ref:t,type:"button",className:mN()("btn-close",r&&"btn-close-".concat(r),n),...i})}));lA.displayName="CloseButton",lA.propTypes=cA,lA.defaultProps={"aria-label":"Close"};const uA=lA,hA=t.createContext({onClose(){}}),dA=t.forwardRef(((e,n)=>{let{bsPrefix:r,closeLabel:i,closeVariant:o,closeButton:a,className:c,children:l,...u}=e;r=aA(r,"toast-header");const h=(0,t.useContext)(hA),d=function(e){var n=rA(e);return(0,t.useCallback)((function(){return n.current&&n.current.apply(n,arguments)}),[n])}((e=>{null==h||null==h.onClose||h.onClose(e)}));return(0,s.jsxs)("div",{ref:n,...u,className:mN()(r,c),children:[l,a&&(0,s.jsx)(uA,{"aria-label":i,variant:o,onClick:d,"data-dismiss":"toast"})]})}));dA.displayName="ToastHeader",dA.defaultProps={closeLabel:"Close",closeButton:!0};const fA=dA;var pA=/-(.)/g;const mA=e=>{return e[0].toUpperCase()+(t=e,t.replace(pA,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function gA(e){let{displayName:n=mA(e),Component:r,defaultProps:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=t.forwardRef(((t,n)=>{let{className:i,bsPrefix:o,as:a=r||"div",...c}=t;const l=aA(o,e);return(0,s.jsx)(a,{ref:n,className:mN()(i,l),...c})}));return o.defaultProps=i,o.displayName=n,o}const yA=gA("toast-body"),vA=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:i,transition:o=nA,show:a=!0,animation:c=!0,delay:l=5e3,autohide:u=!1,onClose:h,bg:d,...f}=e;r=aA(r,"toast");const p=(0,t.useRef)(l),m=(0,t.useRef)(h);(0,t.useEffect)((()=>{p.current=l,m.current=h}),[l,h]);const g=wN(),y=!(!u||!a),v=(0,t.useCallback)((()=>{y&&(null==m.current||m.current())}),[y]);(0,t.useEffect)((()=>{g.set(v,p.current)}),[g,v]);const w=(0,t.useMemo)((()=>({onClose:h})),[h]),b=!(!o||!c),_=(0,s.jsx)("div",{...f,ref:n,className:mN()(r,i,d&&"bg-".concat(d),!b&&(a?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return(0,s.jsx)(hA.Provider,{value:w,children:b&&o?(0,s.jsx)(o,{in:a,unmountOnExit:!0,children:_}):_})}));vA.displayName="Toast";const wA=Object.assign(vA,{Body:yA,Header:fA});class bA extends t.Component{constructor(){super(),this.state={showToast:!1}}handleClickNext(){this.props.callAPI()}handleClickSave(){if(this.props.currentUser)try{(async()=>{NS.collection("users").doc(this.props.currentUser.id).collection("books").add({title:this.props.title,authors:this.props.authors,subject:this.props.subject,genre:this.props.genre,background:this.props.background,hasRead:!1,hasMoreClicked:!1})})(),this.handleClickNext()}catch(e){console.log(e)}else this.setState({showToast:!0})}render(){return(0,s.jsxs)("div",{className:"homeContainer",children:[(0,s.jsx)(o,{title:this.props.title,authors:this.props.authors,subject:this.props.subject,genre:this.props.genre,background:this.props.background}),(0,s.jsxs)("div",{className:"btnContainer",children:[(0,s.jsxs)("button",{id:"btnBookMark",onClick:()=>this.handleClickSave(),children:["save ",(0,s.jsx)(Ye,{icon:et})]}),(0,s.jsxs)("button",{id:"btnNext",onClick:()=>this.handleClickNext(),children:["next ",(0,s.jsx)(Ye,{icon:Ze})]})]}),(0,s.jsxs)(wA,{show:this.state.showToast,onClose:()=>this.setState({showToast:!1}),style:{position:"absolute",top:120,right:20},children:[(0,s.jsx)(wA.Header,{className:"d-flex justify-content-between font12",children:(0,s.jsx)("strong",{className:"mr-auto",children:"Sign in Reminder"})}),(0,s.jsx)(wA.Body,{className:"font12",children:"Please sign in to save the book in the bookshelf."})]})]})}}const _A={type:Ue().string,tooltip:Ue().bool,as:Ue().elementType},EA=t.forwardRef(((e,t)=>{let{as:n="div",className:r,type:i="valid",tooltip:o=!1,...a}=e;return(0,s.jsx)(n,{...a,ref:t,className:mN()(r,"".concat(i,"-").concat(o?"tooltip":"feedback"))})}));EA.displayName="Feedback",EA.propTypes=_A;const IA=EA,SA=t.createContext({}),kA=t.forwardRef(((e,n)=>{let{id:r,bsPrefix:i,className:o,type:a="checkbox",isValid:c=!1,isInvalid:l=!1,as:u="input",...h}=e;const{controlId:d}=(0,t.useContext)(SA);return i=aA(i,"form-check-input"),(0,s.jsx)(u,{...h,ref:n,type:a,id:r||d,className:mN()(o,i,c&&"is-valid",l&&"is-invalid")})}));kA.displayName="FormCheckInput";const TA=kA,xA=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:i,htmlFor:o,...a}=e;const{controlId:c}=(0,t.useContext)(SA);return r=aA(r,"form-check-label"),(0,s.jsx)("label",{...a,ref:n,htmlFor:o||c,className:mN()(i,r)})}));xA.displayName="FormCheckLabel";const CA=xA;const NA=t.forwardRef(((e,n)=>{let{id:r,bsPrefix:i,bsSwitchPrefix:o,inline:a=!1,disabled:c=!1,isValid:l=!1,isInvalid:u=!1,feedbackTooltip:h=!1,feedback:d,feedbackType:f,className:p,style:m,title:g="",type:y="checkbox",label:v,children:w,as:b="input",..._}=e;i=aA(i,"form-check"),o=aA(o,"form-switch");const{controlId:E}=(0,t.useContext)(SA),I=(0,t.useMemo)((()=>({controlId:r||E})),[E,r]),S=!w&&null!=v&&!1!==v||function(e,n){return t.Children.toArray(e).some((e=>t.isValidElement(e)&&e.type===n))}(w,CA),k=(0,s.jsx)(TA,{..._,type:"switch"===y?"checkbox":y,ref:n,isValid:l,isInvalid:u,disabled:c,as:b});return(0,s.jsx)(SA.Provider,{value:I,children:(0,s.jsx)("div",{style:m,className:mN()(p,S&&i,a&&"".concat(i,"-inline"),"switch"===y&&o),children:w||(0,s.jsxs)(s.Fragment,{children:[k,S&&(0,s.jsx)(CA,{title:g,children:v}),d&&(0,s.jsx)(IA,{type:f,tooltip:h,children:d})]})})})}));NA.displayName="FormCheck";const AA=Object.assign(NA,{Input:TA,Label:CA});n(440);const PA=t.forwardRef(((e,n)=>{let{bsPrefix:r,type:i,size:o,htmlSize:a,id:c,className:l,isValid:u=!1,isInvalid:h=!1,plaintext:d,readOnly:f,as:p="input",...m}=e;const{controlId:g}=(0,t.useContext)(SA);let y;return r=aA(r,"form-control"),y=d?{["".concat(r,"-plaintext")]:!0}:{[r]:!0,["".concat(r,"-").concat(o)]:o},(0,s.jsx)(p,{...m,type:i,size:a,ref:n,readOnly:f,id:c||g,className:mN()(l,y,u&&"is-valid",h&&"is-invalid","color"===i&&"".concat(r,"-color"))})}));PA.displayName="FormControl";const OA=Object.assign(PA,{Feedback:IA}),RA=gA("form-floating"),DA=t.forwardRef(((e,n)=>{let{controlId:r,as:i="div",...o}=e;const a=(0,t.useMemo)((()=>({controlId:r})),[r]);return(0,s.jsx)(SA.Provider,{value:a,children:(0,s.jsx)(i,{...o,ref:n})})}));DA.displayName="FormGroup";const LA=DA,MA=["xxl","xl","lg","md","sm","xs"];const FA=t.forwardRef(((e,t)=>{const[{className:n,...r},{as:i="div",bsPrefix:o,spans:a}]=function(e){let{as:t,bsPrefix:n,className:r,...i}=e;n=aA(n,"col");const s=[],o=[];return MA.forEach((e=>{const t=i[e];let r,a,c;delete i[e],"object"===typeof t&&null!=t?({span:r,offset:a,order:c}=t):r=t;const l="xs"!==e?"-".concat(e):"";r&&s.push(!0===r?"".concat(n).concat(l):"".concat(n).concat(l,"-").concat(r)),null!=c&&o.push("order".concat(l,"-").concat(c)),null!=a&&o.push("offset".concat(l,"-").concat(a))})),[{...i,className:mN()(r,...s,...o)},{as:t,bsPrefix:n,spans:s}]}(e);return(0,s.jsx)(i,{...r,ref:t,className:mN()(n,!a.length&&o)})}));FA.displayName="Col";const jA=FA,UA=t.forwardRef(((e,n)=>{let{as:r="label",bsPrefix:i,column:o,visuallyHidden:a,className:c,htmlFor:l,...u}=e;const{controlId:h}=(0,t.useContext)(SA);i=aA(i,"form-label");let d="col-form-label";"string"===typeof o&&(d="".concat(d," ").concat(d,"-").concat(o));const f=mN()(c,i,a&&"visually-hidden",o&&d);return l=l||h,o?(0,s.jsx)(jA,{ref:n,as:"label",className:f,htmlFor:l,...u}):(0,s.jsx)(r,{ref:n,className:f,htmlFor:l,...u})}));UA.displayName="FormLabel",UA.defaultProps={column:!1,visuallyHidden:!1};const VA=UA,zA=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:i,id:o,...a}=e;const{controlId:c}=(0,t.useContext)(SA);return r=aA(r,"form-range"),(0,s.jsx)("input",{...a,type:"range",ref:n,className:mN()(i,r),id:o||c})}));zA.displayName="FormRange";const BA=zA,qA=t.forwardRef(((e,n)=>{let{bsPrefix:r,size:i,htmlSize:o,className:a,isValid:c=!1,isInvalid:l=!1,id:u,...h}=e;const{controlId:d}=(0,t.useContext)(SA);return r=aA(r,"form-select"),(0,s.jsx)("select",{...h,size:o,ref:n,className:mN()(a,r,i&&"".concat(r,"-").concat(i),c&&"is-valid",l&&"is-invalid"),id:u||d})}));qA.displayName="FormSelect";const KA=qA,WA=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i="small",muted:o,...a}=e;return n=aA(n,"form-text"),(0,s.jsx)(i,{...a,ref:t,className:mN()(r,n,o&&"text-muted")})}));WA.displayName="FormText";const GA=WA,HA=t.forwardRef(((e,t)=>(0,s.jsx)(AA,{...e,ref:t,type:"switch"})));HA.displayName="Switch";const QA=Object.assign(HA,{Input:AA.Input,Label:AA.Label}),$A=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:i,controlId:o,label:a,...c}=e;return n=aA(n,"form-floating"),(0,s.jsxs)(LA,{ref:t,className:mN()(r,n),controlId:o,...c,children:[i,(0,s.jsx)("label",{htmlFor:o,children:a})]})}));$A.displayName="FloatingLabel";const YA=$A,XA={_ref:Ue().any,validated:Ue().bool,as:Ue().elementType},JA=t.forwardRef(((e,t)=>{let{className:n,validated:r,as:i="form",...o}=e;return(0,s.jsx)(i,{...o,ref:t,className:mN()(n,r&&"was-validated")})}));JA.displayName="Form",JA.propTypes=XA;const ZA=Object.assign(JA,{Group:LA,Control:OA,Floating:RA,Check:AA,Switch:QA,Label:VA,Text:GA,Range:BA,Select:KA,FloatingLabel:YA});var eP,tP,nP;class rP extends t.Component{constructor(e){super(e),this.handleSubmit=async e=>{e.preventDefault();const{email:t,password:n}=this.state;try{await CS.signInWithEmailAndPassword(t,n),this.setState({email:"",password:"",showAlert:!0}),this.props.history.push("/")}catch(r){console.log(r),this.setState({errorMessage:"Invalid email or password!",showAlert:!0})}},this.handleChange=e=>{const{value:t,name:n}=e.target;this.setState({[n]:t})},this.state={email:"",password:"",errorMessage:""}}render(){return(0,s.jsxs)(sP,{children:[(0,s.jsx)(aP,{children:(0,s.jsx)("h3",{children:"Sign In"})}),(0,s.jsxs)(ZA,{className:"font12",onSubmit:this.handleSubmit,children:[(0,s.jsxs)(ZA.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,s.jsx)(ZA.Label,{children:"Email address"}),(0,s.jsx)(ZA.Control,{type:"email",name:"email",label:"email",placeholder:"Enter email",value:this.state.email,onChange:this.handleChange,required:!0})]}),(0,s.jsxs)(ZA.Group,{className:"mb-3",controlId:"formBasicPassword",children:[(0,s.jsx)(ZA.Label,{children:"Password"}),(0,s.jsx)(ZA.Control,{type:"password",name:"password",placeholder:"Enter password",value:this.state.password,onChange:this.handleChange,label:"password",required:!0})]}),(0,s.jsx)("button",{class:"btn btn-dark",type:"submit",style:{width:"100%"},children:"Login"})]}),this.state.showAlert&&(0,s.jsx)(oP,{className:"alert alert-danger font13",role:"alert",children:this.state.errorMessage})]})}}const iP=CC(rP),sP=Ix.div(eP||(eP=i(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    text-align: start;\n"]))),oP=Ix.div(tP||(tP=i(["\n    margin-top: 20px;\n    max-width: 100%;\n"]))),aP=Ix.div(nP||(nP=i(["\n    text-align: center;\n"])));var cP,lP,uP;class hP extends t.Component{constructor(e){super(e),this.handleSubmit=async e=>{e.preventDefault();const{displayName:t,email:n,password:r,confirmPassword:i}=this.state;if(r===i)try{const e=this.props.history,{user:i}=await CS.createUserWithEmailAndPassword(n,r);await xS(i,{displayName:t}),this.setState({displayName:"",email:"",password:"",confirmPassword:"",showAlert:!1}),e.push("/")}catch(s){console.error(s.message),s.message.toString().includes("auth/email-already-in-use")&&this.setState({showAlert:!0})}else alert("Passwords don't match!")},this.handleChange=e=>{const{name:t,value:n}=e.target;this.setState({[t]:n})},this.state={displayName:"",email:"",password:"",confirmPassword:"",showAlert:!1}}render(){const{displayName:e,email:t,password:n,confirmPassword:r,showAlert:i}=this.state;return(0,s.jsxs)(fP,{children:[(0,s.jsx)(mP,{children:(0,s.jsx)("h3",{children:"Sign Up"})}),(0,s.jsxs)(ZA,{className:"font12",onSubmit:this.handleSubmit,children:[(0,s.jsxs)(ZA.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,s.jsx)(ZA.Label,{children:"Username"}),(0,s.jsx)(ZA.Control,{type:"text",name:"displayName",label:"Display Name",placeholder:"Username",value:e,onChange:this.handleChange,required:!0})]}),(0,s.jsxs)(ZA.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,s.jsx)(ZA.Label,{children:"Email address"}),(0,s.jsx)(ZA.Control,{type:"email",name:"email",label:"email",placeholder:"Enter email",value:t,onChange:this.handleChange,required:!0})]}),(0,s.jsxs)(ZA.Group,{className:"mb-3",controlId:"formBasicPassword",children:[(0,s.jsx)(ZA.Label,{children:"Password"}),(0,s.jsx)(ZA.Control,{type:"password",name:"password",placeholder:"Enter password",value:n,minLength:"6",onChange:this.handleChange,label:"password",required:!0})]}),(0,s.jsxs)(ZA.Group,{className:"mb-3",controlId:"formBasicPassword",children:[(0,s.jsx)(ZA.Label,{children:"Confirm Password"}),(0,s.jsx)(ZA.Control,{type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:r,minLength:"6",onChange:this.handleChange,label:"Confirm Password",required:!0})]}),(0,s.jsx)("button",{type:"submit",className:"btn btn-dark",style:{width:"100%"},children:"Sign Up"})]}),(0,s.jsx)(pP,{children:i&&(0,s.jsx)("div",{className:"alert alert-danger font13",role:"alert",children:"The email address is already in use by another account."})})]})}}const dP=CC(hP),fP=Ix.div(cP||(cP=i(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    text-align: start;\n"]))),pP=Ix.div(lP||(lP=i(["\n    margin-top: 20px;\n    max-width: 100%;\n"]))),mP=Ix.div(uP||(uP=i(["\n    text-align: center;\n"])));var gP,yP;const vP=()=>{const[e,n]=(0,t.useState)(!0);return(0,s.jsx)(wP,{children:(0,s.jsxs)("div",{className:"content",children:[(0,s.jsx)("div",{className:"form",children:e?(0,s.jsx)(iP,{}):(0,s.jsx)(dP,{})}),(0,s.jsx)("div",{className:"toggleButton font13",children:(0,s.jsxs)(bP,{children:[e?"Don't have an account? ":"Already have an account? ",(0,s.jsx)("button",{onClick:()=>{n(!e)},children:e?"Sign Up":"Sign In"})]})})]})})},wP=Ix.div(gP||(gP=i(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100vh;\n\n    .content {\n        text-align: center;\n        width: 90%;\n        max-width: 350px;\n        border: 1px solid #ccc;\n        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n        border-radius: 5px;\n        padding: 20px; \n    }\n\n    .form {\n        width: 100%;\n        margin-bottom: 20px;\n    }\n\n    .toggleButton {\n        text-align: center;\n    }\n"]))),bP=Ix.div(yP||(yP=i(["\n    text-align: center;\n    margin-top: 20px;\n"])));class _P extends t.Component{constructor(){super(),this.unsubscribeFromAuth=null,this.state={book:[],authors:"",title:"",subject:"",genre:"",background:"",currentUser:null}}async componentDidMount(){this.unsubscribeFromAuth=CS.onAuthStateChanged((async e=>{if(e){(await xS(e)).onSnapshot((e=>{this.setState({currentUser:{id:e.id,...e.data()}})}))}else this.setState({currentUser:e})})),this.callAPI()}componentWillUnmount(){this.unsubscribeFromAuth()}callAPI(){const e=Math.floor(1e3*Math.random());let t="https://gutendex.com/books/?ids=".concat(e);(async()=>{fetch(t).then((e=>e.json())).then((e=>{this.setState({book:e.results[0],title:this.getTitleName(e.results[0].title),authors:this.getAuthors(e.results[0].authors),subject:this.getRepsonse(e.results[0].subjects),genre:this.getRepsonse(e.results[0].bookshelves),background:this.generateBackground()})}),(e=>{this.setState({isLoaded:!0,error:e})}))})()}getTitleName(e){return e||""}getRepsonse(e){let t="";return e.map((function(n,r){return r<2&&(n=n.replace(/--/g,""),r+1===e.length||r+1===2?t+=n:t=t+n+"; "),n})),t}getAuthors(e){let t="";return t=e.map((function(n,r){const i=(n.name.match(/,/g)||[]).length;if(n.name.includes("(")||n.name.includes(")")||1!==i)t=n.name;else{let i=n.name.split(", ");t=r+1===e.length?i[1]+" "+i[0]:i[1]+" "+i[0]+", "}return t})),t}generateBackground(){let e=this.state.background;const t=Math.floor(100*Math.random())+155,n=Math.floor(100*Math.random())+155,r=Math.floor(100*Math.random())+155;return e="".concat("rgb("+t+","+n+","+r+")"),e}render(){return(0,s.jsx)("div",{children:(0,s.jsxs)(NC,{basename:"/booksuggester",children:[(0,s.jsx)(aN,{currentUser:this.state.currentUser}),(0,s.jsxs)(xC,{children:[(0,s.jsx)(_C,{exact:!0,path:"/",children:(0,s.jsx)(bA,{className:"homeContainer",currentUser:this.state.currentUser,callAPI:()=>this.callAPI(),title:this.state.title,authors:this.state.authors,subject:this.state.subject,genre:this.state.genre,background:this.state.background})}),(0,s.jsx)(_C,{exact:!0,path:"/bookshelf",children:(0,s.jsx)(Tx,{currentUser:this.state.currentUser})}),(0,s.jsx)(_C,{exact:!0,path:"/login",children:(0,s.jsx)(vP,{})})]})]})})}}const EP=_P;const IP=function(){return(0,s.jsx)("div",{className:"App",children:(0,s.jsx)(EP,{})})};r.render((0,s.jsx)(t.StrictMode,{children:(0,s.jsx)(IP,{})}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.5dfca5b9.js.map