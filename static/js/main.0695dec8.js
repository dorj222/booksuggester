/*! For license information please see main.0695dec8.js.LICENSE.txt */
(()=>{var e={600:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===s)if(n.toString===Object.prototype.toString)for(var a in n)r.call(n,a)&&n[a]&&e.push(a);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},219:(e,t,n)=>{"use strict";var r=n(86),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var l=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=u(n);h&&(o=o.concat(h(n)));for(var a=c(t),m=c(n),g=0;g<o.length;++g){var y=o[g];if(!s[y]&&(!r||!r[y])&&(!m||!m[y])&&(!a||!a[y])){var v=d(n,y);try{l(t,y,v)}catch(w){}}}}return t}},123:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var s,o,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var l in s=Object(arguments[c]))n.call(s,l)&&(a[l]=s[l]);if(t){o=t(s);for(var u=0;u<o.length;u++)r.call(s,o[u])&&(a[o[u]]=s[o[u]])}}return a}},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(123),s=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var a=new Set,c={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(c[e]=t,e=0;e<t.length;e++)a.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},m={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function w(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(m,e)||!f.call(p,e)&&(d.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=60103,E=60106,S=60107,k=60108,T=60114,C=60109,x=60110,A=60112,N=60113,P=60120,O=60115,D=60116,R=60121,L=60128,M=60129,F=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;I=U("react.element"),E=U("react.portal"),S=U("react.fragment"),k=U("react.strict_mode"),T=U("react.profiler"),C=U("react.provider"),x=U("react.context"),A=U("react.forward_ref"),N=U("react.suspense"),P=U("react.suspense_list"),O=U("react.memo"),D=U("react.lazy"),R=U("react.block"),U("react.scope"),L=U("react.opaque.id"),M=U("react.debug_trace_mode"),F=U("react.offscreen"),j=U("react.legacy_hidden")}var V,z="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=z&&e[z]||e["@@iterator"])?e:null}function q(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var K=!1;function W(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=a);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function G(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case T:return"Profiler";case k:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return H(e.type);case R:return H(e._render);case D:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function se(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ce(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function le(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,me,ge=(me=function(e,t){if(e.namespaceURI!==he.svg||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ve={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ve).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ve[t]=ve[e]}))}));var Ie=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(Ie[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Ce=null,xe=null;function Ae(e){if(e=ni(e)){if("function"!==typeof Te)throw Error(o(280));var t=e.stateNode;t&&(t=ii(t),Te(e.stateNode,e.type,t))}}function Ne(e){Ce?xe?xe.push(e):xe=[e]:Ce=e}function Pe(){if(Ce){var e=Ce,t=xe;if(xe=Ce=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Oe(e,t){return e(t)}function De(e,t,n,r,i){return e(t,n,r,i)}function Re(){}var Le=Oe,Me=!1,Fe=!1;function je(){null===Ce&&null===xe||(Re(),Pe())}function Ue(e,t){var n=e.stateNode;if(null===n)return null;var r=ii(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ve=!1;if(h)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(me){Ve=!1}function Be(e,t,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var qe=!1,Ke=null,We=!1,Ge=null,He={onError:function(e){qe=!0,Ke=e}};function Qe(e,t,n,r,i,s,o,a,c){qe=!1,Ke=null,Be.apply(He,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if($e(e)!==e)throw Error(o(188))}function Je(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Xe(i),e;if(s===r)return Xe(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,st=[],ot=null,at=null,ct=null,lt=new Map,ut=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":at=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ut.delete(t.pointerId)}}function mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e=ft(t,n,r,i,s),null!==t&&(null!==(t=ni(t))&&tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function gt(e){var t=ti(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){s.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ni(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function vt(e,t,n){yt(e)&&n.delete(t)}function wt(){for(it=!1;0<st.length;){var e=st[0];if(null!==e.blockedOn){null!==(e=ni(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&st.shift()}null!==ot&&yt(ot)&&(ot=null),null!==at&&yt(at)&&(at=null),null!==ct&&yt(ct)&&(ct=null),lt.forEach(vt),ut.forEach(vt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,wt)))}function _t(e){function t(t){return bt(t,e)}if(0<st.length){bt(st[0],e);for(var n=1;n<st.length;n++){var r=st[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ot&&bt(ot,e),null!==at&&bt(at,e),null!==ct&&bt(ct,e),lt.forEach(t),ut.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)gt(n),null===n.blockedOn&&ht.shift()}function It(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:It("Animation","AnimationEnd"),animationiteration:It("Animation","AnimationIteration"),animationstart:It("Animation","AnimationStart"),transitionend:It("Transition","TransitionEnd")},St={},kt={};function Tt(e){if(St[e])return St[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in kt)return St[e]=n[t];return e}h&&(kt=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var Ct=Tt("animationend"),xt=Tt("animationiteration"),At=Tt("animationstart"),Nt=Tt("transitionend"),Pt=new Map,Ot=new Map,Dt=["abort","abort",Ct,"animationEnd",xt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Nt,"transitionEnd","waiting","waiting"];function Rt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),Pt.set(r,i),l(i,[r])}}(0,s.unstable_now)();var Lt=8;function Mt(e){if(0!==(1&e))return Lt=15,1;if(0!==(2&e))return Lt=14,2;if(0!==(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!==(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!==(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!==(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!==(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!==(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,s=e.expiredLanes,o=e.suspendedLanes,a=e.pingedLanes;if(0!==s)r=s,i=Lt=15;else if(0!==(s=134217727&n)){var c=s&~o;0!==c?(r=Mt(c),i=Lt):0!==(a&=s)&&(r=Mt(a),i=Lt)}else 0!==(s=n&~o)?(r=Mt(s),i=Lt):0!==a&&(r=Mt(a),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-qt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Mt(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-qt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ut(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?Ut(10,t):e;case 10:return 0===(e=Vt(192&~t))?Ut(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&(0===(e=Vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Vt(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-qt(t)]=n}var qt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Kt(e)/Wt|0)|0},Kt=Math.log,Wt=Math.LN2;var Gt=s.unstable_UserBlockingPriority,Ht=s.unstable_runWithPriority,Qt=!0;function $t(e,t,n,r){Me||Re();var i=Xt,s=Me;Me=!0;try{De(i,e,t,n,r)}finally{(Me=s)||je()}}function Yt(e,t,n,r){Ht(Gt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if(Qt)if((i=0===(4&t))&&0<st.length&&-1<dt.indexOf(e))e=ft(null,e,t,n,r),st.push(e);else{var s=Jt(e,t,n,r);if(null===s)i&&pt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=ft(s,e,t,n,r),void st.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ot=mt(ot,e,t,n,r,i),!0;case"dragenter":return at=mt(at,e,t,n,r,i),!0;case"mouseover":return ct=mt(ct,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return lt.set(s,mt(lt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ut.set(s,mt(ut.get(s)||null,e,t,n,r,i)),!0}return!1}(s,e,t,n,r))return;pt(e,r)}Rr(e,t,r,null,n)}}}function Jt(e,t,n,r){var i=ke(r);if(null!==(i=ti(i))){var s=$e(i);if(null===s)i=null;else{var o=s.tag;if(13===o){if(null!==(i=Ye(s)))return i;i=null}else if(3===o){if(s.stateNode.hydrate)return 3===s.tag?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Rr(e,t,r,i,n),null}var Zt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sn(){return!0}function on(){return!1}function an(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?sn:on,this.isPropagationStopped=on,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sn)},persist:function(){},isPersistent:sn}),t}var cn,ln,un,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(hn),fn=i({},hn,{view:0,detail:0}),pn=an(fn),mn=i({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(cn=e.screenX-un.screenX,ln=e.screenY-un.screenY):ln=cn=0,un=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),gn=an(mn),yn=an(i({},mn,{dataTransfer:0})),vn=an(i({},fn,{relatedTarget:0})),wn=an(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(bn),In=an(i({},hn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Cn(){return Tn}var xn=i({},fn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=an(xn),Nn=an(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=an(i({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),On=an(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Dn),Ln=[9,13,27,32],Mn=h&&"CompositionEvent"in window,Fn=null;h&&"documentMode"in document&&(Fn=document.documentMode);var jn=h&&"TextEvent"in window&&!Fn,Un=h&&(!Mn||Fn&&8<Fn&&11>=Fn),Vn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ne(r),0<(t=Mr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,$n=null;function Yn(e){xr(e,0)}function Xn(e){if(X(ri(e)))return e}function Jn(e,t){if("change"===e)return t}var Zn=!1;if(h){var er;if(h){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Qn&&(Qn.detachEvent("onpropertychange",ir),$n=Qn=null)}function ir(e){if("value"===e.propertyName&&Xn($n)){var t=[];if(Hn(t,$n,e,ke(e)),e=Yn,Me)e(t);else{Me=!0;try{Oe(e,t)}finally{Me=!1,je()}}}}function sr(e,t,n){"focusin"===e?(rr(),$n=n,(Qn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn($n)}function ar(e,t){if("click"===e)return Xn(t)}function cr(e,t){if("input"===e||"change"===e)return Xn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ur=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ur.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=h&&"documentMode"in document&&11>=document.documentMode,vr=null,wr=null,br=null,_r=!1;function Ir(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==vr||vr!==J(r)||("selectionStart"in(r=vr)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Mr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}Rt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rt(Dt,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sr=0;Sr<Er.length;Sr++)Ot.set(Er[Sr],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tr=new Set("cancel close invalid load scroll toggle".split(" ").concat(kr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,c,l){if(Qe.apply(this,arguments),qe){if(!qe)throw Error(o(198));var u=Ke;qe=!1,Ke=null,We||(We=!0,Ge=u)}}(r,t,void 0,e),e.currentTarget=null}function xr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Cr(i,a,l),s=c}else for(o=0;o<r.length;o++){if(c=(a=r[o]).instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Cr(i,a,l),s=c}}}if(We)throw e=Ge,We=!1,Ge=null,e}function Ar(e,t){var n=si(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Nr="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){e[Nr]||(e[Nr]=!0,a.forEach((function(t){Tr.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=n;if("selectionchange"===e&&9!==n.nodeType&&(s=n.ownerDocument),null!==r&&!t&&Tr.has(e)){if("scroll"!==e)return;i|=2,s=r}var o=si(s),a=e+"__"+(t?"capture":"bubble");o.has(a)||(t&&(i|=4),Dr(s,e,i,t),o.add(a))}function Dr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=$t;break;case 1:i=Yt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Rr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=ti(a)))return;if(5===(c=o.tag)||6===c){r=s=o;continue e}a=a.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{return Le(e,t,n)}finally{Fe=!1,je()}}((function(){var r=s,i=ke(n),o=[];e:{var a=Pt.get(e);if(void 0!==a){var c=dn,l=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":c=An;break;case"focusin":l="focus",c=vn;break;case"focusout":l="blur",c=vn;break;case"beforeblur":case"afterblur":c=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Pn;break;case Ct:case xt:case At:c=wn;break;case Nt:c=On;break;case"scroll":c=pn;break;case"wheel":c=Rn;break;case"copy":case"cut":case"paste":c=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Nn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Ue(p,d))&&u.push(Lr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new c(a,l,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(l=n.relatedTarget||n.fromElement)||!ti(l)&&!l[Zr])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?ti(l):null)&&(l!==(h=$e(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=gn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==c?a:ri(c),f=null==l?a:ri(l),(a=new u(m,p+"leave",c,n,i)).target=h,a.relatedTarget=f,m=null,ti(i)===r&&((u=new u(d,p+"enter",l,n,i)).target=f,u.relatedTarget=h,m=u),h=m,c&&l)e:{for(d=l,p=0,f=u=c;f;f=Fr(f))p++;for(f=0,m=d;m;m=Fr(m))f++;for(;0<p-f;)u=Fr(u),p--;for(;0<f-p;)d=Fr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Fr(u),d=Fr(d)}u=null}else u=null;null!==c&&jr(o,a,c,u,!1),null!==l&&null!==h&&jr(o,h,l,u,!0)}if("select"===(c=(a=r?ri(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Jn;else if(Gn(a))if(Zn)g=cr;else{g=or;var y=sr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ar);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ie(a,"number",a.value)),y=r?ri(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(vr=y,wr=r,br=null);break;case"focusout":br=wr=vr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Ir(o,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Ir(o,n,i)}var v;if(Mn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Kn?Bn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Un&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Kn&&(v=nn()):(en="value"in(Zt=i)?Zt.value:Zt.textContent,Kn=!0)),0<(y=Mr(r,w)).length&&(w=new In(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=qn(n))&&(w.data=v))),(v=jn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(zn=!0,Vn);case"textInput":return(e=t.data)===Vn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!Mn&&Bn(e,t)?(e=nn(),tn=en=Zt=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Mr(r,"onBeforeInput")).length&&(i=new In("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}xr(o,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ue(e,n))&&r.unshift(Lr(e,s,i)),null!=(s=Ue(e,t))&&r.push(Lr(e,s,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=Ue(n,s))&&o.unshift(Lr(n,c,a)):i||null!=(c=Ue(n,s))&&o.push(Lr(n,c,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Ur(){}var Vr=null,zr=null;function Br(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function qr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Kr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Hr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Qr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var $r=0;var Yr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Yr,Jr="__reactProps$"+Yr,Zr="__reactContainer$"+Yr,ei="__reactEvents$"+Yr;function ti(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zr]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Qr(e);null!==e;){if(n=e[Xr])return n;e=Qr(e)}return t}n=(e=n).parentNode}return null}function ni(e){return!(e=e[Xr]||e[Zr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ri(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ii(e){return e[Jr]||null}function si(e){var t=e[ei];return void 0===t&&(t=e[ei]=new Set),t}var oi=[],ai=-1;function ci(e){return{current:e}}function li(e){0>ai||(e.current=oi[ai],oi[ai]=null,ai--)}function ui(e,t){ai++,oi[ai]=e.current,e.current=t}var hi={},di=ci(hi),fi=ci(!1),pi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function gi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function yi(){li(fi),li(di)}function vi(e,t,n){if(di.current!==hi)throw Error(o(168));ui(di,t),ui(fi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in e))throw Error(o(108,H(t)||"Unknown",s));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,pi=di.current,ui(di,e),ui(fi,fi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,li(fi),li(di),ui(di,e)):li(fi),ui(fi,n)}var Ii=null,Ei=null,Si=s.unstable_runWithPriority,ki=s.unstable_scheduleCallback,Ti=s.unstable_cancelCallback,Ci=s.unstable_shouldYield,xi=s.unstable_requestPaint,Ai=s.unstable_now,Ni=s.unstable_getCurrentPriorityLevel,Pi=s.unstable_ImmediatePriority,Oi=s.unstable_UserBlockingPriority,Di=s.unstable_NormalPriority,Ri=s.unstable_LowPriority,Li=s.unstable_IdlePriority,Mi={},Fi=void 0!==xi?xi:function(){},ji=null,Ui=null,Vi=!1,zi=Ai(),Bi=1e4>zi?Ai:function(){return Ai()-zi};function qi(){switch(Ni()){case Pi:return 99;case Oi:return 98;case Di:return 97;case Ri:return 96;case Li:return 95;default:throw Error(o(332))}}function Ki(e){switch(e){case 99:return Pi;case 98:return Oi;case 97:return Di;case 96:return Ri;case 95:return Li;default:throw Error(o(332))}}function Wi(e,t){return e=Ki(e),Si(e,t)}function Gi(e,t,n){return e=Ki(e),ki(e,t,n)}function Hi(){if(null!==Ui){var e=Ui;Ui=null,Ti(e)}Qi()}function Qi(){if(!Vi&&null!==ji){Vi=!0;var e=0;try{var t=ji;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),ki(Pi,Hi),n}finally{Vi=!1}}}var $i=_.ReactCurrentBatchConfig;function Yi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=ci(null),Ji=null,Zi=null,es=null;function ts(){es=Zi=Ji=null}function ns(e){var t=Xi.current;li(Xi),e.type._context._currentValue=t}function rs(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function is(e,t){Ji=e,es=Zi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function ss(e,t){if(es!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(es=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Zi){if(null===Ji)throw Error(o(308));Zi=t,Ji.dependencies={lanes:0,firstContext:t,responders:null}}else Zi=Zi.next=t;return e._currentValue}var os=!1;function as(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function cs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function us(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function hs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ds(e,t,n,r){var s=e.updateQueue;os=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(null!==c){s.shared.pending=null;var l=c,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==a&&(null===d?h.firstBaseUpdate=u:d.next=u,h.lastBaseUpdate=l)}}if(null!==o){for(d=s.baseState,a=0,h=u=l=null;;){c=o.lane;var f=o.eventTime;if((r&c)===c){null!==h&&(h=h.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(c=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,c);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(c="function"===typeof(p=m.payload)?p.call(f,d,c):p)||void 0===c)break e;d=i({},d,c);break e;case 2:os=!0}}null!==o.callback&&(e.flags|=32,null===(c=s.effects)?s.effects=[o]:c.push(o))}else f={eventTime:f,lane:c,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(u=h=f,l=d):h=h.next=f,a|=c;if(null===(o=o.next)){if(null===(c=s.shared.pending))break;o=c.next,c.next=null,s.lastBaseUpdate=c,s.shared.pending=null}}null===h&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,za|=a,e.lanes=a,e.memoizedState=d}}function fs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var ps=(new r.Component).refs;function ms(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var gs={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=dc(),i=fc(e),s=ls(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),us(e,s),pc(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=dc(),i=fc(e),s=ls(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),us(e,s),pc(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dc(),r=fc(e),i=ls(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),us(e,i),pc(e,r,n)}};function ys(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,s))}function vs(e,t,n){var r=!1,i=hi,s=t.contextType;return"object"===typeof s&&null!==s?s=ss(s):(i=gi(t)?pi:di.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):hi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=gs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ws(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gs.enqueueReplaceState(t,t.state,null)}function bs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ps,as(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=ss(s):(s=gi(t)?pi:di.current,i.context=mi(e,s)),ds(e,n,i,r),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ms(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&gs.enqueueReplaceState(i,i.state,null),ds(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var _s=Array.isArray;function Is(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ps&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Es(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ss(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Gc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Yc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Is(e,t,n),r.return=e,r):((r=Hc(n.type,n.key,n.props,null,e.mode,r)).ref=Is(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Qc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Yc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case I:return(n=Hc(t.type,t.key,t.props,null,e.mode,n)).ref=Is(e,null,t),n.return=e,n;case E:return(t=Xc(t,e.mode,n)).return=e,t}if(_s(t)||B(t))return(t=Qc(t,e.mode,n,null)).return=e,t;Es(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case I:return n.key===i?n.type===S?h(e,t,n.props.children,r,i):l(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null}if(_s(n)||B(n))return null!==i?null:h(e,t,n,r,null);Es(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case I:return e=e.get(null===r.key?n:r.key)||null,r.type===S?h(t,e,r.props.children,i,r.key):l(t,e,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_s(r)||B(r))return h(t,e=e.get(n)||null,r,i,null);Es(t,r)}return null}function m(i,o,a,c){for(var l=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],c);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,m),null===u?l=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),l;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],c))&&(o=s(h,o,m),null===u?l=h:u.sibling=h,u=h);return l}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),l}function g(i,a,c,l){var u=B(c);if("function"!==typeof u)throw Error(o(150));if(null==(c=u.call(c)))throw Error(o(151));for(var h=u=null,m=a,g=a=0,y=null,v=c.next();null!==m&&!v.done;g++,v=c.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,l);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=s(w,a,g),null===h?u=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),u;if(null===m){for(;!v.done;g++,v=c.next())null!==(v=d(i,v.value,l))&&(a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return u}for(m=r(i,m);!v.done;g++,v=c.next())null!==(v=p(m,i,g,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),u}return function(e,r,s,c){var l="object"===typeof s&&null!==s&&s.type===S&&null===s.key;l&&(s=s.props.children);var u="object"===typeof s&&null!==s;if(u)switch(s.$$typeof){case I:e:{for(u=s.key,l=r;null!==l;){if(l.key===u){if(7===l.tag){if(s.type===S){n(e,l.sibling),(r=i(l,s.props.children)).return=e,e=r;break e}}else if(l.elementType===s.type){n(e,l.sibling),(r=i(l,s.props)).ref=Is(e,l,s),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}s.type===S?((r=Qc(s.props.children,e.mode,c,s.key)).return=e,e=r):((c=Hc(s.type,s.key,s.props,null,e.mode,c)).ref=Is(e,r,s),c.return=e,e=c)}return a(e);case E:e:{for(l=s.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(e,r.sibling),(r=i(r,s.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xc(s,e.mode,c)).return=e,e=r}return a(e)}if("string"===typeof s||"number"===typeof s)return s=""+s,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,s)).return=e,e=r):(n(e,r),(r=Yc(s,e.mode,c)).return=e,e=r),a(e);if(_s(s))return m(e,r,s,c);if(B(s))return g(e,r,s,c);if(u&&Es(e,s),"undefined"===typeof s&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var ks=Ss(!0),Ts=Ss(!1),Cs={},xs=ci(Cs),As=ci(Cs),Ns=ci(Cs);function Ps(e){if(e===Cs)throw Error(o(174));return e}function Os(e,t){switch(ui(Ns,t),ui(As,e),ui(xs,Cs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(xs),ui(xs,t)}function Ds(){li(xs),li(As),li(Ns)}function Rs(e){Ps(Ns.current);var t=Ps(xs.current),n=fe(t,e.type);t!==n&&(ui(As,e),ui(xs,n))}function Ls(e){As.current===e&&(li(xs),li(As))}var Ms=ci(0);function Fs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var js=null,Us=null,Vs=!1;function zs(e,t){var n=Kc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Bs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function qs(e){if(Vs){var t=Us;if(t){var n=t;if(!Bs(e,t)){if(!(t=Hr(n.nextSibling))||!Bs(e,t))return e.flags=-1025&e.flags|2,Vs=!1,void(js=e);zs(js,n)}js=e,Us=Hr(t.firstChild)}else e.flags=-1025&e.flags|2,Vs=!1,js=e}}function Ks(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;js=e}function Ws(e){if(e!==js)return!1;if(!Vs)return Ks(e),Vs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!qr(t,e.memoizedProps))for(t=Us;t;)zs(e,t),t=Hr(t.nextSibling);if(Ks(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Us=Hr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Us=null}}else Us=js?Hr(e.stateNode.nextSibling):null;return!0}function Gs(){Us=js=null,Vs=!1}var Hs=[];function Qs(){for(var e=0;e<Hs.length;e++)Hs[e]._workInProgressVersionPrimary=null;Hs.length=0}var $s=_.ReactCurrentDispatcher,Ys=_.ReactCurrentBatchConfig,Xs=0,Js=null,Zs=null,eo=null,to=!1,no=!1;function ro(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function so(e,t,n,r,i,s){if(Xs=s,Js=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$s.current=null===e||null===e.memoizedState?Oo:Do,e=n(r,i),no){s=0;do{if(no=!1,!(25>s))throw Error(o(301));s+=1,eo=Zs=null,t.updateQueue=null,$s.current=Ro,e=n(r,i)}while(no)}if($s.current=Po,t=null!==Zs&&null!==Zs.next,Xs=0,eo=Zs=Js=null,to=!1,t)throw Error(o(300));return e}function oo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===eo?Js.memoizedState=eo=e:eo=eo.next=e,eo}function ao(){if(null===Zs){var e=Js.alternate;e=null!==e?e.memoizedState:null}else e=Zs.next;var t=null===eo?Js.memoizedState:eo.next;if(null!==t)eo=t,Zs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Zs=e).memoizedState,baseState:Zs.baseState,baseQueue:Zs.baseQueue,queue:Zs.queue,next:null},null===eo?Js.memoizedState=eo=e:eo=eo.next=e}return eo}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Zs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var c=a=s=null,l=i;do{var u=l.lane;if((Xs&u)===u)null!==c&&(c=c.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var h={lane:u,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===c?(a=c=h,s=r):c=c.next=h,Js.lanes|=u,za|=u}l=l.next}while(null!==l&&l!==i);null===c?s=r:c.next=a,lr(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function uo(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);lr(s,t.memoizedState)||(Mo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xs&e)===e)&&(t._workInProgressVersionPrimary=r,Hs.push(t))),e)return n(t._source);throw Hs.push(t),Error(o(350))}function fo(e,t,n,r){var i=Da;if(null===i)throw Error(o(349));var s=t._getVersion,a=s(t._source),c=$s.current,l=c.useState((function(){return ho(i,t,n)})),u=l[1],h=l[0];l=eo;var d=e.memoizedState,f=d.refs,p=f.getSnapshot,m=d.source;d=d.subscribe;var g=Js;return e.memoizedState={refs:f,source:t,subscribe:r},c.useEffect((function(){f.getSnapshot=n,f.setSnapshot=u;var e=s(t._source);if(!lr(a,e)){e=n(t._source),lr(h,e)||(u(e),e=fc(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var c=31-qt(o),l=1<<c;r[c]|=e,o&=~l}}}),[n,t,r]),c.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=fc(g);i.mutableReadLanes|=r&i.pendingLanes}catch(s){n((function(){throw s}))}}))}),[t,r]),lr(p,n)&&lr(m,t)&&lr(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:h}).dispatch=u=No.bind(null,Js,e),l.queue=e,l.baseQueue=null,h=ho(i,t,n),l.memoizedState=l.baseState=h),h}function po(e,t,n){return fo(ao(),e,t,n)}function mo(e){var t=oo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=No.bind(null,Js,e),[t.memoizedState,e]}function go(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Js.updateQueue)?(t={lastEffect:null},Js.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},oo().memoizedState=e}function vo(){return ao().memoizedState}function wo(e,t,n,r){var i=oo();Js.flags|=e,i.memoizedState=go(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=ao();r=void 0===r?null:r;var s=void 0;if(null!==Zs){var o=Zs.memoizedState;if(s=o.destroy,null!==r&&io(r,o.deps))return void go(t,n,s,r)}Js.flags|=e,i.memoizedState=go(1|t,n,s,r)}function _o(e,t){return wo(516,4,e,t)}function Io(e,t){return bo(516,4,e,t)}function Eo(e,t){return bo(4,2,e,t)}function So(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ko(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,So.bind(null,t,e),n)}function To(){}function Co(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xo(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=qi();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Ys.transition;Ys.transition=1;try{e(!1),t()}finally{Ys.transition=n}}))}function No(e,t,n){var r=dc(),i=fc(e),s={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?s.next=s:(s.next=o.next,o.next=s),t.pending=s,o=e.alternate,e===Js||null!==o&&o===Js)no=to=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,c=o(a,n);if(s.eagerReducer=o,s.eagerState=c,lr(c,a))return}catch(l){}pc(e,i,r)}}var Po={readContext:ss,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useLayoutEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useMutableSource:ro,useOpaqueIdentifier:ro,unstable_isNewReconciler:!1},Oo={readContext:ss,useCallback:function(e,t){return oo().memoizedState=[e,void 0===t?null:t],e},useContext:ss,useEffect:_o,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,So.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=oo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=No.bind(null,Js,e),[r.memoizedState,e]},useRef:yo,useState:mo,useDebugValue:To,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return _o((function(){var t=Ys.transition;Ys.transition=1;try{r(e)}finally{Ys.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return yo(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=oo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},fo(r,e,t,n)},useOpaqueIdentifier:function(){if(Vs){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+($r++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&Js.mode)&&(Js.flags|=516,go(5,(function(){n("r:"+($r++).toString(36))}),void 0,null)),t}return mo(t="r:"+($r++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:ss,useCallback:Co,useContext:ss,useEffect:Io,useImperativeHandle:ko,useLayoutEffect:Eo,useMemo:xo,useReducer:lo,useRef:vo,useState:function(){return lo(co)},useDebugValue:To,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return Io((function(){var t=Ys.transition;Ys.transition=1;try{r(e)}finally{Ys.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[vo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Ro={readContext:ss,useCallback:Co,useContext:ss,useEffect:Io,useImperativeHandle:ko,useLayoutEffect:Eo,useMemo:xo,useReducer:uo,useRef:vo,useState:function(){return uo(co)},useDebugValue:To,useDeferredValue:function(e){var t=uo(co),n=t[0],r=t[1];return Io((function(){var t=Ys.transition;Ys.transition=1;try{r(e)}finally{Ys.transition=t}}),[e]),n},useTransition:function(){var e=uo(co)[0];return[vo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return uo(co)[0]},unstable_isNewReconciler:!1},Lo=_.ReactCurrentOwner,Mo=!1;function Fo(e,t,n,r){t.child=null===e?Ts(t,null,n,r):ks(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var s=t.ref;return is(t,i),r=so(e,t,n,r,s,i),null===e||Mo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,sa(e,t,i))}function Uo(e,t,n,r,i,s){if(null===e){var o=n.type;return"function"!==typeof o||Wc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Vo(e,t,o,r,i,s))}return o=e.child,0===(i&s)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?sa(e,t,s):(t.flags|=1,(e=Gc(o,r)).ref=t.ref,e.return=t,t.child=e)}function Vo(e,t,n,r,i,s){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Mo=!1,0===(s&i))return t.lanes=e.lanes,sa(e,t,s);0!==(16384&e.flags)&&(Mo=!0)}return qo(e,t,n,r,s)}function zo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},Ic(t,n);else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Ic(t,e),null;t.memoizedState={baseLanes:0},Ic(t,null!==s?s.baseLanes:n)}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ic(t,r);return Fo(e,t,i,n),t.child}function Bo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function qo(e,t,n,r,i){var s=gi(n)?pi:di.current;return s=mi(t,s),is(t,i),n=so(e,t,n,r,s,i),null===e||Mo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,sa(e,t,i))}function Ko(e,t,n,r,i){if(gi(n)){var s=!0;bi(t)}else s=!1;if(is(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),vs(t,n,r),bs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=ss(l):l=mi(t,l=gi(n)?pi:di.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||c!==l)&&ws(t,o,r,l),os=!1;var d=t.memoizedState;o.state=d,ds(t,r,o,i),c=t.memoizedState,a!==r||d!==c||fi.current||os?("function"===typeof u&&(ms(t,n,u,r),c=t.memoizedState),(a=os||ys(t,n,a,r,d,c,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,cs(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Yi(t.type,a),o.props=l,h=t.pendingProps,d=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=ss(c):c=mi(t,c=gi(n)?pi:di.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==c)&&ws(t,o,r,c),os=!1,d=t.memoizedState,o.state=d,ds(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||fi.current||os?("function"===typeof f&&(ms(t,n,f,r),p=t.memoizedState),(l=os||ys(t,n,l,r,d,p,c))?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,s,i)}function Wo(e,t,n,r,i,s){Bo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&_i(t,n,!1),sa(e,t,s);r=t.stateNode,Lo.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ks(t,e.child,null,s),t.child=ks(t,null,a,s)):Fo(e,t,a,s),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?vi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&vi(0,t.context,!1),Os(e,t.containerInfo)}var Ho,Qo,$o,Yo,Xo={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,i=t.pendingProps,s=Ms.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(s|=1),ui(Ms,1&s),null===e?(void 0!==i.fallback&&qs(t),e=i.children,s=i.fallback,o?(e=Zo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,t.lanes=33554432,e):((n=$c({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ta(e,t,i.children,i.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?{baseLanes:n}:{baseLanes:s.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Xo,i):(n=ea(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,s=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==s?(s.childLanes=0,s.pendingProps=t):s=$c(t,i,0,null),n=Qc(n,i,r,null),s.return=e,n.return=e,s.sibling=n,e.child=s,n}function ea(e,t,n,r){var i=e.child;return e=i.sibling,n=Gc(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ta(e,t,n,r,i){var s=t.mode,o=e.child;e=o.sibling;var a={mode:"hidden",children:n};return 0===(2&s)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=a,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Gc(o,a),null!==e?r=Gc(e,r):(r=Qc(r,s,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function na(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),rs(e.return,t)}function ra(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=s)}function ia(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=Ms.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&na(e,n);else if(19===e.tag)na(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ui(Ms,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ra(t,!1,i,n,s,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ra(t,!0,n,null,s,t.lastEffect);break;case"together":ra(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function sa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),za|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Gc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function oa(e,t){if(!Vs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function aa(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return gi(t.type)&&yi(),null;case 3:return Ds(),li(fi),li(di),Qs(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ws(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Qo(t),null;case 5:Ls(t);var s=Ps(Ns.current);if(n=t.type,null!==e&&null!=t.stateNode)$o(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ps(xs.current),Ws(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Xr]=t,r[Jr]=a,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<kr.length;e++)Ar(kr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,a),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ar("invalid",r);break;case"textarea":ce(r,a),Ar("invalid",r)}for(var l in Ee(n,a),e=null,a)a.hasOwnProperty(l)&&(s=a[l],"children"===l?"string"===typeof s?r.textContent!==s&&(e=["children",s]):"number"===typeof s&&r.textContent!==""+s&&(e=["children",""+s]):c.hasOwnProperty(l)&&null!=s&&"onScroll"===l&&Ar("scroll",r));switch(n){case"input":Y(r),re(r,a,!0);break;case"textarea":Y(r),ue(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Ur)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(l=9===s.nodeType?s:s.ownerDocument,e===he.html&&(e=de(n)),e===he.html?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Xr]=t,e[Jr]=r,Ho(e,t,!1,!1),t.stateNode=e,l=Se(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),s=r;break;case"iframe":case"object":case"embed":Ar("load",e),s=r;break;case"video":case"audio":for(s=0;s<kr.length;s++)Ar(kr[s],e);s=r;break;case"source":Ar("error",e),s=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),s=r;break;case"details":Ar("toggle",e),s=r;break;case"input":ee(e,r),s=Z(e,r),Ar("invalid",e);break;case"option":s=se(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":ce(e,r),s=ae(e,r),Ar("invalid",e);break;default:s=r}Ee(n,s);var u=s;for(a in u)if(u.hasOwnProperty(a)){var h=u[a];"style"===a?_e(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&ge(e,h):"children"===a?"string"===typeof h?("textarea"!==n||""!==h)&&ye(e,h):"number"===typeof h&&ye(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(c.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Ar("scroll",e):null!=h&&b(e,a,h,l))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),ue(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?oe(e,!!r.multiple,a,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Ur)}Br(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ps(Ns.current),Ps(xs.current),Ws(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return li(Ms),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ws(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ms.current)?0===ja&&(ja=3):(0!==ja&&3!==ja||(ja=4),null===Da||0===(134217727&za)&&0===(134217727&Ba)||vc(Da,La))),(r||n)&&(t.flags|=4),null);case 4:return Ds(),Qo(t),null===e&&Pr(t.stateNode.containerInfo),null;case 10:return ns(t),null;case 19:if(li(Ms),null===(r=t.memoizedState))return null;if(a=0!==(64&t.flags),null===(l=r.rendering))if(a)oa(r,!1);else{if(0!==ja||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=Fs(e))){for(t.flags|=64,oa(r,!1),null!==(a=l.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ui(Ms,1&Ms.current|2),t.child}e=e.sibling}null!==r.tail&&Bi()>Ga&&(t.flags|=64,a=!0,oa(r,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=Fs(l))){if(t.flags|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),oa(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!Vs)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bi()-r.renderingStartTime>Ga&&1073741824!==n&&(t.flags|=64,a=!0,oa(r,!1),t.lanes=33554432);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=r.last)?n.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bi(),n.sibling=null,t=Ms.current,ui(Ms,a?1&t|2:1&t),n):null;case 23:case 24:return Ec(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function ca(e){switch(e.tag){case 1:gi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ds(),li(fi),li(di),Qs(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ls(e),null;case 13:return li(Ms),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Ms),null;case 4:return Ds(),null;case 10:return ns(e),null;case 23:case 24:return Ec(),null;default:return null}}function la(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i}}function ua(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Ho=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Qo=function(){},$o=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Ps(xs.current);var o,a=null;switch(n){case"input":s=Z(e,s),r=Z(e,r),a=[];break;case"option":s=se(e,s),r=se(e,r),a=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),a=[];break;case"textarea":s=ae(e,s),r=ae(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Ur)}for(h in Ee(n,r),n=null,s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&null!=s[h])if("style"===h){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(c.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var u=r[h];if(l=null!=s?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(null!=u||null!=l))if("style"===h)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(h,n)),n=u;else"dangerouslySetInnerHTML"===h?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(h,u)):"children"===h?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(h,""+u):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(c.hasOwnProperty(h)?(null!=u&&"onScroll"===h&&Ar("scroll",e),a||l===u||(a=[])):"object"===typeof u&&null!==u&&u.$$typeof===L?u.toString():(a=a||[]).push(h,u))}n&&(a=a||[]).push("style",n);var h=a;(t.updateQueue=h)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var ha="function"===typeof WeakMap?WeakMap:Map;function da(e,t,n){(n=ls(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ya||(Ya=!0,Xa=r),ua(0,t)},n}function fa(e,t,n){(n=ls(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ua(0,t),r(i)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ja?Ja=new Set([this]):Ja.add(this),ua(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pa="function"===typeof WeakSet?WeakSet:Set;function ma(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vc(e,n)}else t.current=null}function ga(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function ya(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fc(n,e),Mc(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fs(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}fs(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Br(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(o(163))}function va(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function wa(e,t){if(Ei&&"function"===typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(Ii,t)}catch(s){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fc(t,n);else{r=t;try{i()}catch(s){Vc(r,s)}}n=n.next}while(n!==e)}break;case 1:if(ma(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(s){Vc(t,s)}break;case 5:ma(t);break;case 4:ka(e,t)}}function ba(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function _a(e){return 5===e.tag||3===e.tag||4===e.tag}function Ia(e){e:{for(var t=e.return;null!==t;){if(_a(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||_a(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Ea(e,n,t):Sa(e,n,t)}function Ea(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ur));else if(4!==r&&null!==(e=e.child))for(Ea(e,t,n),e=e.sibling;null!==e;)Ea(e,t,n),e=e.sibling}function Sa(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Sa(e,t,n),e=e.sibling;null!==e;)Sa(e,t,n),e=e.sibling}function ka(e,t){for(var n,r,i=t,s=!1;;){if(!s){s=i.return;e:for(;;){if(null===s)throw Error(o(160));switch(n=s.stateNode,s.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}s=s.return}s=!0}if(5===i.tag||6===i.tag){e:for(var a=e,c=i,l=c;;)if(wa(a,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===c)break e;for(;null===l.sibling;){if(null===l.return||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(a=n,c=i.stateNode,8===a.nodeType?a.parentNode.removeChild(c):a.removeChild(c)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(wa(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(s=!1)}i.sibling.return=i.return,i=i.sibling}}function Ta(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(n[Jr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Se(e,i),t=Se(e,r),i=0;i<s.length;i+=2){var a=s[i],c=s[i+1];"style"===a?_e(n,c):"dangerouslySetInnerHTML"===a?ge(n,c):"children"===a?ye(n,c):b(n,a,c,t)}switch(e){case"input":ne(n,r);break;case"textarea":le(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(s=r.value)?oe(n,!!r.multiple,s,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&(Wa=Bi(),va(t.child,!0)),void Ca(t);case 19:return void Ca(t);case 23:case 24:return void va(t,null!==t.memoizedState)}throw Error(o(163))}function Ca(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pa),t.forEach((function(t){var r=Bc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function xa(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Aa=Math.ceil,Na=_.ReactCurrentDispatcher,Pa=_.ReactCurrentOwner,Oa=0,Da=null,Ra=null,La=0,Ma=0,Fa=ci(0),ja=0,Ua=null,Va=0,za=0,Ba=0,qa=0,Ka=null,Wa=0,Ga=1/0;function Ha(){Ga=Bi()+500}var Qa,$a=null,Ya=!1,Xa=null,Ja=null,Za=!1,ec=null,tc=90,nc=[],rc=[],ic=null,sc=0,oc=null,ac=-1,cc=0,lc=0,uc=null,hc=!1;function dc(){return 0!==(48&Oa)?Bi():-1!==ac?ac:ac=Bi()}function fc(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===qi()?1:2;if(0===cc&&(cc=Va),0!==$i.transition){0!==lc&&(lc=null!==Ka?Ka.pendingLanes:0),e=cc;var t=4186112&~lc;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=qi(),0!==(4&Oa)&&98===e?e=Ut(12,cc):e=Ut(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),cc),e}function pc(e,t,n){if(50<sc)throw sc=0,oc=null,Error(o(185));if(null===(e=mc(e,t)))return null;Bt(e,t,n),e===Da&&(Ba|=t,4===ja&&vc(e,La));var r=qi();1===t?0!==(8&Oa)&&0===(48&Oa)?wc(e):(gc(e,n),0===Oa&&(Ha(),Hi())):(0===(4&Oa)||98!==r&&99!==r||(null===ic?ic=new Set([e]):ic.add(e)),gc(e,n)),Ka=e}function mc(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function gc(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var c=31-qt(a),l=1<<c,u=s[c];if(-1===u){if(0===(l&r)||0!==(l&i)){u=t,Mt(l);var h=Lt;s[c]=10<=h?u+250:6<=h?u+5e3:-1}}else u<=t&&(e.expiredLanes|=l);a&=~l}if(r=Ft(e,e===Da?La:0),t=Lt,0===r)null!==n&&(n!==Mi&&Ti(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&Ti(n)}15===t?(n=wc.bind(null,e),null===ji?(ji=[n],Ui=ki(Pi,Qi)):ji.push(n),n=Mi):14===t?n=Gi(99,wc.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,yc.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function yc(e){if(ac=-1,lc=cc=0,0!==(48&Oa))throw Error(o(327));var t=e.callbackNode;if(Lc()&&e.callbackNode!==t)return null;var n=Ft(e,e===Da?La:0);if(0===n)return null;var r=n,i=Oa;Oa|=16;var s=Tc();for(Da===e&&La===r||(Ha(),Sc(e,r));;)try{Ac();break}catch(c){kc(e,c)}if(ts(),Na.current=s,Oa=i,null!==Ra?r=0:(Da=null,La=0,r=ja),0!==(Va&Ba))Sc(e,0);else if(0!==r){if(2===r&&(Oa|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=jt(e))&&(r=Cc(e,n))),1===r)throw t=Ua,Sc(e,0),vc(e,n),gc(e,Bi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Oc(e);break;case 3:if(vc(e,n),(62914560&n)===n&&10<(r=Wa+500-Bi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){dc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Kr(Oc.bind(null,e),r);break}Oc(e);break;case 4:if(vc(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-qt(n);s=1<<a,(a=r[a])>i&&(i=a),n&=~s}if(n=i,10<(n=(120>(n=Bi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Aa(n/1960))-n)){e.timeoutHandle=Kr(Oc.bind(null,e),n);break}Oc(e);break;default:throw Error(o(329))}}return gc(e,Bi()),e.callbackNode===t?yc.bind(null,e):null}function vc(e,t){for(t&=~qa,t&=~Ba,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qt(t),r=1<<n;e[n]=-1,t&=~r}}function wc(e){if(0!==(48&Oa))throw Error(o(327));if(Lc(),e===Da&&0!==(e.expiredLanes&La)){var t=La,n=Cc(e,t);0!==(Va&Ba)&&(n=Cc(e,t=Ft(e,t)))}else n=Cc(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Oa|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=jt(e))&&(n=Cc(e,t))),1===n)throw n=Ua,Sc(e,0),vc(e,t),gc(e,Bi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Oc(e),gc(e,Bi()),null}function bc(e,t){var n=Oa;Oa|=1;try{return e(t)}finally{0===(Oa=n)&&(Ha(),Hi())}}function _c(e,t){var n=Oa;Oa&=-2,Oa|=8;try{return e(t)}finally{0===(Oa=n)&&(Ha(),Hi())}}function Ic(e,t){ui(Fa,Ma),Ma|=t,Va|=t}function Ec(){Ma=Fa.current,li(Fa)}function Sc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Ra)for(n=Ra.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:Ds(),li(fi),li(di),Qs();break;case 5:Ls(r);break;case 4:Ds();break;case 13:case 19:li(Ms);break;case 10:ns(r);break;case 23:case 24:Ec()}n=n.return}Da=e,Ra=Gc(e.current,null),La=Ma=Va=t,ja=0,Ua=null,qa=Ba=za=0}function kc(e,t){for(;;){var n=Ra;try{if(ts(),$s.current=Po,to){for(var r=Js.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}to=!1}if(Xs=0,eo=Zs=Js=null,no=!1,Pa.current=null,null===n||null===n.return){ja=1,Ua=t,Ra=null;break}e:{var s=e,o=n.return,a=n,c=t;if(t=La,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c;if(0===(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.lanes=u.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!==(1&Ms.current),d=o;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=d.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(f){var g=d.updateQueue;if(null===g){var y=new Set;y.add(l),d.updateQueue=y}else g.add(l);if(0===(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=ls(-1,1);v.tag=2,us(a,v)}a.lanes|=1;break e}c=void 0,a=t;var w=s.pingCache;if(null===w?(w=s.pingCache=new ha,c=new Set,w.set(l,c)):void 0===(c=w.get(l))&&(c=new Set,w.set(l,c)),!c.has(a)){c.add(a);var b=zc.bind(null,s,l,a);l.then(b,b)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);c=Error((H(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==ja&&(ja=2),c=la(c,a),d=o;do{switch(d.tag){case 3:s=c,d.flags|=4096,t&=-t,d.lanes|=t,hs(d,da(0,s,t));break e;case 1:s=c;var _=d.type,I=d.stateNode;if(0===(64&d.flags)&&("function"===typeof _.getDerivedStateFromError||null!==I&&"function"===typeof I.componentDidCatch&&(null===Ja||!Ja.has(I)))){d.flags|=4096,t&=-t,d.lanes|=t,hs(d,fa(d,s,t));break e}}d=d.return}while(null!==d)}Pc(n)}catch(E){t=E,Ra===n&&null!==n&&(Ra=n=n.return);continue}break}}function Tc(){var e=Na.current;return Na.current=Po,null===e?Po:e}function Cc(e,t){var n=Oa;Oa|=16;var r=Tc();for(Da===e&&La===t||Sc(e,t);;)try{xc();break}catch(i){kc(e,i)}if(ts(),Oa=n,Na.current=r,null!==Ra)throw Error(o(261));return Da=null,La=0,ja}function xc(){for(;null!==Ra;)Nc(Ra)}function Ac(){for(;null!==Ra&&!Ci();)Nc(Ra)}function Nc(e){var t=Qa(e.alternate,e,Ma);e.memoizedProps=e.pendingProps,null===t?Pc(e):Ra=t,Pa.current=null}function Pc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=aa(n,t,Ma)))return void(Ra=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ma)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=ca(t)))return n.flags&=2047,void(Ra=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ra=t);Ra=t=e}while(null!==t);0===ja&&(ja=5)}function Oc(e){var t=qi();return Wi(99,Dc.bind(null,e,t)),null}function Dc(e,t){do{Lc()}while(null!==ec);if(0!==(48&Oa))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,s=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,c=e.expirationTimes;0<s;){var l=31-qt(s),u=1<<l;i[l]=0,a[l]=-1,c[l]=-1,s&=~u}if(null!==ic&&0===(24&r)&&ic.has(e)&&ic.delete(e),e===Da&&(Ra=Da=null,La=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Oa,Oa|=32,Pa.current=null,Vr=Qt,gr(a=mr())){if("selectionStart"in a)c={start:a.selectionStart,end:a.selectionEnd};else e:if(c=(c=a.ownerDocument)&&c.defaultView||window,(u=c.getSelection&&c.getSelection())&&0!==u.rangeCount){c=u.anchorNode,s=u.anchorOffset,l=u.focusNode,u=u.focusOffset;try{c.nodeType,l.nodeType}catch(T){c=null;break e}var h=0,d=-1,f=-1,p=0,m=0,g=a,y=null;t:for(;;){for(var v;g!==c||0!==s&&3!==g.nodeType||(d=h+s),g!==l||0!==u&&3!==g.nodeType||(f=h+u),3===g.nodeType&&(h+=g.nodeValue.length),null!==(v=g.firstChild);)y=g,g=v;for(;;){if(g===a)break t;if(y===c&&++p===s&&(d=h),y===l&&++m===u&&(f=h),null!==(v=g.nextSibling))break;y=(g=y).parentNode}g=v}c=-1===d||-1===f?null:{start:d,end:f}}else c=null;c=c||{start:0,end:0}}else c=null;zr={focusedElem:a,selectionRange:c},Qt=!1,uc=null,hc=!1,$a=r;do{try{Rc()}catch(T){if(null===$a)throw Error(o(330));Vc($a,T),$a=$a.nextEffect}}while(null!==$a);uc=null,$a=r;do{try{for(a=e;null!==$a;){var w=$a.flags;if(16&w&&ye($a.stateNode,""),128&w){var b=$a.alternate;if(null!==b){var _=b.ref;null!==_&&("function"===typeof _?_(null):_.current=null)}}switch(1038&w){case 2:Ia($a),$a.flags&=-3;break;case 6:Ia($a),$a.flags&=-3,Ta($a.alternate,$a);break;case 1024:$a.flags&=-1025;break;case 1028:$a.flags&=-1025,Ta($a.alternate,$a);break;case 4:Ta($a.alternate,$a);break;case 8:ka(a,c=$a);var I=c.alternate;ba(c),null!==I&&ba(I)}$a=$a.nextEffect}}catch(T){if(null===$a)throw Error(o(330));Vc($a,T),$a=$a.nextEffect}}while(null!==$a);if(_=zr,b=mr(),w=_.focusedElem,a=_.selectionRange,b!==w&&w&&w.ownerDocument&&pr(w.ownerDocument.documentElement,w)){null!==a&&gr(w)&&(b=a.start,void 0===(_=a.end)&&(_=b),"selectionStart"in w?(w.selectionStart=b,w.selectionEnd=Math.min(_,w.value.length)):(_=(b=w.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),c=w.textContent.length,I=Math.min(a.start,c),a=void 0===a.end?I:Math.min(a.end,c),!_.extend&&I>a&&(c=a,a=I,I=c),c=fr(w,I),s=fr(w,a),c&&s&&(1!==_.rangeCount||_.anchorNode!==c.node||_.anchorOffset!==c.offset||_.focusNode!==s.node||_.focusOffset!==s.offset)&&((b=b.createRange()).setStart(c.node,c.offset),_.removeAllRanges(),I>a?(_.addRange(b),_.extend(s.node,s.offset)):(b.setEnd(s.node,s.offset),_.addRange(b))))),b=[];for(_=w;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"===typeof w.focus&&w.focus(),w=0;w<b.length;w++)(_=b[w]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Qt=!!Vr,zr=Vr=null,e.current=n,$a=r;do{try{for(w=e;null!==$a;){var E=$a.flags;if(36&E&&ya(w,$a.alternate,$a),128&E){b=void 0;var S=$a.ref;if(null!==S){var k=$a.stateNode;$a.tag,b=k,"function"===typeof S?S(b):S.current=b}}$a=$a.nextEffect}}catch(T){if(null===$a)throw Error(o(330));Vc($a,T),$a=$a.nextEffect}}while(null!==$a);$a=null,Fi(),Oa=i}else e.current=n;if(Za)Za=!1,ec=e,tc=t;else for($a=r;null!==$a;)t=$a.nextEffect,$a.nextEffect=null,8&$a.flags&&((E=$a).sibling=null,E.stateNode=null),$a=t;if(0===(r=e.pendingLanes)&&(Ja=null),1===r?e===oc?sc++:(sc=0,oc=e):sc=0,n=n.stateNode,Ei&&"function"===typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(Ii,n,void 0,64===(64&n.current.flags))}catch(T){}if(gc(e,Bi()),Ya)throw Ya=!1,e=Xa,Xa=null,e;return 0!==(8&Oa)||Hi(),null}function Rc(){for(;null!==$a;){var e=$a.alternate;hc||null===uc||(0!==(8&$a.flags)?Ze($a,uc)&&(hc=!0):13===$a.tag&&xa(e,$a)&&Ze($a,uc)&&(hc=!0));var t=$a.flags;0!==(256&t)&&ga(e,$a),0===(512&t)||Za||(Za=!0,Gi(97,(function(){return Lc(),null}))),$a=$a.nextEffect}}function Lc(){if(90!==tc){var e=97<tc?97:tc;return tc=90,Wi(e,jc)}return!1}function Mc(e,t){nc.push(t,e),Za||(Za=!0,Gi(97,(function(){return Lc(),null})))}function Fc(e,t){rc.push(t,e),Za||(Za=!0,Gi(97,(function(){return Lc(),null})))}function jc(){if(null===ec)return!1;var e=ec;if(ec=null,0!==(48&Oa))throw Error(o(331));var t=Oa;Oa|=32;var n=rc;rc=[];for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"===typeof a)try{a()}catch(l){if(null===s)throw Error(o(330));Vc(s,l)}}for(n=nc,nc=[],r=0;r<n.length;r+=2){i=n[r],s=n[r+1];try{var c=i.create;i.destroy=c()}catch(l){if(null===s)throw Error(o(330));Vc(s,l)}}for(c=e.current.firstEffect;null!==c;)e=c.nextEffect,c.nextEffect=null,8&c.flags&&(c.sibling=null,c.stateNode=null),c=e;return Oa=t,Hi(),!0}function Uc(e,t,n){us(e,t=da(0,t=la(n,t),1)),t=dc(),null!==(e=mc(e,1))&&(Bt(e,1,t),gc(e,t))}function Vc(e,t){if(3===e.tag)Uc(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Uc(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ja||!Ja.has(r))){var i=fa(n,e=la(t,e),1);if(us(n,i),i=dc(),null!==(n=mc(n,1)))Bt(n,1,i),gc(n,i);else if("function"===typeof r.componentDidCatch&&(null===Ja||!Ja.has(r)))try{r.componentDidCatch(t,e)}catch(s){}break}}n=n.return}}function zc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=dc(),e.pingedLanes|=e.suspendedLanes&n,Da===e&&(La&n)===n&&(4===ja||3===ja&&(62914560&La)===La&&500>Bi()-Wa?Sc(e,0):qa|=n),gc(e,t)}function Bc(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===qi()?1:2:(0===cc&&(cc=Va),0===(t=Vt(62914560&~cc))&&(t=4194304))),n=dc(),null!==(e=mc(e,t))&&(Bt(e,t,n),gc(e,n))}function qc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Kc(e,t,n,r){return new qc(e,t,n,r)}function Wc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gc(e,t){var n=e.alternate;return null===n?((n=Kc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Wc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Qc(n.children,i,s,t);case M:a=8,i|=16;break;case k:a=8,i|=1;break;case T:return(e=Kc(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=s,e;case N:return(e=Kc(13,n,t,i)).type=N,e.elementType=N,e.lanes=s,e;case P:return(e=Kc(19,n,t,i)).elementType=P,e.lanes=s,e;case F:return $c(n,i,s,t);case j:return(e=Kc(24,n,t,i)).elementType=j,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case x:a=9;break e;case A:a=11;break e;case O:a=14;break e;case D:a=16,r=null;break e;case R:a=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Kc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Qc(e,t,n,r){return(e=Kc(7,e,r,t)).lanes=n,e}function $c(e,t,n,r){return(e=Kc(23,e,r,t)).elementType=F,e.lanes=n,e}function Yc(e,t,n){return(e=Kc(6,e,null,t)).lanes=n,e}function Xc(e,t,n){return(t=Kc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jc(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Zc(e,t,n,r){var i=t.current,s=dc(),a=fc(i);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(gi(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(o(171))}if(1===n.tag){var l=n.type;if(gi(l)){n=wi(n,l,c);break e}}n=c}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=ls(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),us(i,t),pc(i,a,s),a}function el(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nl(e,t){tl(e,t),(e=e.alternate)&&tl(e,t)}function rl(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Jc(e,t,null!=n&&!0===n.hydrate),t=Kc(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,as(t),e[Zr]=n.current,Pr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function il(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function sl(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if("function"===typeof i){var a=i;i=function(){var e=el(o);a.call(e)}}Zc(t,o,e,i)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rl(e,0,t?{hydrate:!0}:void 0)}(n,r),o=s._internalRoot,"function"===typeof i){var c=i;i=function(){var e=el(o);c.call(e)}}_c((function(){Zc(t,o,e,i)}))}return el(o)}function ol(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!il(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Qa=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fi.current)Mo=!0;else{if(0===(n&r)){switch(Mo=!1,t.tag){case 3:Go(t),Gs();break;case 5:Rs(t);break;case 1:gi(t.type)&&bi(t);break;case 4:Os(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ui(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Jo(e,t,n):(ui(Ms,1&Ms.current),null!==(t=sa(e,t,n))?t.sibling:null);ui(Ms,1&Ms.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return ia(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ui(Ms,Ms.current),r)break;return null;case 23:case 24:return t.lanes=0,zo(e,t,n)}return sa(e,t,n)}Mo=0!==(16384&e.flags)}else Mo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),is(t,n),i=so(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(r)){var s=!0;bi(t)}else s=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,as(t);var a=r.getDerivedStateFromProps;"function"===typeof a&&ms(t,r,a,e),i.updater=gs,t.stateNode=i,i._reactInternals=t,bs(t,r,e,n),t=Wo(null,t,r,!0,s,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"===typeof e)return Wc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===O)return 14}return 2}(i),e=Yi(i,e),s){case 0:t=qo(null,t,i,e,n);break e;case 1:t=Ko(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Uo(null,t,i,Yi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,qo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,cs(e,t),ds(t,r,null,n),(r=t.memoizedState.element)===i)Gs(),t=sa(e,t,n);else{if((s=(i=t.stateNode).hydrate)&&(Us=Hr(t.stateNode.containerInfo.firstChild),js=t,s=Vs=!0),s){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(s=e[i])._workInProgressVersionPrimary=e[i+1],Hs.push(s);for(n=Ts(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Gs();t=t.child}return t;case 5:return Rs(t),null===e&&qs(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,qr(r,i)?a=null:null!==s&&qr(r,s)&&(t.flags|=16),Bo(e,t),Fo(e,t,a,n),t.child;case 6:return null===e&&qs(t),null;case 13:return Jo(e,t,n);case 4:return Os(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ks(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value;var c=t.type._context;if(ui(Xi,c._currentValue),c._currentValue=s,null!==a)if(c=a.value,0===(s=lr(c,s)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(c,s):1073741823))){if(a.children===i.children&&!fi.current){t=sa(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var l=c.dependencies;if(null!==l){a=c.child;for(var u=l.firstContext;null!==u;){if(u.context===r&&0!==(u.observedBits&s)){1===c.tag&&((u=ls(-1,n&-n)).tag=2,us(c,u)),c.lanes|=n,null!==(u=c.alternate)&&(u.lanes|=n),rs(c.return,n),l.lanes|=n;break}u=u.next}}else a=10===c.tag&&c.type===t.type?null:c.child;if(null!==a)a.return=c;else for(a=c;null!==a;){if(a===t){a=null;break}if(null!==(c=a.sibling)){c.return=a.return,a=c;break}a=a.return}c=a}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(s=t.pendingProps).children,is(t,n),r=r(i=ss(i,s.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return s=Yi(i=t.type,t.pendingProps),Uo(e,t,i,s=Yi(i.type,s),r,n);case 15:return Vo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,gi(r)?(e=!0,bi(t)):e=!1,is(t,n),vs(t,r,i),bs(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return ia(e,t,n);case 23:case 24:return zo(e,t,n)}throw Error(o(156,t.tag))},rl.prototype.render=function(e){Zc(e,this._internalRoot,null,null)},rl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zc(null,e,null,(function(){t[Zr]=null}))},et=function(e){13===e.tag&&(pc(e,4,dc()),nl(e,4))},tt=function(e){13===e.tag&&(pc(e,67108864,dc()),nl(e,67108864))},nt=function(e){if(13===e.tag){var t=dc(),n=fc(e);pc(e,n,t),nl(e,n)}},rt=function(e,t){return t()},Te=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ii(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=bc,De=function(e,t,n,r,i){var s=Oa;Oa|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Oa=s)&&(Ha(),Hi())}},Re=function(){0===(49&Oa)&&(function(){if(null!==ic){var e=ic;ic=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,gc(e,Bi())}))}Hi()}(),Lc())},Le=function(e,t){var n=Oa;Oa|=2;try{return e(t)}finally{0===(Oa=n)&&(Ha(),Hi())}};var al={Events:[ni,ri,ii,Ne,Pe,Lc,{current:!1}]},cl={findFiberByHostInstance:ti,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},ll={bundleType:cl.bundleType,version:cl.version,rendererPackageName:cl.rendererPackageName,rendererConfig:cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:cl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ul.isDisabled&&ul.supportsFiber)try{Ii=ul.inject(ll),Ei=ul}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=al,t.createPortal=ol,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Oa;if(0!==(48&n))return e(t);Oa|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Oa=n,Hi()}},t.hydrate=function(e,t,n){if(!il(t))throw Error(o(200));return sl(null,e,t,!0,n)},t.render=function(e,t,n){if(!il(t))throw Error(o(200));return sl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!il(e))throw Error(o(40));return!!e._reactRootContainer&&(_c((function(){sl(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zr]=null}))})),!0)},t.unstable_batchedUpdates=bc,t.unstable_createPortal=function(e,t){return ol(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!il(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return sl(e,t,n,!1,r)},t.version="17.0.2"},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},82:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case l:case d:case g:case m:case c:return e;default:return t}}case i:return t}}}function I(e){return _(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=c,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return I(e)||_(e)===u},t.isConcurrentMode=I,t.isContextConsumer=function(e){return _(e)===l},t.isContextProvider=function(e){return _(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===s},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===h||e===a||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===v||e.$$typeof===w||e.$$typeof===b||e.$$typeof===y)},t.typeOf=_},86:(e,t,n)=>{"use strict";e.exports=n(82)},292:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},340:(e,t,n)=>{var r=n(292);e.exports=f,e.exports.parse=s,e.exports.compile=function(e,t){return a(s(e,t),t)},e.exports.tokensToFunction=a,e.exports.tokensToRegExp=d;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function s(e,t){for(var n,r=[],s=0,o=0,a="",u=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],d=n[1],f=n.index;if(a+=e.slice(o,f),o=f+h.length,d)a+=d[1];else{var p=e[o],m=n[2],g=n[3],y=n[4],v=n[5],w=n[6],b=n[7];a&&(r.push(a),a="");var _=null!=m&&null!=p&&p!==m,I="+"===w||"*"===w,E="?"===w||"*"===w,S=n[2]||u,k=y||v;r.push({name:g||s++,prefix:m||"",delimiter:S,optional:E,repeat:I,partial:_,asterisk:!!b,pattern:k?l(k):b?".*":"[^"+c(S)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function a(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var s="",a=t||{},c=(i||{}).pretty?o:encodeURIComponent,l=0;l<e.length;l++){var u=e[l];if("string"!==typeof u){var h,d=a[u.name];if(null==d){if(u.optional){u.partial&&(s+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(r(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<d.length;f++){if(h=c(d[f]),!n[l].test(h))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(h)+"`");s+=(0===f?u.prefix:u.delimiter)+h}}else{if(h=u.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):c(d),!n[l].test(h))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+h+'"');s+=u.prefix+h}}else s+=u}return s}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,s=!1!==n.end,o="",a=0;a<e.length;a++){var l=e[a];if("string"===typeof l)o+=c(l);else{var d=c(l.prefix),f="(?:"+l.pattern+")";t.push(l),l.repeat&&(f+="(?:"+d+f+")*"),o+=f=l.optional?l.partial?d+"("+f+")?":"(?:"+d+"("+f+"))?":d+"("+f+")"}}var p=c(n.delimiter||"/"),m=o.slice(-p.length)===p;return i||(o=(m?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=s?"$":i&&m?"":"(?="+p+"|$)",u(new RegExp("^"+o,h(n)),t)}function f(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(f(e[i],t,n).source);return u(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return d(s(e,n),t,n)}(e,t,n)}},153:(e,t,n)=>{"use strict";n(123);var r=n(43),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var s=Symbol.for;i=s("react.element"),t.Fragment=s("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,s={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!c.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:s,_owner:o.current}}t.jsx=l,t.jsxs=l},202:(e,t,n)=>{"use strict";var r=n(123),i=60103,s=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,a=60110,c=60112;t.Suspense=60113;var l=60115,u=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),s=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),a=h("react.context"),c=h("react.forward_ref"),t.Suspense=h("react.suspense"),l=h("react.memo"),u=h("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var w=v.prototype=new y;w.constructor=v,r(w,g.prototype),w.isPureReactComponent=!0;var b={current:null},_=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,r)&&!I.hasOwnProperty(r)&&(s[r]=t[r]);var c=arguments.length-2;if(1===c)s.children=n;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===s[r]&&(s[r]=c[r]);return{$$typeof:i,type:e,key:o,ref:a,props:s,_owner:b.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var k=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case i:case s:c=!0}}if(c)return o=o(c=e),e=""===r?"."+T(c,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(k,"$&/")+"/"),C(o,t,n,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(c=0,r=""===r?".":r+":",Array.isArray(e))for(var l=0;l<e.length;l++){var u=r+T(a=e[l],l);c+=C(a,t,n,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=C(a=a.value,t,n,u=r+T(a,l++),o);else if("object"===a)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function x(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function P(){var e=N.current;if(null===e)throw Error(f(321));return e}var O={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:x,forEach:function(e,t,n){x(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return x(e,(function(){t++})),t},toArray:function(e){return x(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error(f(143));return e}},t.Component=g,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(f(267,e));var s=r({},e.props),o=e.key,a=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,c=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)_.call(t,u)&&!I.hasOwnProperty(u)&&(s[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)s.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];s.children=l}return{$$typeof:i,type:e.type,key:o,ref:a,props:s,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return P().useCallback(e,t)},t.useContext=function(e,t){return P().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return P().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return P().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return P().useLayoutEffect(e,t)},t.useMemo=function(e,t){return P().useMemo(e,t)},t.useReducer=function(e,t,n){return P().useReducer(e,t,n)},t.useRef=function(e){return P().useRef(e)},t.useState=function(e){return P().useState(e)},t.version="17.0.2"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";var n,r,i,s;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,u=null,h=function(){if(null!==l)try{var e=t.unstable_now();l(!0,e),l=null}catch(n){throw setTimeout(h,0),n}};n=function(e){null!==l?setTimeout(n,0,e):(l=e,setTimeout(h,0))},r=function(e,t){u=setTimeout(e,t)},i=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,y=-1,v=5,w=0;t.unstable_shouldYield=function(){return t.unstable_now()>=w},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,_=b.port2;b.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();w=e+v;try{g(!0,e)?_.postMessage(null):(m=!1,g=null)}catch(n){throw _.postMessage(null),n}}else m=!1},n=function(e){g=e,m||(m=!0,_.postMessage(null))},r=function(e,n){y=d((function(){e(t.unstable_now())}),n)},i=function(){f(y),y=-1}}function I(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<k(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var s=2*(r+1)-1,o=e[s],a=s+1,c=e[a];if(void 0!==o&&0>k(o,n))void 0!==c&&0>k(c,o)?(e[r]=c,e[a]=n,r=a):(e[r]=o,e[s]=n,r=s);else{if(!(void 0!==c&&0>k(c,n)))break e;e[r]=c,e[a]=n,r=a}}}return t}return null}function k(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],C=[],x=1,A=null,N=3,P=!1,O=!1,D=!1;function R(e){for(var t=E(C);null!==t;){if(null===t.callback)S(C);else{if(!(t.startTime<=e))break;S(C),t.sortIndex=t.expirationTime,I(T,t)}t=E(C)}}function L(e){if(D=!1,R(e),!O)if(null!==E(T))O=!0,n(M);else{var t=E(C);null!==t&&r(L,t.startTime-e)}}function M(e,n){O=!1,D&&(D=!1,i()),P=!0;var s=N;try{for(R(n),A=E(T);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"===typeof o){A.callback=null,N=A.priorityLevel;var a=o(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?A.callback=a:A===E(T)&&S(T),R(n)}else S(T);A=E(T)}if(null!==A)var c=!0;else{var l=E(C);null!==l&&r(L,l.startTime-n),c=!1}return c}finally{A=null,N=s,P=!1}}var F=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||P||(O=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return E(T)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,s,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return e={id:x++,callback:s,priorityLevel:e,startTime:o,expirationTime:c=o+c,sortIndex:-1},o>a?(e.sortIndex=o,I(C,e),null===E(T)&&e===E(C)&&(D?i():D=!0,r(L,o-a))):(e.sortIndex=c,I(T,e),O||P||(O=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),c=0;c<s.length;c++){var l=s[c];if(!a(l))return!1;var u=e[l],h=t[l];if(!1===(i=n?n.call(r,u,h,l):void 0)||void 0===i&&u!==h)return!1}return!0}},440:e=>{"use strict";var t=function(){};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/booksuggester/",n.nc=void 0,(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>_t,SDK_VERSION:()=>Tn,_DEFAULT_ENTRY_NAME:()=>pn,_addComponent:()=>vn,_addOrOverwriteComponent:()=>wn,_apps:()=>gn,_clearComponents:()=>En,_components:()=>yn,_getProvider:()=>_n,_registerComponent:()=>bn,_removeServiceInstance:()=>In,deleteApp:()=>Nn,getApp:()=>xn,getApps:()=>An,initializeApp:()=>Cn,onLog:()=>On,registerVersion:()=>Pn,setLogLevel:()=>Dn});var t=n(43),r=n(950),i=n(202);function s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(579);class a extends t.Component{render(){let e={display:"none"},t={display:"block"};return this.props.hasBtnMoreClicked?(e={display:"flex",flexDirection:"column"},t={display:"none"}):(e={display:"none"},t={display:"block"}),(0,o.jsxs)("div",{className:"card-container",style:{backgroundColor:this.props.background},children:[this.props.title&&(0,o.jsxs)("h6",{style:t,className:"hasBtnMoreClicked",children:[" ",this.props.title," "]}),(0,o.jsx)("div",{style:e,className:"detail",children:[{label:"Title",value:this.props.title},{label:"Authors",value:this.props.authors},{label:"Subject",value:this.props.subject},{label:"Category",value:this.props.genre},{label:"Language",value:"English"},{label:"Copyright status in the US",value:"Public domain"}].map(((e,t)=>e.value&&(0,o.jsx)("span",{className:"detail",children:"".concat(e.label,": ").concat(e.value)},t)))}),this.props.authors&&(0,o.jsx)("span",{style:t,className:"font12",children:this.props.authors})]})}}function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){i=!0,s=c}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var f=function(){},p={},m={},g={mark:f,measure:f};try{"undefined"!==typeof window&&(p=window),"undefined"!==typeof document&&(m=document),"undefined"!==typeof MutationObserver&&MutationObserver,"undefined"!==typeof performance&&(g=performance)}catch(CN){}var y=(p.navigator||{}).userAgent,v=void 0===y?"":y,w=p,b=m,_=g,I=(w.document,!!b.documentElement&&!!b.head&&"function"===typeof b.addEventListener&&"function"===typeof b.createElement),E=(~v.indexOf("MSIE")||v.indexOf("Trident/"),"___FONT_AWESOME___"),S="fa",k="svg-inline--fa",T="data-fa-i2svg",C=(function(){try{return!0}catch(CN){return!1}}(),[1,2,3,4,5,6,7,8,9,10]),x=C.concat([11,12,13,14,15,16,17,18,19,20]),A={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},N=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",A.GROUP,A.SWAP_OPACITY,A.PRIMARY,A.SECONDARY].concat(C.map((function(e){return"".concat(e,"x")}))).concat(x.map((function(e){return"w-".concat(e)}))),w.FontAwesomeConfig||{});if(b&&"function"===typeof b.querySelector){[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=d(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=b.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(N[r]=i)}))}var P=h({},{familyPrefix:S,replacementClass:k,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},N);P.autoReplaceSvg||(P.observeMutations=!1);var O=h({},P);w.FontAwesomeConfig=O;var D=w||{};D[E]||(D[E]={}),D[E].styles||(D[E].styles={}),D[E].hooks||(D[E].hooks={}),D[E].shims||(D[E].shims=[]);var R=D[E],L=[];I&&((b.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(b.readyState)||b.addEventListener("DOMContentLoaded",(function e(){b.removeEventListener("DOMContentLoaded",e),1,L.map((function(e){return e()}))})));var M,F="pending",j="settled",U="fulfilled",V="rejected",z=function(){},B="undefined"!==typeof n.g&&"undefined"!==typeof n.g.process&&"function"===typeof n.g.process.emit,q="undefined"===typeof setImmediate?setTimeout:setImmediate,K=[];function W(){for(var e=0;e<K.length;e++)K[e][0](K[e][1]);K=[],M=!1}function G(e,t){K.push([e,t]),M||(M=!0,q(W,0))}function H(e){var t=e.owner,n=t._state,r=t._data,i=e[n],s=e.then;if("function"===typeof i){n=U;try{r=i(r)}catch(CN){X(s,CN)}}Q(s,r)||(n===U&&$(s,r),n===V&&X(s,r))}function Q(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"===typeof t||"object"===c(t))){var r=t.then;if("function"===typeof r)return r.call(t,(function(r){n||(n=!0,t===r?Y(e,r):$(e,r))}),(function(t){n||(n=!0,X(e,t))})),!0}}catch(CN){return n||X(e,CN),!0}return!1}function $(e,t){e!==t&&Q(e,t)||Y(e,t)}function Y(e,t){e._state===F&&(e._state=j,e._data=t,G(Z,e))}function X(e,t){e._state===F&&(e._state=j,e._data=t,G(ee,e))}function J(e){e._then=e._then.forEach(H)}function Z(e){e._state=U,J(e)}function ee(e){e._state=V,J(e),!e._handled&&B&&n.g.process.emit("unhandledRejection",e._data,e)}function te(e){n.g.process.emit("rejectionHandled",e)}function ne(e){if("function"!==typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof ne===!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function n(e){X(t,e)}try{e((function(e){$(t,e)}),n)}catch(CN){n(CN)}}(e,this)}ne.prototype={constructor:ne,_state:F,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(z),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===V&&B&&G(te,this)),this._state===U||this._state===V?G(H,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},ne.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new ne((function(t,n){var r=[],i=0;function s(e){return i++,function(n){r[e]=n,--i||t(r)}}for(var o,a=0;a<e.length;a++)(o=e[a])&&"function"===typeof o.then?o.then(s(a),n):r[a]=o;i||t(r)}))},ne.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new ne((function(t,n){for(var r,i=0;i<e.length;i++)(r=e[i])&&"function"===typeof r.then?r.then(t,n):t(r)}))},ne.resolve=function(e){return e&&"object"===c(e)&&e.constructor===ne?e:new ne((function(t){t(e)}))},ne.reject=function(e){return new ne((function(t,n){n(e)}))};var re={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function ie(e){if(e&&I){var t=b.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=b.head.childNodes,r=null,i=n.length-1;i>-1;i--){var s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}return b.head.insertBefore(t,r),e}}var se="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function oe(){for(var e=12,t="";e-- >0;)t+=se[62*Math.random()|0];return t}function ae(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ce(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n],";")}),"")}function le(e){return e.size!==re.size||e.x!==re.x||e.y!==re.y||e.rotate!==re.rotate||e.flipX||e.flipY}function ue(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),a="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(s," ").concat(o," ").concat(a)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}var he={x:0,y:0,width:"100%",height:"100%"};function de(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function fe(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,s=e.iconName,o=e.transform,a=e.symbol,c=e.title,l=e.maskId,u=e.titleId,d=e.extra,f=e.watchable,p=void 0!==f&&f,m=r.found?r:n,g=m.width,y=m.height,v="fak"===i,w=v?"":"fa-w-".concat(Math.ceil(g/y*16)),b=[O.replacementClass,s?"".concat(O.familyPrefix,"-").concat(s):"",w].filter((function(e){return-1===d.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(d.classes).join(" "),_={children:[],attributes:h({},d.attributes,{"data-prefix":i,"data-icon":s,class:b,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(g," ").concat(y)})},I=v&&!~d.classes.indexOf("fa-fw")?{width:"".concat(g/y*16*.0625,"em")}:{};p&&(_.attributes[T]=""),c&&_.children.push({tag:"title",attributes:{id:_.attributes["aria-labelledby"]||"title-".concat(u||oe())},children:[c]});var E=h({},_,{prefix:i,iconName:s,main:n,mask:r,maskId:l,transform:o,symbol:a,styles:h({},I,d.styles)}),S=r.found&&n.found?function(e){var t,n=e.children,r=e.attributes,i=e.main,s=e.mask,o=e.maskId,a=e.transform,c=i.width,l=i.icon,u=s.width,d=s.icon,f=ue({transform:a,containerWidth:u,iconWidth:c}),p={tag:"rect",attributes:h({},he,{fill:"white"})},m=l.children?{children:l.children.map(de)}:{},g={tag:"g",attributes:h({},f.inner),children:[de(h({tag:l.tag,attributes:h({},l.attributes,f.path)},m))]},y={tag:"g",attributes:h({},f.outer),children:[g]},v="mask-".concat(o||oe()),w="clip-".concat(o||oe()),b={tag:"mask",attributes:h({},he,{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,y]},_={tag:"defs",children:[{tag:"clipPath",attributes:{id:w},children:(t=d,"g"===t.tag?t.children:[t])},b]};return n.push(_,{tag:"rect",attributes:h({fill:"currentColor","clip-path":"url(#".concat(w,")"),mask:"url(#".concat(v,")")},he)}),{children:n,attributes:r}}(E):function(e){var t=e.children,n=e.attributes,r=e.main,i=e.transform,s=ce(e.styles);if(s.length>0&&(n.style=s),le(i)){var o=ue({transform:i,containerWidth:r.width,iconWidth:r.width});t.push({tag:"g",attributes:h({},o.outer),children:[{tag:"g",attributes:h({},o.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:h({},r.icon.attributes,o.path)}]}]})}else t.push(r.icon);return{children:t,attributes:n}}(E),k=S.children,C=S.attributes;return E.children=k,E.attributes=C,a?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,s=e.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:h({},i,{id:!0===s?"".concat(t,"-").concat(O.familyPrefix,"-").concat(n):s}),children:r}]}]}(E):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,s=e.styles,o=e.transform;if(le(o)&&n.found&&!r.found){var a={x:n.width/n.height/2,y:.5};i.style=ce(h({},s,{"transform-origin":"".concat(a.x+o.x/16,"em ").concat(a.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(E)}var pe=function(){},me=(O.measurePerformance&&_&&_.mark&&_.measure,function(e,t,n,r){var i,s,o,a=Object.keys(e),c=a.length,l=void 0!==r?function(e,t){return function(n,r,i,s){return e.call(t,n,r,i,s)}}(t,r):t;for(void 0===n?(i=1,o=e[a[0]]):(i=0,o=n);i<c;i++)o=l(o,e[s=a[i]],s,e);return o});function ge(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==n&&n,i=Object.keys(t).reduce((function(e,n){var r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e}),{});"function"!==typeof R.hooks.addPack||r?R.styles[e]=h({},R.styles[e]||{},i):R.hooks.addPack(e,i),"fas"===e&&ge("fa",t)}var ye=R.styles,ve=R.shims,we=function(){var e=function(e){return me(ye,(function(t,n,r){return t[r]=me(n,e,{}),t}),{})};e((function(e,t,n){return t[3]&&(e[t[3]]=n),e})),e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in ye;me(ve,(function(e,n){var r=n[0],i=n[1],s=n[2];return"far"!==i||t||(i="fas"),e[r]={prefix:i,iconName:s},e}),{})};we();R.styles;function be(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}function _e(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,s=void 0===i?[]:i;return"string"===typeof e?ae(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(ae(e[n]),'" ')}),"").trim()}(r),">").concat(s.map(_e).join(""),"</").concat(t,">")}var Ie=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),t):t};function Ee(e){this.name="MissingIcon",this.message=e||"Icon unavailable",this.stack=(new Error).stack}Ee.prototype=Object.create(Error.prototype),Ee.prototype.constructor=Ee;var Se={fill:"currentColor"},ke={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},Te={tag:"path",attributes:h({},Se,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})},Ce=h({},ke,{attributeName:"opacity"});h({},Se,{cx:"256",cy:"364",r:"28"}),h({},ke,{attributeName:"r",values:"28;14;28;28;14;28;"}),h({},Ce,{values:"1;0;1;1;0;1;"}),h({},Se,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),h({},Ce,{values:"1;0;0;0;0;1;"}),h({},Se,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),h({},Ce,{values:"0;0;1;1;0;0;"}),R.styles;function xe(e){var t=e[0],n=e[1],r=d(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(O.familyPrefix,"-").concat(A.GROUP)},children:[{tag:"path",attributes:{class:"".concat(O.familyPrefix,"-").concat(A.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(O.familyPrefix,"-").concat(A.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}R.styles;var Ae='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';function Ne(){var e=S,t=k,n=O.familyPrefix,r=O.replacementClass,i=Ae;if(n!==e||r!==t){var s=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),a=new RegExp("\\.".concat(t),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}var Pe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=h({},e.definitions[t]||{},i[t]),ge(t,i[t]),we()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,s=r.iconName,o=r.icon;e[i]||(e[i]={}),e[i][s]=o})),e}}],n&&l(t.prototype,n),r&&l(t,r),e}();function Oe(){O.autoAddCss&&!Me&&(ie(Ne()),Me=!0)}function De(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return _e(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(I){var t=b.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function Re(e){var t=e.prefix,n=void 0===t?"fa":t,r=e.iconName;if(r)return be(Le.definitions,n,r)||be(R.styles,n,r)}var Le=new Pe,Me=!1,Fe={transform:function(e){return Ie(e)}},je=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:Re(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:Re(i||{})),e(r,h({},n,{mask:i}))}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?re:n,i=t.symbol,s=void 0!==i&&i,o=t.mask,a=void 0===o?null:o,c=t.maskId,l=void 0===c?null:c,u=t.title,d=void 0===u?null:u,f=t.titleId,p=void 0===f?null:f,m=t.classes,g=void 0===m?[]:m,y=t.attributes,v=void 0===y?{}:y,w=t.styles,b=void 0===w?{}:w;if(e){var _=e.prefix,I=e.iconName,E=e.icon;return De(h({type:"icon"},e),(function(){return Oe(),O.autoA11y&&(d?v["aria-labelledby"]="".concat(O.replacementClass,"-title-").concat(p||oe()):(v["aria-hidden"]="true",v.focusable="false")),fe({icons:{main:xe(E),mask:a?xe(a.icon):{found:!1,width:null,height:null,icon:{}}},prefix:_,iconName:I,transform:h({},re,r),symbol:s,title:d,maskId:l,titleId:p,extra:{attributes:v,styles:b,classes:g}})}))}})),Ue=n(173),Ve=n.n(Ue);function ze(e){return ze="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function Be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){Be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function We(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ge(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function He(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var Qe=!1;try{Qe=!0}catch(CN){}function $e(e){return e&&"object"===ze(e)&&e.prefix&&e.iconName&&e.icon?e:Fe.icon?Fe.icon(e):null===e?null:e&&"object"===ze(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function Ye(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Be({},e,t):{}}function Xe(e){var t=e.forwardedRef,n=We(e,["forwardedRef"]),r=n.icon,i=n.mask,s=n.symbol,o=n.className,a=n.title,c=n.titleId,l=$e(r),u=Ye("classes",[].concat(Ge(function(e){var t,n=e.spin,r=e.pulse,i=e.fixedWidth,s=e.inverse,o=e.border,a=e.listItem,c=e.flip,l=e.size,u=e.rotation,h=e.pull,d=(Be(t={"fa-spin":n,"fa-pulse":r,"fa-fw":i,"fa-inverse":s,"fa-border":o,"fa-li":a,"fa-flip-horizontal":"horizontal"===c||"both"===c,"fa-flip-vertical":"vertical"===c||"both"===c},"fa-".concat(l),"undefined"!==typeof l&&null!==l),Be(t,"fa-rotate-".concat(u),"undefined"!==typeof u&&null!==u&&0!==u),Be(t,"fa-pull-".concat(h),"undefined"!==typeof h&&null!==h),Be(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(d).map((function(e){return d[e]?e:null})).filter((function(e){return e}))}(n)),Ge(o.split(" ")))),h=Ye("transform","string"===typeof n.transform?Fe.transform(n.transform):n.transform),d=Ye("mask",$e(i)),f=je(l,Ke({},u,{},h,{},d,{symbol:s,title:a,titleId:c}));if(!f)return function(){var e;!Qe&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",l),null;var p=f.abstract,m={ref:t};return Object.keys(n).forEach((function(e){Xe.defaultProps.hasOwnProperty(e)||(m[e]=n[e])})),Je(p[0],m)}Xe.displayName="FontAwesomeIcon",Xe.propTypes={border:Ve().bool,className:Ve().string,mask:Ve().oneOfType([Ve().object,Ve().array,Ve().string]),fixedWidth:Ve().bool,inverse:Ve().bool,flip:Ve().oneOf(["horizontal","vertical","both"]),icon:Ve().oneOfType([Ve().object,Ve().array,Ve().string]),listItem:Ve().bool,pull:Ve().oneOf(["right","left"]),pulse:Ve().bool,rotation:Ve().oneOf([0,90,180,270]),size:Ve().oneOf(["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Ve().bool,symbol:Ve().oneOfType([Ve().bool,Ve().string]),title:Ve().string,transform:Ve().oneOfType([Ve().string,Ve().object]),swapOpacity:Ve().bool},Xe.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var Je=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),s=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=r.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=He(t.slice(0,r)),s=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=s:e[i]=s,e}),{});break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[He(t)]=r}return e}),{attrs:{}}),o=r.style,a=void 0===o?{}:o,c=We(r,["style"]);return s.attrs.style=Ke({},s.attrs.style,{},a),t.apply(void 0,[n.tag,Ke({},s.attrs,{},c)].concat(Ge(i)))}.bind(null,t.createElement),Ze={prefix:"fas",iconName:"bookmark",icon:[384,512,[],"f02e","M0 512V48C0 21.49 21.49 0 48 0h288c26.51 0 48 21.49 48 48v464L192 400 0 512z"]},et={prefix:"fas",iconName:"forward",icon:[512,512,[],"f04e","M500.5 231.4l-192-160C287.9 54.3 256 68.6 256 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2zm-256 0l-192-160C31.9 54.3 0 68.6 0 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2z"]},tt={prefix:"fas",iconName:"heart",icon:[512,512,[],"f004","M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"]},nt={prefix:"fas",iconName:"info-circle",icon:[512,512,[],"f05a","M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"]},rt={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"]};const it=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},st={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(it(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new ot;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ot extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const at=function(e){return function(e){const t=it(e);return st.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ct=function(e){try{return st.decodeString(e,!0)}catch(CN){console.error("base64Decode failed: ",CN)}return null};function lt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&ut(n)&&(e[n]=lt(e[n],t[n]));return e}function ut(e){return"__proto__"!==e}const ht=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,dt=()=>{try{return ht()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(CN){return}const t=e&&ct(e[1]);return t&&JSON.parse(t)})()}catch(CN){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(CN))}},ft=()=>{var e;return null===(e=dt())||void 0===e?void 0:e.config};class pt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function mt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function gt(){var e;const t=null===(e=dt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(CN){return!1}}function yt(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function vt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function wt(){const e=mt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function bt(){try{return"object"===typeof indexedDB}catch(CN){return!1}}class _t extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,_t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,It.prototype.create)}}class It{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Et,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new _t(n,s,t)}}const Et=/\{\$([^}]+)}/g;function St(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function kt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Tt(n)&&Tt(s)){if(!kt(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Tt(e){return null!==e&&"object"===typeof e}function Ct(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function xt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function At(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Nt(e,t){const n=new Pt(e,t);return n.subscribe.bind(n)}class Pt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ot),void 0===r.error&&(r.error=Ot),void 0===r.complete&&(r.complete=Ot);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(CN){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(CN){"undefined"!==typeof console&&console.error&&console.error(CN)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Ot(){}function Dt(e){return e&&e._delegate?e._delegate:e}class Rt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Lt="[DEFAULT]";class Mt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new pt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(CN){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(CN){if(r)return null;throw CN}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Lt})}catch(CN){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(CN){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(Fg){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ft(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(Fg){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt;return this.component?this.component.multipleInstances?e:Lt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function Ft(e){return e===Lt?void 0:e}class jt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Mt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ut=[];var Vt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Vt||(Vt={}));const zt={debug:Vt.DEBUG,verbose:Vt.VERBOSE,info:Vt.INFO,warn:Vt.WARN,error:Vt.ERROR,silent:Vt.SILENT},Bt=Vt.INFO,qt={[Vt.DEBUG]:"log",[Vt.VERBOSE]:"log",[Vt.INFO]:"info",[Vt.WARN]:"warn",[Vt.ERROR]:"error"},Kt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=qt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Wt{constructor(e){this.name=e,this._logLevel=Bt,this._logHandler=Kt,this._userLogHandler=null,Ut.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Vt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?zt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vt.DEBUG,...t),this._logHandler(this,Vt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vt.VERBOSE,...t),this._logHandler(this,Vt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vt.INFO,...t),this._logHandler(this,Vt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vt.WARN,...t),this._logHandler(this,Vt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Vt.ERROR,...t),this._logHandler(this,Vt.ERROR,...t)}}const Gt=(e,t)=>t.some((t=>e instanceof t));let Ht,Qt;const $t=new WeakMap,Yt=new WeakMap,Xt=new WeakMap,Jt=new WeakMap,Zt=new WeakMap;let en={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Yt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Xt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function tn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Qt||(Qt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(sn(this),n),rn($t.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return rn(e.apply(sn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(sn(this),t,...r);return Xt.set(s,t.sort?t.sort():[t]),rn(s)}}function nn(e){return"function"===typeof e?tn(e):(e instanceof IDBTransaction&&function(e){if(Yt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Yt.set(e,t)}(e),Gt(e,Ht||(Ht=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,en):e)}function rn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(rn(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&$t.set(t,e)})).catch((()=>{})),Zt.set(t,e),t}(e);if(Jt.has(e))return Jt.get(e);const t=nn(e);return t!==e&&(Jt.set(e,t),Zt.set(t,e)),t}const sn=e=>Zt.get(e);const on=["get","getKey","getAll","getAllKeys","count"],an=["put","add","delete","clear"],cn=new Map;function ln(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(cn.get(t))return cn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=an.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!on.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return cn.set(t,s),s}en=(e=>({...e,get:(t,n,r)=>ln(t,n)||e.get(t,n,r),has:(t,n)=>!!ln(t,n)||e.has(t,n)}))(en);class un{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const hn="@firebase/app",dn="0.9.13",fn=new Wt("@firebase/app"),pn="[DEFAULT]",mn={[hn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},gn=new Map,yn=new Map;function vn(e,t){try{e.container.addComponent(t)}catch(CN){fn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),CN)}}function wn(e,t){e.container.addOrOverwriteComponent(t)}function bn(e){const t=e.name;if(yn.has(t))return fn.debug("There were multiple attempts to register component ".concat(t,".")),!1;yn.set(t,e);for(const n of gn.values())vn(n,e);return!0}function _n(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function In(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pn;_n(e,t).clearInstance(n)}function En(){yn.clear()}const Sn=new It("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class kn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Rt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}const Tn="9.23.0";function Cn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:pn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Sn.create("bad-app-name",{appName:String(i)});if(n||(n=ft()),!n)throw Sn.create("no-options");const s=gn.get(i);if(s){if(kt(n,s.options)&&kt(r,s.config))return s;throw Sn.create("duplicate-app",{appName:i})}const o=new jt(i);for(const c of yn.values())o.addComponent(c);const a=new kn(n,r,o);return gn.set(i,a),a}function xn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn;const t=gn.get(e);if(!t&&e===pn&&ft())return Cn();if(!t)throw Sn.create("no-app",{appName:e});return t}function An(){return Array.from(gn.values())}async function Nn(e){const t=e.name;gn.has(t)&&(gn.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Pn(e,t,n){var r;let i=null!==(r=mn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void fn.warn(e.join(" "))}bn(new Rt("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function On(e,t){if(null!==e&&"function"!==typeof e)throw Sn.create("invalid-log-argument");!function(e,t){for(const n of Ut){let r=null;t&&t.level&&(r=zt[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Vt[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Dn(e){var t;t=e,Ut.forEach((e=>{e.setLogLevel(t)}))}const Rn="firebase-heartbeat-database",Ln=1,Mn="firebase-heartbeat-store";let Fn=null;function jn(){return Fn||(Fn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=rn(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(rn(o.result),e.oldVersion,e.newVersion,rn(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Rn,Ln,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Mn)}}).catch((e=>{throw Sn.create("idb-open",{originalErrorMessage:e.message})}))),Fn}async function Un(e,t){try{const n=(await jn()).transaction(Mn,"readwrite"),r=n.objectStore(Mn);await r.put(t,Vn(e)),await n.done}catch(CN){if(CN instanceof _t)fn.warn(CN.message);else{const t=Sn.create("idb-set",{originalErrorMessage:null===CN||void 0===CN?void 0:CN.message});fn.warn(t.message)}}}function Vn(e){return"".concat(e.name,"!").concat(e.options.appId)}class zn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new qn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Bn();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Bn(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Kn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Kn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=at(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Bn(){return(new Date).toISOString().substring(0,10)}class qn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!bt()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await jn();return await t.transaction(Mn).objectStore(Mn).get(Vn(e))}catch(CN){if(CN instanceof _t)fn.warn(CN.message);else{const t=Sn.create("idb-get",{originalErrorMessage:null===CN||void 0===CN?void 0:CN.message});fn.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Un(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Un(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Kn(e){return at(JSON.stringify({version:2,heartbeats:e})).length}var Wn;Wn="",bn(new Rt("platform-logger",(e=>new un(e)),"PRIVATE")),bn(new Rt("heartbeat",(e=>new zn(e)),"PRIVATE")),Pn(hn,dn,Wn),Pn(hn,dn,"esm2017"),Pn("fire-js","");class Gn{constructor(e,t){this._delegate=e,this.firebase=t,vn(e,new Rt("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Nn(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pn;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pn;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){vn(this._delegate,e)}_addOrOverwriteComponent(e){wn(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Hn=new It("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Qn=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Cn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(St(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Pn,setLogLevel:Dn,onLog:On,apps:null,SDK_VERSION:Tn,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(bn(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw Hn.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&lt(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!St(n,e=e||pn))throw Hn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Gn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){lt(n,e)},createSubscribe:Nt,ErrorFactory:It,deepExtend:lt}),n}(),$n=new Wt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){$n.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&$n.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Yn=Qn;!function(e){Pn("@firebase/app-compat","0.2.13",e)}();Yn.registerVersion("firebase","9.23.0","app-compat");var Xn,Jn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Zn={},er=er||{},tr=Jn||self;function nr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function rr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ir="closure_uid_"+(1e9*Math.random()>>>0),sr=0;function or(e,t,n){return e.call.apply(e.bind,arguments)}function ar(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function cr(e,t,n){return(cr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?or:ar).apply(null,arguments)}function lr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ur(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function hr(){this.s=this.s,this.o=this.o}hr.prototype.s=!1,hr.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ir)&&e[ir]||(e[ir]=++sr))},hr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const dr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function fr(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function pr(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(nr(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function mr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}mr.prototype.h=function(){this.defaultPrevented=!0};var gr=function(){if(!tr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{tr.addEventListener("test",(()=>{}),t),tr.removeEventListener("test",(()=>{}),t)}catch(n){}return e}();function yr(e){return/^[\s\xa0]*$/.test(e)}function vr(){var e=tr.navigator;return e&&(e=e.userAgent)?e:""}function wr(e){return-1!=vr().indexOf(e)}function br(e){return br[" "](e),e}br[" "]=function(){};var _r,Ir,Er=wr("Opera"),Sr=wr("Trident")||wr("MSIE"),kr=wr("Edge"),Tr=kr||Sr,Cr=wr("Gecko")&&!(-1!=vr().toLowerCase().indexOf("webkit")&&!wr("Edge"))&&!(wr("Trident")||wr("MSIE"))&&!wr("Edge"),xr=-1!=vr().toLowerCase().indexOf("webkit")&&!wr("Edge");function Ar(){var e=tr.document;return e?e.documentMode:void 0}e:{var Nr="",Pr=function(){var e=vr();return Cr?/rv:([^\);]+)(\)|;)/.exec(e):kr?/Edge\/([\d\.]+)/.exec(e):Sr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):xr?/WebKit\/(\S+)/.exec(e):Er?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Pr&&(Nr=Pr?Pr[1]:""),Sr){var Or=Ar();if(null!=Or&&Or>parseFloat(Nr)){_r=String(Or);break e}}_r=Nr}if(tr.document&&Sr){var Dr=Ar();Ir=Dr||(parseInt(_r,10)||void 0)}else Ir=void 0;var Rr=Ir;function Lr(e,t){if(mr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Cr){e:{try{br(t.nodeName);var i=!0;break e}catch(Vk){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Mr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Lr.$.h.call(this)}}ur(Lr,mr);var Mr={2:"touch",3:"pen",4:"mouse"};Lr.prototype.h=function(){Lr.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Fr="closure_listenable_"+(1e6*Math.random()|0),jr=0;function Ur(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++jr,this.fa=this.ia=!1}function Vr(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function zr(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Br(e){const t={};for(const n in e)t[n]=e[n];return t}const qr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kr(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<qr.length;t++)n=qr[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Wr(e){this.src=e,this.g={},this.h=0}function Gr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=dr(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Vr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Hr(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Wr.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Hr(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Ur(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Qr="closure_lm_"+(1e6*Math.random()|0),$r={};function Yr(e,t,n,r,i){if(r&&r.once)return Jr(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Yr(e,t[s],n,r,i);return null}return n=si(n),e&&e[Fr]?e.O(t,n,rr(r)?!!r.capture:!!r,i):Xr(e,t,n,!1,r,i)}function Xr(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=rr(i)?!!i.capture:!!i,a=ri(e);if(a||(e[Qr]=a=new Wr(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ni;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)gr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ti(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Jr(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Jr(e,t[s],n,r,i);return null}return n=si(n),e&&e[Fr]?e.P(t,n,rr(r)?!!r.capture:!!r,i):Xr(e,t,n,!0,r,i)}function Zr(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Zr(e,t[s],n,r,i);else r=rr(r)?!!r.capture:!!r,n=si(n),e&&e[Fr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Hr(s=e.g[t],n,r,i))&&(Vr(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=ri(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Hr(t,n,r,i)),(n=-1<e?t[e]:null)&&ei(n))}function ei(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Fr])Gr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ti(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ri(t))?(Gr(n,e),0==n.h&&(n.src=null,t[Qr]=null)):Vr(e)}}}function ti(e){return e in $r?$r[e]:$r[e]="on"+e}function ni(e,t){if(e.fa)e=!0;else{t=new Lr(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ei(e),e=n.call(r,t)}return e}function ri(e){return(e=e[Qr])instanceof Wr?e:null}var ii="__closure_events_fn_"+(1e9*Math.random()>>>0);function si(e){return"function"===typeof e?e:(e[ii]||(e[ii]=function(t){return e.handleEvent(t)}),e[ii])}function oi(){hr.call(this),this.i=new Wr(this),this.S=this,this.J=null}function ai(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new mr(t,e);else if(t instanceof mr)t.target=t.target||e;else{var i=t;Kr(t=new mr(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ci(o,r,!0,t)&&i}if(i=ci(o=t.g=e,r,!0,t)&&i,i=ci(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ci(o=t.g=n[s],r,!1,t)&&i}function ci(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Gr(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}ur(oi,hr),oi.prototype[Fr]=!0,oi.prototype.removeEventListener=function(e,t,n,r){Zr(this,e,t,n,r)},oi.prototype.N=function(){if(oi.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Vr(n[r]);delete t.g[e],t.h--}}this.J=null},oi.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},oi.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var li=tr.JSON.stringify;function ui(){var e=yi;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var hi=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new di),(e=>e.reset()));class di{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function fi(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function pi(e){tr.setTimeout((()=>{throw e}),0)}let mi,gi=!1,yi=new class{constructor(){this.h=this.g=null}add(e,t){const n=hi.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},vi=()=>{const e=tr.Promise.resolve(void 0);mi=()=>{e.then(wi)}};var wi=()=>{for(var e;e=ui();){try{e.h.call(e.g)}catch(n){pi(n)}var t=hi;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}gi=!1};function bi(e,t){oi.call(this),this.h=e||1,this.g=t||tr,this.j=cr(this.qb,this),this.l=Date.now()}function _i(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Ii(e,t,n){if("function"===typeof e)n&&(e=cr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=cr(e.handleEvent,e)}return 2147483647<Number(t)?-1:tr.setTimeout(e,t||0)}function Ei(e){e.g=Ii((()=>{e.g=null,e.i&&(e.i=!1,Ei(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}ur(bi,oi),(Xn=bi.prototype).ga=!1,Xn.T=null,Xn.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ai(this,"tick"),this.ga&&(_i(this),this.start()))}},Xn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xn.N=function(){bi.$.N.call(this),_i(this),delete this.g};class Si extends hr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ei(this)}N(){super.N(),this.g&&(tr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ki(e){hr.call(this),this.h=e,this.g={}}ur(ki,hr);var Ti=[];function Ci(e,t,n,r){Array.isArray(n)||(n&&(Ti[0]=n.toString()),n=Ti);for(var i=0;i<n.length;i++){var s=Yr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function xi(e){zr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ei(e)}),e),e.g={}}function Ai(){this.g=!0}function Ni(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return li(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}ki.prototype.N=function(){ki.$.N.call(this),xi(this)},ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ai.prototype.Ea=function(){this.g=!1},Ai.prototype.info=function(){};var Pi={},Oi=null;function Di(){return Oi=Oi||new oi}function Ri(e){mr.call(this,Pi.Ta,e)}function Li(e){const t=Di();ai(t,new Ri(t))}function Mi(e,t){mr.call(this,Pi.STAT_EVENT,e),this.stat=t}function Fi(e){const t=Di();ai(t,new Mi(t,e))}function ji(e,t){mr.call(this,Pi.Ua,e),this.size=t}function Ui(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return tr.setTimeout((function(){e()}),t)}Pi.Ta="serverreachability",ur(Ri,mr),Pi.STAT_EVENT="statevent",ur(Mi,mr),Pi.Ua="timingevent",ur(ji,mr);var Vi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},zi={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Bi(){}function qi(e){return e.h||(e.h=e.i())}function Ki(){}Bi.prototype.h=null;var Wi,Gi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Hi(){mr.call(this,"d")}function Qi(){mr.call(this,"c")}function $i(){}function Yi(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ki(this),this.P=Ji,e=Tr?125:void 0,this.V=new bi(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Xi}function Xi(){this.i=null,this.g="",this.h=!1}ur(Hi,mr),ur(Qi,mr),ur($i,Bi),$i.prototype.g=function(){return new XMLHttpRequest},$i.prototype.i=function(){return{}},Wi=new $i;var Ji=45e3,Zi={},es={};function ts(e,t,n){e.L=1,e.v=bs(ms(t)),e.s=n,e.S=!0,ns(e,null)}function ns(e,t){e.G=Date.now(),os(e),e.A=ms(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Ds(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Xi,e.g=Lo(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Si(cr(e.Pa,e,e.g),e.O)),Ci(e.U,e.g,"readystatechange",e.nb),t=e.I?Br(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Li(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function rs(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function is(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=ss(e,n),r==es){4==t&&(e.o=4,Fi(14),i=!1),Ni(e.j,e.m,null,"[Incomplete Response]");break}if(r==Zi){e.o=4,Fi(15),Ni(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ni(e.j,e.m,r,null),hs(e,r)}rs(e)&&r!=es&&r!=Zi&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Fi(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Co(t),t.M=!0,Fi(11))):(Ni(e.j,e.m,n,"[Invalid Chunked Response]"),us(e),ls(e))}function ss(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?es:(n=Number(t.substring(n,r)),isNaN(n)?Zi:(r+=1)+n>t.length?es:(t=t.slice(r,r+n),e.C=r+n,t))}function os(e){e.Y=Date.now()+e.P,as(e,e.P)}function as(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ui(cr(e.lb,e),t)}function cs(e){e.B&&(tr.clearTimeout(e.B),e.B=null)}function ls(e){0==e.l.H||e.J||No(e.l,e)}function us(e){cs(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,_i(e.V),xi(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function hs(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Vs(n.i,e)))if(!e.K&&Vs(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(zk){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ao(n),wo(n)}To(n),Fi(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ui(cr(n.ib,n),6e3));if(1>=Us(n.i)&&n.oa){try{n.oa()}catch(zk){}n.oa=void 0}}else Oo(n,11)}else if((e.K||n.g==e)&&Ao(n),!yr(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(zs(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,ws(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Ro(r,r.J?r.pa:null,r.Y),o.K){Bs(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.B&&(cs(a),os(a)),r.g=o}else ko(r);0<n.j.length&&_o(n)}else"stop"!=l[0]&&"close"!=l[0]||Oo(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Oo(n,7):vo(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Li()}catch(zk){}}function ds(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(nr(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(nr(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(nr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Xn=Yi.prototype).setTimeout=function(e){this.P=e},Xn.nb=function(e){e=e.target;const t=this.M;t&&3==ho(e)?t.l():this.Pa(e)},Xn.Pa=function(e){try{if(e==this.g)e:{const u=ho(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Tr||this.g&&(this.h.h||this.g.ja()||fo(this.g)))){this.J||4!=u||7==t||Li(),cs(this);var n=this.g.da();this.ca=n;t:if(rs(this)){var r=fo(this.g);e="";var i=r.length,s=4==ho(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){us(this),ls(this);var o="";break t}this.h.i=new tr.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yr(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.o=3,Fi(12),us(this),ls(this);break e}Ni(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hs(this,n)}this.S?(is(this,u,o),Tr&&this.i&&3==u&&(Ci(this.U,this.V,"tick",this.mb),this.V.start())):(Ni(this.j,this.m,o,null),hs(this,o)),4==u&&us(this),this.i&&!this.J&&(4==u?No(this.l,this):(this.i=!1,os(this)))}else(function(e){const t={};e=(e.g&&2<=ho(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(yr(e[r]))continue;var n=fi(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Fi(12)):(this.o=0,Fi(13)),us(this),ls(this)}}}catch(u){}},Xn.mb=function(){if(this.g){var e=ho(this.g),t=this.g.ja();this.C<t.length&&(cs(this),is(this,e,t),this.i&&4!=e&&os(this))}},Xn.cancel=function(){this.J=!0,us(this)},Xn.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Li(),Fi(17)),us(this),this.o=2,ls(this)):as(this,this.Y-e)};var fs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ps(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ps){this.h=e.h,gs(this,e.j),this.s=e.s,this.g=e.g,ys(this,e.m),this.l=e.l;var t=e.i,n=new As;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),vs(this,n),this.o=e.o}else e&&(t=String(e).match(fs))?(this.h=!1,gs(this,t[1]||"",!0),this.s=_s(t[2]||""),this.g=_s(t[3]||"",!0),ys(this,t[4]),this.l=_s(t[5]||"",!0),vs(this,t[6]||"",!0),this.o=_s(t[7]||"")):(this.h=!1,this.i=new As(null,this.h))}function ms(e){return new ps(e)}function gs(e,t,n){e.j=n?_s(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ys(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function vs(e,t,n){t instanceof As?(e.i=t,function(e,t){t&&!e.j&&(Ns(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ps(this,t),Ds(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Is(t,Cs)),e.i=new As(t,e.h))}function ws(e,t,n){e.i.set(t,n)}function bs(e){return ws(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function _s(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Is(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Es),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Es(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ps.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Is(t,Ss,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Is(t,Ss,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Is(n,"/"==n.charAt(0)?Ts:ks,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Is(n,xs)),e.join("")};var Ss=/[#\/\?@]/g,ks=/[#\?:]/g,Ts=/[#\?]/g,Cs=/[#\?@]/g,xs=/#/g;function As(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ns(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ps(e,t){Ns(e),t=Rs(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Os(e,t){return Ns(e),t=Rs(e,t),e.g.has(t)}function Ds(e,t,n){Ps(e,t),0<n.length&&(e.i=null,e.g.set(Rs(e,t),fr(n)),e.h+=n.length)}function Rs(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Xn=As.prototype).add=function(e,t){Ns(this),this.i=null,e=Rs(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Xn.forEach=function(e,t){Ns(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Xn.ta=function(){Ns(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Xn.Z=function(e){Ns(this);let t=[];if("string"===typeof e)Os(this,e)&&(t=t.concat(this.g.get(Rs(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Xn.set=function(e,t){return Ns(this),this.i=null,Os(this,e=Rs(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Xn.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Xn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Ls=class{constructor(e,t){this.g=e,this.map=t}};function Ms(e){this.l=e||Fs,tr.PerformanceNavigationTiming?e=0<(e=tr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(tr.g&&tr.g.Ka&&tr.g.Ka()&&tr.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Fs=10;function js(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Us(e){return e.h?1:e.g?e.g.size:0}function Vs(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function zs(e,t){e.g?e.g.add(t):e.h=t}function Bs(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function qs(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return fr(e.i)}Ms.prototype.cancel=function(){if(this.i=qs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Ks,Ws=class{stringify(e){return tr.JSON.stringify(e,void 0)}parse(e){return tr.JSON.parse(e,void 0)}};function Gs(){this.g=new Ws}function Hs(e,t,n){const r=n||"";try{ds(e,(function(e,n){let i=e;rr(e)&&(i=li(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(CN){throw t.push(r+"type="+encodeURIComponent("_badmap")),CN}}function Qs(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(Vk){}}function $s(e){this.l=e.fc||null,this.j=e.ob||!1}function Ys(e,t){oi.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Xs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ur($s,Bi),$s.prototype.g=function(){return new Ys(this.l,this.j)},$s.prototype.i=(Ks={},function(){return Ks}),ur(Ys,oi);var Xs=0;function Js(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Zs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,eo(e)}function eo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Xn=Ys.prototype).open=function(e,t){if(this.readyState!=Xs)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,eo(this)},Xn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||tr).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Xn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zs(this)),this.readyState=Xs},Xn.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,eo(this)),this.g&&(this.readyState=3,eo(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof tr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Js(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Xn.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Zs(this):eo(this),3==this.readyState&&Js(this)}},Xn.Za=function(e){this.g&&(this.response=this.responseText=e,Zs(this))},Xn.Ya=function(e){this.g&&(this.response=e,Zs(this))},Xn.ka=function(){this.g&&Zs(this)},Xn.setRequestHeader=function(e,t){this.v.append(e,t)},Xn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Xn.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ys.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var to=tr.JSON.parse;function no(e){oi.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ro,this.L=this.M=!1}ur(no,oi);var ro="",io=/^https?$/i,so=["POST","PUT"];function oo(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ao(e),lo(e)}function ao(e){e.F||(e.F=!0,ai(e,"complete"),ai(e,"error"))}function co(e){if(e.h&&"undefined"!=typeof er&&(!e.C[1]||4!=ho(e)||2!=e.da()))if(e.v&&4==ho(e))Ii(e.La,0,e);else if(ai(e,"readystatechange"),4==ho(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(fs)[1]||null;!i&&tr.self&&tr.self.location&&(i=tr.self.location.protocol.slice(0,-1)),r=!io.test(i?i.toLowerCase():"")}n=r}if(n)ai(e,"complete"),ai(e,"success");else{e.m=6;try{var s=2<ho(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",ao(e)}}finally{lo(e)}}}function lo(e,t){if(e.g){uo(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ai(e,"ready");try{n.onreadystatechange=r}catch(CN){}}}function uo(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(tr.clearTimeout(e.A),e.A=null)}function ho(e){return e.g?e.g.readyState:0}function fo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ro:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(va){return null}}function po(e){let t="";return zr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function mo(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=po(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ws(e,t,n))}function go(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function yo(e){this.Ga=0,this.j=[],this.l=new Ai,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=go("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=go("baseRetryDelayMs",5e3,e),this.hb=go("retryDelaySeedMs",1e4,e),this.eb=go("forwardChannelMaxRetries",2,e),this.xa=go("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Ms(e&&e.concurrentRequestLimit),this.Ja=new Gs,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function vo(e){if(bo(e),3==e.H){var t=e.W++,n=ms(e.I);if(ws(n,"SID",e.K),ws(n,"RID",t),ws(n,"TYPE","terminate"),Eo(e,n),(t=new Yi(e,e.l,t)).L=2,t.v=bs(ms(n)),n=!1,tr.navigator&&tr.navigator.sendBeacon)try{n=tr.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&tr.Image&&((new Image).src=t.v,n=!0),n||(t.g=Lo(t.l,null),t.g.ha(t.v)),t.G=Date.now(),os(t)}Do(e)}function wo(e){e.g&&(Co(e),e.g.cancel(),e.g=null)}function bo(e){wo(e),e.u&&(tr.clearTimeout(e.u),e.u=null),Ao(e),e.i.cancel(),e.m&&("number"===typeof e.m&&tr.clearTimeout(e.m),e.m=null)}function _o(e){if(!js(e.i)&&!e.m){e.m=!0;var t=e.Na;mi||vi(),gi||(mi(),gi=!0),yi.add(t,e),e.C=0}}function Io(e,t){var n;n=t?t.m:e.W++;const r=ms(e.I);ws(r,"SID",e.K),ws(r,"RID",n),ws(r,"AID",e.V),Eo(e,r),e.o&&e.s&&mo(r,e.o,e.s),n=new Yi(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=So(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),zs(e.i,n),ts(n,r,t)}function Eo(e,t){e.na&&zr(e.na,(function(e,n){ws(t,n,e)})),e.h&&ds({},(function(e,n){ws(t,n,e)}))}function So(e,t,n){n=Math.min(e.j.length,n);var r=e.h?cr(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Hs(a,e,"req"+n+"_")}catch(Aa){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function ko(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;mi||vi(),gi||(mi(),gi=!0),yi.add(t,e),e.A=0}}function To(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Ui(cr(e.Ma,e),Po(e,e.A)),e.A++,!0)}function Co(e){null!=e.B&&(tr.clearTimeout(e.B),e.B=null)}function xo(e){e.g=new Yi(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=ms(e.wa);ws(t,"RID","rpc"),ws(t,"SID",e.K),ws(t,"AID",e.V),ws(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ws(t,"TO",e.qa),ws(t,"TYPE","xmlhttp"),Eo(e,t),e.o&&e.s&&mo(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=bs(ms(t)),n.s=null,n.S=!0,ns(n,e)}function Ao(e){null!=e.v&&(tr.clearTimeout(e.v),e.v=null)}function No(e,t){var n=null;if(e.g==t){Ao(e),Co(e),e.g=null;var r=2}else{if(!Vs(e.i,t))return;n=t.F,Bs(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;ai(r=Di(),new ji(r,n)),_o(e)}else ko(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Us(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Ui(cr(e.Na,e,t),Po(e,e.C)),e.C++,!0))}(e,t)||2==r&&To(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Oo(e,5);break;case 4:Oo(e,10);break;case 3:Oo(e,6);break;default:Oo(e,2)}}function Po(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Oo(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=cr(e.pb,e);n||(n=new ps("//www.google.com/images/cleardot.gif"),tr.location&&"http"==tr.location.protocol||gs(n,"https"),bs(n)),function(e,t){const n=new Ai;if(tr.Image){const r=new Image;r.onload=lr(Qs,n,r,"TestLoadImage: loaded",!0,t),r.onerror=lr(Qs,n,r,"TestLoadImage: error",!1,t),r.onabort=lr(Qs,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=lr(Qs,n,r,"TestLoadImage: timeout",!1,t),tr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Fi(2);e.H=0,e.h&&e.h.za(t),Do(e),bo(e)}function Do(e){if(e.H=0,e.ma=[],e.h){const t=qs(e.i);0==t.length&&0==e.j.length||(pr(e.ma,t),pr(e.ma,e.j),e.i.i.length=0,fr(e.j),e.j.length=0),e.h.ya()}}function Ro(e,t,n){var r=n instanceof ps?ms(n):new ps(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ys(r,r.m);else{var i=tr.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new ps(null);r&&gs(s,r),t&&(s.g=t),i&&ys(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&ws(r,n,t),ws(r,"VER",e.ra),Eo(e,r),r}function Lo(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new no(new $s({ob:!0})):new no(e.va)).Oa(e.J),t}function Mo(){}function Fo(){if(Sr&&!(10<=Number(Rr)))throw Error("Environmental error: no available transport.")}function jo(e,t){oi.call(this),this.g=new yo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!yr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!yr(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new zo(this)}function Uo(e){Hi.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Vo(){Qi.call(this),this.status=1}function zo(e){this.g=e}function Bo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function qo(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Ko(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Xn=no.prototype).Oa=function(e){this.M=e},Xn.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Wi.g(),this.C=this.u?qi(this.u):qi(Wi),this.g.onreadystatechange=cr(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(Vk){return void oo(this,Vk)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=tr.FormData&&e instanceof tr.FormData,!(0<=dr(so,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{uo(this),0<this.B&&((this.L=function(e){return Sr&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=cr(this.ua,this)):this.A=Ii(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(Vk){oo(this,Vk)}},Xn.ua=function(){"undefined"!=typeof er&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ai(this,"timeout"),this.abort(8))},Xn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ai(this,"complete"),ai(this,"abort"),lo(this))},Xn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),lo(this,!0)),no.$.N.call(this)},Xn.La=function(){this.s||(this.G||this.v||this.l?co(this):this.kb())},Xn.kb=function(){co(this)},Xn.isActive=function(){return!!this.g},Xn.da=function(){try{return 2<ho(this)?this.g.status:-1}catch(Ks){return-1}},Xn.ja=function(){try{return this.g?this.g.responseText:""}catch(Ks){return""}},Xn.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),to(t)}},Xn.Ia=function(){return this.m},Xn.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Xn=yo.prototype).ra=8,Xn.H=1,Xn.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Yi(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Br(s),Kr(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=So(this,i,t),ws(n=ms(this.I),"RID",e),ws(n,"CVER",22),this.F&&ws(n,"X-HTTP-Session-Id",this.F),Eo(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(po(s)))+"&"+t:this.o&&mo(n,this.o,s)),zs(this.i,i),this.bb&&ws(n,"TYPE","init"),this.P?(ws(n,"$req",t),ws(n,"SID","null"),i.aa=!0,ts(i,n,null)):ts(i,n,t),this.H=2}}else 3==this.H&&(e?Io(this,e):0==this.j.length||js(this.i)||Io(this))},Xn.Ma=function(){if(this.u=null,xo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ui(cr(this.jb,this),e)}},Xn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Fi(10),wo(this),xo(this))},Xn.ib=function(){null!=this.v&&(this.v=null,wo(this),To(this),Fi(19))},Xn.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Fi(2)):(this.l.info("Failed to ping google.com"),Fi(1))},Xn.isActive=function(){return!!this.h&&this.h.isActive(this)},(Xn=Mo.prototype).Ba=function(){},Xn.Aa=function(){},Xn.za=function(){},Xn.ya=function(){},Xn.isActive=function(){return!0},Xn.Va=function(){},Fo.prototype.g=function(e,t){return new jo(e,t)},ur(jo,oi),jo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Fi(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Ro(e,null,e.Y),_o(e)},jo.prototype.close=function(){vo(this.g)},jo.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=li(e),e=n);t.j.push(new Ls(t.fb++,e)),3==t.H&&_o(t)},jo.prototype.N=function(){this.g.h=null,delete this.j,vo(this.g),delete this.g,jo.$.N.call(this)},ur(Uo,Hi),ur(Vo,Qi),ur(zo,Mo),zo.prototype.Ba=function(){ai(this.g,"a")},zo.prototype.Aa=function(e){ai(this.g,new Uo(e))},zo.prototype.za=function(e){ai(this.g,new Vo)},zo.prototype.ya=function(){ai(this.g,"b")},ur(Bo,(function(){this.blockSize=-1})),Bo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Bo.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)qo(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){qo(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){qo(this,r),i=0;break}}this.h=i,this.i+=t},Bo.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Wo={};function Go(e){return-128<=e&&128>e?function(e,t){var n=Wo;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Ko([0|e],0>e?-1:0)})):new Ko([0|e],0>e?-1:0)}function Ho(e){if(isNaN(e)||!isFinite(e))return $o;if(0>e)return ea(Ho(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Qo;return new Ko(t,0)}var Qo=4294967296,$o=Go(0),Yo=Go(1),Xo=Go(16777216);function Jo(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Zo(e){return-1==e.h}function ea(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Ko(n,~e.h).add(Yo)}function ta(e,t){return e.add(ea(t))}function na(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function ra(e,t){this.g=e,this.h=t}function ia(e,t){if(Jo(t))throw Error("division by zero");if(Jo(e))return new ra($o,$o);if(Zo(e))return t=ia(ea(e),t),new ra(ea(t.g),ea(t.h));if(Zo(t))return t=ia(e,ea(t)),new ra(ea(t.g),t.h);if(30<e.g.length){if(Zo(e)||Zo(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Yo,r=t;0>=r.X(e);)n=sa(n),r=sa(r);var i=oa(n,1),s=oa(r,1);for(r=oa(r,2),n=oa(n,2);!Jo(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=oa(r,1),n=oa(n,1)}return t=ta(e,i.R(t)),new ra(i,t)}for(i=$o;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Ho(n)).R(t);Zo(o)||0<o.X(e);)o=(s=Ho(n-=r)).R(t);Jo(s)&&(s=Yo),i=i.add(s),e=ta(e,o)}return new ra(i,e)}function sa(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Ko(n,e.h)}function oa(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Ko(i,e.h)}(Xn=Ko.prototype).ea=function(){if(Zo(this))return-ea(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Qo+r)*t,t*=Qo}return e},Xn.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Jo(this))return"0";if(Zo(this))return"-"+ea(this).toString(e);for(var t=Ho(Math.pow(e,6)),n=this,r="";;){var i=ia(n,t).g,s=((0<(n=ta(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Jo(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Xn.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Xn.X=function(e){return Zo(e=ta(this,e))?-1:Jo(e)?0:1},Xn.abs=function(){return Zo(this)?ea(this):this},Xn.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ko(n,-2147483648&n[n.length-1]?-1:0)},Xn.R=function(e){if(Jo(this)||Jo(e))return $o;if(Zo(this))return Zo(e)?ea(this).R(ea(e)):ea(ea(this).R(e));if(Zo(e))return ea(this.R(ea(e)));if(0>this.X(Xo)&&0>e.X(Xo))return Ho(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,na(n,2*r+2*i),n[2*r+2*i+1]+=s*c,na(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,na(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,na(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Ko(n,0)},Xn.gb=function(e){return ia(this,e).h},Xn.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Ko(n,this.h&e.h)},Xn.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Ko(n,this.h|e.h)},Xn.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Ko(n,this.h^e.h)},Fo.prototype.createWebChannel=Fo.prototype.g,jo.prototype.send=jo.prototype.u,jo.prototype.open=jo.prototype.m,jo.prototype.close=jo.prototype.close,Vi.NO_ERROR=0,Vi.TIMEOUT=8,Vi.HTTP_ERROR=6,zi.COMPLETE="complete",Ki.EventType=Gi,Gi.OPEN="a",Gi.CLOSE="b",Gi.ERROR="c",Gi.MESSAGE="d",oi.prototype.listen=oi.prototype.O,no.prototype.listenOnce=no.prototype.P,no.prototype.getLastError=no.prototype.Sa,no.prototype.getLastErrorCode=no.prototype.Ia,no.prototype.getStatus=no.prototype.da,no.prototype.getResponseJson=no.prototype.Wa,no.prototype.getResponseText=no.prototype.ja,no.prototype.send=no.prototype.ha,no.prototype.setWithCredentials=no.prototype.Oa,Bo.prototype.digest=Bo.prototype.l,Bo.prototype.reset=Bo.prototype.reset,Bo.prototype.update=Bo.prototype.j,Ko.prototype.add=Ko.prototype.add,Ko.prototype.multiply=Ko.prototype.R,Ko.prototype.modulo=Ko.prototype.gb,Ko.prototype.compare=Ko.prototype.X,Ko.prototype.toNumber=Ko.prototype.ea,Ko.prototype.toString=Ko.prototype.toString,Ko.prototype.getBits=Ko.prototype.D,Ko.fromNumber=Ho,Ko.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ea(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Ho(Math.pow(n,8)),i=$o,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Ho(Math.pow(n,o)),i=i.R(o).add(Ho(a))):i=(i=i.R(r)).add(Ho(a))}return i};var aa=Zn.createWebChannelTransport=function(){return new Fo},ca=Zn.getStatEventTarget=function(){return Di()},la=Zn.ErrorCode=Vi,ua=Zn.EventType=zi,ha=Zn.Event=Pi,da=Zn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},fa=Zn.FetchXmlHttpFactory=$s,pa=Zn.WebChannel=Ki,ma=Zn.XhrIo=no,ga=Zn.Md5=Bo,ya=Zn.Integer=Ko;const va="@firebase/firestore";class wa{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wa.UNAUTHENTICATED=new wa(null),wa.GOOGLE_CREDENTIALS=new wa("google-credentials-uid"),wa.FIRST_PARTY=new wa("first-party-uid"),wa.MOCK_USER=new wa("mock-user");let ba="9.23.0";const _a=new Wt("@firebase/firestore");function Ia(){return _a.logLevel}function Ea(e){if(_a.logLevel<=Vt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ta);_a.debug("Firestore (".concat(ba,"): ").concat(e),...i)}}function Sa(e){if(_a.logLevel<=Vt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ta);_a.error("Firestore (".concat(ba,"): ").concat(e),...i)}}function ka(e){if(_a.logLevel<=Vt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ta);_a.warn("Firestore (".concat(ba,"): ").concat(e),...i)}}function Ta(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ca(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(ba,") INTERNAL ASSERTION FAILED: ")+e;throw Sa(t),new Error(t)}function xa(e,t){e||Ca()}function Aa(e,t){return e}const Na={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pa extends _t{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Oa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Da{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Ra{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(wa.UNAUTHENTICATED)))}shutdown(){}}class La{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Ma{constructor(e){this.t=e,this.currentUser=wa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Oa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Oa,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Ea("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ea("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Oa)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ea("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(xa("string"==typeof t.accessToken),new Da(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xa(null===e||"string"==typeof e),new wa(e)}}class Fa{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=wa.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ja{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Fa(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(wa.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ua{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Va{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&Ea("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,Ea("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ea("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):Ea("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(xa("string"==typeof e.token),this.T=e.token,new Ua(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function za(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ba{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=za(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function qa(e,t){return e<t?-1:e>t?1:0}function Ka(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Wa(e){return e+"\0"}class Ga{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pa(Na.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pa(Na.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pa(Na.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pa(Na.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ga.fromMillis(Date.now())}static fromDate(e){return Ga.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ga(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qa(this.nanoseconds,e.nanoseconds):qa(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ha{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ha(e)}static min(){return new Ha(new Ga(0,0))}static max(){return new Ha(new Ga(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Qa{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ca(),void 0===n?n=e.length-t:n>e.length-t&&Ca(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Qa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qa?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class $a extends Qa{construct(e,t,n){return new $a(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Pa(Na.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new $a(e)}static emptyPath(){return new $a([])}}const Ya=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xa extends Qa{construct(e,t,n){return new Xa(e,t,n)}static isValidIdentifier(e){return Ya.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xa.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xa(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Pa(Na.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Pa(Na.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Pa(Na.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Pa(Na.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xa(t)}static emptyPath(){return new Xa([])}}class Ja{constructor(e){this.path=e}static fromPath(e){return new Ja($a.fromString(e))}static fromName(e){return new Ja($a.fromString(e).popFirst(5))}static empty(){return new Ja($a.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===$a.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return $a.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ja(new $a(e.slice()))}}class Za{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function ec(e){return e.fields.find((e=>2===e.kind))}function tc(e){return e.fields.filter((e=>2!==e.kind))}Za.UNKNOWN_ID=-1;class nc{constructor(e,t){this.fieldPath=e,this.kind=t}}class rc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new rc(0,oc.min())}}function ic(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ha.fromTimestamp(1e9===r?new Ga(n+1,0):new Ga(n,r));return new oc(i,Ja.empty(),t)}function sc(e){return new oc(e.readTime,e.key,-1)}class oc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new oc(Ha.min(),Ja.empty(),-1)}static max(){return new oc(Ha.max(),Ja.empty(),-1)}}function ac(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ja.comparator(e.documentKey,t.documentKey),0!==n?n:qa(e.largestBatchId,t.largestBatchId))}const cc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function uc(e){if(e.code!==Na.FAILED_PRECONDITION||e.message!==cc)throw e;Ea("LocalStore","Unexpectedly lost primary lease")}class hc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ca(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new hc(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof hc?t:hc.resolve(t)}catch(e){return hc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):hc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):hc.reject(t)}static resolve(e){return new hc(((t,n)=>{t(e)}))}static reject(e){return new hc(((t,n)=>{n(e)}))}static waitFor(e){return new hc(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=hc.resolve(!1);for(const n of e)t=t.next((e=>e?hc.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new hc(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new hc(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class dc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Oa,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new mc(e,t.error)):this.v.resolve()},this.transaction.onerror=t=>{const n=bc(t.target.error);this.v.reject(new mc(e,n))}}static open(e,t,n,r){try{return new dc(t,e.transaction(r,n))}catch(e){throw new mc(t,e)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ea("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new yc(t)}}class fc{constructor(e,t,n){this.name=e,this.version=t,this.V=n,12.2===fc.S(mt())&&Sa("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ea("SimpleDb","Removing database:",e),vc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!bt())return!1;if(fc.C())return!0;const e=mt(),t=fc.S(e),n=0<t&&t<10,r=fc.N(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static N(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async $(e){return this.db||(Ea("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new mc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Pa(Na.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Pa(Na.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new mc(e,r))},r.onupgradeneeded=e=>{Ea("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.V.O(t,r.transaction,e.oldVersion,this.version).next((()=>{Ea("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.F&&(this.db.onversionchange=e=>this.F(e)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.$(e);const t=dc.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.P(),e))).catch((e=>(t.abort(e),hc.reject(e)))).toPromise();return s.catch((()=>{})),await t.R,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Ea("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class pc{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return vc(this.L.delete())}}class mc extends Pa{constructor(e,t){super(Na.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function gc(e){return"IndexedDbTransactionError"===e.name}class yc{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Ea("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ea("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),vc(n)}add(e){return Ea("SimpleDb","ADD",this.store.name,e,e),vc(this.store.add(e))}get(e){return vc(this.store.get(e)).next((t=>(void 0===t&&(t=null),Ea("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Ea("SimpleDb","DELETE",this.store.name,e),vc(this.store.delete(e))}count(){return Ea("SimpleDb","COUNT",this.store.name),vc(this.store.count())}j(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new hc(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new hc(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}J(e,t){Ea("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}X(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Z(e){const t=this.cursor({});return new hc(((n,r)=>{t.onerror=e=>{const t=bc(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new hc(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new pc(i),o=t(i.primaryKey,i.value,s);if(o instanceof hc){const e=o.catch((e=>(s.done(),hc.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>hc.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function vc(e){return new hc(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=bc(e.target.error);n(t)}}))}let wc=!1;function bc(e){const t=fc.S(mt());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Pa("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return wc||(wc=!0,setTimeout((()=>{throw e}),0)),e}}return e}class _c{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){Ea("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Ea("IndexBackiller","Documents written: ".concat(await this.tt.nt()))}catch(e){gc(e)?Ea("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await uc(e)}await this.et(6e4)}))}}class Ic{constructor(e,t){this.localStore=e,this.persistence=t}async nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.st(t,e)))}st(e,t){const n=new Set;let r=t,i=!0;return hc.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Ea("IndexBackiller","Processing collection: ".concat(t)),this.it(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}it(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.rt(r,n))).next((n=>(Ea("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}rt(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=sc(t);ac(r,n)>0&&(n=r)})),new oc(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ec{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function Sc(e){return null==e}function kc(e){return 0===e&&1/e==-1/0}function Tc(e){return"number"==typeof e&&Number.isInteger(e)&&!kc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Cc(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ac(t)),t=xc(e.get(n),t);return Ac(t)}function xc(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Ac(e){return e+"\x01\x01"}function Nc(e){const t=e.length;if(xa(t>=2),2===t)return xa("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),$a.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Ca(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Ca()}s=t+2}return new $a(r)}Ec.ct=-1;const Pc=["userId","batchId"];function Oc(e,t){return[e,Cc(t)]}function Dc(e,t,n){return[e,Cc(t),n]}const Rc={},Lc=["prefixPath","collectionGroup","readTime","documentId"],Mc=["prefixPath","collectionGroup","documentId"],Fc=["collectionGroup","readTime","prefixPath","documentId"],jc=["canonicalId","targetId"],Uc=["targetId","path"],Vc=["path","targetId"],zc=["collectionId","parent"],Bc=["indexId","uid"],qc=["uid","sequenceNumber"],Kc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Wc=["indexId","uid","orderedDocumentKey"],Gc=["userId","collectionPath","documentId"],Hc=["userId","collectionPath","largestBatchId"],Qc=["userId","collectionGroup","largestBatchId"],$c=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Yc=[...$c,"documentOverlays"],Xc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Jc=Xc,Zc=[...Jc,"indexConfiguration","indexState","indexEntries"];class el extends lc{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function tl(e,t){const n=Aa(e);return fc.M(n.ht,t)}function nl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function rl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function il(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class sl{constructor(e,t){this.comparator=e,this.root=t||al.EMPTY}insert(e,t){return new sl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,al.BLACK,null,null))}remove(e){return new sl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,al.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ol(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ol(this.root,e,this.comparator,!1)}getReverseIterator(){return new ol(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ol(this.root,e,this.comparator,!0)}}class ol{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class al{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:al.RED,this.left=null!=r?r:al.EMPTY,this.right=null!=i?i:al.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new al(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return al.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return al.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,al.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,al.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ca();if(this.right.isRed())throw Ca();const e=this.left.check();if(e!==this.right.check())throw Ca();return e+(this.isRed()?0:1)}}al.EMPTY=null,al.RED=!0,al.BLACK=!1,al.EMPTY=new class{constructor(){this.size=0}get key(){throw Ca()}get value(){throw Ca()}get color(){throw Ca()}get left(){throw Ca()}get right(){throw Ca()}copy(e,t,n,r,i){return this}insert(e,t,n){return new al(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cl{constructor(e){this.comparator=e,this.data=new sl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ll(this.data.getIterator())}getIteratorFrom(e){return new ll(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof cl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new cl(this.comparator);return t.data=e,t}}class ll{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ul(e){return e.hasNext()?e.getNext():void 0}class hl{constructor(e){this.fields=e,e.sort(Xa.comparator)}static empty(){return new hl([])}unionWith(e){let t=new cl(Xa.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new hl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ka(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class dl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class fl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new dl("Invalid base64 string: "+e):e}}(e);return new fl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new fl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qa(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fl.EMPTY_BYTE_STRING=new fl("");const pl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ml(e){if(xa(!!e),"string"==typeof e){let t=0;const n=pl.exec(e);if(xa(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:gl(e.seconds),nanos:gl(e.nanos)}}function gl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function yl(e){return"string"==typeof e?fl.fromBase64String(e):fl.fromUint8Array(e)}function vl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wl(e){const t=e.mapValue.fields.__previous_value__;return vl(t)?wl(t):t}function bl(e){const t=ml(e.mapValue.fields.__local_write_time__.timestampValue);return new Ga(t.seconds,t.nanos)}class _l{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Il{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Il("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Il&&e.projectId===this.projectId&&e.database===this.database}}const El={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Sl={nullValue:"NULL_VALUE"};function kl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?vl(e)?4:Ul(e)?9007199254740991:10:Ca()}function Tl(e,t){if(e===t)return!0;const n=kl(e);if(n!==kl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return bl(e).isEqual(bl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ml(e.timestampValue),r=ml(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return yl(e.bytesValue).isEqual(yl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return gl(e.geoPointValue.latitude)===gl(t.geoPointValue.latitude)&&gl(e.geoPointValue.longitude)===gl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return gl(e.integerValue)===gl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=gl(e.doubleValue),r=gl(t.doubleValue);return n===r?kc(n)===kc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ka(e.arrayValue.values||[],t.arrayValue.values||[],Tl);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(nl(n)!==nl(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Tl(n[i],r[i])))return!1;return!0}(e,t);default:return Ca()}}function Cl(e,t){return void 0!==(e.values||[]).find((e=>Tl(e,t)))}function xl(e,t){if(e===t)return 0;const n=kl(e),r=kl(t);if(n!==r)return qa(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qa(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=gl(e.integerValue||e.doubleValue),r=gl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Al(e.timestampValue,t.timestampValue);case 4:return Al(bl(e),bl(t));case 5:return qa(e.stringValue,t.stringValue);case 6:return function(e,t){const n=yl(e),r=yl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=qa(n[i],r[i]);if(0!==e)return e}return qa(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=qa(gl(e.latitude),gl(t.latitude));return 0!==n?n:qa(gl(e.longitude),gl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=xl(n[i],r[i]);if(e)return e}return qa(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===El.mapValue&&t===El.mapValue)return 0;if(e===El.mapValue)return 1;if(t===El.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=qa(r[o],s[o]);if(0!==e)return e;const t=xl(n[r[o]],i[s[o]]);if(0!==t)return t}return qa(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ca()}}function Al(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return qa(e,t);const n=ml(e),r=ml(t),i=qa(n.seconds,r.seconds);return 0!==i?i:qa(n.nanos,r.nanos)}function Nl(e){return Pl(e)}function Pl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ml(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?yl(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Ja.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Pl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Pl(e.fields[i]));return n+"}"}(e.mapValue):Ca();var t,n}function Ol(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Dl(e){return!!e&&"integerValue"in e}function Rl(e){return!!e&&"arrayValue"in e}function Ll(e){return!!e&&"nullValue"in e}function Ml(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Fl(e){return!!e&&"mapValue"in e}function jl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return rl(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=jl(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=jl(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ul(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Vl(e){return"nullValue"in e?Sl:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ol(Il.empty(),Ja.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ca()}function zl(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ol(Il.empty(),Ja.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?El:Ca()}function Bl(e,t){const n=xl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function ql(e,t){const n=xl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Kl{constructor(e){this.value=e}static empty(){return new Kl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Fl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jl(t)}setAll(e){let t=Xa.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=jl(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Fl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Fl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){rl(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Kl(jl(this.value))}}function Wl(e){const t=[];return rl(e.fields,((e,n)=>{const r=new Xa([e]);if(Fl(n)){const e=Wl(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new hl(t)}class Gl{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Gl(e,0,Ha.min(),Ha.min(),Ha.min(),Kl.empty(),0)}static newFoundDocument(e,t,n,r){return new Gl(e,1,t,Ha.min(),n,r,0)}static newNoDocument(e,t){return new Gl(e,2,t,Ha.min(),Ha.min(),Kl.empty(),0)}static newUnknownDocument(e,t){return new Gl(e,3,t,Ha.min(),Ha.min(),Kl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ha.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ha.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Hl{constructor(e,t){this.position=e,this.inclusive=t}}function Ql(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Ja.comparator(Ja.fromName(o.referenceValue),n.key):xl(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function $l(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Tl(e.position[n],t.position[n]))return!1;return!0}class Yl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Xl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Jl{}class Zl extends Jl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new lu(e,t,n):"array-contains"===t?new fu(e,n):"in"===t?new pu(e,n):"not-in"===t?new mu(e,n):"array-contains-any"===t?new gu(e,n):new Zl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new uu(e,n):new hu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(xl(t,this.value)):null!==t&&kl(this.value)===kl(t)&&this.matchesComparison(xl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ca()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class eu extends Jl{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new eu(e,t)}matches(e){return tu(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function tu(e){return"and"===e.op}function nu(e){return"or"===e.op}function ru(e){return iu(e)&&tu(e)}function iu(e){for(const t of e.filters)if(t instanceof eu)return!1;return!0}function su(e){if(e instanceof Zl)return e.field.canonicalString()+e.op.toString()+Nl(e.value);if(ru(e))return e.filters.map((e=>su(e))).join(",");{const t=e.filters.map((e=>su(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function ou(e,t){return e instanceof Zl?function(e,t){return t instanceof Zl&&e.op===t.op&&e.field.isEqual(t.field)&&Tl(e.value,t.value)}(e,t):e instanceof eu?function(e,t){return t instanceof eu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&ou(n,t.filters[r])),!0)}(e,t):void Ca()}function au(e,t){const n=e.filters.concat(t);return eu.create(n,e.op)}function cu(e){return e instanceof Zl?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Nl(e.value))}(e):e instanceof eu?function(e){return e.op.toString()+" {"+e.getFilters().map(cu).join(" ,")+"}"}(e):"Filter"}class lu extends Zl{constructor(e,t,n){super(e,t,n),this.key=Ja.fromName(n.referenceValue)}matches(e){const t=Ja.comparator(e.key,this.key);return this.matchesComparison(t)}}class uu extends Zl{constructor(e,t){super(e,"in",t),this.keys=du("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class hu extends Zl{constructor(e,t){super(e,"not-in",t),this.keys=du("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function du(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Ja.fromName(e.referenceValue)))}class fu extends Zl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rl(t)&&Cl(t.arrayValue,this.value)}}class pu extends Zl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Cl(this.value.arrayValue,t)}}class mu extends Zl{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Cl(this.value.arrayValue,t)}}class gu extends Zl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Cl(this.value.arrayValue,e)))}}class yu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.dt=null}}function vu(e){return new yu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function wu(e){const t=Aa(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>su(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Sc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Nl(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Nl(e))).join(",")),t.dt=e}return t.dt}function bu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Xl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ou(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!$l(e.startAt,t.startAt)&&$l(e.endAt,t.endAt)}function _u(e){return Ja.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Iu(e,t){return e.filters.filter((e=>e instanceof Zl&&e.field.isEqual(t)))}function Eu(e,t,n){let r=Sl,i=!0;for(const s of Iu(e,t)){let e=Sl,t=!0;switch(s.op){case"<":case"<=":e=Vl(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Sl}Bl({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Bl({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Su(e,t,n){let r=El,i=!0;for(const s of Iu(e,t)){let e=El,t=!0;switch(s.op){case">=":case">":e=zl(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=El}ql({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];ql({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class ku{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function Tu(e,t,n,r,i,s,o,a){return new ku(e,t,n,r,i,s,o,a)}function Cu(e){return new ku(e)}function xu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Au(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Nu(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Pu(e){return null!==e.collectionGroup}function Ou(e){const t=Aa(e);if(null===t.wt){t.wt=[];const e=Nu(t),n=Au(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new Yl(e)),t.wt.push(new Yl(Xa.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Yl(Xa.keyField(),e))}}}return t.wt}function Du(e){const t=Aa(e);if(!t._t)if("F"===t.limitType)t._t=vu(t.path,t.collectionGroup,Ou(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of Ou(t)){const t="desc"===i.dir?"asc":"desc";e.push(new Yl(i.field,t))}const n=t.endAt?new Hl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hl(t.startAt.position,t.startAt.inclusive):null;t._t=vu(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function Ru(e,t){t.getFirstInequalityField(),Nu(e);const n=e.filters.concat([t]);return new ku(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Lu(e,t,n){return new ku(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Mu(e,t){return bu(Du(e),Du(t))&&e.limitType===t.limitType}function Fu(e){return"".concat(wu(Du(e)),"|lt:").concat(e.limitType)}function ju(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>cu(e))).join(", "),"]")),Sc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Nl(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Nl(e))).join(",")),"Target(".concat(t,")")}(Du(e)),"; limitType=").concat(e.limitType,")")}function Uu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ja.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ou(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Ql(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ou(e),t))&&!(e.endAt&&!function(e,t,n){const r=Ql(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ou(e),t))}(e,t)}function Vu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function zu(e){return(t,n)=>{let r=!1;for(const i of Ou(e)){const e=Bu(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Bu(e,t,n){const r=e.field.isKeyField()?Ja.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?xl(r,i):Ca()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ca()}}class qu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){rl(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return il(this.inner)}size(){return this.innerSize}}const Ku=new sl(Ja.comparator);function Wu(){return Ku}const Gu=new sl(Ja.comparator);function Hu(){let e=Gu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Qu(e){let t=Gu;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function $u(){return Xu()}function Yu(){return Xu()}function Xu(){return new qu((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Ju=new sl(Ja.comparator),Zu=new cl(Ja.comparator);function eh(){let e=Zu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const th=new cl(qa);function nh(){return th}function rh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kc(t)?"-0":t}}function ih(e){return{integerValue:""+e}}function sh(e,t){return Tc(t)?ih(t):rh(e,t)}class oh{constructor(){this._=void 0}}function ah(e,t,n){return e instanceof uh?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&vl(t)&&(t=wl(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof hh?dh(e,t):e instanceof fh?ph(e,t):function(e,t){const n=lh(e,t),r=gh(n)+gh(e.gt);return Dl(n)&&Dl(e.gt)?ih(r):rh(e.serializer,r)}(e,t)}function ch(e,t,n){return e instanceof hh?dh(e,t):e instanceof fh?ph(e,t):n}function lh(e,t){return e instanceof mh?Dl(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class uh extends oh{}class hh extends oh{constructor(e){super(),this.elements=e}}function dh(e,t){const n=yh(t);for(const r of e.elements)n.some((e=>Tl(e,r)))||n.push(r);return{arrayValue:{values:n}}}class fh extends oh{constructor(e){super(),this.elements=e}}function ph(e,t){let n=yh(t);for(const r of e.elements)n=n.filter((e=>!Tl(e,r)));return{arrayValue:{values:n}}}class mh extends oh{constructor(e,t){super(),this.serializer=e,this.gt=t}}function gh(e){return gl(e.integerValue||e.doubleValue)}function yh(e){return Rl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class vh{constructor(e,t){this.field=e,this.transform=t}}class wh{constructor(e,t){this.version=e,this.transformResults=t}}class bh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bh}static exists(e){return new bh(void 0,e)}static updateTime(e){return new bh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _h(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ih{}function Eh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Dh(e.key,bh.none()):new xh(e.key,e.data,bh.none());{const n=e.data,r=Kl.empty();let i=new cl(Xa.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Ah(e.key,r,new hl(i.toArray()),bh.none())}}function Sh(e,t,n){e instanceof xh?function(e,t,n){const r=e.value.clone(),i=Ph(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ah?function(e,t,n){if(!_h(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ph(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Nh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function kh(e,t,n,r){return e instanceof xh?function(e,t,n,r){if(!_h(e.precondition,t))return n;const i=e.value.clone(),s=Oh(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ah?function(e,t,n,r){if(!_h(e.precondition,t))return n;const i=Oh(e.fieldTransforms,r,t),s=t.data;return s.setAll(Nh(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return _h(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Th(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=lh(r.transform,e||null);null!=i&&(null===n&&(n=Kl.empty()),n.set(r.field,i))}return n||null}function Ch(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ka(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof hh&&t instanceof hh||e instanceof fh&&t instanceof fh?Ka(e.elements,t.elements,Tl):e instanceof mh&&t instanceof mh?Tl(e.gt,t.gt):e instanceof uh&&t instanceof uh}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class xh extends Ih{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ah extends Ih{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Nh(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Ph(e,t,n){const r=new Map;xa(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,ch(o,a,n[i]))}return r}function Oh(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,ah(e,s,t))}return r}class Dh extends Ih{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rh extends Ih{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Lh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Sh(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=kh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=kh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Yu();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Eh(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Ha.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),eh())}isEqual(e){return this.batchId===e.batchId&&Ka(this.mutations,e.mutations,((e,t)=>Ch(e,t)))&&Ka(this.baseMutations,e.baseMutations,((e,t)=>Ch(e,t)))}}class Mh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){xa(e.mutations.length===n.length);let r=Ju;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Mh(e,t,n,r)}}class Fh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class jh{constructor(e,t){this.count=e,this.unchangedNames=t}}var Uh,Vh;function zh(e){switch(e){default:return Ca();case Na.CANCELLED:case Na.UNKNOWN:case Na.DEADLINE_EXCEEDED:case Na.RESOURCE_EXHAUSTED:case Na.INTERNAL:case Na.UNAVAILABLE:case Na.UNAUTHENTICATED:return!1;case Na.INVALID_ARGUMENT:case Na.NOT_FOUND:case Na.ALREADY_EXISTS:case Na.PERMISSION_DENIED:case Na.FAILED_PRECONDITION:case Na.ABORTED:case Na.OUT_OF_RANGE:case Na.UNIMPLEMENTED:case Na.DATA_LOSS:return!0}}function Bh(e){if(void 0===e)return Sa("GRPC error has no .code"),Na.UNKNOWN;switch(e){case Uh.OK:return Na.OK;case Uh.CANCELLED:return Na.CANCELLED;case Uh.UNKNOWN:return Na.UNKNOWN;case Uh.DEADLINE_EXCEEDED:return Na.DEADLINE_EXCEEDED;case Uh.RESOURCE_EXHAUSTED:return Na.RESOURCE_EXHAUSTED;case Uh.INTERNAL:return Na.INTERNAL;case Uh.UNAVAILABLE:return Na.UNAVAILABLE;case Uh.UNAUTHENTICATED:return Na.UNAUTHENTICATED;case Uh.INVALID_ARGUMENT:return Na.INVALID_ARGUMENT;case Uh.NOT_FOUND:return Na.NOT_FOUND;case Uh.ALREADY_EXISTS:return Na.ALREADY_EXISTS;case Uh.PERMISSION_DENIED:return Na.PERMISSION_DENIED;case Uh.FAILED_PRECONDITION:return Na.FAILED_PRECONDITION;case Uh.ABORTED:return Na.ABORTED;case Uh.OUT_OF_RANGE:return Na.OUT_OF_RANGE;case Uh.UNIMPLEMENTED:return Na.UNIMPLEMENTED;case Uh.DATA_LOSS:return Na.DATA_LOSS;default:return Ca()}}(Vh=Uh||(Uh={}))[Vh.OK=0]="OK",Vh[Vh.CANCELLED=1]="CANCELLED",Vh[Vh.UNKNOWN=2]="UNKNOWN",Vh[Vh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vh[Vh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vh[Vh.NOT_FOUND=5]="NOT_FOUND",Vh[Vh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vh[Vh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vh[Vh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vh[Vh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vh[Vh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vh[Vh.ABORTED=10]="ABORTED",Vh[Vh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vh[Vh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vh[Vh.INTERNAL=13]="INTERNAL",Vh[Vh.UNAVAILABLE=14]="UNAVAILABLE",Vh[Vh.DATA_LOSS=15]="DATA_LOSS";class qh{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Kh}static getOrCreateInstance(){return null===Kh&&(Kh=new qh),Kh}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let Kh=null;function Wh(){return new TextEncoder}const Gh=new ya([4294967295,4294967295],0);function Hh(e){const t=Wh().encode(e),n=new ga;return n.update(t),new Uint8Array(n.digest())}function Qh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ya([n,r],0),new ya([i,s],0)]}class $h{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Yh("Invalid padding: ".concat(t));if(n<0)throw new Yh("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Yh("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Yh("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=ya.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(ya.fromNumber(n)));return 1===r.compare(Gh)&&(r=new ya([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Hh(e),[n,r]=Qh(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new $h(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.It)return;const t=Hh(e),[n,r]=Qh(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Yh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Xh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Jh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Xh(Ha.min(),r,new sl(qa),Wu(),eh())}}class Jh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Jh(n,t,eh(),eh(),eh())}}class Zh{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class ed{constructor(e,t){this.targetId=e,this.Vt=t}}class td{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class nd{constructor(){this.St=0,this.Dt=sd(),this.Ct=fl.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=eh(),t=eh(),n=eh();return this.Dt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ca()}})),new Jh(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=sd()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class rd{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Wu(),this.zt=id(),this.Wt=new sl(qa)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Ca()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const s=i.target;if(_u(s))if(0===r){const e=new Ja(s.path);this.Yt(n,e,Gl.newNoDocument(e,Ha.min()))}else xa(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=qh.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,s,o,a,c;const l={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(l.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(s=null===(i=null==u?void 0:u.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(c=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==c?c:0}),l}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,c;try{a=yl(i).toUint8Array()}catch(e){if(e instanceof dl)return ka("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{c=new $h(a,s,o)}catch(e){return ka(e instanceof Yh?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===c.It?1:r!==t-this.oe(e.targetId,c)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Gt.ue(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());t.vt(s)||(this.Yt(e,n,null),r++)})),r}ce(e){const t=new Map;this.Qt.forEach(((n,r)=>{const i=this.se(r);if(i){if(n.current&&_u(i.target)){const t=new Ja(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,Gl.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}}));let n=eh();this.zt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const r=new Xh(e,t,this.Wt,this.jt,n);return this.jt=Wu(),this.zt=id(),this.Wt=new sl(qa),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new nd,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new cl(qa),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ea("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new nd),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function id(){return new sl(Ja.comparator)}function sd(){return new sl(Ja.comparator)}const od={asc:"ASCENDING",desc:"DESCENDING"},ad={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cd={and:"AND",or:"OR"};class ld{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ud(e,t){return e.useProto3Json||Sc(t)?t:{value:t}}function hd(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function dd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function fd(e,t){return hd(e,t.toTimestamp())}function pd(e){return xa(!!e),Ha.fromTimestamp(function(e){const t=ml(e);return new Ga(t.seconds,t.nanos)}(e))}function md(e,t){return function(e){return new $a(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function gd(e){const t=$a.fromString(e);return xa(jd(t)),t}function yd(e,t){return md(e.databaseId,t.path)}function vd(e,t){const n=gd(t);if(n.get(1)!==e.databaseId.projectId)throw new Pa(Na.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Pa(Na.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ja(Id(n))}function wd(e,t){return md(e.databaseId,t)}function bd(e){const t=gd(e);return 4===t.length?$a.emptyPath():Id(t)}function _d(e){return new $a(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Id(e){return xa(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ed(e,t,n){return{name:yd(e,t),fields:n.value.mapValue.fields}}function Sd(e,t,n){const r=vd(e,t.name),i=pd(t.updateTime),s=t.createTime?pd(t.createTime):Ha.min(),o=new Kl({mapValue:{fields:t.fields}}),a=Gl.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function kd(e,t){let n;if(t instanceof xh)n={update:Ed(e,t.key,t.value)};else if(t instanceof Dh)n={delete:yd(e,t.key)};else if(t instanceof Ah)n={update:Ed(e,t.key,t.data),updateMask:Fd(t.fieldMask)};else{if(!(t instanceof Rh))return Ca();n={verify:yd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof uh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof hh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof fh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof mh)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Ca()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:fd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ca()}(e,t.precondition)),n}function Td(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?bh.updateTime(pd(e.updateTime)):void 0!==e.exists?bh.exists(e.exists):bh.none()}(t.currentDocument):bh.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)xa("REQUEST_TIME"===t.setToServerValue),n=new uh;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new hh(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new fh(e)}else"increment"in t?n=new mh(e,t.increment):Ca();const r=Xa.fromServerFormat(t.fieldPath);return new vh(r,n)}(e,t))):[];if(t.update){t.update.name;const i=vd(e,t.update.name),s=new Kl({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new hl(t.map((e=>Xa.fromServerFormat(e))))}(t.updateMask);return new Ah(i,s,e,n,r)}return new xh(i,s,n,r)}if(t.delete){const r=vd(e,t.delete);return new Dh(r,n)}if(t.verify){const r=vd(e,t.verify);return new Rh(r,n)}return Ca()}function Cd(e,t){return{documents:[wd(e,t.path)]}}function xd(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=wd(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=wd(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return Md(eu.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Rd(e.field),direction:Pd(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=ud(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Ad(e){let t=bd(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){xa(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Nd(e);return t instanceof eu&&ru(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new Yl(Ld(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Sc(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new Hl(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new Hl(n,t)}(n.endAt)),Tu(t,i,o,s,a,"F",c,l)}function Nd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ld(e.unaryFilter.field);return Zl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ld(e.unaryFilter.field);return Zl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ld(e.unaryFilter.field);return Zl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ld(e.unaryFilter.field);return Zl.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ca()}}(e):void 0!==e.fieldFilter?function(e){return Zl.create(Ld(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ca()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return eu.create(e.compositeFilter.filters.map((e=>Nd(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ca()}}(e.compositeFilter.op))}(e):Ca()}function Pd(e){return od[e]}function Od(e){return ad[e]}function Dd(e){return cd[e]}function Rd(e){return{fieldPath:e.canonicalString()}}function Ld(e){return Xa.fromServerFormat(e.fieldPath)}function Md(e){return e instanceof Zl?function(e){if("=="===e.op){if(Ml(e.value))return{unaryFilter:{field:Rd(e.field),op:"IS_NAN"}};if(Ll(e.value))return{unaryFilter:{field:Rd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ml(e.value))return{unaryFilter:{field:Rd(e.field),op:"IS_NOT_NAN"}};if(Ll(e.value))return{unaryFilter:{field:Rd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rd(e.field),op:Od(e.op),value:e.value}}}(e):e instanceof eu?function(e){const t=e.getFilters().map((e=>Md(e)));return 1===t.length?t[0]:{compositeFilter:{op:Dd(e.op),filters:t}}}(e):Ca()}function Fd(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function jd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ud{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ha.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ha.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:fl.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Ud(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ud(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ud(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ud(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Vd{constructor(e){this.fe=e}}function zd(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Bd(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:yd(e,t.key),fields:t.data.value.mapValue.fields,updateTime:hd(e,t.version.toTimestamp()),createTime:hd(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:qd(t.version)};else{if(!t.isUnknownDocument())return Ca();r.unknownDocument={path:n.path.toArray(),version:qd(t.version)}}return r}function Bd(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function qd(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Kd(e){const t=new Ga(e.seconds,e.nanoseconds);return Ha.fromTimestamp(t)}function Wd(e,t){const n=(t.baseMutations||[]).map((t=>Td(e.fe,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Td(e.fe,t))),i=Ga.fromMillis(t.localWriteTimeMs);return new Lh(t.batchId,i,n,r)}function Gd(e){const t=Kd(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Kd(e.lastLimboFreeSnapshotVersion):Ha.min();let r;var i;return void 0!==e.query.documents?(xa(1===(i=e.query).documents.length),r=Du(Cu(bd(i.documents[0])))):r=function(e){return Du(Ad(e))}(e.query),new Ud(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,fl.fromBase64String(e.resumeToken))}function Hd(e,t){const n=qd(t.snapshotVersion),r=qd(t.lastLimboFreeSnapshotVersion);let i;i=_u(t.target)?Cd(e.fe,t.target):xd(e.fe,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:wu(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Qd(e){const t=Ad({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Lu(t,t.limit,"L"):t}function $d(e,t){return new Fh(t.largestBatchId,Td(e.fe,t.overlayMutation))}function Yd(e,t){const n=t.path.lastSegment();return[e,Cc(t.path.popLast()),n]}function Xd(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:qd(r.readTime),documentKey:Cc(r.documentKey.path),largestBatchId:r.largestBatchId}}class Jd{getBundleMetadata(e,t){return Zd(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:Kd(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return Zd(e).put({bundleId:(n=t).id,createTime:qd(pd(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return ef(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:Qd(t.bundledQuery),readTime:Kd(t.readTime)};var t}))}saveNamedQuery(e,t){return ef(e).put(function(e){return{name:e.name,readTime:qd(pd(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Zd(e){return tl(e,"bundles")}function ef(e){return tl(e,"namedQueries")}class tf{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){const n=t.uid||"";return new tf(e,n)}getOverlay(e,t){return nf(e).get(Yd(this.userId,t)).next((e=>e?$d(this.serializer,e):null))}getOverlays(e,t){const n=$u();return hc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Fh(t,i);r.push(this.we(e,s))})),hc.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Cc(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(nf(e).J("collectionPathOverlayIndex",r))})),hc.waitFor(i)}getOverlaysForCollection(e,t,n){const r=$u(),i=Cc(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return nf(e).j("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=$d(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=$u();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return nf(e).X({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=$d(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}we(e,t){return nf(e).put(function(e,t,n){const[r,i,s]=Yd(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:kd(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}function nf(e){return tl(e,"documentOverlays")}class rf{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(gl(e.integerValue));else if("doubleValue"in e){const n=gl(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),kc(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(yl(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?Ul(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Ca()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),Ja.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function sf(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function of(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=sf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}rf.Ve=new rf;class af{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.De(n.value),n=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ne(n.value),n=t.next();this.ke()}Me(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.De(e);else if(e<2048)this.De(960|e>>>6),this.De(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.De(480|e>>>12),this.De(128|63&e>>>6),this.De(128|63&e);else{const e=t.codePointAt(0);this.De(240|e>>>18),this.De(128|63&e>>>12),this.De(128|63&e>>>6),this.De(128|63&e)}}this.Ce()}$e(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ne(e);else if(e<2048)this.Ne(960|e>>>6),this.Ne(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e);else{const e=t.codePointAt(0);this.Ne(240|e>>>18),this.Ne(128|63&e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e)}}this.ke()}Oe(e){const t=this.Fe(e),n=of(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Le(e){const t=this.Fe(e),n=of(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class cf{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class lf{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class uf{constructor(){this.je=new af,this.ze=new cf(this.je),this.We=new lf(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class hf{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new hf(this.indexId,this.documentKey,this.arrayValue,n)}}function df(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=ff(e.arrayValue,t.arrayValue),0!==n?n:(n=ff(e.directionalValue,t.directionalValue),0!==n?n:Ja.comparator(e.documentKey,t.documentKey)))}function ff(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class pf{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const e=t;e.isInequality()?this.Ze=e:this.Xe.push(e)}}tn(e){xa(e.collectionGroup===this.collectionId);const t=ec(e);if(void 0!==t&&!this.en(t))return!1;const n=tc(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const e=n[i];if(!this.nn(this.Ze,e)||!this.sn(this.Ye[s++],e))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Ye.length||!this.sn(this.Ye[s++],e))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function mf(e){var t,n;if(xa(e instanceof Zl||e instanceof eu),e instanceof Zl){if(e instanceof pu){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Zl.create(e.field,"==",t))))||[];return eu.create(r,"or")}return e}const r=e.filters.map((e=>mf(e)));return eu.create(r,e.op)}function gf(e){if(0===e.getFilters().length)return[];const t=bf(mf(e));return xa(wf(t)),yf(t)||vf(t)?[t]:t.getFilters()}function yf(e){return e instanceof Zl}function vf(e){return e instanceof eu&&ru(e)}function wf(e){return yf(e)||vf(e)||function(e){if(e instanceof eu&&nu(e)){for(const t of e.getFilters())if(!yf(t)&&!vf(t))return!1;return!0}return!1}(e)}function bf(e){if(xa(e instanceof Zl||e instanceof eu),e instanceof Zl)return e;if(1===e.filters.length)return bf(e.filters[0]);const t=e.filters.map((e=>bf(e)));let n=eu.create(t,e.op);return n=Ef(n),wf(n)?n:(xa(n instanceof eu),xa(tu(n)),xa(n.filters.length>1),n.filters.reduce(((e,t)=>_f(e,t))))}function _f(e,t){let n;return xa(e instanceof Zl||e instanceof eu),xa(t instanceof Zl||t instanceof eu),n=e instanceof Zl?t instanceof Zl?function(e,t){return eu.create([e,t],"and")}(e,t):If(e,t):t instanceof Zl?If(t,e):function(e,t){if(xa(e.filters.length>0&&t.filters.length>0),tu(e)&&tu(t))return au(e,t.getFilters());const n=nu(e)?e:t,r=nu(e)?t:e,i=n.filters.map((e=>_f(e,r)));return eu.create(i,"or")}(e,t),Ef(n)}function If(e,t){if(tu(t))return au(t,e.getFilters());{const n=t.filters.map((t=>_f(e,t)));return eu.create(n,"or")}}function Ef(e){if(xa(e instanceof Zl||e instanceof eu),e instanceof Zl)return e;const t=e.getFilters();if(1===t.length)return Ef(t[0]);if(iu(e))return e;const n=t.map((e=>Ef(e))),r=[];return n.forEach((t=>{t instanceof Zl?r.push(t):t instanceof eu&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:eu.create(r,e.op)}class Sf{constructor(){this.rn=new kf}addToCollectionParentIndex(e,t){return this.rn.add(t),hc.resolve()}getCollectionParents(e,t){return hc.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return hc.resolve()}deleteFieldIndex(e,t){return hc.resolve()}getDocumentsMatchingTarget(e,t){return hc.resolve(null)}getIndexType(e,t){return hc.resolve(0)}getFieldIndexes(e,t){return hc.resolve([])}getNextCollectionGroupToUpdate(e){return hc.resolve(null)}getMinOffset(e,t){return hc.resolve(oc.min())}getMinOffsetFromCollectionGroup(e,t){return hc.resolve(oc.min())}updateCollectionGroup(e,t,n){return hc.resolve()}updateIndexEntries(e,t){return hc.resolve()}}class kf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new cl($a.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new cl($a.comparator)).toArray()}}const Tf=new Uint8Array(0);class Cf{constructor(e,t){this.user=e,this.databaseId=t,this.on=new kf,this.un=new qu((e=>wu(e)),((e,t)=>bu(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.on.add(t)}));const i={collectionId:n,parent:Cc(r)};return xf(e).put(i)}return hc.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Wa(t),""],!1,!0);return xf(e).j(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Nc(r.parent))}return n}))}addFieldIndex(e,t){const n=Nf(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Pf(e);return i.next((e=>{n.put(Xd(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Nf(e),r=Pf(e),i=Af(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}getDocumentsMatchingTarget(e,t){const n=Af(e);let r=!0;const i=new Map;return hc.forEach(this.cn(t),(t=>this.an(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=eh();const r=[];return hc.forEach(i,((i,s)=>{var o;Ea("IndexedDbIndexManager","Using index ".concat((o=i,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(",")))," to execute ").concat(wu(t)));const a=function(e,t){const n=ec(t);if(void 0===n)return null;for(const r of Iu(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),c=function(e,t){const n=new Map;for(const r of tc(t))for(const t of Iu(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of tc(t)){const t=0===i.kind?Eu(e,i.fieldPath,e.startAt):Su(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Hl(n,r)}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of tc(t)){const t=0===i.kind?Su(e,i.fieldPath,e.endAt):Eu(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Hl(n,r)}(s,i),h=this.hn(i,s,l),d=this.hn(i,s,u),f=this.ln(i,s,c),p=this.fn(i.indexId,a,h,l.inclusive,d,u.inclusive,f);return hc.forEach(p,(i=>n.H(i,t.limit).next((t=>{t.forEach((t=>{const n=Ja.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return hc.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:gf(eu.create(e.filters,"and")).map((t=>vu(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}fn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.dn(t[u/c]):Tf,h=this.wn(e,a,n[u%c],r),d=this._n(e,a,i[u%c],s),f=o.map((t=>this.wn(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}wn(e,t,n,r){const i=new hf(e,Ja.empty(),t,n);return r?i:i.Je()}_n(e,t,n,r){const i=new hf(e,Ja.empty(),t,n);return r?i.Je():i}an(e,t){const n=new pf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return hc.forEach(r,(t=>this.an(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new cl(Xa.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}mn(e,t){const n=new uf;for(const r of tc(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.He(r.kind);rf.Ve._e(e,i)}return n.Qe()}dn(e){const t=new uf;return rf.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const n=new uf;return rf.Ve._e(Ol(this.databaseId,t),n.He(function(e){const t=tc(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}ln(e,t,n){if(null===n)return[];let r=[];r.push(new uf);let i=0;for(const s of tc(e)){const e=n[i++];for(const n of r)if(this.yn(t,s.fieldPath)&&Rl(e))r=this.pn(r,s,e);else{const t=n.He(s.kind);rf.Ve._e(e,t)}}return this.In(r)}hn(e,t,n){return this.ln(e,t,n.position)}In(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Qe();return t}pn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new uf;n.seed(e.Qe()),rf.Ve._e(s,n.He(t.kind)),i.push(n)}return i}yn(e,t){return!!e.filters.find((e=>e instanceof Zl&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Nf(e),r=Pf(e);return(t?n.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.j()).next((e=>{const t=[];return hc.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new rc(t.sequenceNumber,new oc(Kd(t.readTime),new Ja(Nc(t.documentKey)),t.largestBatchId)):rc.empty(),r=e.fields.map((e=>{let[t,n]=e;return new nc(Xa.fromServerFormat(t),n)}));return new Za(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:qa(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Nf(e),i=Pf(e);return this.Tn(e).next((e=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>hc.forEach(t,(t=>i.put(Xd(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return hc.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?hc.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),hc.forEach(i,(n=>this.En(e,t,n).next((t=>{const i=this.An(r,n);return t.isEqual(i)?hc.resolve():this.vn(e,r,n,t,i)})))))))}))}Rn(e,t,n,r){return Af(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,n,r){return Af(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}En(e,t,n){const r=Af(e);let i=new cl(df);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},((e,r)=>{i=i.add(new hf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}An(e,t){let n=new cl(df);const r=this.mn(t,e);if(null==r)return n;const i=ec(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Rl(s))for(const i of s.arrayValue.values||[])n=n.add(new hf(t.indexId,e.key,this.dn(i),r))}else n=n.add(new hf(t.indexId,e.key,Tf,r));return n}vn(e,t,n,r,i){Ea("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=ul(s),c=ul(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=ul(o)):t?(i(a),a=ul(s)):(a=ul(s),c=ul(o))}}(r,i,df,(r=>{s.push(this.Rn(e,t,n,r))}),(r=>{s.push(this.Pn(e,t,n,r))})),hc.waitFor(s)}Tn(e){let t=1;return Pf(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>df(e,t))).filter(((e,t,n)=>!t||0!==df(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=df(s,e),i=df(s,t);if(0===n)r[0]=e.Je();else if(n>0&&i<0)r.push(s),r.push(s.Je());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Tf,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Tf,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return df(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Of)}getMinOffset(e,t){return hc.mapArray(this.cn(t),(t=>this.an(e,t).next((e=>e||Ca())))).next(Of)}}function xf(e){return tl(e,"collectionParents")}function Af(e){return tl(e,"indexEntries")}function Nf(e){return tl(e,"indexConfiguration")}function Pf(e){return tl(e,"indexState")}function Of(e){xa(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;ac(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new oc(t.readTime,t.documentKey,n)}const Df={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Rf{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Rf(e,Rf.DEFAULT_COLLECTION_PERCENTILE,Rf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Lf(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.X({range:o},((e,t,n)=>(a++,n.delete())));s.push(c.next((()=>{xa(1===a)})));const l=[];for(const u of n.mutations){const e=Dc(t,u.key.path,n.batchId);s.push(i.delete(e)),l.push(u.key)}return hc.waitFor(s).next((()=>l))}function Mf(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ca();t=e.noDocument}return JSON.stringify(t).length}Rf.DEFAULT_COLLECTION_PERCENTILE=10,Rf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rf.DEFAULT=new Rf(41943040,Rf.DEFAULT_COLLECTION_PERCENTILE,Rf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rf.DISABLED=new Rf(-1,0,0);class Ff{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Vn={}}static de(e,t,n,r){xa(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Ff(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Uf(e).X({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Vf(e),s=Uf(e);return s.add({}).next((o=>{xa("number"==typeof o);const a=new Lh(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>kd(e.fe,t))),i=n.mutations.map((t=>kd(e.fe,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let u=new cl(((e,t)=>qa(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Dc(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(s.put(c)),l.push(i.put(t,Rc))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Vn[o]=a.keys()})),hc.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return Uf(e).get(t).next((e=>e?(xa(e.userId===this.userId),Wd(this.serializer,e)):null))}Sn(e,t){return this.Vn[t]?hc.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Vn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Uf(e).X({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(xa(t.batchId>=n),i=Wd(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Uf(e).X({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Uf(e).j("userMutationsIndex",t).next((e=>e.map((e=>Wd(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Oc(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Vf(e).X({range:r},((n,r,s)=>{const[o,a,c]=n,l=Nc(a);if(o===this.userId&&t.path.isEqual(l))return Uf(e).get(c).next((e=>{if(!e)throw Ca();xa(e.userId===this.userId),i.push(Wd(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new cl(qa);const r=[];return t.forEach((t=>{const i=Oc(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Vf(e).X({range:s},((e,r,i)=>{const[s,o,a]=e,c=Nc(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),hc.waitFor(r).next((()=>this.Dn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Oc(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new cl(qa);return Vf(e).X({range:s},((e,t,i)=>{const[s,a,c]=e,l=Nc(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()})).next((()=>this.Dn(e,o)))}Dn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Uf(e).get(t).next((e=>{if(null===e)throw Ca();xa(e.userId===this.userId),n.push(Wd(this.serializer,e))})))})),hc.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Lf(e.ht,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Cn(t.batchId)})),hc.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return hc.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return Vf(e).X({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Nc(e[1]);r.push(t)}else n.done()})).next((()=>{xa(0===r.length)}))}))}containsKey(e,t){return jf(e,this.userId,t)}xn(e){return zf(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function jf(e,t,n){const r=Oc(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Vf(e).X({range:s,Y:!0},((e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Uf(e){return tl(e,"mutations")}function Vf(e){return tl(e,"documentMutations")}function zf(e){return tl(e,"mutationQueues")}class Bf{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Bf(0)}static Mn(){return new Bf(-1)}}class qf{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next((t=>{const n=new Bf(t.highestTargetId);return t.highestTargetId=n.next(),this.On(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.$n(e).next((e=>Ha.fromTimestamp(new Ga(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.$n(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.$n(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r))))}addTargetData(e,t){return this.Fn(e,t).next((()=>this.$n(e).next((n=>(n.targetCount+=1,this.Bn(t,n),this.On(e,n))))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Kf(e).delete(t.targetId))).next((()=>this.$n(e))).next((t=>(xa(t.targetCount>0),t.targetCount-=1,this.On(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Kf(e).X(((s,o)=>{const a=Gd(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>hc.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Kf(e).X(((e,n)=>{const r=Gd(n);t(r)}))}$n(e){return Wf(e).get("targetGlobalKey").next((e=>(xa(null!==e),e)))}On(e,t){return Wf(e).put("targetGlobalKey",t)}Fn(e,t){return Kf(e).put(Hd(this.serializer,t))}Bn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.$n(e).next((e=>e.targetCount))}getTargetData(e,t){const n=wu(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Kf(e).X({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Gd(n);bu(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Gf(e);return t.forEach((t=>{const s=Cc(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),hc.waitFor(r)}removeMatchingKeys(e,t,n){const r=Gf(e);return hc.forEach(t,(t=>{const i=Cc(t.path);return hc.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Gf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Gf(e);let i=eh();return r.X({range:n,Y:!0},((e,t,n)=>{const r=Nc(e[1]),s=new Ja(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Cc(t.path),r=IDBKeyRange.bound([n],[Wa(n)],!1,!0);let i=0;return Gf(e).X({index:"documentTargetsIndex",Y:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}le(e,t){return Kf(e).get(t).next((e=>e?Gd(e):null))}}function Kf(e){return tl(e,"targets")}function Wf(e){return tl(e,"targetGlobal")}function Gf(e){return tl(e,"targetDocuments")}function Hf(e,t){let[n,r]=e,[i,s]=t;const o=qa(n,i);return 0===o?qa(r,s):o}class Qf{constructor(e){this.Ln=e,this.buffer=new cl(Hf),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Hf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $f{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){Ea("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){gc(e)?Ea("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await uc(e)}await this.Qn(3e5)}))}}class Yf{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return hc.resolve(Ec.ct);const n=new Qf(t);return this.jn.forEachTarget(e,(e=>n.Kn(e.sequenceNumber))).next((()=>this.jn.Wn(e,(e=>n.Kn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ea("LruGarbageCollector","Garbage collection skipped; disabled"),hc.resolve(Df)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ea("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Df):this.Hn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let n,r,i,s,o,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Ea("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Ia()<=Vt.DEBUG&&Ea("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),hc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Xf(e,t){return new Yf(e,t)}class Jf{constructor(e,t){this.db=e,this.garbageCollector=Xf(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Jn(e){let t=0;return this.Wn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,((e,n)=>t(n)))}addReference(e,t,n){return Zf(e,n)}removeReference(e,t,n){return Zf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Zf(e,t)}Xn(e,t){return function(e,t){let n=!1;return zf(e).Z((r=>jf(e,r,t).next((e=>(e&&(n=!0),hc.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Yn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Ha.min()),Gf(e).delete([0,Cc(s.path)]))))}));r.push(t)}})).next((()=>hc.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Zf(e,t)}Yn(e,t){const n=Gf(e);let r,i=Ec.ct;return n.X({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:c}=n;0===s?(i!==Ec.ct&&t(new Ja(Nc(r)),i),i=c,r=a):i=Ec.ct})).next((()=>{i!==Ec.ct&&t(new Ja(Nc(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zf(e,t){return Gf(e).put(function(e,t){return{targetId:0,path:Cc(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class ep{constructor(){this.changes=new qu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?hc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tp{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return sp(e).put(n)}removeEntry(e,t,n){return sp(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Bd(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Zn(e,n))))}getEntry(e,t){let n=Gl.newInvalidDocument(t);return sp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(op(t))},((e,r)=>{n=this.ts(t,r)})).next((()=>n))}es(e,t){let n={size:0,document:Gl.newInvalidDocument(t)};return sp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(op(t))},((e,r)=>{n={document:this.ts(t,r),size:Mf(r)}})).next((()=>n))}getEntries(e,t){let n=Wu();return this.ns(e,t,((e,t)=>{const r=this.ts(e,t);n=n.insert(e,r)})).next((()=>n))}ss(e,t){let n=Wu(),r=new sl(Ja.comparator);return this.ns(e,t,((e,t)=>{const i=this.ts(e,t);n=n.insert(e,i),r=r.insert(e,Mf(t))})).next((()=>({documents:n,rs:r})))}ns(e,t,n){if(t.isEmpty())return hc.resolve();let r=new cl(cp);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(op(r.first()),op(r.last())),s=r.getIterator();let o=s.getNext();return sp(e).X({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Ja.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&cp(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.G(op(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r){const i=t.path,s=[i.popLast().toArray(),i.lastSegment(),Bd(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sp(e).j(IDBKeyRange.bound(s,o,!0)).next((e=>{let n=Wu();for(const i of e){const e=this.ts(Ja.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Uu(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Wu();const s=ap(t,n),o=ap(t,oc.max());return sp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.ts(Ja.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new rp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return ip(e).get("remoteDocumentGlobalKey").next((e=>(xa(!!e),e)))}Zn(e,t){return ip(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Sd(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Ja.fromSegments(t.noDocument.path),r=Kd(t.noDocument.readTime);n=Gl.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ca();{const e=Ja.fromSegments(t.unknownDocument.path),r=Kd(t.unknownDocument.version);n=Gl.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Ga(e[0],e[1]);return Ha.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Ha.min()))return e}return Gl.newInvalidDocument(e)}}function np(e){return new tp(e)}class rp extends ep{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new qu((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new cl(((e,t)=>qa(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.us.get(i);if(t.push(this.os.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=zd(this.os.serializer,s);r=r.add(i.path.popLast());const c=Mf(a);n+=c-o.size,t.push(this.os.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=zd(this.os.serializer,s.convertToNoDocument(Ha.min()));t.push(this.os.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.os.updateMetadata(e,n)),hc.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next((e=>(this.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.os.ss(e,t).next((e=>{let{documents:t,rs:n}=e;return n.forEach(((e,n)=>{this.us.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function ip(e){return tl(e,"remoteDocumentGlobal")}function sp(e){return tl(e,"remoteDocumentsV14")}function op(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function ap(e,t){const n=t.documentKey.path.toArray();return[e,Bd(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function cp(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=qa(n[s],r[s]),i)return i;return i=qa(n.length,r.length),i||(i=qa(n[n.length-2],r[r.length-2]),i||qa(n[n.length-1],r[r.length-1]))}class lp{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class up{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&kh(n.mutation,e,hl.empty(),Ga.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,eh()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eh();const r=$u();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Hu();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=$u();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,eh())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Wu();const s=Xu(),o=Xu();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Ah)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),kh(o.mutation,t,o.mutation.getFieldMask(),Ga.now())):s.set(t.key,hl.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new lp(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Xu();let r=new sl(((e,t)=>e-t)),i=eh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||hl.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||eh()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=Yu();c.forEach((e=>{if(!i.has(e)){const r=Eh(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return hc.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return Ja.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Pu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):hc.resolve($u());let o=-1,a=i;return s.next((t=>hc.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?hc.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,eh()))).next((e=>({batchId:o,changes:Qu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ja(t)).next((e=>{let t=Hu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=Hu();return this.indexManager.getCollectionParents(e,r).next((s=>hc.forEach(s,(s=>{const o=function(e,t){return new ku(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Gl.newInvalidDocument(r)))}));let n=Hu();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&kh(s.mutation,i,hl.empty(),Ga.now()),Uu(t,i)&&(n=n.insert(e,i))})),n}))}}class hp{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return hc.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:pd(n.createTime)}),hc.resolve()}getNamedQuery(e,t){return hc.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Qd(e.bundledQuery),readTime:pd(e.readTime)}}(t)),hc.resolve()}}class dp{constructor(){this.overlays=new sl(Ja.comparator),this.ls=new Map}getOverlay(e,t){return hc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=$u();return hc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.we(e,t,r)})),hc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),hc.resolve()}getOverlaysForCollection(e,t,n){const r=$u(),i=t.length+1,s=new Ja(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return hc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new sl(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=$u(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=$u(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return hc.resolve(o)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Fh(t,n));let i=this.ls.get(t);void 0===i&&(i=eh(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class fp{constructor(){this.fs=new cl(pp.ds),this.ws=new cl(pp._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new pp(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new pp(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new Ja(new $a([])),n=new pp(t,e),r=new pp(t,e+1),i=[];return this.ws.forEachInRange([n,r],(e=>{this.ys(e),i.push(e.key)})),i}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ja(new $a([])),n=new pp(t,e),r=new pp(t,e+1);let i=eh();return this.ws.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new pp(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class pp{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ja.comparator(e.key,t.key)||qa(e.As,t.As)}static _s(e,t){return qa(e.As,t.As)||Ja.comparator(e.key,t.key)}}class mp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new cl(pp.ds)}checkEmpty(e){return hc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Lh(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Rs=this.Rs.add(new pp(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return hc.resolve(s)}lookupMutationBatch(e,t){return hc.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return hc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return hc.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return hc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new pp(t,0),r=new pp(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],(e=>{const t=this.Ps(e.As);i.push(t)})),hc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new cl(qa);return t.forEach((e=>{const t=new pp(e,0),r=new pp(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],(e=>{n=n.add(e.As)}))})),hc.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ja.isDocumentKey(i)||(i=i.child(""));const s=new pp(new Ja(i),0);let o=new cl(qa);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),s),hc.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){xa(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return hc.forEach(t.mutations,(r=>{const i=new pp(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new pp(t,0),r=this.Rs.firstAfterOrEqual(n);return hc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,hc.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class gp{constructor(e){this.Ds=e,this.docs=new sl(Ja.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return hc.resolve(n?n.document.mutableCopy():Gl.newInvalidDocument(t))}getEntries(e,t){let n=Wu();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Gl.newInvalidDocument(e))})),hc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Wu();const s=t.path,o=new Ja(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ac(sc(o),n)<=0||(r.has(o.key)||Uu(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return hc.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ca()}Cs(e,t){return hc.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new yp(this)}getSize(e){return hc.resolve(this.size)}}class yp extends ep{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)})),hc.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class vp{constructor(e){this.persistence=e,this.xs=new qu((e=>wu(e)),bu),this.lastRemoteSnapshotVersion=Ha.min(),this.highestTargetId=0,this.Ns=0,this.ks=new fp,this.targetCount=0,this.Ms=Bf.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),hc.resolve()}getLastRemoteSnapshotVersion(e){return hc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return hc.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),hc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),hc.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Bf(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,hc.resolve()}updateTargetData(e,t){return this.Fn(t),hc.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,hc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),hc.waitFor(i).next((()=>r))}getTargetCount(e){return hc.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return hc.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),hc.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),hc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),hc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return hc.resolve(n)}containsKey(e,t){return hc.resolve(this.ks.containsKey(t))}}class wp{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ec(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new vp(this),this.indexManager=new Sf,this.remoteDocumentCache=function(e){return new gp(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new Vd(t),this.qs=new hp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new mp(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){Ea("MemoryPersistence","Starting transaction:",e);const r=new bp(this.Os.next());return this.referenceDelegate.Us(),n(r).next((e=>this.referenceDelegate.Ks(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gs(e,t){return hc.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class bp extends lc{constructor(e){super(),this.currentSequenceNumber=e}}class _p{constructor(e){this.persistence=e,this.Qs=new fp,this.js=null}static zs(e){return new _p(e)}get Ws(){if(this.js)return this.js;throw Ca()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),hc.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),hc.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),hc.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return hc.forEach(this.Ws,(n=>{const r=Ja.fromPath(n);return this.Hs(e,r).next((e=>{e||t.removeEntry(r,Ha.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return hc.or([()=>hc.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Ip{constructor(e){this.serializer=e}O(e,t,n,r){const i=new dc("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pc,{unique:!0}),e.createObjectStore("documentMutations")}(e),Ep(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=hc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Ep(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ha.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").j().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pc,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return hc.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Ys(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(i))))),n<7&&r>=7&&(s=s.next((()=>this.Zs(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ei(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Gc});t.createIndex("collectionPathOverlayIndex",Hc,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Qc,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Lc});t.createIndex("documentKeyIndex",Mc),t.createIndex("collectionGroupIndex",Fc)}(e))).next((()=>this.ni(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Bc}).createIndex("sequenceNumberIndex",qc,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Kc}).createIndex("documentKeyIndex",Wc,{unique:!1})}(e)))),s}Xs(e){let t=0;return e.store("remoteDocuments").X(((e,n)=>{t+=Mf(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Ys(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.j().next((t=>hc.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.j("userMutationsIndex",r).next((n=>hc.forEach(n,(n=>{xa(n.userId===t.userId);const r=Wd(this.serializer,n);return Lf(e,t.userId,r).next((()=>{}))}))))}))))}Zs(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.X(((n,i)=>{const s=new $a(n),o=function(e){return[0,Cc(e)]}(s);r.push(t.get(o).next((n=>n?hc.resolve():(n=>t.put({targetId:0,path:Cc(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>hc.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:zc});const n=t.store("collectionParents"),r=new kf,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Cc(r)})}};return t.store("remoteDocuments").X({Y:!0},((e,t)=>{const n=new $a(e);return i(n.popLast())})).next((()=>t.store("documentMutations").X({Y:!0},((e,t)=>{let[n,r,s]=e;const o=Nc(r);return i(o.popLast())}))))}ei(e){const t=e.store("targets");return t.X(((e,n)=>{const r=Gd(n),i=Hd(this.serializer,r);return t.put(i)}))}ni(e,t){const n=t.store("remoteDocuments"),r=[];return n.X(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=(o=n,o.document?new Ja($a.fromString(o.document.name).popFirst(5)):o.noDocument?Ja.fromSegments(o.noDocument.path):o.unknownDocument?Ja.fromSegments(o.unknownDocument.path):Ca()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))})).next((()=>hc.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=np(this.serializer),i=new wp(_p.zs,this.serializer.fe);return n.j().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:eh();Wd(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),hc.forEach(n,((e,n)=>{const s=new wa(n),o=tf.de(this.serializer,s),a=i.getIndexManager(s),c=Ff.de(s,this.serializer,a,i.referenceDelegate);return new up(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new el(t,Ec.ct),e).next()}))}))}}function Ep(e){e.createObjectStore("targetDocuments",{keyPath:Uc}).createIndex("documentTargetsIndex",Vc,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",jc,{unique:!0}),e.createObjectStore("targetGlobal")}const Sp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class kp{constructor(e,t,n,r,i,s,o,a,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ii=i,this.window=s,this.document=o,this.ri=c,this.oi=l,this.ui=u,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=e=>Promise.resolve(),!kp.D())throw new Pa(Na.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Jf(this,r),this.di=t+"main",this.serializer=new Vd(a),this.wi=new fc(this.di,this.ui,new Ip(this.serializer)),this.Bs=new qf(this.referenceDelegate,this.serializer),this.remoteDocumentCache=np(this.serializer),this.qs=new Jd,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&Sa("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pa(Na.FAILED_PRECONDITION,Sp);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Bs.getHighestSequenceNumber(e)))})).then((e=>{this.Os=new Ec(e,this.ri)})).then((()=>{this.Fs=!0})).catch((e=>(this.wi&&this.wi.close(),Promise.reject(e))))}Ii(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Cp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ti(e).next((e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))))}))})).next((()=>this.Ei(e))).next((t=>this.isPrimary&&!t?this.Ai(e).next((()=>!1)):!!t&&this.vi(e).next((()=>!0)))))).catch((e=>{if(gc(e))return Ea("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ea("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ii.enqueueRetryable((()=>this.fi(e))),this.isPrimary=e}))}Ti(e){return Tp(e).get("owner").next((e=>hc.resolve(this.Ri(e))))}Pi(e){return Cp(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=tl(e,"clientMetadata");return t.j().next((e=>{const n=this.Si(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return hc.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this._i)for(const t of e)this._i.removeItem(this.Di(t.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.bi())).then((()=>this.pi()))))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?hc.resolve(!0):Tp(e).get("owner").next((t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Pa(Na.FAILED_PRECONDITION,Sp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cp(e).j().next((e=>void 0===this.Si(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Ea("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new el(e,Ec.ct);return this.Ai(t).next((()=>this.Pi(t)))})),this.wi.close(),this.Mi()}Si(e,t){return e.filter((e=>this.Vi(e.updateTimeMs,t)&&!this.Ci(e.clientId)))}$i(){return this.runTransaction("getActiveClients","readonly",(e=>Cp(e).j().next((e=>this.Si(e,18e5).map((e=>e.clientId))))))}get started(){return this.Fs}getMutationQueue(e,t){return Ff.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Cf(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return tf.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,n){Ea("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=15===(s=this.ui)?Zc:14===s?Jc:13===s?Xc:12===s?Yc:11===s?$c:void Ca();var s;let o;return this.wi.runTransaction(e,r,i,(r=>(o=new el(r,this.Os?this.Os.next():Ec.ct),"readwrite-primary"===t?this.Ti(o).next((e=>!!e||this.Ei(o))).next((t=>{if(!t)throw Sa("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))),new Pa(Na.FAILED_PRECONDITION,cc);return n(o)})).next((e=>this.vi(o).next((()=>e)))):this.Oi(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}Oi(e){return Tp(e).get("owner").next((e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Pa(Na.FAILED_PRECONDITION,Sp)}))}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Tp(e).put("owner",t)}static D(){return fc.D()}Ai(e){const t=Tp(e);return t.get("owner").next((e=>this.Ri(e)?(Ea("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):hc.resolve()))}Vi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Sa("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.mi())))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;!gt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ea("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Sa("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Sa("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Tp(e){return tl(e,"owner")}function Cp(e){return tl(e,"clientMetadata")}function xp(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Ap{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=eh(),r=eh();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Ap(e,t.fromCache,n,r)}}class Np{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next((i=>i||this.Gi(e,t,r,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(xu(t))return hc.resolve(null);let n=Du(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Lu(t,null,"F"),n=Du(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=eh(...r);return this.Ui.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ji(t,r);return this.zi(t,s,i,n.readTime)?this.Ki(e,Lu(t,null,"F")):this.Wi(e,s,t,n)}))))})))))}Gi(e,t,n,r){return xu(t)||r.isEqual(Ha.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((i=>{const s=this.ji(t,i);return this.zi(t,s,n,r)?this.Qi(e,t):(Ia()<=Vt.DEBUG&&Ea("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ju(t)),this.Wi(e,s,t,ic(r,-1)))}))}ji(e,t){let n=new cl(zu(e));return t.forEach(((t,r)=>{Uu(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Ia()<=Vt.DEBUG&&Ea("QueryEngine","Using full collection scan to execute query:",ju(t)),this.Ui.getDocumentsMatchingQuery(e,t,oc.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Pp{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new sl(qa),this.Yi=new qu((e=>wu(e)),bu),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new up(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function Op(e,t,n,r){return new Pp(e,t,n,r)}async function Dp(e,t){const n=Aa(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=eh();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({er:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Rp(e){const t=Aa(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function Lp(e,t,n){let r=eh(),i=eh();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Wu();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Ha.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Ea("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{nr:r,sr:i}}))}function Mp(e,t){const n=Aa(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Fp(e,t){const n=Aa(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Bs.getTargetData(e,t).next((i=>i?(r=i,hc.resolve(r)):n.Bs.allocateTargetId(e).next((i=>(r=new Ud(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function jp(e,t,n){const r=Aa(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!gc(e))throw e;Ea("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function Up(e,t,n){const r=Aa(e);let i=Ha.min(),s=eh();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=Aa(e),i=r.Yi.get(n);return void 0!==i?hc.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Du(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:Ha.min(),n?s:eh()))).next((e=>(Bp(r,Vu(t),e),{documents:e,ir:s})))))}function Vp(e,t){const n=Aa(e),r=Aa(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.le(e,t).next((e=>e?e.target:null))))}function zp(e,t){const n=Aa(e),r=n.Xi.get(t)||Ha.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.Zi.getAllFromCollectionGroup(e,t,ic(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Bp(n,t,e),e)))}function Bp(e,t,n){let r=e.Xi.get(t)||Ha.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}async function qp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eh();const r=await Fp(e,Du(Qd(t.bundledQuery))),i=Aa(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=pd(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.qs.saveNamedQuery(e,t);const o=r.withResumeToken(fl.EMPTY_BYTE_STRING,s);return i.Ji=i.Ji.insert(o.targetId,o),i.Bs.updateTargetData(e,o).next((()=>i.Bs.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Bs.addMatchingKeys(e,n,r.targetId))).next((()=>i.qs.saveNamedQuery(e,t)))}))}function Kp(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Wp(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Gp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Hp{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static ar(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Pa(r.error.code,r.error.message))),s?new Hp(e,t,r.state,i):(Sa("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qp{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static ar(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Pa(n.error.code,n.error.message))),i?new Qp(e,n.state,r):(Sa("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $p{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=nh();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Tc(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new $p(e,i):(Sa("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Yp{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Yp(t.clientId,t.onlineState):(Sa("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class Xp{constructor(){this.activeTargetIds=nh()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jp{constructor(e,t,n,r,i){this.window=e,this.ii=t,this.persistenceKey=n,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new sl(qa),this.started=!1,this.yr=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.pr=Kp(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new Xp),this.Tr=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const n of e){if(n===this.wr)continue;const e=this.getItem(Kp(this.persistenceKey,n));if(e){const t=$p.ar(n,e);t&&(this.gr=this.gr.insert(t.clientId,t))}}this.Pr();const t=this.storage.getItem(this.vr);if(t){const e=this.br(t);e&&this.Vr(e)}for(const n of this.yr)this.mr(n);this.yr=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,n){this.Dr(e,t,n),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Gp(this.persistenceKey,e));if(n){const r=Qp.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Gp(this.persistenceKey,e))}updateQueryState(e,t,n){this.kr(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Cr(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ea("SharedClientState","READ",e,t),t}setItem(e,t){Ea("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ea("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){const t=e;if(t.storageArea===this.storage){if(Ea("SharedClientState","EVENT",t.key,t.newValue),t.key===this.pr)return void Sa("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Tr.test(t.key)){if(null==t.newValue){const e=this.Or(t.key);return this.Fr(e,null)}{const e=this.Br(t.key,t.newValue);if(e)return this.Fr(e.clientId,e)}}else if(this.Er.test(t.key)){if(null!==t.newValue){const e=this.Lr(t.key,t.newValue);if(e)return this.qr(e)}}else if(this.Ar.test(t.key)){if(null!==t.newValue){const e=this.Ur(t.key,t.newValue);if(e)return this.Kr(e)}}else if(t.key===this.vr){if(null!==t.newValue){const e=this.br(t.newValue);if(e)return this.Vr(e)}}else if(t.key===this.Ir){const e=function(e){let t=Ec.ct;if(null!=e)try{const n=JSON.parse(e);xa("number"==typeof n),t=n}catch(e){Sa("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Ec.ct&&this.sequenceNumberHandler(e)}else if(t.key===this.Rr){const e=this.Gr(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Qr(e))))}}else this.yr.push(t)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,n){const r=new Hp(this.currentUser,e,t,n),i=Wp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}Cr(e){const t=Wp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){const t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}kr(e,t,n){const r=Gp(this.persistenceKey,e),i=new Qp(e,t,n);this.setItem(r,i.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const n=this.Or(e);return $p.ar(n,t)}Lr(e,t){const n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Hp.ar(new wa(i),r,t)}Ur(e,t){const n=this.Ar.exec(e),r=Number(n[1]);return Qp.ar(r,t)}br(e){return Yp.ar(e)}Gr(e){return JSON.parse(e)}async qr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.jr(e.batchId,e.state,e.error);Ea("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const n=t?this.gr.insert(e,t):this.gr.remove(e),r=this.Sr(this.gr),i=this.Sr(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Wr(s,o).then((()=>{this.gr=n}))}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=nh();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Zp{constructor(){this.Hr=new Xp,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Xp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class em{Yr(e){}shutdown(){}}class tm{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ea("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ea("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let nm=null;function rm(){return null===nm?nm=268435456+Math.round(2147483648*Math.random()):nm++,"0x"+nm.toString(16)}const im={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sm{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const om="WebChannelConnection";class am extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const s=rm(),o=this.To(e,t);Ea("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={};return this.Eo(a,r,i),this.Ao(e,o,a,n).then((t=>(Ea("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw ka("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ba,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=im[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=rm();return new Promise(((s,o)=>{const a=new ma;a.setWithCredentials(!0),a.listenOnce(ua.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case la.NO_ERROR:const t=a.getResponseJson();Ea(om,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case la.TIMEOUT:Ea(om,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Pa(Na.DEADLINE_EXCEEDED,"Request time out"));break;case la.HTTP_ERROR:const n=a.getStatus();if(Ea(om,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Na).indexOf(t)>=0?t:Na.UNKNOWN}(t.status);o(new Pa(e,t.message))}else o(new Pa(Na.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Pa(Na.UNAVAILABLE,"Connection failed."));break;default:Ca()}}finally{Ea(om,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);Ea(om,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)}))}Ro(e,t,n){const r=rm(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=aa(),o=ca(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new fa({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");Ea(om,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new sm({ro:t=>{d?Ea(om,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Ea(om,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Ea(om,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,pa.EventType.OPEN,(()=>{d||Ea(om,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,pa.EventType.CLOSE,(()=>{d||(d=!0,Ea(om,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())})),p(u,pa.EventType.ERROR,(t=>{d||(d=!0,ka(om,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new Pa(Na.UNAVAILABLE,"The operation could not be completed")))})),p(u,pa.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];xa(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ea(om,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Uh[e];if(void 0!==t)return Bh(t)}(t),i=o.message;void 0===n&&(n=Na.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.wo(new Pa(n,i)),u.close()}else Ea(om,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f._o(i)}})),p(o,ha.STAT_EVENT,(t=>{t.stat===da.PROXY?Ea(om,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===da.NOPROXY&&Ea(om,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function cm(){return"undefined"!=typeof window?window:null}function lm(){return"undefined"!=typeof document?document:null}function um(e){return new ld(e,!0)}class hm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&Ea("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class dm{constructor(e,t,n,r,i,s,o,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new hm(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===Na.RESOURCE_EXHAUSTED?(Sa(t.toString()),Sa("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===Na.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)}),(t=>{e((()=>{const e=new Pa(Na.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return Ea("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(Ea("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class fm extends dm{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ca()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(xa(void 0===t||"string"==typeof t),fl.fromBase64String(t||"")):(xa(void 0===t||t instanceof Uint8Array),fl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Na.UNKNOWN:Bh(e.code);return new Pa(t,e.message||"")}(o);n=new td(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=vd(e,r.document.name),s=pd(r.document.updateTime),o=r.document.createTime?pd(r.document.createTime):Ha.min(),a=new Kl({mapValue:{fields:r.document.fields}}),c=Gl.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Zh(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=vd(e,r.document),s=r.readTime?pd(r.readTime):Ha.min(),o=Gl.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Zh([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=vd(e,r.document),s=r.removedTargetIds||[];n=new Zh([],s,i,null)}else{if(!("filter"in t))return Ca();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new jh(r,i),o=e.targetId;n=new ed(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ha.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ha.min():t.readTime?pd(t.readTime):Ha.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=_d(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=_u(r)?{documents:Cd(e,r)}:{query:xd(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=dd(e,t.resumeToken);const r=ud(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ha.min())>0){n.readTime=hd(e,t.snapshotVersion.toTimestamp());const r=ud(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ca()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=_d(this.serializer),t.removeTarget=e,this.Wo(t)}}class pm extends dm{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(xa(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(xa(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?pd(e.updateTime):pd(t);return n.isEqual(Ha.min())&&(n=pd(t)),new wh(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=pd(e.commitTime);return this.listener.cu(n,t)}return xa(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=_d(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>kd(this.serializer,e)))};this.Wo(t)}}class mm extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Pa(Na.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.Io(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Na.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Pa(Na.UNKNOWN,e.toString())}))}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.vo(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Na.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Pa(Na.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class gm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Sa(t),this.mu=!1):Ea("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class ym{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{Tm(this)&&(Ea("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Aa(e);t.vu.add(4),await wm(t),t.bu.set("Unknown"),t.vu.delete(4),await vm(t)}(this))}))})),this.bu=new gm(n,r)}}async function vm(e){if(Tm(e))for(const t of e.Ru)await t(!0)}async function wm(e){for(const t of e.Ru)await t(!1)}function bm(e,t){const n=Aa(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),km(n)?Sm(n):Km(n).Ko()&&Im(n,t))}function _m(e,t){const n=Aa(e),r=Km(n);n.Au.delete(t),r.Ko()&&Em(n,t),0===n.Au.size&&(r.Ko()?r.jo():Tm(n)&&n.bu.set("Unknown"))}function Im(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ha.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Km(e).su(t)}function Em(e,t){e.Vu.qt(t),Km(e).iu(t)}function Sm(e){e.Vu=new rd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),Km(e).start(),e.bu.gu()}function km(e){return Tm(e)&&!Km(e).Uo()&&e.Au.size>0}function Tm(e){return 0===Aa(e).vu.size}function Cm(e){e.Vu=void 0}async function xm(e){e.Au.forEach(((t,n)=>{Im(e,t)}))}async function Am(e,t){Cm(e),km(e)?(e.bu.Iu(t),Sm(e)):e.bu.set("Unknown")}async function Nm(e,t,n){if(e.bu.set("Online"),t instanceof td&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){Ea("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Pm(e,n)}else if(t instanceof Zh?e.Vu.Ht(t):t instanceof ed?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Ha.min()))try{const t=await Rp(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(fl.EMPTY_BYTE_STRING,r.snapshotVersion)),Em(e,t);const i=new Ud(r.target,t,n,r.sequenceNumber);Im(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ea("RemoteStore","Failed to raise snapshot:",t),await Pm(e,t)}}async function Pm(e,t,n){if(!gc(t))throw t;e.vu.add(1),await wm(e),e.bu.set("Offline"),n||(n=()=>Rp(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ea("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await vm(e)}))}function Om(e,t){return t().catch((n=>Pm(e,n,t)))}async function Dm(e){const t=Aa(e),n=Wm(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;Rm(t);)try{const e=await Mp(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,Lm(t,e)}catch(e){await Pm(t,e)}Mm(t)&&Fm(t)}function Rm(e){return Tm(e)&&e.Eu.length<10}function Lm(e,t){e.Eu.push(t);const n=Wm(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Mm(e){return Tm(e)&&!Wm(e).Uo()&&e.Eu.length>0}function Fm(e){Wm(e).start()}async function jm(e){Wm(e).hu()}async function Um(e){const t=Wm(e);for(const n of e.Eu)t.uu(n.mutations)}async function Vm(e,t,n){const r=e.Eu.shift(),i=Mh.from(r,t,n);await Om(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Dm(e)}async function zm(e,t){t&&Wm(e).ou&&await async function(e,t){if(zh(n=t.code)&&n!==Na.ABORTED){const n=e.Eu.shift();Wm(e).Qo(),await Om(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Dm(e)}var n}(e,t),Mm(e)&&Fm(e)}async function Bm(e,t){const n=Aa(e);n.asyncQueue.verifyOperationInProgress(),Ea("RemoteStore","RemoteStore received new credentials");const r=Tm(n);n.vu.add(3),await wm(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await vm(n)}async function qm(e,t){const n=Aa(e);t?(n.vu.delete(2),await vm(n)):t||(n.vu.add(2),await wm(n),n.bu.set("Unknown"))}function Km(e){return e.Su||(e.Su=function(e,t,n){const r=Aa(e);return r.fu(),new fm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:xm.bind(null,e),ao:Am.bind(null,e),nu:Nm.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),km(e)?Sm(e):e.bu.set("Unknown")):(await e.Su.stop(),Cm(e))}))),e.Su}function Wm(e){return e.Du||(e.Du=function(e,t,n){const r=Aa(e);return r.fu(),new pm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:jm.bind(null,e),ao:zm.bind(null,e),au:Um.bind(null,e),cu:Vm.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await Dm(e)):(await e.Du.stop(),e.Eu.length>0&&(Ea("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))}))),e.Du}class Gm{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Oa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Gm(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pa(Na.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hm(e,t){if(Sa("AsyncQueue","".concat(t,": ").concat(e)),gc(e))return new Pa(Na.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Qm{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ja.comparator(t.key,n.key):(e,t)=>Ja.comparator(e.key,t.key),this.keyedMap=Hu(),this.sortedSet=new sl(this.comparator)}static emptySet(e){return new Qm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Qm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class $m{constructor(){this.Cu=new sl(Ja.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Ca():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Ym{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Ym(e,t,Qm.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Xm{constructor(){this.Nu=void 0,this.listeners=[]}}class Jm{constructor(){this.queries=new qu((e=>Fu(e)),Mu),this.onlineState="Unknown",this.ku=new Set}}async function Zm(e,t){const n=Aa(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Xm),i)try{s.Nu=await n.onListen(r)}catch(e){const n=Hm(e,"Initialization of query '".concat(ju(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&rg(n)}async function eg(e,t){const n=Aa(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function tg(e,t){const n=Aa(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&rg(n)}function ng(e,t,n){const r=Aa(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function rg(e){e.ku.forEach((e=>{e.next()}))}class ig{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ym(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ym.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class sg{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class og{constructor(e){this.serializer=e}rr(e){return vd(this.serializer,e)}ur(e){return e.metadata.exists?Sd(this.serializer,e.document,!1):Gl.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return pd(e)}}class ag{constructor(e,t,n){this.ju=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=cg(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const n=$a.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,n=new og(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.rr(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||eh()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Aa(e);let s=eh(),o=Wu();for(const l of n){const e=t.rr(l.metadata.name);l.document&&(s=s.add(e));const n=t.ur(l);n.setReadTime(t.cr(l.metadata.readTime)),o=o.insert(e,n)}const a=i.Zi.newChangeBuffer({trackRemovals:!0}),c=await Fp(i,function(e){return Du(Cu($a.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Lp(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Bs.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.Bs.addMatchingKeys(e,s,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr))).next((()=>t.nr))))))}(this.localStore,new og(this.serializer),this.documents,this.ju.id),t=this.Wu(this.documents);for(const n of this.queries)await qp(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:e}}}function cg(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class lg{constructor(e){this.key=e}}class ug{constructor(e){this.key=e}}class hg{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=eh(),this.mutatedKeys=eh(),this.tc=zu(e),this.ec=new Qm(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new $m,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=Uu(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.rc(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.tc(u,a)>0||c&&this.tc(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:o,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ca()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const s=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==i.length||a?{snapshot:new Ym(this.query,e.ec,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new $m,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=eh(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new ug(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new lg(n))})),t}hc(e){this.Yu=e.ir,this.Zu=eh();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ym.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class dg{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class fg{constructor(e){this.key=e,this.fc=!1}}class pg{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new qu((e=>Fu(e)),Mu),this._c=new Map,this.mc=new Set,this.gc=new sl(Ja.comparator),this.yc=new Map,this.Ic=new fp,this.Tc={},this.Ec=new Map,this.Ac=Bf.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function mg(e,t){const n=zg(e);let r,i;const s=n.wc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const e=await Fp(n.localStore,Du(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await gg(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&bm(n.remoteStore,e)}return i}async function gg(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await Up(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.sc(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return Cg(e,t.targetId,o.cc),o.snapshot}(e,t,n,r);const s=await Up(e.localStore,t,!0),o=new hg(t,s.ir),a=o.sc(s.documents),c=Jh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,c);Cg(e,n,l.cc);const u=new dg(t,n,o);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),l.snapshot}async function yg(e,t){const n=Aa(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter((e=>!Mu(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await jp(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),_m(n.remoteStore,r.targetId),kg(n,r.targetId)})).catch(uc)):(kg(n,r.targetId),await jp(n.localStore,r.targetId,!0))}async function vg(e,t){const n=Aa(e);try{const e=await function(e,t){const n=Aa(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(fl.EMPTY_BYTE_STRING,Ha.min()).withLastLimboFreeSnapshotVersion(Ha.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Bs.updateTargetData(e,l))}));let a=Wu(),c=eh();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Lp(e,s,t.documentUpdates).next((e=>{a=e.nr,c=e.sr}))),!r.isEqual(Ha.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return hc.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.Ji=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.yc.get(t);r&&(xa(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?xa(r.fc):e.removedDocuments.size>0&&(xa(r.fc),r.fc=!1))})),await Ng(n,e,t)}catch(e){await uc(e)}}function wg(e,t,n){const r=Aa(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach(((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Aa(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)})),r&&rg(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function bg(e,t,n){const r=Aa(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),s=i&&i.key;if(s){let e=new sl(Ja.comparator);e=e.insert(s,Gl.newNoDocument(s,Ha.min()));const n=eh().add(s),i=new Xh(Ha.min(),new Map,new sl(qa),e,n);await vg(r,i),r.gc=r.gc.remove(s),r.yc.delete(t),Ag(r)}else await jp(r.localStore,t,!1).then((()=>kg(r,t,n))).catch(uc)}async function _g(e,t){const n=Aa(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Aa(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=hc.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);xa(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=eh();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Sg(n,r,null),Eg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ng(n,e)}catch(e){await uc(e)}}async function Ig(e,t,n){const r=Aa(e);try{const e=await function(e,t){const n=Aa(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(xa(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Sg(r,t,n),Eg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ng(r,e)}catch(n){await uc(n)}}function Eg(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function Sg(e,t,n){const r=Aa(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function kg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||Tg(e,t)}))}function Tg(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(_m(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Ag(e))}function Cg(e,t,n){for(const r of n)r instanceof lg?(e.Ic.addReference(r.key,t),xg(e,r)):r instanceof ug?(Ea("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||Tg(e,r.key)):Ca()}function xg(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Ea("SyncEngine","New document in limbo: "+n),e.mc.add(r),Ag(e))}function Ag(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new Ja($a.fromString(t)),r=e.Ac.next();e.yc.set(r,new fg(n)),e.gc=e.gc.insert(n,r),bm(e.remoteStore,new Ud(Du(Cu(n.path)),r,"TargetPurposeLimboResolution",Ec.ct))}}async function Ng(e,t,n){const r=Aa(e),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach(((e,a)=>{o.push(r.Rc(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Ap.Li(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.dc.nu(i),await async function(e,t){const n=Aa(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>hc.forEach(t,(t=>hc.forEach(t.Fi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>hc.forEach(t.Bi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!gc(e))throw e;Ea("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,s))}async function Pg(e,t){const n=Aa(e);if(!n.currentUser.isEqual(t)){Ea("SyncEngine","User change. New user:",t.toKey());const e=await Dp(n.localStore,t);n.currentUser=t,function(e,t){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new Pa(Na.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ng(n,e.er)}}function Og(e,t){const n=Aa(e),r=n.yc.get(t);if(r&&r.fc)return eh().add(r.key);{let e=eh();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}async function Dg(e,t){const n=Aa(e),r=await Up(n.localStore,t.query,!0),i=t.view.hc(r);return n.isPrimaryClient&&Cg(n,t.targetId,i.cc),i}async function Rg(e,t){const n=Aa(e);return zp(n.localStore,t).then((e=>Ng(n,e)))}async function Lg(e,t,n,r){const i=Aa(e),s=await function(e,t){const n=Aa(e),r=Aa(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Sn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):hc.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Dm(i.remoteStore):"acknowledged"===n||"rejected"===n?(Sg(i,t,r||null),Eg(i,t),function(e,t){Aa(Aa(e).mutationQueue).Cn(t)}(i.localStore,t)):Ca(),await Ng(i,s)):Ea("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Mg(e,t,n){const r=Aa(e),i=[],s=[];for(const o of t){let e;const t=r._c.get(o);if(t&&0!==t.length){e=await Fp(r.localStore,Du(t[0]));for(const e of t){const t=r.wc.get(e),n=await Dg(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Vp(r.localStore,o);e=await Fp(r.localStore,t),await gg(r,Fg(t),o,!1,e.resumeToken)}i.push(e)}return r.dc.nu(s),i}function Fg(e){return Tu(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function jg(e){const t=Aa(e);return Aa(Aa(t.localStore).persistence).$i()}async function Ug(e,t,n,r){const i=Aa(e);if(i.vc)return void Ea("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await zp(i.localStore,Vu(s[0])),r=Xh.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,fl.EMPTY_BYTE_STRING);await Ng(i,e,r);break}case"rejected":await jp(i.localStore,t,!0),kg(i,t,r);break;default:Ca()}}async function Vg(e,t,n){const r=zg(e);if(r.vc){for(const e of t){if(r._c.has(e)){Ea("SyncEngine","Adding an already active target "+e);continue}const t=await Vp(r.localStore,e),n=await Fp(r.localStore,t);await gg(r,Fg(t),n.targetId,!1,n.resumeToken),bm(r.remoteStore,n)}for(const e of n)r._c.has(e)&&await jp(r.localStore,e,!1).then((()=>{_m(r.remoteStore,e),kg(r,e)})).catch(uc)}}function zg(e){const t=Aa(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=vg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Og.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=bg.bind(null,t),t.dc.nu=tg.bind(null,t.eventManager),t.dc.Pc=ng.bind(null,t.eventManager),t}function Bg(e){const t=Aa(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_g.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ig.bind(null,t),t}class qg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=um(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Op(this.persistence,new Np,e.initialUser,this.serializer)}createPersistence(e){return new wp(_p.zs,this.serializer)}createSharedClientState(e){return new Zp}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Kg extends qg{constructor(e,t,n){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await Bg(this.Vc.syncEngine),await Dm(this.Vc.remoteStore),await this.persistence.Ii((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Op(this.persistence,new Np,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new $f(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Ic(t,this.persistence);return new _c(e.asyncQueue,n)}createPersistence(e){const t=xp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Rf.withCacheSize(this.cacheSizeBytes):Rf.DEFAULT;return new kp(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,cm(),lm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Zp}}class Wg extends Kg{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Vc.syncEngine;this.sharedClientState instanceof Jp&&(this.sharedClientState.syncEngine={jr:Lg.bind(null,t),zr:Ug.bind(null,t),Wr:Vg.bind(null,t),$i:jg.bind(null,t),Qr:Rg.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ii((async e=>{await async function(e,t){const n=Aa(e);if(zg(n),Bg(n),!0===t&&!0!==n.vc){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Mg(n,e.toArray());n.vc=!0,await qm(n.remoteStore,!0);for(const r of t)bm(n.remoteStore,r)}else if(!1===t&&!1!==n.vc){const e=[];let t=Promise.resolve();n._c.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(kg(n,i),jp(n.localStore,i,!0)))),_m(n.remoteStore,i)})),await t,await Mg(n,e),function(e){const t=Aa(e);t.yc.forEach(((e,n)=>{_m(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new sl(Ja.comparator)}(n),n.vc=!1,await qm(n.remoteStore,!1)}}(this.Vc.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=cm();if(!Jp.D(t))throw new Pa(Na.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=xp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Gg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>wg(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Pg.bind(null,this.syncEngine),await qm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Jm}createDatastore(e){const t=um(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new am(r));var r;return function(e,t,n,r){return new mm(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>wg(this.syncEngine,e,0),s=tm.D()?new tm:new em,new ym(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new pg(e,t,n,r,i,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Aa(e);Ea("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await wm(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}function Hg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Qg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Sa("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class $g{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Oa,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((e=>{e&&e.Qu()?this.metadata.resolve(e.Gu.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(e=>this.metadata.reject(e)))}close(){return this.Cc.cancel()}async getMetadata(){return this.metadata.promise}async bc(){return await this.getMetadata(),this.Nc()}async Nc(){const e=await this.kc();if(null===e)return null;const t=this.xc.decode(e),n=Number(t);isNaN(n)&&this.Mc("length string (".concat(t,") is not valid number"));const r=await this.$c(n);return new sg(JSON.parse(r),e.length+n)}Oc(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async kc(){for(;this.Oc()<0&&!await this.Fc(););if(0===this.buffer.length)return null;const e=this.Oc();e<0&&this.Mc("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $c(e){for(;this.buffer.length<e;)await this.Fc()&&this.Mc("Reached the end of bundle when more is expected.");const t=this.xc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Mc(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}async Fc(){const e=await this.Cc.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Yg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Pa(Na.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Aa(e),r=_d(n.serializer)+"/documents",i={documents:t.map((e=>yd(n.serializer,e)))},s=await n.vo("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){xa(!!t.found),t.found.name,t.found.updateTime;const n=vd(e,t.found.name),r=pd(t.found.updateTime),i=t.found.createTime?pd(t.found.createTime):Ha.min(),s=new Kl({mapValue:{fields:t.found.fields}});return Gl.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){xa(!!t.missing),xa(!!t.readTime);const n=vd(e,t.missing),r=pd(t.readTime);return Gl.newNoDocument(n,r)}(e,t):Ca()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());xa(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Ja.fromPath(t);this.mutations.push(new Rh(n,this.precondition(n)))})),await async function(e,t){const n=Aa(e),r=_d(n.serializer)+"/documents",i={writes:t.map((e=>kd(n.serializer,e)))};await n.Io("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ca();t=Ha.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Pa(Na.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ha.min())?bh.exists(!1):bh.updateTime(t):bh.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ha.min()))throw new Pa(Na.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bh.updateTime(t)}return bh.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Xg{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Bc=n.maxAttempts,this.qo=new hm(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No((async()=>{const e=new Yg(this.datastore),t=this.qc(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Uc(e)}))))})).catch((e=>{this.Uc(e)}))}))}qc(e){try{const t=this.updateFunction(e);return!Sc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((()=>(this.Lc(),Promise.resolve())))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!zh(t)}return!1}}class Jg{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=wa.UNAUTHENTICATED,this.clientId=Ba.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Ea("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ea("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pa(Na.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(CN){const n=Hm(CN,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Zg(e,t){e.asyncQueue.verifyOperationInProgress(),Ea("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Dp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function ey(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ny(e);Ea("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>Bm(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Bm(t.remoteStore,n))),e._onlineComponents=t}function ty(e){return"FirebaseError"===e.name?e.code===Na.FAILED_PRECONDITION||e.code===Na.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function ny(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ea("FirestoreClient","Using user provided OfflineComponentProvider");try{await Zg(e,e._uninitializedComponentsProvider._offline)}catch(CN){const n=CN;if(!ty(n))throw n;ka("Error using user provided cache. Falling back to memory cache: "+n),await Zg(e,new qg)}}else Ea("FirestoreClient","Using default OfflineComponentProvider"),await Zg(e,new qg);return e._offlineComponents}async function ry(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ea("FirestoreClient","Using user provided OnlineComponentProvider"),await ey(e,e._uninitializedComponentsProvider._online)):(Ea("FirestoreClient","Using default OnlineComponentProvider"),await ey(e,new Gg))),e._onlineComponents}function iy(e){return ny(e).then((e=>e.persistence))}function sy(e){return ny(e).then((e=>e.localStore))}function oy(e){return ry(e).then((e=>e.remoteStore))}function ay(e){return ry(e).then((e=>e.syncEngine))}function cy(e){return ry(e).then((e=>e.datastore))}async function ly(e){const t=await ry(e),n=t.eventManager;return n.onListen=mg.bind(null,t.syncEngine),n.onUnlisten=yg.bind(null,t.syncEngine),n}function uy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Oa;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Qg({next:s=>{t.enqueueAndForget((()=>eg(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Pa(Na.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Pa(Na.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new ig(Cu(n.path),s,{includeMetadataChanges:!0,Ku:!0});return Zm(e,o)}(await ly(e),e.asyncQueue,t,n,r))),r.promise}function hy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Oa;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Qg({next:n=>{t.enqueueAndForget((()=>eg(e,o))),n.fromCache&&"server"===r.source?i.reject(new Pa(Na.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new ig(n,s,{includeMetadataChanges:!0,Ku:!0});return Zm(e,o)}(await ly(e),e.asyncQueue,t,n,r))),r.promise}function dy(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Wh().encode(e):e,function(e,t){return new $g(e,t)}(function(e,t){if(e instanceof Uint8Array)return Hg(e,t);if(e instanceof ArrayBuffer)return Hg(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,um(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Aa(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Aa(e),r=pd(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.qs.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(cg(r));const i=new ag(r,e.localStore,t.serializer);let s=await t.bc();for(;s;){const e=await i.zu(s);e&&n._updateProgress(e),s=await t.bc()}const o=await i.complete();return await Ng(e,o.Ju,void 0),await function(e,t){const n=Aa(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.qs.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Hu)}catch(e){return ka("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await ay(e),i,r)}))}function fy(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const py=new Map;function my(e,t,n){if(!n)throw new Pa(Na.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function gy(e,t,n,r){if(!0===t&&!0===r)throw new Pa(Na.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function yy(e){if(!Ja.isDocumentKey(e))throw new Pa(Na.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function vy(e){if(Ja.isDocumentKey(e))throw new Pa(Na.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function wy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ca()}function by(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Pa(Na.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wy(e);throw new Pa(Na.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function _y(e,t){if(t<=0)throw new Pa(Na.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Iy{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Pa(Na.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pa(Na.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fy(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Pa(Na.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Pa(Na.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Pa(Na.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Ey{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Iy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Pa(Na.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pa(Na.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Iy(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ra;switch(e.type){case"firstParty":return new ja(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Pa(Na.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=py.get(e);t&&(Ea("ComponentProvider","Removing Datastore"),py.delete(e),t.terminate())}(this),Promise.resolve()}}function Sy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=by(e,Ey))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=wa.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[at(JSON.stringify({alg:"none",type:"JWT"})),at(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Pa(Na.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new wa(s)}e._authCredentials=new La(new Da(t,n))}}class ky{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ky(this.firestore,e,this._key)}}class Ty{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ty(this.firestore,e,this._query)}}class Cy extends Ty{constructor(e,t,n){super(e,t,Cu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ky(this.firestore,null,new Ja(e))}withConverter(e){return new Cy(this.firestore,e,this._path)}}function xy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Dt(e),my("collection","path",t),e instanceof Ey){const n=$a.fromString(t,...r);return vy(n),new Cy(e,null,n)}{if(!(e instanceof ky||e instanceof Cy))throw new Pa(Na.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child($a.fromString(t,...r));return vy(n),new Cy(e.firestore,null,n)}}function Ay(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Dt(e),1===arguments.length&&(t=Ba.A()),my("doc","path",t),e instanceof Ey){const n=$a.fromString(t,...r);return yy(n),new ky(e,null,new Ja(n))}{if(!(e instanceof ky||e instanceof Cy))throw new Pa(Na.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child($a.fromString(t,...r));return yy(n),new ky(e.firestore,e instanceof Cy?e.converter:null,new Ja(n))}}function Ny(e,t){return e=Dt(e),t=Dt(t),(e instanceof ky||e instanceof Cy)&&(t instanceof ky||t instanceof Cy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Py(e,t){return e=Dt(e),t=Dt(t),e instanceof Ty&&t instanceof Ty&&e.firestore===t.firestore&&Mu(e._query,t._query)&&e.converter===t.converter}class Oy{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new hm(this,"async_queue_retry"),this.Xc=()=>{const e=lm();e&&Ea("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=lm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=lm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new Oa;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!gc(e))throw e;Ea("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Sa("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=Gm.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(r),r}Zc(){this.Wc&&Ca()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Dy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class Ry{constructor(){this._progressObserver={},this._taskCompletionResolver=new Oa,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ly extends Ey{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Oy,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Fy(this),this._firestoreClient.terminate()}}function My(e){return e._firestoreClient||Fy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Fy(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new _l(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,fy(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Jg(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function jy(e,t,n){const r=new Oa;return e.asyncQueue.enqueue((async()=>{try{await Zg(e,n),await ey(e,t),r.resolve()}catch(e){const n=e;if(!ty(n))throw n;ka("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Uy(e){return function(e){const t=new Oa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Aa(e);Tm(n.remoteStore)||Ea("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Aa(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ec.get(e)||[];r.push(t),n.Ec.set(e,r)}catch(e){const n=Hm(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await ay(e),t))),t.promise}(My(e=by(e,Ly)))}function Vy(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await iy(e),n=await oy(e);return t.setNetworkEnabled(!0),function(e){const t=Aa(e);return t.vu.delete(0),vm(t)}(n)}))}(My(e=by(e,Ly)))}function zy(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await iy(e),n=await oy(e);return t.setNetworkEnabled(!1),async function(e){const t=Aa(e);t.vu.add(0),await wm(t),t.bu.set("Offline")}(n)}))}(My(e=by(e,Ly)))}function By(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Aa(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.qs.getNamedQuery(e,t)))}(await sy(e),t)))}(My(e=by(e,Ly)),t).then((t=>t?new Ty(e,null,t.query):null))}function qy(e){if(e._initialized||e._terminated)throw new Pa(Na.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ky{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ky(fl.fromBase64String(e))}catch(e){throw new Pa(Na.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Ky(fl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wy{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Pa(Na.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xa(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gy{constructor(e){this._methodName=e}}class Hy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pa(Na.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pa(Na.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qa(this._lat,e._lat)||qa(this._long,e._long)}}const Qy=/^__.*__$/;class $y{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Ah(e,this.data,this.fieldMask,t,this.fieldTransforms):new xh(e,this.data,t,this.fieldTransforms)}}class Yy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ah(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Xy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ca()}}class Jy{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Jy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return vv(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Xy(this.ca)&&Qy.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Zy{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||um(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Jy({ca:e,methodName:t,ga:n,path:Xa.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ev(e){const t=e._freezeSettings(),n=um(e._databaseId);return new Zy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function tv(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ya(s.merge||s.mergeFields?2:0,t,n,i);pv("Data must be an object, but it was:",o,r);const a=dv(r,o);let c,l;if(s.merge)c=new hl(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=mv(t,r,n);if(!o.contains(i))throw new Pa(Na.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));wv(e,i)||e.push(i)}c=new hl(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new $y(new Kl(a),c,l)}class nv extends Gy{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nv}}function rv(e,t,n){return new Jy({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class iv extends Gy{_toFieldTransform(e){return new vh(e.path,new uh)}isEqual(e){return e instanceof iv}}class sv extends Gy{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=rv(this,e,!0),n=this.pa.map((e=>hv(e,t))),r=new hh(n);return new vh(e.path,r)}isEqual(e){return this===e}}class ov extends Gy{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=rv(this,e,!0),n=this.pa.map((e=>hv(e,t))),r=new fh(n);return new vh(e.path,r)}isEqual(e){return this===e}}class av extends Gy{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new mh(e.serializer,sh(e.serializer,this.Ia));return new vh(e.path,t)}isEqual(e){return this===e}}function cv(e,t,n,r){const i=e.ya(1,t,n);pv("Data must be an object, but it was:",i,r);const s=[],o=Kl.empty();rl(r,((e,r)=>{const a=yv(t,e,n);r=Dt(r);const c=i.da(a);if(r instanceof nv)s.push(a);else{const e=hv(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new hl(s);return new Yy(o,a,i.fieldTransforms)}function lv(e,t,n,r,i,s){const o=e.ya(1,t,n),a=[mv(t,r,n)],c=[i];if(s.length%2!=0)throw new Pa(Na.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(mv(t,s[d])),c.push(s[d+1]);const l=[],u=Kl.empty();for(let d=a.length-1;d>=0;--d)if(!wv(l,a[d])){const e=a[d];let t=c[d];t=Dt(t);const n=o.da(e);if(t instanceof nv)l.push(e);else{const r=hv(t,n);null!=r&&(l.push(e),u.set(e,r))}}const h=new hl(l);return new Yy(u,h,o.fieldTransforms)}function uv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return hv(n,e.ya(r?4:3,t))}function hv(e,t){if(fv(e=Dt(e)))return pv("Unsupported field value:",t,e),dv(e,t);if(e instanceof Gy)return function(e,t){if(!Xy(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=hv(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Dt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return sh(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ga.fromDate(e);return{timestampValue:hd(t.serializer,n)}}if(e instanceof Ga){const n=new Ga(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:hd(t.serializer,n)}}if(e instanceof Hy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ky)return{bytesValue:dd(t.serializer,e._byteString)};if(e instanceof ky){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:md(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(wy(e)))}(e,t)}function dv(e,t){const n={};return il(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):rl(e,((e,r)=>{const i=hv(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function fv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ga||e instanceof Hy||e instanceof Ky||e instanceof ky||e instanceof Gy)}function pv(e,t,n){if(!fv(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=wy(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function mv(e,t,n){if((t=Dt(t))instanceof Wy)return t._internalPath;if("string"==typeof t)return yv(e,t);throw vv("Field path arguments must be of type string or ",e,!1,void 0,n)}const gv=new RegExp("[~\\*/\\[\\]]");function yv(e,t,n){if(t.search(gv)>=0)throw vv("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Wy(...t.split("."))._internalPath}catch(r){throw vv("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function vv(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field ".concat(r)),o&&(c+=" in document ".concat(i)),c+=")"),new Pa(Na.INVALID_ARGUMENT,a+e+c)}function wv(e,t){return e.some((e=>e.isEqual(t)))}class bv{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ky(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _v(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Iv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _v extends bv{data(){return super.data()}}function Iv(e,t){return"string"==typeof t?yv(e,t):t instanceof Wy?t._internalPath:t._delegate._internalPath}function Ev(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Pa(Na.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sv{}class kv extends Sv{}function Tv(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Sv&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof xv)).length,n=e.filter((e=>e instanceof Cv)).length;if(t>1||t>0&&n>0)throw new Pa(Na.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Cv extends kv{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Cv(e,t,n)}_apply(e){const t=this._parse(e);return Mv(e._query,t),new Ty(e.firestore,e.converter,Ru(e._query,t))}_parse(e){const t=ev(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Pa(Na.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Lv(o,s);const t=[];for(const n of o)t.push(Rv(r,e,n));a={arrayValue:{values:t}}}else a=Rv(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Lv(o,s),a=uv(n,"where",o,"in"===s||"not-in"===s);return Zl.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class xv extends Sv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new xv(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:eu.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Mv(n,i),n=Ru(n,i)}(e._query,t),new Ty(e.firestore,e.converter,Ru(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Av extends kv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Av(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Pa(Na.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Pa(Na.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Yl(t,n);return function(e,t){if(null===Au(e)){const n=Nu(e);null!==n&&Fv(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Ty(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new ku(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Nv extends kv{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Nv(e,t,n)}_apply(e){return new Ty(e.firestore,e.converter,Lu(e._query,this._limit,this._limitType))}}class Pv extends kv{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Pv(e,t,n)}_apply(e){const t=Dv(e,this.type,this._docOrFields,this._inclusive);return new Ty(e.firestore,e.converter,function(e,t){return new ku(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Ov extends kv{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Ov(e,t,n)}_apply(e){const t=Dv(e,this.type,this._docOrFields,this._inclusive);return new Ty(e.firestore,e.converter,function(e,t){return new ku(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Dv(e,t,n,r){if(n[0]=Dt(n[0]),n[0]instanceof bv)return function(e,t,n,r,i){if(!r)throw new Pa(Na.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Ou(e))if(o.field.isKeyField())s.push(Ol(t,r.key));else{const e=r.data.field(o.field);if(vl(e))throw new Pa(Na.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Pa(Na.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new Hl(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=ev(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Pa(Na.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new Pa(Na.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Pu(e)&&-1!==s.indexOf("/"))throw new Pa(Na.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child($a.fromString(s));if(!Ja.isDocumentKey(n))throw new Pa(Na.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Ja(n);a.push(Ol(t,i))}else{const e=uv(n,r,s);a.push(e)}}return new Hl(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Rv(e,t,n){if("string"==typeof(n=Dt(n))){if(""===n)throw new Pa(Na.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pu(t)&&-1!==n.indexOf("/"))throw new Pa(Na.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child($a.fromString(n));if(!Ja.isDocumentKey(r))throw new Pa(Na.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ol(e,new Ja(r))}if(n instanceof ky)return Ol(e,n._key);throw new Pa(Na.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(wy(n),"."))}function Lv(e,t){if(!Array.isArray(e)||0===e.length)throw new Pa(Na.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Mv(e,t){if(t.isInequality()){const n=Nu(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Pa(Na.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));const i=Au(e);null!==i&&Fv(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Pa(Na.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Pa(Na.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function Fv(e,t,n){if(!n.isEqual(t))throw new Pa(Na.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}class jv{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(kl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ca()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return rl(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Hy(gl(e.latitude),gl(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=wl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(bl(e));default:return null}}convertTimestamp(e){const t=ml(e);return new Ga(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=$a.fromString(e);xa(jd(n));const r=new Il(n.get(1),n.get(3)),i=new Ja(n.popFirst(5));return r.isEqual(t)||Sa("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Uv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Vv extends jv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ky(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ky(this.firestore,null,t)}}class zv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bv extends bv{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new qv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Iv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class qv extends Bv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Kv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new zv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new qv(this._firestore,this._userDataWriter,n.key,n,new zv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Pa(Na.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new qv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new zv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new qv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new zv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Wv(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Wv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ca()}}function Gv(e,t){return e instanceof Bv&&t instanceof Bv?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Kv&&t instanceof Kv&&e._firestore===t._firestore&&Py(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class Hv extends jv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ky(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ky(this.firestore,null,t)}}function Qv(e){e=by(e,ky);const t=by(e.firestore,Ly),n=My(t),r=new Hv(t);return function(e,t){const n=new Oa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Aa(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Pa(Na.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Hm(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await sy(e),t,n))),n.promise}(n,e._key).then((n=>new Bv(t,r,e._key,n,new zv(null!==n&&n.hasLocalMutations,!0),e.converter)))}function $v(e){e=by(e,Ty);const t=by(e.firestore,Ly),n=My(t),r=new Hv(t);return function(e,t){const n=new Oa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Up(e,t,!0),i=new hg(t,r.ir),s=i.sc(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Hm(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await sy(e),t,n))),n.promise}(n,e._query).then((n=>new Kv(t,r,e,n)))}function Yv(e,t,n){e=by(e,ky);const r=by(e.firestore,Ly),i=Uv(e.converter,t,n);return ew(r,[tv(ev(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,bh.none())])}function Xv(e,t,n){e=by(e,ky);const r=by(e.firestore,Ly),i=ev(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(t=Dt(t))||t instanceof Wy?lv(i,"updateDoc",e._key,t,n,a):cv(i,"updateDoc",e._key,t),ew(r,[s.toMutation(e._key,bh.exists(!0))])}function Jv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Dt(e);let a={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||Dy(n[c])||(a=n[c],c++);const l={includeMetadataChanges:a.includeMetadataChanges};if(Dy(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[c+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof ky)h=by(e.firestore,Ly),d=Cu(e._key.path),u={next:t=>{n[c]&&n[c](tw(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=by(e,Ty);h=by(t.firestore,Ly),d=t._query;const r=new Hv(h);u={next:e=>{n[c]&&n[c](new Kv(h,r,t,e))},error:n[c+1],complete:n[c+2]},Ev(e._query)}return function(e,t,n,r){const i=new Qg(r),s=new ig(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Zm(await ly(e),s))),()=>{i.Dc(),e.asyncQueue.enqueueAndForget((async()=>eg(await ly(e),s)))}}(My(h),d,l,u)}function Zv(e,t){return function(e,t){const n=new Qg(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Aa(e).ku.add(t),t.next()}(await ly(e),n))),()=>{n.Dc(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Aa(e).ku.delete(t)}(await ly(e),n)))}}(My(e=by(e,Ly)),Dy(t)?t:{next:t})}function ew(e,t){return function(e,t){const n=new Oa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Bg(e);try{const e=await function(e,t){const n=Aa(e),r=Ga.now(),i=t.reduce(((e,t)=>e.add(t.key)),eh());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Wu(),c=eh();return n.Zi.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Th(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Ah(e.key,t,Wl(t.value.mapValue),bh.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Qu(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new sl(qa)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Ng(r,e.changes),await Dm(r.remoteStore)}catch(e){const t=Hm(e,"Failed to persist write");n.reject(t)}}(await ay(e),t,n))),n.promise}(My(e),t)}function tw(e,t,n){const r=n.docs.get(t._key),i=new Hv(e);return new Bv(e,i,t._key,r,new zv(n.hasPendingWrites,n.fromCache),t.converter)}const nw={maxAttempts:5};class rw{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ev(e)}set(e,t,n){this._verifyNotCommitted();const r=iw(e,this._firestore),i=Uv(r.converter,t,n),s=tv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,bh.none())),this}update(e,t,n){this._verifyNotCommitted();const r=iw(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Dt(t))||t instanceof Wy?lv(this._dataReader,"WriteBatch.update",r._key,t,n,o):cv(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,bh.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=iw(e,this._firestore);return this._mutations=this._mutations.concat(new Dh(t._key,bh.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pa(Na.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function iw(e,t){if((e=Dt(e)).firestore!==t)throw new Pa(Na.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class sw extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ev(e)}get(e){const t=iw(e,this._firestore),n=new Vv(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Ca();const r=e[0];if(r.isFoundDocument())return new bv(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new bv(this._firestore,n,t._key,null,t.converter);throw Ca()}))}set(e,t,n){const r=iw(e,this._firestore),i=Uv(r.converter,t,n),s=tv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=iw(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Dt(t))||t instanceof Wy?lv(this._dataReader,"Transaction.update",r._key,t,n,o):cv(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=iw(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=iw(e,this._firestore),n=new Hv(this._firestore);return super.get(e).then((e=>new Bv(this._firestore,n,t._key,e._document,new zv(!1,!1),t.converter)))}}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ba=e}(Tn),bn(new Rt("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Ly(new Ma(e.getProvider("auth-internal")),new Va(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Pa(Na.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Il(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Pn(va,"3.13.0",e),Pn(va,"3.13.0","esm2017")}();function ow(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Pa("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function aw(){if("undefined"===typeof Uint8Array)throw new Pa("unimplemented","Uint8Arrays are not available in this environment.")}function cw(){if("undefined"==typeof atob)throw new Pa("unimplemented","Blobs are unavailable in Firestore in this environment.")}class lw{constructor(e){this._delegate=e}static fromBase64String(e){return cw(),new lw(Ky.fromBase64String(e))}static fromUint8Array(e){return aw(),new lw(Ky.fromUint8Array(e))}toBase64(){return cw(),this._delegate.toBase64()}toUint8Array(){return aw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function uw(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class hw{enableIndexedDbPersistence(e,t){return function(e,t){qy(e=by(e,Ly));const n=My(e);if(n._uninitializedComponentsProvider)throw new Pa(Na.FAILED_PRECONDITION,"SDK cache is already specified.");ka("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new Gg;return jy(n,i,new Kg(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){qy(e=by(e,Ly));const t=My(e);if(t._uninitializedComponentsProvider)throw new Pa(Na.FAILED_PRECONDITION,"SDK cache is already specified.");ka("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new Gg;return jy(t,r,new Wg(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Pa(Na.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Oa;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!fc.D())return Promise.resolve();const t=e+"main";await fc.delete(t)}(xp(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class dw{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Il||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||ka("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Sy(this._delegate,e,t,n)}enableNetwork(){return Vy(this._delegate)}disableNetwork(){return zy(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,gy("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Uy(this._delegate)}onSnapshotsInSync(e){return Zv(this._delegate,e)}get app(){if(!this._appCompat)throw new Pa("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Tw(this,xy(this._delegate,e))}catch(CN){throw vw(CN,"collection()","Firestore.collection()")}}doc(e){try{return new yw(this,Ay(this._delegate,e))}catch(CN){throw vw(CN,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ew(this,function(e,t){if(e=by(e,Ey),my("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Pa(Na.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Ty(e,null,function(e){return new ku($a.emptyPath(),e)}(t))}(this._delegate,e))}catch(CN){throw vw(CN,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=by(e,Ly);const r=Object.assign(Object.assign({},nw),n);return function(e){if(e.maxAttempts<1)throw new Pa(Na.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Oa;return e.asyncQueue.enqueueAndForget((async()=>{const i=await cy(e);new Xg(e.asyncQueue,i,n,t,r).run()})),r.promise}(My(e),(n=>t(new sw(e,n))),r)}(this._delegate,(t=>e(new pw(this,t))))}batch(){return My(this._delegate),new mw(new rw(this._delegate,(e=>ew(this._delegate,e))))}loadBundle(e){return function(e,t){const n=My(e=by(e,Ly)),r=new Ry;return dy(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return By(this._delegate,e).then((e=>e?new Ew(this,e):null))}}class fw extends jv{constructor(e){super(),this.firestore=e}convertBytes(e){return new lw(new Ky(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return yw.forKey(t,this.firestore,null)}}class pw{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new fw(e)}get(e){const t=Cw(e);return this._delegate.get(t).then((e=>new _w(this._firestore,new Bv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=Cw(e);return n?(ow("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Cw(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Cw(e);return this._delegate.delete(t),this}}class mw{constructor(e){this._delegate=e}set(e,t,n){const r=Cw(e);return n?(ow("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Cw(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Cw(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class gw{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new qv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Iw(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=gw.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new gw(e,new fw(e),t),r.set(t,i)),i}}gw.INSTANCES=new WeakMap;class yw{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fw(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Pa("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new yw(t,new ky(t._delegate,n,new Ja(e)))}static forKey(e,t,n){return new yw(t,new ky(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Tw(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Tw(this.firestore,xy(this._delegate,e))}catch(CN){throw vw(CN,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Dt(e))instanceof ky&&Ny(this._delegate,e)}set(e,t){t=ow("DocumentReference.set",t);try{return t?Yv(this._delegate,e,t):Yv(this._delegate,e)}catch(CN){throw vw(CN,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Xv(this._delegate,e):Xv(this._delegate,e,t,...r)}catch(CN){throw vw(CN,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return ew(by(e.firestore,Ly),[new Dh(e._key,bh.none())])}(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=ww(t),i=bw(t,(e=>new _w(this.firestore,new Bv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Jv(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Qv(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=by(e,ky);const t=by(e.firestore,Ly);return uy(My(t),e._key,{source:"server"}).then((n=>tw(t,e,n)))}(this._delegate):function(e){e=by(e,ky);const t=by(e.firestore,Ly);return uy(My(t),e._key).then((n=>tw(t,e,n)))}(this._delegate),t.then((e=>new _w(this.firestore,new Bv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new yw(this.firestore,e?this._delegate.withConverter(gw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function vw(e,t,n){return e.message=e.message.replace(t,n),e}function ww(e){for(const t of e)if("object"===typeof t&&!uw(t))return t;return{}}function bw(e,t){var n,r;let i;return i=uw(e[0])?e[0]:uw(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class _w{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new yw(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Gv(this._delegate,e._delegate)}}class Iw extends _w{data(e){const t=this._delegate.data(e);return function(e,t){e||Ca()}(void 0!==t),t}}class Ew{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fw(e)}where(e,t,n){try{return new Ew(this.firestore,Tv(this._delegate,function(e,t,n){const r=t,i=Iv("where",e);return Cv._create(i,r,n)}(e,t,n)))}catch(CN){throw vw(CN,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ew(this.firestore,Tv(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Iv("orderBy",e);return Av._create(n,t)}(e,t)))}catch(CN){throw vw(CN,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ew(this.firestore,Tv(this._delegate,function(e){return _y("limit",e),Nv._create("limit",e,"F")}(e)))}catch(CN){throw vw(CN,"limit()","Query.limit()")}}limitToLast(e){try{return new Ew(this.firestore,Tv(this._delegate,function(e){return _y("limitToLast",e),Nv._create("limitToLast",e,"L")}(e)))}catch(CN){throw vw(CN,"limitToLast()","Query.limitToLast()")}}startAt(){try{return new Ew(this.firestore,Tv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Pv._create("startAt",t,!0)}(...arguments)))}catch(CN){throw vw(CN,"startAt()","Query.startAt()")}}startAfter(){try{return new Ew(this.firestore,Tv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Pv._create("startAfter",t,!1)}(...arguments)))}catch(CN){throw vw(CN,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Ew(this.firestore,Tv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ov._create("endBefore",t,!1)}(...arguments)))}catch(CN){throw vw(CN,"endBefore()","Query.endBefore()")}}endAt(){try{return new Ew(this.firestore,Tv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ov._create("endAt",t,!0)}(...arguments)))}catch(CN){throw vw(CN,"endAt()","Query.endAt()")}}isEqual(e){return Py(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?$v(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=by(e,Ty);const t=by(e.firestore,Ly),n=My(t),r=new Hv(t);return hy(n,e._query,{source:"server"}).then((n=>new Kv(t,r,e,n)))}(this._delegate):function(e){e=by(e,Ty);const t=by(e.firestore,Ly),n=My(t),r=new Hv(t);return Ev(e._query),hy(n,e._query).then((n=>new Kv(t,r,e,n)))}(this._delegate),t.then((e=>new kw(this.firestore,new Kv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=ww(t),i=bw(t,(e=>new kw(this.firestore,new Kv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Jv(this._delegate,r,i)}withConverter(e){return new Ew(this.firestore,e?this._delegate.withConverter(gw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Sw{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Iw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class kw{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ew(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Iw(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Sw(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Iw(this._firestore,n))}))}isEqual(e){return Gv(this._delegate,e._delegate)}}class Tw extends Ew{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new yw(this.firestore,e):null}doc(e){try{return new yw(this.firestore,void 0===e?Ay(this._delegate):Ay(this._delegate,e))}catch(CN){throw vw(CN,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=by(e.firestore,Ly),r=Ay(e),i=Uv(e.converter,t);return ew(n,[tv(ev(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,bh.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new yw(this.firestore,e)))}isEqual(e){return Ny(this._delegate,e._delegate)}withConverter(e){return new Tw(this.firestore,e?this._delegate.withConverter(gw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Cw(e){return by(e,ky)}class xw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new Wy(...t)}static documentId(){return new xw(Xa.keyField().canonicalString())}isEqual(e){return(e=Dt(e))instanceof Wy&&this._delegate._internalPath.isEqual(e._internalPath)}}class Aw{constructor(e){this._delegate=e}static serverTimestamp(){const e=new iv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Aw(e)}static delete(){const e=new nv("deleteField");return e._methodName="FieldValue.delete",new Aw(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new sv("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new Aw(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ov("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new Aw(e)}static increment(e){const t=function(e){return new av("increment",e)}(e);return t._methodName="FieldValue.increment",new Aw(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Nw={Firestore:dw,GeoPoint:Hy,Timestamp:Ga,Blob:lw,Transaction:pw,WriteBatch:mw,DocumentReference:yw,DocumentSnapshot:_w,Query:Ew,QueryDocumentSnapshot:Iw,QuerySnapshot:kw,CollectionReference:Tw,FieldPath:xw,FieldValue:Aw,setLogLevel:function(e){!function(e){_a.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};var Pw;(function(e,t){e.INTERNAL.registerComponent(new Rt("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Nw)))})(Pw=Yn,((e,t)=>new dw(e,t,new hw))),Pw.registerVersion("@firebase/firestore-compat","0.3.12");function Ow(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const Dw={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Rw="EMAIL_SIGNIN",Lw="PASSWORD_RESET",Mw="RECOVER_EMAIL",Fw="REVERT_SECOND_FACTOR_ADDITION",jw="VERIFY_AND_CHANGE_EMAIL",Uw="VERIFY_EMAIL";function Vw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zw=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Bw=Vw,qw=new It("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Kw=new Wt("@firebase/auth");function Ww(e){if(Kw.logLevel<=Vt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Kw.error("Auth (".concat(Tn,"): ").concat(e),...n)}}function Gw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Yw(e,...n)}function Hw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Yw(e,...n)}function Qw(e,t,n){const r=Object.assign(Object.assign({},Bw()),{[t]:n});return new It("auth","Firebase",r).create(t,{appName:e.name})}function $w(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Gw(e,"argument-error"),Qw(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Yw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return qw.create(e,...n)}function Xw(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Yw(t,...r)}}function Jw(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ww(t),new Error(t)}function Zw(e,t){e||Jw(t)}function eb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function tb(){return"http:"===nb()||"https:"===nb()}function nb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class rb{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zw(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())||vt()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(tb()||yt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function ib(e,t){Zw(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class sb{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Jw("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Jw("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Jw("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ob={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ab=new rb(3e4,6e4);function cb(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function lb(e,t,n,r){return ub(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Ct(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),sb.fetch()(db(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function ub(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},ob),t);try{const t=new fb(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw pb(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw pb(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw pb(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw pb(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Qw(e,a,o);Gw(e,a)}}catch(CN){if(CN instanceof _t)throw CN;Gw(e,"network-request-failed",{message:String(CN)})}}async function hb(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await lb(e,t,n,r,i);return"mfaPendingCredential"in s&&Gw(e,"multi-factor-auth-required",{_serverResponse:s}),s}function db(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ib(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}class fb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Hw(this.auth,"network-request-failed"))),ab.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function pb(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Hw(e,t,r);return i.customData._tokenResponse=n,i}function mb(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(CN){}}function gb(e){return 1e3*Number(e)}function yb(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Ww("JWT malformed, contained fewer than 3 sections"),null;try{const e=ct(n);return e?JSON.parse(e):(Ww("Failed to decode base64 JWT payload"),null)}catch(CN){return Ww("Caught error parsing JWT payload as JSON",null===CN||void 0===CN?void 0:CN.toString()),null}}async function vb(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(CN){throw CN instanceof _t&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(CN)&&e.auth.currentUser===e&&await e.auth.signOut(),CN}}class wb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(CN){return void((null===CN||void 0===CN?void 0:CN.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class bb{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mb(this.lastLoginAt),this.creationTime=mb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function _b(e){var t;const n=e.auth,r=await e.getIdToken(),i=await vb(e,async function(e,t){return lb(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Xw(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Ow(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new bb(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class Ib{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Xw(e.idToken,"internal-error"),Xw("undefined"!==typeof e.idToken,"internal-error"),Xw("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=yb(e);return Xw(t,"internal-error"),Xw("undefined"!==typeof t.exp,"internal-error"),Xw("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Xw(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await ub(e,{},(async()=>{const n=Ct({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=db(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",sb.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Ib;return n&&(Xw("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Xw("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Xw("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ib,this.toJSON())}_performRefresh(){return Jw("not implemented")}}function Eb(e,t){Xw("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Sb{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Ow(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new bb(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await vb(this,this.stsTokenManager.getToken(this.auth,e));return Xw(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Dt(e),r=await n.getIdToken(t),i=yb(r);Xw(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:mb(gb(i.auth_time)),issuedAtTime:mb(gb(i.iat)),expirationTime:mb(gb(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Dt(e);await _b(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Xw(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Sb(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Xw(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await _b(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await vb(this,async function(e,t){return lb(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:I}=t;Xw(v&&I,e,"internal-error");const E=Ib.fromJSON(this.name,I);Xw("string"===typeof v,e,"internal-error"),Eb(u,e.name),Eb(h,e.name),Xw("boolean"===typeof w,e,"internal-error"),Xw("boolean"===typeof b,e,"internal-error"),Eb(d,e.name),Eb(f,e.name),Eb(p,e.name),Eb(m,e.name),Eb(g,e.name),Eb(y,e.name);const S=new Sb({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(S.providerData=_.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ib;r.updateFromServerResponse(t);const i=new Sb({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await _b(i),i}}const kb=new Map;function Tb(e){Zw(e instanceof Function,"Expected a class definition");let t=kb.get(e);return t?(Zw(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,kb.set(e,t),t)}class Cb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Cb.type="NONE";const xb=Cb;function Ab(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Nb{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ab(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ab("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Sb._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Nb(Tb(xb),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Tb(xb);const s=Ab(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Sb._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(Fg){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(Fg){}}))),new Nb(i,e,n)):new Nb(i,e,n)}}function Pb(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Lb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ob(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Fb(t))return"Blackberry";if(jb(t))return"Webos";if(Db(t))return"Safari";if((t.includes("chrome/")||Rb(t))&&!t.includes("edge/"))return"Chrome";if(Mb(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ob(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt();return/firefox\//i.test(e)}function Db(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Rb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt();return/crios\//i.test(e)}function Lb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt();return/iemobile/i.test(e)}function Mb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt();return/android/i.test(e)}function Fb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt();return/blackberry/i.test(e)}function jb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt();return/webos/i.test(e)}function Ub(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Vb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt();return Ub(e)||Mb(e)||jb(e)||Fb(e)||/windows phone/i.test(e)||Lb(e)}function zb(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Pb(mt());break;case"Worker":t="".concat(Pb(mt()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Tn,"/").concat(r)}async function Bb(e,t){return lb(e,"GET","/v2/recaptchaConfig",cb(e,t))}function qb(e){return void 0!==e&&void 0!==e.getResponse}function Kb(e){return void 0!==e&&void 0!==e.enterprise}class Wb{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function Gb(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Hw("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Hb(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Qb{constructor(e){this.type="recaptcha-enterprise",this.auth=Jb(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Kb(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Bb(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Wb(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Kb(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Gb("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function $b(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Qb(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class Yb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(CN){r(CN)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(CN){t.reverse();for(const n of t)try{n()}catch(Hk){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===CN||void 0===CN?void 0:CN.message})}}}class Xb{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zb(this),this.idTokenSubscription=new Zb(this),this.beforeStateQueue=new Yb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Tb(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Nb.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(CN){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(CN){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(CN)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Xw(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(CN){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _b(e)}catch(CN){if((null===CN||void 0===CN?void 0:CN.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Dt(e):null;return t&&Xw(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Xw(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Tb(e))}))}async initializeRecaptchaConfig(){const e=await Bb(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new Wb(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new Qb(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new It("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Tb(e)||this._popupRedirectResolver;Xw(t,this,"argument-error"),this.redirectPersistenceManager=await Nb.create(this,[Tb(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Xw(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Xw(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Kw.logLevel<=Vt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Kw.warn("Auth (".concat(Tn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Jb(e){return Dt(e)}class Zb{constructor(e){this.auth=e,this.observer=null,this.addObserver=Nt((e=>this.observer=e))}get next(){return Xw(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function e_(e,t,n){const r=Jb(e);Xw(r._canInitEmulator,r,"emulator-config-failed"),Xw(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=t_(t),{host:o,port:a}=function(e){const t=t_(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:n_(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:n_(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function t_(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function n_(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class r_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Jw("not implemented")}_getIdTokenResponse(e){return Jw("not implemented")}_linkToIdToken(e,t){return Jw("not implemented")}_getReauthenticationResolver(e){return Jw("not implemented")}}async function i_(e,t){return lb(e,"POST","/v1/accounts:resetPassword",cb(e,t))}async function s_(e,t){return lb(e,"POST","/v1/accounts:update",t)}async function o_(e,t){return hb(e,"POST","/v1/accounts:signInWithPassword",cb(e,t))}async function a_(e,t){return lb(e,"POST","/v1/accounts:sendOobCode",cb(e,t))}async function c_(e,t){return a_(e,t)}async function l_(e,t){return a_(e,t)}class u_ extends r_{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new u_(e,t,"password")}static _fromEmailAndCode(e,t){return new u_(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await $b(e,n,"signInWithPassword");return o_(e,t)}return o_(e,n).catch((async t=>{if(t.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await $b(e,n,"signInWithPassword");return o_(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return hb(e,"POST","/v1/accounts:signInWithEmailLink",cb(e,t))}(e,{email:this._email,oobCode:this._password});default:Gw(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return s_(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return hb(e,"POST","/v1/accounts:signInWithEmailLink",cb(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Gw(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function h_(e,t){return hb(e,"POST","/v1/accounts:signInWithIdp",cb(e,t))}class d_ extends r_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new d_(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gw("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Ow(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new d_(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return h_(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,h_(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,h_(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ct(t)}return e}}const f_={USER_NOT_FOUND:"user-not-found"};class p_ extends r_{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new p_({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new p_({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return hb(e,"POST","/v1/accounts:signInWithPhoneNumber",cb(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await hb(e,"POST","/v1/accounts:signInWithPhoneNumber",cb(e,t));if(n.temporaryProof)throw pb(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return hb(e,"POST","/v1/accounts:signInWithPhoneNumber",cb(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),f_)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new p_({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class m_{constructor(e){var t,n,r,i,s,o;const a=xt(At(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Xw(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=xt(At(e)).link,n=t?xt(At(t)).deep_link_id:null,r=xt(At(e)).deep_link_id;return(r?xt(At(r)).link:null)||r||n||t||e}(e);try{return new m_(t)}catch(Fg){return null}}}class g_{constructor(){this.providerId=g_.PROVIDER_ID}static credential(e,t){return u_._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=m_.parseLink(t);return Xw(n,"argument-error"),u_._fromEmailAndCode(e,n.code,n.tenantId)}}g_.PROVIDER_ID="password",g_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g_.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class y_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class v_ extends y_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class w_ extends v_{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Xw("providerId"in t&&"signInMethod"in t,"argument-error"),d_._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Xw(e.idToken||e.accessToken,"argument-error"),d_._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return w_.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return w_.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new w_(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(CN){return null}}}class b_ extends v_{constructor(){super("facebook.com")}static credential(e){return d_._fromParams({providerId:b_.PROVIDER_ID,signInMethod:b_.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return b_.credentialFromTaggedObject(e)}static credentialFromError(e){return b_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return b_.credential(t.oauthAccessToken)}catch(Fg){return null}}}b_.FACEBOOK_SIGN_IN_METHOD="facebook.com",b_.PROVIDER_ID="facebook.com";class __ extends v_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return d_._fromParams({providerId:__.PROVIDER_ID,signInMethod:__.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return __.credentialFromTaggedObject(e)}static credentialFromError(e){return __.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return __.credential(n,r)}catch(Fg){return null}}}__.GOOGLE_SIGN_IN_METHOD="google.com",__.PROVIDER_ID="google.com";class I_ extends v_{constructor(){super("github.com")}static credential(e){return d_._fromParams({providerId:I_.PROVIDER_ID,signInMethod:I_.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return I_.credentialFromTaggedObject(e)}static credentialFromError(e){return I_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return I_.credential(t.oauthAccessToken)}catch(Fg){return null}}}I_.GITHUB_SIGN_IN_METHOD="github.com",I_.PROVIDER_ID="github.com";class E_ extends r_{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return h_(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,h_(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,h_(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new E_(n,i):null}static _create(e,t){return new E_(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class S_ extends y_{constructor(e){Xw(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return S_.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return S_.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=E_.fromJSON(e);return Xw(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return E_._create(r,n)}catch(CN){return null}}}class k_ extends v_{constructor(){super("twitter.com")}static credential(e,t){return d_._fromParams({providerId:k_.PROVIDER_ID,signInMethod:k_.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return k_.credentialFromTaggedObject(e)}static credentialFromError(e){return k_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return k_.credential(n,r)}catch(Fg){return null}}}async function T_(e,t){return hb(e,"POST","/v1/accounts:signUp",cb(e,t))}k_.TWITTER_SIGN_IN_METHOD="twitter.com",k_.PROVIDER_ID="twitter.com";class C_{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Sb._fromIdTokenResponse(e,n,r),s=x_(n);return new C_({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=x_(n);return new C_({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function x_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class A_ extends _t{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,A_.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new A_(e,t,n,r)}}function N_(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw A_._fromErrorAndOperation(e,n,t,r);throw n}))}function P_(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function O_(e,t){const n=Dt(e);await R_(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return lb(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=P_(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function D_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await vb(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return C_._forOperation(e,"link",r)}async function R_(e,t,n){await _b(t);const r=!1===e?"provider-already-linked":"no-such-provider";Xw(P_(t.providerData).has(n)===e,t.auth,r)}async function L_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await vb(e,N_(r,i,t,e),n);Xw(s.idToken,r,"internal-error");const o=yb(s.idToken);Xw(o,r,"internal-error");const{sub:a}=o;return Xw(e.uid===a,r,"user-mismatch"),C_._forOperation(e,i,s)}catch(CN){throw(null===CN||void 0===CN?void 0:CN.code)==="auth/".concat("user-not-found")&&Gw(r,"user-mismatch"),CN}}async function M_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await N_(e,r,t),s=await C_._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function F_(e,t){return M_(Jb(e),t)}async function j_(e,t){const n=Dt(e);return await R_(!1,n,t.providerId),D_(n,t)}async function U_(e,t){return L_(Dt(e),t)}async function V_(e,t){const n=Jb(e),r=await async function(e,t){return hb(e,"POST","/v1/accounts:signInWithCustomToken",cb(e,t))}(n,{token:t,returnSecureToken:!0}),i=await C_._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class z_{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?B_._fromServerResponse(e,t):"totpInfo"in t?q_._fromServerResponse(e,t):Gw(e,"internal-error")}}class B_ extends z_{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new B_(t)}}class q_ extends z_{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new q_(t)}}function K_(e,t,n){var r;Xw((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Xw("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Xw(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Xw(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function W_(e,t){await async function(e,t){return lb(e,"POST","/v1/accounts:update",cb(e,t))}(Dt(e),{oobCode:t})}async function G_(e,t){const n=Dt(e),r=await i_(n,{oobCode:t}),i=r.requestType;switch(Xw(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Xw(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Xw(r.mfaInfo,n,"internal-error");default:Xw(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=z_._fromServerResponse(Jb(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function H_(e,t){const n={identifier:t,continueUri:tb()?eb():"http://localhost"},{signinMethods:r}=await async function(e,t){return lb(e,"POST","/v1/accounts:createAuthUri",cb(e,t))}(Dt(e),n);return r||[]}async function Q_(e,t){const n=Dt(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&K_(n.auth,r,t);const{email:i}=await async function(e,t){return a_(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function $_(e,t,n){const r=Dt(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&K_(r.auth,i,n);const{email:s}=await async function(e,t){return a_(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function Y_(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Dt(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await vb(i,async function(e,t){return lb(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function X_(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await vb(e,s_(r,i));await e._updateTokensIfNecessary(s,!0)}class J_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Z_ extends J_{constructor(e,t,n,r){super(e,t,n),this.username=r}}class eI extends J_{constructor(e,t){super(e,"facebook.com",t)}}class tI extends Z_{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class nI extends J_{constructor(e,t){super(e,"google.com",t)}}class rI extends Z_{constructor(e,t,n){super(e,"twitter.com",t,n)}}function iI(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=yb(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new J_(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new eI(s,i);case"github.com":return new tI(s,i);case"google.com":return new nI(s,i);case"twitter.com":return new rI(s,i,e.screenName||null);case"custom":case"anonymous":return new J_(s,null);default:return new J_(s,r,i)}}(n)}class sI{constructor(e,t,n){this.type=e,this.credential=t,this.auth=n}static _fromIdtoken(e,t){return new sI("enroll",e,t)}static _fromMfaPendingCredential(e){return new sI("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return sI._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return sI._fromIdtoken(e.multiFactorSession.idToken)}return null}}class oI{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Jb(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>z_._fromServerResponse(n,e)));Xw(r.mfaPendingCredential,n,"internal-error");const s=sI._fromMfaPendingCredential(r.mfaPendingCredential);return new oI(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await C_._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Xw(t.user,n,"internal-error"),C_._forOperation(t.user,t.operationType,o);default:Gw(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class aI{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>z_._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new aI(e)}async getSession(){return sI._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,t){const n=e,r=await this.getSession(),i=await vb(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await vb(this.user,function(e,t){return lb(e,"POST","/v2/accounts/mfaEnrollment:withdraw",cb(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(CN){throw CN}}}const cI=new WeakMap;const lI="__sak";class uI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(lI,"1"),this.storage.removeItem(lI),Promise.resolve(!0)):Promise.resolve(!1)}catch(Fg){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class hI extends uI{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=mt();return Db(e)||Ub(e)}()&&function(){try{return!(!window||window===window.top)}catch(CN){return!1}}(),this.fallbackToPolling=Vb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);wt()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}hI.type="LOCAL";const dI=hI;class fI extends uI{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fI.type="SESSION";const pI=fI;class mI{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new mI(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function gI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}mI.receivers=[];class yI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=gI("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function vI(){return window}function wI(){return"undefined"!==typeof vI().WorkerGlobalScope&&"function"===typeof vI().importScripts}const bI="firebaseLocalStorageDb",_I="firebaseLocalStorage",II="fbase_key";class EI{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function SI(e,t){return e.transaction([_I],t?"readwrite":"readonly").objectStore(_I)}function kI(){const e=indexedDB.open(bI,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(_I,{keyPath:II})}catch(CN){n(CN)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(_I)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(bI);return new EI(e).toPromise()}(),t(await kI()))}))}))}async function TI(e,t,n){const r=SI(e,!0).put({[II]:t,value:n});return new EI(r).toPromise()}function CI(e,t){const n=SI(e,!0).delete(t);return new EI(n).toPromise()}class xI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await kI()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(CN){if(t++>3)throw CN;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mI._getInstance(wI()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new yI(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(Fg){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kI();return await TI(e,lI,"1"),await CI(e,lI),!0}catch(Fg){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>TI(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=SI(e,!1).get(t),r=await new EI(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>CI(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=SI(e,!1).getAll();return new EI(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}xI.type="LOCAL";const AI=xI;const NI=1e12;class PI{constructor(e){this.auth=e,this.counter=NI,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new OI(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||NI;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||NI;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||NI;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class OI{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Xw(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(CN){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(CN){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const DI=Hb("rcb"),RI=new rb(3e4,6e4);class LI{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=vI().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Xw(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&qb(vI().grecaptcha)?Promise.resolve(vI().grecaptcha):new Promise(((n,r)=>{const i=vI().setTimeout((()=>{r(Hw(e,"network-request-failed"))}),RI.get());vI()[DI]=()=>{vI().clearTimeout(i),delete vI()[DI];const s=vI().grecaptcha;if(!s||!qb(s))return void r(Hw(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Gb("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Ct({onload:DI,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(Hw(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=vI().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class MI{async load(e){return new PI(e)}clearedOneInstance(){}}const FI="recaptcha",jI={theme:"light",type:"image"};class UI{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},jI),n=arguments.length>2?arguments[2]:void 0;this.parameters=t,this.type=FI,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Jb(n),this.isInvisible="invisible"===this.parameters.size,Xw("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof e?document.getElementById(e):e;Xw(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new MI:new LI,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(CN){return Promise.reject(CN)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Xw(!this.parameters.sitekey,this.auth,"argument-error"),Xw(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Xw("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=vI()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Xw(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Xw(tb()&&!wI(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await lb(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Xw(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Xw(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class VI{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=p_._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function zI(e,t,n){var r;const i=await n.verify();try{let s;if(Xw("string"===typeof i,e,"argument-error"),Xw(n.type===FI,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Xw("enroll"===t.type,e,"internal-error");const n=await function(e,t){return lb(e,"POST","/v2/accounts/mfaEnrollment:start",cb(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Xw("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Xw(n,e,"missing-multi-factor-info");const o=await function(e,t){return lb(e,"POST","/v2/accounts/mfaSignIn:start",cb(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return lb(e,"POST","/v1/accounts:sendVerificationCode",cb(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class BI{constructor(e){this.providerId=BI.PROVIDER_ID,this.auth=Jb(e)}verifyPhoneNumber(e,t){return zI(this.auth,e,Dt(t))}static credential(e,t){return p_._fromVerification(e,t)}static credentialFromResult(e){const t=e;return BI.credentialFromTaggedObject(t)}static credentialFromError(e){return BI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?p_._fromTokenResponse(n,r):null}}function qI(e,t){return t?Tb(t):(Xw(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}BI.PROVIDER_ID="phone",BI.PHONE_SIGN_IN_METHOD="phone";class KI extends r_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return h_(e,this._buildIdpRequest())}_linkToIdToken(e,t){return h_(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return h_(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function WI(e){return M_(e.auth,new KI(e),e.bypassAuthState)}function GI(e){const{auth:t,user:n}=e;return Xw(n,t,"internal-error"),L_(n,new KI(e),e.bypassAuthState)}async function HI(e){const{auth:t,user:n}=e;return Xw(n,t,"internal-error"),D_(n,new KI(e),e.bypassAuthState)}class QI{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(CN){this.reject(CN)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(CN){this.reject(CN)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WI;case"linkViaPopup":case"linkViaRedirect":return HI;case"reauthViaPopup":case"reauthViaRedirect":return GI;default:Gw(this.auth,"internal-error")}}resolve(e){Zw(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zw(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $I=new rb(2e3,1e4);class YI extends QI{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,YI.currentPopupAction&&YI.currentPopupAction.cancel(),YI.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Xw(e,this.auth,"internal-error"),e}async onExecution(){Zw(1===this.filter.length,"Popup operations only handle one event");const e=gI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Hw(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Hw(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,YI.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Hw(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,$I.get())};e()}}YI.currentPopupAction=null;const XI="pendingRedirect",JI=new Map;class ZI extends QI{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=JI.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=rE(t),r=nE(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(CN){e=()=>Promise.reject(CN)}JI.set(this.auth._key(),e)}return this.bypassAuthState||JI.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function eE(e,t){return nE(e)._set(rE(t),"true")}function tE(e,t){JI.set(e._key(),t)}function nE(e){return Tb(e._redirectPersistence)}function rE(e){return Ab(XI,e.config.apiKey,e.name)}function iE(e,t,n){return async function(e,t,n){const r=Jb(e);$w(e,t,y_),await r._initializationPromise;const i=qI(r,n);return await eE(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function sE(e,t,n){return async function(e,t,n){const r=Dt(e);$w(r.auth,t,y_),await r.auth._initializationPromise;const i=qI(r.auth,n);await eE(i,r.auth);const s=await cE(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function oE(e,t,n){return async function(e,t,n){const r=Dt(e);$w(r.auth,t,y_),await r.auth._initializationPromise;const i=qI(r.auth,n);await R_(!1,r,t.providerId),await eE(i,r.auth);const s=await cE(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function aE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Jb(e),i=qI(r,t),s=new ZI(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function cE(e){const t=gI("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class lE{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hE(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!hE(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Hw(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(uE(e))}saveEventToCache(e){this.cachedEventUids.add(uE(e)),this.lastProcessedEventTime=Date.now()}}function uE(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function hE(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function dE(e){return lb(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const fE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pE=/^https?/;function mE(e){const t=eb(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!pE.test(n))return!1;if(fE.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const gE=new rb(3e4,6e4);function yE(){const e=vI().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let vE=null;function wE(e){return vE=vE||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){yE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{yE(),n(Hw(e,"network-request-failed"))},timeout:gE.get()})}if(null===(i=null===(r=vI().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=vI().gapi)||void 0===s?void 0:s.load)){const t=Hb("iframefcb");return vI()[t]=()=>{gapi.load?o():n(Hw(e,"network-request-failed"))},Gb("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw vE=null,e}))}(e),vE}const bE=new rb(5e3,15e3),_E="__/auth/iframe",IE="emulator/auth/iframe",EE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kE(e){const t=e.config;Xw(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ib(t,IE):"https://".concat(e.config.authDomain,"/").concat(_E),r={apiKey:t.apiKey,appName:e.name,v:Tn},i=SE.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Ct(r).slice(1))}const TE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class CE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(CN){}}}function xE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},TE),{width:r.toString(),height:i.toString(),top:s,left:o}),l=mt().toLowerCase();n&&(a=Rb(l)?"_blank":n),Ob(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Ub(arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new CE(null);const h=window.open(t||"",a,u);Xw(h,e,"popup-blocked");try{h.focus()}catch(CN){}return new CE(h)}const AE="__/auth/handler",NE="emulator/auth/handler",PE=encodeURIComponent("fac");async function OE(e,t,n,r,i,s){Xw(e.config.authDomain,e,"auth-domain-config-required"),Xw(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Tn,eventId:i};if(t instanceof y_){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof v_){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=await e._getAppCheckToken(),l=c?"#".concat(PE,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(AE);return ib(t,NE)}(e),"?").concat(Ct(a).slice(1)).concat(l)}const DE="webStorageSupport";const RE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pI,this._completeRedirectFn=aE,this._overrideRedirectResult=tE}async _openPopup(e,t,n,r){var i;Zw(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return xE(e,await OE(e,t,n,eb(),r),gI())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){vI().location.href=e}(await OE(e,t,n,eb(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Zw(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await wE(e),n=vI().gapi;return Xw(n,e,"internal-error"),t.open({where:document.body,url:kE(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:EE,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Hw(e,"network-request-failed"),s=vI().setTimeout((()=>{r(i)}),bE.get());function o(){vI().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new lE(e);return t.register("authEvent",(t=>{Xw(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(DE,{type:DE},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[DE];void 0!==i&&t(!!i),Gw(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await dE(e);for(const n of t)try{if(mE(n))return}catch(Fg){}Gw(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Vb()||Db()||Ub()}};class LE{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Jw("unexpected MultiFactorSessionType")}}}class ME extends LE{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ME(e)}_finalizeEnroll(e,t,n){return function(e,t){return lb(e,"POST","/v2/accounts/mfaEnrollment:finalize",cb(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return lb(e,"POST","/v2/accounts/mfaSignIn:finalize",cb(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class FE{constructor(){}static assertion(e){return ME._fromCredential(e)}}FE.FACTOR_ID="phone";var jE="@firebase/auth",UE="0.23.2";class VE{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Xw(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=dt())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var zE;function BE(){return window}zE="Browser",bn(new Rt("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Xw(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:zE,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zb(zE)},l=new Xb(r,i,s,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Tb);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),bn(new Rt("auth-internal",(e=>(e=>new VE(e))(Jb(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Pn(jE,UE,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(zE)),Pn(jE,UE,"esm2017");async function qE(e,t,n){var r;const{BuildInfo:i}=BE();Zw(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Zw(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return Ub()?o.ibi=i.packageName:Mb()?o.apn=i.packageName:Gw(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,OE(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function KE(e){const{cordova:t}=BE();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const WE=20;class GE extends lE{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function HE(e){const t=await YE()._get(XE(e));return t&&await YE()._remove(XE(e)),t}function QE(e,t){var n,r;const i=function(e){const t=JE(e),n=t.link?decodeURIComponent(t.link):void 0,r=JE(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return JE(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=JE(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(CN){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Hw(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function $E(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<WE;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function YE(){return Tb(dI)}function XE(e){return Ab("authEvent",e.config.apiKey,e.name)}function JE(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return xt(n.join("?"))}const ZE=class{constructor(){this._redirectPersistence=pI,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=aE,this._overrideRedirectResult=tE}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new GE(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Gw(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,c,l,u;const h=BE();Xw("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Xw("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Xw("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Xw("function"===typeof(null===(c=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Xw("function"===typeof(null===(u=null===(l=null===h||void 0===h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),JI.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:$E(),postBody:null,tenantId:e.tenantId,error:Hw(e,"no-auth-event")}}(e,n,r);await function(e,t){return YE()._set(XE(e),t)}(e,s);const o=await qE(e,s,t);return async function(e,t,n){const{cordova:r}=BE();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{o(Hw(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),Mb()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await KE(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=BE(),n={};Ub()?n.iosBundleId=t.packageName:Mb()?n.androidPackageName=t.packageName:Gw(e,"operation-not-supported-in-this-environment"),await dE(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=BE(),s=setTimeout((async()=>{await HE(e),t.onEvent(eS())}),500),o=async n=>{clearTimeout(s);const r=await HE(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=QE(r,n.url)),t.onEvent(i||eS())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,c="".concat(i.packageName.toLowerCase(),"://");BE().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&o({url:e}),"function"===typeof a)try{a(e)}catch(CN){console.error(CN)}}}};function eS(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Hw("no-auth-event")}}function tS(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function nS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt();return!("file:"!==tS()&&"ionic:"!==tS()&&"capacitor:"!==tS()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function rS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt();return wt()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt();return/Edge\/\d+/.test(e)}(e)}function iS(){try{const e=self.localStorage,t=gI();if(e)return e.setItem(t,"1"),e.removeItem(t),!rS()||bt()}catch(CN){return sS()&&bt()}return!1}function sS(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function oS(){return("http:"===tS()||"https:"===tS()||yt()||nS())&&!(vt()||gt())&&iS()&&!sS()}function aS(){return nS()&&"undefined"!==typeof document}const cS={LOCAL:"local",NONE:"none",SESSION:"session"},lS=Xw,uS="persistence";async function hS(e){await e._initializationPromise;const t=dS(),n=Ab(uS,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function dS(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(CN){return null}}const fS=Xw;class pS{constructor(){this.browserResolver=Tb(RE),this.cordovaResolver=Tb(ZE),this.underlyingResolver=null,this._redirectPersistence=pI,this._completeRedirectFn=aE,this._overrideRedirectResult=tE}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return aS()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return fS(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!aS()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function mS(e){return e.unwrap()}function gS(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new bS(e,function(e,t){var n;const r=Dt(e),i=t;return Xw(t.customData.operationType,r,"argument-error"),Xw(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),oI._fromError(r,i)}(e,t))}else if(r){const e=yS(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function yS(e){const{_tokenResponse:t}=e instanceof _t?e.customData:e;if(!t)return null;if(!(e instanceof _t)&&"temporaryProof"in t&&"phoneNumber"in t)return BI.credentialFromResult(e);const n=t.providerId;if(!n||n===Dw.PASSWORD)return null;let r;switch(n){case Dw.GOOGLE:r=__;break;case Dw.FACEBOOK:r=b_;break;case Dw.GITHUB:r=I_;break;case Dw.TWITTER:r=k_;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?E_._create(n,o):d_._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new w_(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof _t?r.credentialFromError(e):r.credentialFromResult(e)}function vS(e,t){return t.catch((t=>{throw t instanceof _t&&gS(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,yS(r)),additionalUserInfo:iI(e),user:_S.getOrCreate(n)};var r}))}async function wS(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>vS(e,n.confirm(t))}}class bS{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return vS(mS(this.auth),this.resolver.resolveSignIn(e))}}class _S{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Dt(e);return cI.has(t)||cI.set(t,aI._fromUser(t)),cI.get(t)}(e)}static getOrCreate(e){return _S.USER_MAP.has(e)||_S.USER_MAP.set(e,new _S(e)),_S.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return vS(this.auth,j_(this._delegate,e))}async linkWithPhoneNumber(e,t){return wS(this.auth,async function(e,t,n){const r=Dt(e);await R_(!1,r,"phone");const i=await zI(r.auth,t,Dt(n));return new VI(i,(e=>j_(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return vS(this.auth,async function(e,t,n){const r=Dt(e);$w(r.auth,t,y_);const i=qI(r.auth,n);return new YI(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,pS))}async linkWithRedirect(e){return await hS(Jb(this.auth)),oE(this._delegate,e,pS)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return vS(this.auth,U_(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return wS(this.auth,async function(e,t,n){const r=Dt(e),i=await zI(r.auth,t,Dt(n));return new VI(i,(e=>U_(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return vS(this.auth,async function(e,t,n){const r=Dt(e);$w(r.auth,t,y_);const i=qI(r.auth,n);return new YI(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,pS))}async reauthenticateWithRedirect(e){return await hS(Jb(this.auth)),sE(this._delegate,e,pS)}sendEmailVerification(e){return Q_(this._delegate,e)}async unlink(e){return await O_(this._delegate,e),this}updateEmail(e){return function(e,t){return X_(Dt(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return X_(Dt(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await D_(Dt(e),t)}(this._delegate,e)}updateProfile(e){return Y_(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return $_(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}_S.USER_MAP=new WeakMap;const IS=Xw;class ES{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;IS(n,"invalid-api-key",{appName:e.name}),IS(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?pS:void 0;this._delegate=t.initialize({options:{persistence:kS(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(zw),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?_S.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){e_(this._delegate,e,t)}applyActionCode(e){return W_(this._delegate,e)}checkActionCode(e){return G_(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await i_(Dt(e),{oobCode:t,newPassword:n})}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return vS(this._delegate,async function(e,t,n){var r;const i=Jb(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await $b(i,s,"signUpPassword");o=T_(i,e)}else o=T_(i,s).catch((async e=>{if(e.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await $b(i,s,"signUpPassword");return T_(i,e)}return Promise.reject(e)}));const a=await o.catch((e=>Promise.reject(e))),c=await C_._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(c.user),c}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return H_(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=m_.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){IS(oS(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Jb(e)._initializationPromise,aE(e,t,!1)}(this._delegate,pS);return e?vS(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Jb(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=SS(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=SS(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){var r;const i=Jb(e),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function o(e,t){Xw(t.handleCodeInApp,i,"argument-error"),t&&K_(i,e,t)}if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await $b(i,s,"getOobCode",!0);o(e,n),await l_(i,e)}else o(s,n),await l_(i,s).catch((async e=>{if(e.code!=="auth/".concat("missing-recaptcha-token"))return Promise.reject(e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const e=await $b(i,s,"getOobCode",!0);o(e,n),await l_(i,e)}}))}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){var r;const i=Jb(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await $b(i,s,"getOobCode",!0);n&&K_(i,e,n),await c_(i,e)}else n&&K_(i,s,n),await c_(i,s).catch((async e=>{if(e.code!=="auth/".concat("missing-recaptcha-token"))return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const e=await $b(i,s,"getOobCode",!0);n&&K_(i,e,n),await c_(i,e)}}))}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){lS(Object.values(cS).includes(t),e,"invalid-persistence-type"),vt()?lS(t!==cS.SESSION,e,"unsupported-persistence-type"):gt()?lS(t===cS.NONE,e,"unsupported-persistence-type"):sS()?lS(t===cS.NONE||t===cS.LOCAL&&bt(),e,"unsupported-persistence-type"):lS(t===cS.NONE||iS(),e,"unsupported-persistence-type")}(this._delegate,e),e){case cS.SESSION:t=pI;break;case cS.LOCAL:t=await Tb(AI)._isAvailable()?AI:dI;break;case cS.NONE:t=xb;break;default:return Gw("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return vS(this._delegate,async function(e){var t;const n=Jb(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new C_({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await T_(n,{returnSecureToken:!0}),i=await C_._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return vS(this._delegate,F_(this._delegate,e))}signInWithCustomToken(e){return vS(this._delegate,V_(this._delegate,e))}signInWithEmailAndPassword(e,t){return vS(this._delegate,function(e,t,n){return F_(Dt(e),g_.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return vS(this._delegate,async function(e,t,n){const r=Dt(e),i=g_.credentialWithLink(t,n||eb());return Xw(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),F_(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return wS(this._delegate,async function(e,t,n){const r=Jb(e),i=await zI(r,t,Dt(n));return new VI(i,(e=>F_(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return IS(oS(),this._delegate,"operation-not-supported-in-this-environment"),vS(this._delegate,async function(e,t,n){const r=Jb(e);$w(e,t,y_);const i=qI(r,n);return new YI(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,pS))}async signInWithRedirect(e){return IS(oS(),this._delegate,"operation-not-supported-in-this-environment"),await hS(this._delegate),iE(this._delegate,e,pS)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await G_(Dt(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function SS(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&_S.getOrCreate(e)),error:t,complete:n}}function kS(e,t){const n=function(e,t){const n=dS();if(!n)return[];const r=Ab(uS,e,t);switch(n.getItem(r)){case cS.NONE:return[xb];case cS.LOCAL:return[AI,pI];case cS.SESSION:return[pI];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(AI)||n.push(AI),"undefined"!==typeof window)for(const r of[dI,pI])n.includes(r)||n.push(r);return n.includes(xb)||n.push(xb),n}ES.Persistence=cS;class TS{constructor(){this.providerId="phone",this._delegate=new BI(mS(Yn.auth()))}static credential(e,t){return BI.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}TS.PHONE_SIGN_IN_METHOD=BI.PHONE_SIGN_IN_METHOD,TS.PROVIDER_ID=BI.PROVIDER_ID;const CS=Xw;class xS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yn.app();var r;CS(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new UI(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new Rt("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new ES(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Rw,PASSWORD_RESET:Lw,RECOVER_EMAIL:Mw,REVERT_SECOND_FACTOR_ADDITION:Fw,VERIFY_AND_CHANGE_EMAIL:jw,VERIFY_EMAIL:Uw}},EmailAuthProvider:g_,FacebookAuthProvider:b_,GithubAuthProvider:I_,GoogleAuthProvider:__,OAuthProvider:w_,SAMLAuthProvider:S_,PhoneAuthProvider:TS,PhoneMultiFactorGenerator:FE,RecaptchaVerifier:xS,TwitterAuthProvider:k_,Auth:ES,AuthCredential:r_,Error:_t}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.4.2")}(Yn);const AS=async(e,t)=>{if(!e)return;const n=PS.doc("users/".concat(e.uid));if(!(await n.get()).exists){const{displayName:i,email:s}=e,o=new Date;try{await n.set({displayName:i,email:s,createAt:o,...t})}catch(r){console.log("error creating user: ",r.message)}}return n};Yn.initializeApp({apiKey:"AIzaSyAWo9SvxOW4qvYf-iyFg8Tq1ZYNzhmJ5GM",authDomain:"booksuggester-94bd1.firebaseapp.com",projectId:"booksuggester-94bd1",storageBucket:"booksuggester-94bd1.appspot.com",messagingSenderId:"1083435225479",appId:"1:1083435225479:web:2b08b2b9011a5be26cc322",measurementId:"G-G9Q0SQZYFS"});const NS=Yn.auth(),PS=Yn.firestore(),OS=new Yn.auth.GoogleAuthProvider;OS.setCustomParameters({prompt:"select_account"});const DS=n.p+"static/media/empty.d8b54aebec93fdf83b956c93284bfcb7.svg";const RS=function(e){return(0,o.jsx)("img",{src:DS,alt:"",style:{height:"80px"}})};var LS=function(){return LS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},LS.apply(this,arguments)};Object.create;function MS(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var FS=n(324),jS=n.n(FS),US="-ms-",VS="-moz-",zS="-webkit-",BS="comm",qS="rule",KS="decl",WS="@import",GS="@keyframes",HS="@layer",QS=Math.abs,$S=String.fromCharCode,YS=Object.assign;function XS(e){return e.trim()}function JS(e,t){return(e=t.exec(e))?e[0]:e}function ZS(e,t,n){return e.replace(t,n)}function ek(e,t,n){return e.indexOf(t,n)}function tk(e,t){return 0|e.charCodeAt(t)}function nk(e,t,n){return e.slice(t,n)}function rk(e){return e.length}function ik(e){return e.length}function sk(e,t){return t.push(e),e}function ok(e,t){return e.filter((function(e){return!JS(e,t)}))}var ak=1,ck=1,lk=0,uk=0,hk=0,dk="";function fk(e,t,n,r,i,s,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:ak,column:ck,length:o,return:"",siblings:a}}function pk(e,t){return YS(fk("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function mk(e){for(;e.root;)e=pk(e.root,{children:[e]});sk(e,e.siblings)}function gk(){return hk=uk>0?tk(dk,--uk):0,ck--,10===hk&&(ck=1,ak--),hk}function yk(){return hk=uk<lk?tk(dk,uk++):0,ck++,10===hk&&(ck=1,ak++),hk}function vk(){return tk(dk,uk)}function wk(){return uk}function bk(e,t){return nk(dk,e,t)}function _k(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Ik(e){return ak=ck=1,lk=rk(dk=e),uk=0,[]}function Ek(e){return dk="",e}function Sk(e){return XS(bk(uk-1,Ck(91===e?e+2:40===e?e+1:e)))}function kk(e){for(;(hk=vk())&&hk<33;)yk();return _k(e)>2||_k(hk)>3?"":" "}function Tk(e,t){for(;--t&&yk()&&!(hk<48||hk>102||hk>57&&hk<65||hk>70&&hk<97););return bk(e,wk()+(t<6&&32==vk()&&32==yk()))}function Ck(e){for(;yk();)switch(hk){case e:return uk;case 34:case 39:34!==e&&39!==e&&Ck(hk);break;case 40:41===e&&Ck(e);break;case 92:yk()}return uk}function xk(e,t){for(;yk()&&e+hk!==57&&(e+hk!==84||47!==vk()););return"/*"+bk(t,uk-1)+"*"+$S(47===e?e:yk())}function Ak(e){for(;!_k(vk());)yk();return bk(e,uk)}function Nk(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function Pk(e,t,n,r){switch(e.type){case HS:if(e.children.length)break;case WS:case KS:return e.return=e.return||e.value;case BS:return"";case GS:return e.return=e.value+"{"+Nk(e.children,r)+"}";case qS:if(!rk(e.value=e.props.join(",")))return""}return rk(n=Nk(e.children,r))?e.return=e.value+"{"+n+"}":""}function Ok(e,t,n){switch(function(e,t){return 45^tk(e,0)?(((t<<2^tk(e,0))<<2^tk(e,1))<<2^tk(e,2))<<2^tk(e,3):0}(e,t)){case 5103:return zS+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return zS+e+e;case 4789:return VS+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return zS+e+VS+e+US+e+e;case 5936:switch(tk(e,t+11)){case 114:return zS+e+US+ZS(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return zS+e+US+ZS(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return zS+e+US+ZS(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return zS+e+US+e+e;case 6165:return zS+e+US+"flex-"+e+e;case 5187:return zS+e+ZS(e,/(\w+).+(:[^]+)/,zS+"box-$1$2"+US+"flex-$1$2")+e;case 5443:return zS+e+US+"flex-item-"+ZS(e,/flex-|-self/g,"")+(JS(e,/flex-|baseline/)?"":US+"grid-row-"+ZS(e,/flex-|-self/g,""))+e;case 4675:return zS+e+US+"flex-line-pack"+ZS(e,/align-content|flex-|-self/g,"")+e;case 5548:return zS+e+US+ZS(e,"shrink","negative")+e;case 5292:return zS+e+US+ZS(e,"basis","preferred-size")+e;case 6060:return zS+"box-"+ZS(e,"-grow","")+zS+e+US+ZS(e,"grow","positive")+e;case 4554:return zS+ZS(e,/([^-])(transform)/g,"$1"+zS+"$2")+e;case 6187:return ZS(ZS(ZS(e,/(zoom-|grab)/,zS+"$1"),/(image-set)/,zS+"$1"),e,"")+e;case 5495:case 3959:return ZS(e,/(image-set\([^]*)/,zS+"$1$`$1");case 4968:return ZS(ZS(e,/(.+:)(flex-)?(.*)/,zS+"box-pack:$3"+US+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+zS+e+e;case 4200:if(!JS(e,/flex-|baseline/))return US+"grid-column-align"+nk(e,t)+e;break;case 2592:case 3360:return US+ZS(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,JS(e.props,/grid-\w+-end/)}))?~ek(e+(n=n[t].value),"span",0)?e:US+ZS(e,"-start","")+e+US+"grid-row-span:"+(~ek(n,"span",0)?JS(n,/\d+/):+JS(n,/\d+/)-+JS(e,/\d+/))+";":US+ZS(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return JS(e.props,/grid-\w+-start/)}))?e:US+ZS(ZS(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return ZS(e,/(.+)-inline(.+)/,zS+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(rk(e)-1-t>6)switch(tk(e,t+1)){case 109:if(45!==tk(e,t+4))break;case 102:return ZS(e,/(.+:)(.+)-([^]+)/,"$1"+zS+"$2-$3$1"+VS+(108==tk(e,t+3)?"$3":"$2-$3"))+e;case 115:return~ek(e,"stretch",0)?Ok(ZS(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return ZS(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,r,i,s,o,a){return US+n+":"+r+a+(i?US+n+"-span:"+(s?o:+o-+r)+a:"")+e}));case 4949:if(121===tk(e,t+6))return ZS(e,":",":"+zS)+e;break;case 6444:switch(tk(e,45===tk(e,14)?18:11)){case 120:return ZS(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+zS+(45===tk(e,14)?"inline-":"")+"box$3$1"+zS+"$2$3$1"+US+"$2box$3")+e;case 100:return ZS(e,":",":"+US)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return ZS(e,"scroll-","scroll-snap-")+e}return e}function Dk(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case KS:return void(e.return=Ok(e.value,e.length,n));case GS:return Nk([pk(e,{value:ZS(e.value,"@","@"+zS)})],r);case qS:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(JS(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":mk(pk(e,{props:[ZS(t,/:(read-\w+)/,":"+VS+"$1")]})),mk(pk(e,{props:[t]})),YS(e,{props:ok(n,r)});break;case"::placeholder":mk(pk(e,{props:[ZS(t,/:(plac\w+)/,":"+zS+"input-$1")]})),mk(pk(e,{props:[ZS(t,/:(plac\w+)/,":"+VS+"$1")]})),mk(pk(e,{props:[ZS(t,/:(plac\w+)/,US+"input-$1")]})),mk(pk(e,{props:[t]})),YS(e,{props:ok(n,r)})}return""}))}}function Rk(e){return Ek(Lk("",null,null,null,[""],e=Ik(e),0,[0],e))}function Lk(e,t,n,r,i,s,o,a,c){for(var l=0,u=0,h=o,d=0,f=0,p=0,m=1,g=1,y=1,v=0,w="",b=i,_=s,I=r,E=w;g;)switch(p=v,v=yk()){case 40:if(108!=p&&58==tk(E,h-1)){-1!=ek(E+=ZS(Sk(v),"&","&\f"),"&\f",QS(l?a[l-1]:0))&&(y=-1);break}case 34:case 39:case 91:E+=Sk(v);break;case 9:case 10:case 13:case 32:E+=kk(p);break;case 92:E+=Tk(wk()-1,7);continue;case 47:switch(vk()){case 42:case 47:sk(Fk(xk(yk(),wk()),t,n,c),c);break;default:E+="/"}break;case 123*m:a[l++]=rk(E)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+u:-1==y&&(E=ZS(E,/\f/g,"")),f>0&&rk(E)-h&&sk(f>32?jk(E+";",r,n,h-1,c):jk(ZS(E," ","")+";",r,n,h-2,c),c);break;case 59:E+=";";default:if(sk(I=Mk(E,t,n,l,u,i,a,w,b=[],_=[],h,s),s),123===v)if(0===u)Lk(E,t,I,I,b,s,h,a,_);else switch(99===d&&110===tk(E,3)?100:d){case 100:case 108:case 109:case 115:Lk(e,I,I,r&&sk(Mk(e,I,I,0,0,i,a,w,i,b=[],h,_),_),i,_,h,a,r?b:_);break;default:Lk(E,I,I,I,[""],_,0,a,_)}}l=u=f=0,m=y=1,w=E="",h=o;break;case 58:h=1+rk(E),f=p;default:if(m<1)if(123==v)--m;else if(125==v&&0==m++&&125==gk())continue;switch(E+=$S(v),v*m){case 38:y=u>0?1:(E+="\f",-1);break;case 44:a[l++]=(rk(E)-1)*y,y=1;break;case 64:45===vk()&&(E+=Sk(yk())),d=vk(),u=h=rk(w=E+=Ak(wk())),v++;break;case 45:45===p&&2==rk(E)&&(m=0)}}return s}function Mk(e,t,n,r,i,s,o,a,c,l,u,h){for(var d=i-1,f=0===i?s:[""],p=ik(f),m=0,g=0,y=0;m<r;++m)for(var v=0,w=nk(e,d+1,d=QS(g=o[m])),b=e;v<p;++v)(b=XS(g>0?f[v]+" "+w:ZS(w,/&\f/g,f[v])))&&(c[y++]=b);return fk(e,t,n,0===i?qS:a,c,l,u,h)}function Fk(e,t,n,r){return fk(e,t,n,BS,$S(hk),nk(e,2,-2),0,r)}function jk(e,t,n,r,i){return fk(e,t,n,KS,nk(e,0,r),nk(e,r+1,-1),r,i)}const Uk={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var Vk="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",zk="active",Bk="data-styled-version",qk="6.1.8",Kk="/*!sc*/\n",Wk="undefined"!=typeof window&&"HTMLElement"in window,Gk=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),Hk=(new Set,Object.freeze([])),Qk=Object.freeze({});function $k(e,t,n){return void 0===n&&(n=Qk),e.theme!==n.theme&&e.theme||t||n.theme}var Yk=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Xk=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Jk=/(^-|-$)/g;function Zk(e){return e.replace(Xk,"-").replace(Jk,"")}var eT=/(a)(d)/gi,tT=52,nT=function(e){return String.fromCharCode(e+(e>25?39:97))};function rT(e){var t,n="";for(t=Math.abs(e);t>tT;t=t/tT|0)n=nT(t%tT)+n;return(nT(t%tT)+n).replace(eT,"$1-$2")}var iT,sT=5381,oT=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},aT=function(e){return oT(sT,e)};function cT(e){return rT(aT(e)>>>0)}function lT(e){return e.displayName||e.name||"Component"}function uT(e){return"string"==typeof e&&!0}var hT="function"==typeof Symbol&&Symbol.for,dT=hT?Symbol.for("react.memo"):60115,fT=hT?Symbol.for("react.forward_ref"):60112,pT={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},mT={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},gT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},yT=((iT={})[fT]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},iT[dT]=gT,iT);function vT(e){return("type"in(t=e)&&t.type.$$typeof)===dT?gT:"$$typeof"in e?yT[e.$$typeof]:pT;var t}var wT=Object.defineProperty,bT=Object.getOwnPropertyNames,_T=Object.getOwnPropertySymbols,IT=Object.getOwnPropertyDescriptor,ET=Object.getPrototypeOf,ST=Object.prototype;function kT(e,t,n){if("string"!=typeof t){if(ST){var r=ET(t);r&&r!==ST&&kT(e,r,n)}var i=bT(t);_T&&(i=i.concat(_T(t)));for(var s=vT(e),o=vT(t),a=0;a<i.length;++a){var c=i[a];if(!(c in mT||n&&n[c]||o&&c in o||s&&c in s)){var l=IT(t,c);try{wT(e,c,l)}catch(e){}}}}return e}function TT(e){return"function"==typeof e}function CT(e){return"object"==typeof e&&"styledComponentId"in e}function xT(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function AT(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function NT(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function PT(e,t,n){if(void 0===n&&(n=!1),!n&&!NT(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=PT(e[r],t[r]);else if(NT(t))for(var r in t)e[r]=PT(e[r],t[r]);return e}function OT(e,t){Object.defineProperty(e,"toString",{value:t})}function DT(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var RT=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw DT(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var s=r;s<i;s++)this.groupSizes[s]=0}for(var o=this.indexOfGroup(e+1),a=(s=0,t.length);s<a;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,s=r;s<i;s++)t+="".concat(this.tag.getRule(s)).concat(Kk);return t},e}(),LT=new Map,MT=new Map,FT=1,jT=function(e){if(LT.has(e))return LT.get(e);for(;MT.has(FT);)FT++;var t=FT++;return LT.set(e,t),MT.set(t,e),t},UT=function(e,t){FT=t+1,LT.set(e,t),MT.set(t,e)},VT="style[".concat(Vk,"][").concat(Bk,'="').concat(qk,'"]'),zT=new RegExp("^".concat(Vk,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),BT=function(e,t,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&e.registerName(t,r)},qT=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(Kk),i=[],s=0,o=r.length;s<o;s++){var a=r[s].trim();if(a){var c=a.match(zT);if(c){var l=0|parseInt(c[1],10),u=c[2];0!==l&&(UT(u,l),BT(e,u,c[3]),e.getTag().insertRules(l,i)),i.length=0}else i.push(a)}}};function KT(){return n.nc}var WT=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(Vk,"]")));return t[t.length-1]}(n),s=void 0!==i?i.nextSibling:null;r.setAttribute(Vk,zk),r.setAttribute(Bk,qk);var o=KT();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},GT=function(){function e(e){this.element=WT(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw DT(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),HT=function(){function e(e){this.element=WT(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),QT=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),$T=Wk,YT={isServer:!Wk,useCSSOMInjection:!Gk},XT=function(){function e(e,t,n){void 0===e&&(e=Qk),void 0===t&&(t={});var r=this;this.options=LS(LS({},YT),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&Wk&&$T&&($T=!1,function(e){for(var t=document.querySelectorAll(VT),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(Vk)!==zk&&(qT(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this)),OT(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return MT.get(e)}(n);if(void 0===i)return"continue";var s=e.names.get(i),o=t.getGroup(n);if(void 0===s||0===o.length)return"continue";var a="".concat(Vk,".g").concat(n,'[id="').concat(i,'"]'),c="";void 0!==s&&s.forEach((function(e){e.length>0&&(c+="".concat(e,","))})),r+="".concat(o).concat(a,'{content:"').concat(c,'"}').concat(Kk)},s=0;s<n;s++)i(s);return r}(r)}))}return e.registerId=function(e){return jT(e)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(LS(LS({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new QT(n):t?new GT(n):new HT(n)}(this.options),new RT(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(jT(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(jT(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(jT(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),JT=/&/g,ZT=/^\s*\/\/.*$/gm;function eC(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=eC(e.children,t)),e}))}function tC(e){var t,n,r,i=void 0===e?Qk:e,s=i.options,o=void 0===s?Qk:s,a=i.plugins,c=void 0===a?Hk:a,l=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},u=c.slice();u.push((function(e){e.type===qS&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(JT,n).replace(r,l))})),o.prefix&&u.push(Dk),u.push(Pk);var h=function(e,i,s,a){void 0===i&&(i=""),void 0===s&&(s=""),void 0===a&&(a="&"),t=a,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var c=e.replace(ZT,""),l=Rk(s||i?"".concat(s," ").concat(i," { ").concat(c," }"):c);o.namespace&&(l=eC(l,o.namespace));var h=[];return Nk(l,function(e){var t=ik(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}(u.concat(function(e){return function(t){t.root||(t=t.return)&&e(t)}}((function(e){return h.push(e)}))))),h};return h.hash=c.length?c.reduce((function(e,t){return t.name||DT(15),oT(e,t.name)}),sT).toString():"",h}var nC=new XT,rC=tC(),iC=t.createContext({shouldForwardProp:void 0,styleSheet:nC,stylis:rC}),sC=(iC.Consumer,t.createContext(void 0));function oC(){return(0,t.useContext)(iC)}function aC(e){var n=(0,t.useState)(e.stylisPlugins),r=n[0],i=n[1],s=oC().styleSheet,o=(0,t.useMemo)((function(){var t=s;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target,s]),a=(0,t.useMemo)((function(){return tC({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:r})}),[e.enableVendorPrefixes,e.namespace,r]);(0,t.useEffect)((function(){jS()(r,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]);var c=(0,t.useMemo)((function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:o,stylis:a}}),[e.shouldForwardProp,o,a]);return t.createElement(iC.Provider,{value:c},t.createElement(sC.Provider,{value:a},e.children))}var cC=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=rC);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,OT(this,(function(){throw DT(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=rC),this.name+e.hash},e}(),lC=function(e){return e>="A"&&e<="Z"};function uC(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;lC(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var hC=function(e){return null==e||!1===e||""===e},dC=function(e){var t,n,r=[];for(var i in e){var s=e[i];e.hasOwnProperty(i)&&!hC(s)&&(Array.isArray(s)&&s.isCss||TT(s)?r.push("".concat(uC(i),":"),s,";"):NT(s)?r.push.apply(r,MS(MS(["".concat(i," {")],dC(s),!1),["}"],!1)):r.push("".concat(uC(i),": ").concat((t=i,null==(n=s)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in Uk||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function fC(e,t,n,r){return hC(e)?[]:CT(e)?[".".concat(e.styledComponentId)]:TT(e)?!TT(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:fC(e(t),t,n,r):e instanceof cC?n?(e.inject(n,r),[e.getName(r)]):[e]:NT(e)?dC(e):Array.isArray(e)?Array.prototype.concat.apply(Hk,e.map((function(e){return fC(e,t,n,r)}))):[e.toString()];var i}function pC(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(TT(n)&&!CT(n))return!1}return!0}var mC=aT(qk),gC=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&pC(e),this.componentId=t,this.baseHash=oT(mC,t),this.baseStyle=n,XT.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=xT(r,this.staticRulesId);else{var i=AT(fC(this.rules,e,t,n)),s=rT(oT(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,s)){var o=n(i,".".concat(s),void 0,this.componentId);t.insertRules(this.componentId,s,o)}r=xT(r,s),this.staticRulesId=s}else{for(var a=oT(this.baseHash,n.hash),c="",l=0;l<this.rules.length;l++){var u=this.rules[l];if("string"==typeof u)c+=u;else if(u){var h=AT(fC(u,e,t,n));a=oT(a,h+l),c+=h}}if(c){var d=rT(a>>>0);t.hasNameForId(this.componentId,d)||t.insertRules(this.componentId,d,n(c,".".concat(d),void 0,this.componentId)),r=xT(r,d)}}return r},e}(),yC=t.createContext(void 0);yC.Consumer;var vC={};new Set;function wC(e,n,r){var i=CT(e),s=e,o=!uT(e),a=n.attrs,c=void 0===a?Hk:a,l=n.componentId,u=void 0===l?function(e,t){var n="string"!=typeof e?"sc":Zk(e);vC[n]=(vC[n]||0)+1;var r="".concat(n,"-").concat(cT(qk+n+vC[n]));return t?"".concat(t,"-").concat(r):r}(n.displayName,n.parentComponentId):l,h=n.displayName,d=void 0===h?function(e){return uT(e)?"styled.".concat(e):"Styled(".concat(lT(e),")")}(e):h,f=n.displayName&&n.componentId?"".concat(Zk(n.displayName),"-").concat(n.componentId):n.componentId||u,p=i&&s.attrs?s.attrs.concat(c).filter(Boolean):c,m=n.shouldForwardProp;if(i&&s.shouldForwardProp){var g=s.shouldForwardProp;if(n.shouldForwardProp){var y=n.shouldForwardProp;m=function(e,t){return g(e,t)&&y(e,t)}}else m=g}var v=new gC(r,f,i?s.componentStyle:void 0);function w(e,n){return function(e,n,r){var i=e.attrs,s=e.componentStyle,o=e.defaultProps,a=e.foldedComponentIds,c=e.styledComponentId,l=e.target,u=t.useContext(yC),h=oC(),d=e.shouldForwardProp||h.shouldForwardProp,f=$k(n,u,o)||Qk,p=function(e,t,n){for(var r,i=LS(LS({},t),{className:void 0,theme:n}),s=0;s<e.length;s+=1){var o=TT(r=e[s])?r(i):r;for(var a in o)i[a]="className"===a?xT(i[a],o[a]):"style"===a?LS(LS({},i[a]),o[a]):o[a]}return t.className&&(i.className=xT(i.className,t.className)),i}(i,n,f),m=p.as||l,g={};for(var y in p)void 0===p[y]||"$"===y[0]||"as"===y||"theme"===y&&p.theme===f||("forwardedAs"===y?g.as=p.forwardedAs:d&&!d(y,m)||(g[y]=p[y]));var v=function(e,t){var n=oC();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(s,p),w=xT(a,c);return v&&(w+=" "+v),p.className&&(w+=" "+p.className),g[uT(m)&&!Yk.has(m)?"class":"className"]=w,g.ref=r,(0,t.createElement)(m,g)}(b,e,n)}w.displayName=d;var b=t.forwardRef(w);return b.attrs=p,b.componentStyle=v,b.displayName=d,b.shouldForwardProp=m,b.foldedComponentIds=i?xT(s.foldedComponentIds,s.styledComponentId):"",b.styledComponentId=f,b.target=i?s.target:e,Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)PT(e,i[r],!0);return e}({},s.defaultProps,e):e}}),OT(b,(function(){return".".concat(b.styledComponentId)})),o&&kT(b,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),b}function bC(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var _C=function(e){return Object.assign(e,{isCss:!0})};function IC(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(TT(e)||NT(e))return _C(fC(bC(Hk,MS([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?fC(r):_C(fC(bC(r,t)))}function EC(e,t,n){if(void 0===n&&(n=Qk),!t)throw DT(1,t);var r=function(r){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return e(t,n,IC.apply(void 0,MS([r],i,!1)))};return r.attrs=function(r){return EC(e,t,LS(LS({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return EC(e,t,LS(LS({},n),r))},r}var SC=function(e){return EC(wC,e)},kC=SC;Yk.forEach((function(e){kC[e]=SC(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=pC(e),XT.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,r){var i=r(AT(fC(this.rules,t,n,r)),""),s=this.componentId+e;n.insertRules(s,s,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&XT.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();var TC,CC;(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString(),n=KT(),r=AT([n&&'nonce="'.concat(n,'"'),"".concat(Vk,'="true"'),"".concat(Bk,'="').concat(qk,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw DT(2);return e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)throw DT(2);var r=((n={})[Vk]="",n[Bk]=qk,n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),i=KT();return i&&(r.nonce=i),[t.createElement("style",LS({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new XT({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw DT(2);return t.createElement(aC,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw DT(3)}})(),"__sc-".concat(Vk,"__");class xC extends t.Component{constructor(){super(),this.state={books:[]}}async componentDidMount(){try{const e=(await PS.collection("users").doc(this.props.currentUser.id).collection("books").get()).docs.map((e=>({id:e.id,...e.data()})));this.setState({books:e})}catch(e){console.error("Error fetching books:",e)}}handleClickDelete(e){(async()=>{await PS.collection("users").doc(this.props.currentUser.id).collection("books").doc(e).delete().then((e=>{console.log(e)})).catch((e=>{console.error("Error deleting a document: ",e)}))})(),this.componentDidMount()}handleClickUpdateRead(e,t){(async()=>{await PS.collection("users").doc(this.props.currentUser.id).collection("books").doc(e).update({hasRead:!t}).then((e=>{console.log(e)})).catch((e=>{console.error("Error deleting a document: ",e)}))})(),this.componentDidMount()}handleClickUpdateMore(e,t){(async()=>{await PS.collection("users").doc(this.props.currentUser.id).collection("books").doc(e).update({hasMoreClicked:!t}).then((e=>{console.log(e)})).catch((e=>{console.error("Error deleting a document: ",e)}))})(),this.componentDidMount()}render(){const{books:e}=this.state;return(0,o.jsx)(AC,{children:this.props.currentUser&&e.length>0?e.map((e=>(0,o.jsxs)("div",{children:[(0,o.jsx)(a,{className:"book",title:e.title,authors:e.authors,subject:e.subject,genre:e.genre,background:e.background,hasBtnMoreClicked:e.hasMoreClicked},e.id),(0,o.jsxs)("button",{id:"btnAbout",onClick:()=>this.handleClickUpdateMore(e.id,e.hasMoreClicked),children:[(0,o.jsx)(Xe,{icon:nt})," more"]}),(0,o.jsxs)("button",{id:"btnDelete",onClick:()=>this.handleClickDelete(e.id),children:[(0,o.jsx)(Xe,{icon:rt})," delete"]}),(0,o.jsxs)("label",{children:[(0,o.jsx)(Xe,{icon:Ze}),"  ",(0,o.jsx)("span",{className:"checkmark",children:"read "})," ",(0,o.jsx)("input",{type:"checkbox",checked:e.hasRead,onChange:()=>this.handleClickUpdateRead(e.id,e.hasRead)})]})]},e.id))):(0,o.jsx)(NC,{children:(0,o.jsxs)("div",{className:"flexColumn flexCenter",children:[(0,o.jsx)(RS,{}),(0,o.jsx)("span",{className:"font20",children:"No books found"})]})})})}}const AC=kC.nav(TC||(TC=s(["\n    width: 75vw;\n    margin: 100px auto 60px;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: start; \n    gap: 20px;\n    min-height: 70vh;\n"]))),NC=kC.nav(CC||(CC=s(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%; \n"])));function PC(e,t){return PC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},PC(e,t)}function OC(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,PC(e,t)}function DC(){return DC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DC.apply(this,arguments)}function RC(e){return"/"===e.charAt(0)}function LC(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}const MC=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],s=e&&RC(e),o=t&&RC(t),a=s||o;if(e&&RC(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var c=i[i.length-1];n="."===c||".."===c||""===c}else n=!1;for(var l=0,u=i.length;u>=0;u--){var h=i[u];"."===h?LC(i,u):".."===h?(LC(i,u),l++):l&&(LC(i,u),l--)}if(!a)for(;l--;l)i.unshift("..");!a||""===i[0]||i[0]&&RC(i[0])||i.unshift("");var d=i.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d};var FC=!0,jC="Invariant failed";function UC(e,t){if(!e){if(FC)throw new Error(jC);var n="function"===typeof t?t():t;throw new Error(n?jC+": "+n:jC)}}function VC(e){return"/"===e.charAt(0)?e:"/"+e}function zC(e){return"/"===e.charAt(0)?e.substr(1):e}function BC(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function qC(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function KC(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function WC(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var s=t.indexOf("?");return-1!==s&&(n=t.substr(s),t=t.substr(0,s)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=DC({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(CN){throw CN instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):CN}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=MC(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function GC(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var s="function"===typeof e?e(t,n):e;"string"===typeof s?"function"===typeof r?r(s,i):i(!0):i(!1!==s)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var HC=!("undefined"===typeof window||!window.document||!window.document.createElement);function QC(e,t){t(window.confirm(e))}var $C="popstate",YC="hashchange";function XC(){try{return window.history.state||{}}catch(CN){return{}}}function JC(e){void 0===e&&(e={}),HC||UC(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,s=i.forceRefresh,o=void 0!==s&&s,a=i.getUserConfirmation,c=void 0===a?QC:a,l=i.keyLength,u=void 0===l?6:l,h=e.basename?qC(VC(e.basename)):"";function d(e){var t=e||{},n=t.key,r=t.state,i=window.location,s=i.pathname+i.search+i.hash;return h&&(s=BC(s,h)),WC(s,r,n)}function f(){return Math.random().toString(36).substr(2,u)}var p=GC();function m(e){DC(C,e),C.length=t.length,p.notifyListeners(C.location,C.action)}function g(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||w(d(e.state))}function y(){w(d(XC()))}var v=!1;function w(e){if(v)v=!1,m();else{p.confirmTransitionTo(e,"POP",c,(function(t){t?m({action:"POP",location:e}):function(e){var t=C.location,n=_.indexOf(t.key);-1===n&&(n=0);var r=_.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(v=!0,E(i))}(e)}))}}var b=d(XC()),_=[b.key];function I(e){return h+KC(e)}function E(e){t.go(e)}var S=0;function k(e){1===(S+=e)&&1===e?(window.addEventListener($C,g),r&&window.addEventListener(YC,y)):0===S&&(window.removeEventListener($C,g),r&&window.removeEventListener(YC,y))}var T=!1;var C={length:t.length,action:"POP",location:b,createHref:I,push:function(e,r){var i="PUSH",s=WC(e,r,f(),C.location);p.confirmTransitionTo(s,i,c,(function(e){if(e){var r=I(s),a=s.key,c=s.state;if(n)if(t.pushState({key:a,state:c},null,r),o)window.location.href=r;else{var l=_.indexOf(C.location.key),u=_.slice(0,l+1);u.push(s.key),_=u,m({action:i,location:s})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",s=WC(e,r,f(),C.location);p.confirmTransitionTo(s,i,c,(function(e){if(e){var r=I(s),a=s.key,c=s.state;if(n)if(t.replaceState({key:a,state:c},null,r),o)window.location.replace(r);else{var l=_.indexOf(C.location.key);-1!==l&&(_[l]=s.key),m({action:i,location:s})}else window.location.replace(r)}}))},go:E,goBack:function(){E(-1)},goForward:function(){E(1)},block:function(e){void 0===e&&(e=!1);var t=p.setPrompt(e);return T||(k(1),T=!0),function(){return T&&(T=!1,k(-1)),t()}},listen:function(e){var t=p.appendListener(e);return k(1),function(){k(-1),t()}}};return C}var ZC="hashchange",ex={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+zC(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:zC,decodePath:VC},slash:{encodePath:VC,decodePath:VC}};function tx(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function nx(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function rx(e){window.location.replace(tx(window.location.href)+"#"+e)}function ix(e){void 0===e&&{},HC||UC(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?QC:r,s=n.hashType,o=void 0===s?"slash":s,a=e.basename?qC(VC(e.basename)):"",c=ex[o],l=c.encodePath,u=c.decodePath;function h(){var e=u(nx());return a&&BC(e,a),WC(e)}var d=GC();function f(e){DC(k,e),k.length=t.length,d.notifyListeners(k.location,k.action)}var p=!1,m=null;function g(){var e=nx(),t=l(e);if(e!==t)rx(t);else{var n=h(),r=k.location;if(!p&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(m===KC(n))return;null,function(e){if(p)!1,f();else{var t="POP";d.confirmTransitionTo(e,t,i,(function(n){n?f({action:t,location:e}):function(e){var t=k.location,n=b.lastIndexOf(KC(t));-1===n&&0;var r=b.lastIndexOf(KC(e));-1===r&&0;var i=n-r;i&&(!0,_(i))}(e)}))}}(n)}}var y=nx(),v=l(y);y!==v&&rx(v);var w=h(),b=[KC(w)];function _(e){t.go(e)}var I=0;function E(e){1===(I+=e)&&1===e?window.addEventListener(ZC,g):0===I&&window.removeEventListener(ZC,g)}var S=!1;var k={length:t.length,action:"POP",location:w,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&tx(window.location.href),n+"#"+l(a+KC(e))},push:function(e,t){var n="PUSH",r=WC(e,void 0,void 0,k.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=KC(r),i=l(a+t);if(nx()!==i){t,function(e){window.location.hash=e}(i);var s=b.lastIndexOf(KC(k.location)),o=b.slice(0,s+1);o.push(t),o,f({action:n,location:r})}else f()}}))},replace:function(e,t){var n="REPLACE",r=WC(e,void 0,void 0,k.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=KC(r),i=l(a+t);nx()!==i&&(t,rx(i));var s=b.indexOf(KC(k.location));-1!==s&&(b[s]=t),f({action:n,location:r})}}))},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},block:function(e){void 0===e&&!1;var t=d.setPrompt(e);return S||(E(1),!0),function(){return S&&(!1,E(-1)),t()}},listen:function(e){var t=d.appendListener(e);return E(1),function(){E(-1),t()}}};return k}function sx(e,t,n){return Math.min(Math.max(e,t),n)}var ox=1073741823,ax="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var cx=t.createContext||function(e,n){var r,i,s="__create-react-context-"+function(){var e="__global_unique_id__";return ax[e]=(ax[e]||0)+1}()+"__",o=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}OC(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[s]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):ox,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);o.childContextTypes=((r={})[s]=Ve().object.isRequired,r);var a=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}OC(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?ox:t},r.componentDidMount=function(){this.context[s]&&this.context[s].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?ox:e},r.componentWillUnmount=function(){this.context[s]&&this.context[s].off(this.onUpdate)},r.getValue=function(){return this.context[s]?this.context[s].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return a.contextTypes=((i={})[s]=Ve().object,i),{Provider:o,Consumer:a}};const lx=cx;var ux=n(340),hx=n.n(ux);n(86);function dx(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var fx=n(219),px=n.n(fx),mx=function(e){var t=lx();return t.displayName=e,t},gx=mx("Router-History"),yx=mx("Router"),vx=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}OC(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return t.createElement(yx.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(gx.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;t.Component;var wx={},bx=1e4,_x=0;function Ix(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,s=void 0!==i&&i,o=n.strict,a=void 0!==o&&o,c=n.sensitive,l=void 0!==c&&c;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=wx[n]||(wx[n]={});if(r[e])return r[e];var i=[],s={regexp:hx()(e,i,t),keys:i};return _x<bx&&(r[e]=s,_x++),s}(n,{end:s,strict:a,sensitive:l}),i=r.regexp,o=r.keys,c=i.exec(e);if(!c)return null;var u=c[0],h=c.slice(1),d=e===u;return s&&!d?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:d,params:o.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var Ex=function(e){function n(){return e.apply(this,arguments)||this}return OC(n,e),n.prototype.render=function(){var e=this;return t.createElement(yx.Consumer,null,(function(n){n||UC(!1);var r=e.props.location||n.location,i=DC({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?Ix(r.pathname,e.props):n.match}),s=e.props,o=s.children,a=s.component,c=s.render;return Array.isArray(o)&&function(e){return 0===t.Children.count(e)}(o)&&(o=null),t.createElement(yx.Provider,{value:i},i.match?o?"function"===typeof o?o(i):o:a?t.createElement(a,i):c?c(i):null:"function"===typeof o?o(i):null)}))},n}(t.Component);function Sx(e){return"/"===e.charAt(0)?e:"/"+e}function kx(e,t){if(!e)return t;var n=Sx(e);return 0!==t.pathname.indexOf(n)?t:DC({},t,{pathname:t.pathname.substr(n.length)})}function Tx(e){return"string"===typeof e?e:KC(e)}function Cx(e){return function(){UC(!1)}}function xx(){}t.Component;var Ax=function(e){function n(){return e.apply(this,arguments)||this}return OC(n,e),n.prototype.render=function(){var e=this;return t.createElement(yx.Consumer,null,(function(n){n||UC(!1);var r,i,s=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var o=e.props.path||e.props.from;i=o?Ix(s.pathname,DC({},e.props,{path:o})):n.match}})),i?t.cloneElement(r,{location:s,computedMatch:i}):null}))},n}(t.Component);function Nx(e){var n="withRouter("+(e.displayName||e.name)+")",r=function(n){var r=n.wrappedComponentRef,i=dx(n,["wrappedComponentRef"]);return t.createElement(yx.Consumer,null,(function(n){return n||UC(!1),t.createElement(e,DC({},i,n,{ref:r}))}))};return r.displayName=n,r.WrappedComponent=e,px()(r,e)}t.useContext;var Px=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=JC(t.props),t}return OC(n,e),n.prototype.render=function(){return t.createElement(vx,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var Ox=function(e,t){return"function"===typeof e?e(t):e},Dx=function(e,t){return"string"===typeof e?WC(e,null,null,t):e},Rx=function(e){return e},Lx=t.forwardRef;"undefined"===typeof Lx&&(Lx=Rx);var Mx=Lx((function(e,n){var r=e.innerRef,i=e.navigate,s=e.onClick,o=dx(e,["innerRef","navigate","onClick"]),a=o.target,c=DC({},o,{onClick:function(e){try{s&&s(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||a&&"_self"!==a||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return c.ref=Rx!==Lx&&n||r,t.createElement("a",c)}));var Fx=Lx((function(e,n){var r=e.component,i=void 0===r?Mx:r,s=e.replace,o=e.to,a=e.innerRef,c=dx(e,["component","replace","to","innerRef"]);return t.createElement(yx.Consumer,null,(function(e){e||UC(!1);var r=e.history,l=Dx(Ox(o,e.location),e.location),u=l?r.createHref(l):"",h=DC({},c,{href:u,navigate:function(){var t=Ox(o,e.location),n=KC(e.location)===KC(Dx(t));(s||n?r.replace:r.push)(t)}});return Rx!==Lx?h.ref=n||a:h.innerRef=a,t.createElement(i,h)}))})),jx=function(e){return e},Ux=t.forwardRef;"undefined"===typeof Ux&&(Ux=jx);var Vx=Ux((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,s=e.activeClassName,o=void 0===s?"active":s,a=e.activeStyle,c=e.className,l=e.exact,u=e.isActive,h=e.location,d=e.sensitive,f=e.strict,p=e.style,m=e.to,g=e.innerRef,y=dx(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(yx.Consumer,null,(function(e){e||UC(!1);var r=h||e.location,s=Dx(Ox(m,r),r),v=s.pathname,w=v&&v.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),b=w?Ix(r.pathname,{path:w,exact:l,sensitive:d,strict:f}):null,_=!!(u?u(b,r):b),I="function"===typeof c?c(_):c,E="function"===typeof p?p(_):p;_&&(I=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(I,o),E=DC({},E,a));var S=DC({"aria-current":_&&i||null,className:I,style:E,to:s},y);return jx!==Ux?S.ref=n||g:S.innerRef=g,t.createElement(Fx,S)}))}));const zx=function(e){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:23.335,height:23.335,...e,children:(0,o.jsxs)("g",{"data-name":"Group 99",fill:"#fff",children:[(0,o.jsx)("path",{"data-name":"Rectangle 58",d:"M21.213 0l2.121 2.121L2.121 23.335 0 21.213z"}),(0,o.jsx)("path",{"data-name":"Rectangle 59",d:"M23.334 21.213l-2.121 2.121L-.001 2.121 2.121 0z"})]})})};const Bx=n.p+"static/media/booksuggester.cd4082c51925227c2953c8290d3e50dd.svg";const qx=function(e){return(0,o.jsx)("img",{src:Bx,alt:"",style:{height:"30px"}})};var Kx,Wx,Gx,Hx;function Qx(e){let{sidebarOpen:t,toggleSidebar:n,currentUser:r}=e;return(0,o.jsxs)($x,{className:"animate darkBg",sidebarOpen:t,children:[(0,o.jsxs)(Yx,{className:"flexSpaceCenter",children:[(0,o.jsxs)("div",{className:"flexNullCenter",children:[(0,o.jsx)(qx,{}),(0,o.jsx)("h1",{className:"whiteColor font20",style:{marginLeft:"15px"},children:"BookSuggester"})]}),(0,o.jsx)(Xx,{onClick:()=>n(!t),className:"animate pointer",children:(0,o.jsx)(zx,{})})]}),(0,o.jsxs)(Jx,{className:"flexNullCenter flexColumn",children:[(0,o.jsx)("li",{className:"semiBold font15 pointer",children:(0,o.jsx)(Fx,{onClick:()=>n(!t),activeClass:"active",className:"whiteColor",style:{padding:"10px 15px"},to:"/",children:"Home"})}),(0,o.jsx)("li",{className:"semiBold font15 pointer",children:(0,o.jsx)(Fx,{onClick:()=>n(!t),activeClass:"active",className:"whiteColor",style:{padding:"10px 15px"},to:"/book-list",children:"Bookshelf"})}),(0,o.jsx)("li",{className:"semiBold font15 pointer",children:r?(0,o.jsx)(Fx,{onClick:()=>{NS.signOut(),n(!1)},className:"whiteColor",style:{padding:"10px 15px"},to:"/login",children:"Logout"}):(0,o.jsx)(Fx,{onClick:()=>n(!t),className:"whiteColor",style:{padding:"10px 15px"},to:"/login",children:"Login"})})]})]})}const $x=kC.nav(Kx||(Kx=s(["\n  width: 400px;\n  height: 100vh;\n  position: fixed;\n  top: 0;\n  padding: 0 30px;\n  right: ",";\n  z-index: 9999;\n  @media (max-width: 400px) {\n    width: 100%;\n  }\n"])),(e=>e.sidebarOpen?"0px":"-400px")),Yx=kC.div(Wx||(Wx=s(["\n  padding: 20px 0;\n"]))),Xx=kC.button(Gx||(Gx=s(["\n  border: 0px;\n  outline: none;\n  background-color: transparent;\n  padding: 10px;\n"]))),Jx=kC.ul(Hx||(Hx=s(["\n  padding: 40px;\n  li {\n    margin: 20px 0;\n  }\n"])));var Zx;function eA(e){let{toggleSidebar:t}=e;return(0,o.jsx)(tA,{className:"darkBg",onClick:()=>t(!1)})}const tA=kC.div(Zx||(Zx=s(["\n  width: 100%;\n  height: 100vh;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 99;\n  opacity: 0.8;\n"])));const nA=function(e){return(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:28,height:22,viewBox:"0 0 28 22",...e,children:[(0,o.jsx)("path",{"data-name":"Line 5",fill:"none",stroke:"#0b093b",strokeLinecap:"round",strokeWidth:2,d:"M1 1h26"}),(0,o.jsx)("path",{"data-name":"Line 6",fill:"none",stroke:"#0b093b",strokeLinecap:"round",strokeWidth:2,d:"M1 11h26"}),(0,o.jsx)("path",{"data-name":"Line 7",fill:"none",stroke:"#0b093b",strokeLinecap:"round",strokeWidth:2,d:"M1 21h26"})]})};var rA,iA,sA,oA,aA,cA;function lA(e){const{currentUser:n}=e,[r,i]=(0,t.useState)(window.scrollY),[s,a]=(0,t.useState)(!1);return(0,t.useEffect)((()=>(window.addEventListener("scroll",(()=>i(window.scrollY))),()=>{window.removeEventListener("scroll",(()=>i(window.scrollY)))})),[r]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Qx,{sidebarOpen:s,toggleSidebar:a,currentUser:n}),s&&(0,o.jsx)(eA,{toggleSidebar:a}),(0,o.jsx)(uA,{style:{height:r>100?"60px":"80px"},children:(0,o.jsxs)(hA,{children:[(0,o.jsxs)(dA,{to:"/",className:"flexNullCenter pointer",activeClassName:"inactive",children:[(0,o.jsx)(qx,{}),(0,o.jsx)("h5",{style:{marginLeft:"5px",marginTop:"5px"},children:"BookSuggester"})]}),(0,o.jsx)(fA,{onClick:()=>a(!s),children:(0,o.jsx)(nA,{})}),(0,o.jsxs)(pA,{children:[(0,o.jsx)("li",{children:(0,o.jsx)(mA,{exact:!0,to:"/",activeClassName:"active",children:"Home"})}),(0,o.jsx)("li",{children:(0,o.jsx)(mA,{to:"/book-list",activeClassName:"active",children:"Bookshelf"})}),n?(0,o.jsx)("li",{children:(0,o.jsx)(mA,{to:"/login",activeClassName:"active",onClick:()=>NS.signOut(),children:"Logout"})}):(0,o.jsx)("li",{children:(0,o.jsx)(mA,{to:"/login",activeClassName:"active",children:"Login"})})]})]})})]})}const uA=kC.nav(rA||(rA=s(["\n  width: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 999;\n  background-color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),hA=kC.div(iA||(iA=s(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  max-width: 1200px;\n  padding: 0 20px;\n  height: 100%;\n"]))),dA=kC(Vx)(sA||(sA=s(["\n  display: flex;\n  align-items: center;\n  text-decoration: none;\n  color: black;\n  font-weight: bold;\n  font-size: 1.5rem;\n  cursor: pointer;\n"]))),fA=kC.button(oA||(oA=s(["\n  display: none;\n  background: none;\n  border: none;\n  cursor: pointer;\n  @media (max-width: 760px) {\n    display: block;\n  }\n"]))),pA=kC.ul(aA||(aA=s(["\n  display: flex;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  @media (max-width: 760px) {\n    display: none;\n  }\n"]))),mA=kC(Vx)(cA||(cA=s(["\n  text-decoration: none;\n  color: black;\n  font-weight: bold;\n  font-size: 1rem;\n  padding: 10px 15px;\n  cursor: pointer;\n  &.active {\n    border-bottom: 2px solid blue; /* You can adjust the active link styling */\n  }\n"])));class gA extends t.Component{constructor(){super(),this.state={hasBtnMoreClicked:!1}}handleClickNext(){this.props.callAPI(),this.setState({hasBtnMoreClicked:!1})}handleClickDetail(){this.state.hasBtnMoreClicked?this.setState({hasBtnMoreClicked:!1}):this.setState({hasBtnMoreClicked:!0})}handleClickSave(){if(this.props.currentUser)try{(async()=>{PS.collection("users").doc(this.props.currentUser.id).collection("books").add({title:this.props.title,authors:this.props.authors,subject:this.props.subject,genre:this.props.genre,background:this.props.background,hasRead:!1,hasMoreClicked:!1})})(),this.handleClickNext()}catch(e){console.log(e)}else alert("Please sign in!")}render(){return(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"homeContainer",children:[(0,o.jsx)(a,{title:this.props.title,authors:this.props.authors,subject:this.props.subject,genre:this.props.genre,background:this.props.background,hasBtnMoreClicked:this.state.hasBtnMoreClicked}),(0,o.jsxs)("div",{className:"btnContainer",children:[(0,o.jsxs)("button",{id:"btnAbout",onClick:()=>this.handleClickDetail(),children:["more ",(0,o.jsx)(Xe,{icon:nt})]}),(0,o.jsxs)("button",{id:"btnBookMark",onClick:()=>this.handleClickSave(),children:["save ",(0,o.jsx)(Xe,{icon:tt})]}),(0,o.jsxs)("button",{id:"btnNext",onClick:()=>this.handleClickNext(),children:["next ",(0,o.jsx)(Xe,{icon:et})]})]})]})})}}var yA=n(600),vA=n.n(yA);const wA={type:Ve().string,tooltip:Ve().bool,as:Ve().elementType},bA=t.forwardRef(((e,t)=>{let{as:n="div",className:r,type:i="valid",tooltip:s=!1,...a}=e;return(0,o.jsx)(n,{...a,ref:t,className:vA()(r,"".concat(i,"-").concat(s?"tooltip":"feedback"))})}));bA.displayName="Feedback",bA.propTypes=wA;const _A=bA,IA=t.createContext({}),EA=t.createContext({prefixes:{}}),{Consumer:SA,Provider:kA}=EA;function TA(e,n){const{prefixes:r}=(0,t.useContext)(EA);return e||r[n]||n}const CA=t.forwardRef(((e,n)=>{let{id:r,bsPrefix:i,className:s,type:a="checkbox",isValid:c=!1,isInvalid:l=!1,as:u="input",...h}=e;const{controlId:d}=(0,t.useContext)(IA);return i=TA(i,"form-check-input"),(0,o.jsx)(u,{...h,ref:n,type:a,id:r||d,className:vA()(s,i,c&&"is-valid",l&&"is-invalid")})}));CA.displayName="FormCheckInput";const xA=CA,AA=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:i,htmlFor:s,...a}=e;const{controlId:c}=(0,t.useContext)(IA);return r=TA(r,"form-check-label"),(0,o.jsx)("label",{...a,ref:n,htmlFor:s||c,className:vA()(i,r)})}));AA.displayName="FormCheckLabel";const NA=AA;const PA=t.forwardRef(((e,n)=>{let{id:r,bsPrefix:i,bsSwitchPrefix:s,inline:a=!1,disabled:c=!1,isValid:l=!1,isInvalid:u=!1,feedbackTooltip:h=!1,feedback:d,feedbackType:f,className:p,style:m,title:g="",type:y="checkbox",label:v,children:w,as:b="input",..._}=e;i=TA(i,"form-check"),s=TA(s,"form-switch");const{controlId:I}=(0,t.useContext)(IA),E=(0,t.useMemo)((()=>({controlId:r||I})),[I,r]),S=!w&&null!=v&&!1!==v||function(e,n){return t.Children.toArray(e).some((e=>t.isValidElement(e)&&e.type===n))}(w,NA),k=(0,o.jsx)(xA,{..._,type:"switch"===y?"checkbox":y,ref:n,isValid:l,isInvalid:u,disabled:c,as:b});return(0,o.jsx)(IA.Provider,{value:E,children:(0,o.jsx)("div",{style:m,className:vA()(p,S&&i,a&&"".concat(i,"-inline"),"switch"===y&&s),children:w||(0,o.jsxs)(o.Fragment,{children:[k,S&&(0,o.jsx)(NA,{title:g,children:v}),d&&(0,o.jsx)(_A,{type:f,tooltip:h,children:d})]})})})}));PA.displayName="FormCheck";const OA=Object.assign(PA,{Input:xA,Label:NA});n(440);const DA=t.forwardRef(((e,n)=>{let{bsPrefix:r,type:i,size:s,htmlSize:a,id:c,className:l,isValid:u=!1,isInvalid:h=!1,plaintext:d,readOnly:f,as:p="input",...m}=e;const{controlId:g}=(0,t.useContext)(IA);let y;return r=TA(r,"form-control"),y=d?{["".concat(r,"-plaintext")]:!0}:{[r]:!0,["".concat(r,"-").concat(s)]:s},(0,o.jsx)(p,{...m,type:i,size:a,ref:n,readOnly:f,id:c||g,className:vA()(l,y,u&&"is-valid",h&&"is-invalid","color"===i&&"".concat(r,"-color"))})}));DA.displayName="FormControl";const RA=Object.assign(DA,{Feedback:_A});var LA=/-(.)/g;const MA=e=>{return e[0].toUpperCase()+(t=e,t.replace(LA,(function(e,t){return t.toUpperCase()}))).slice(1);var t};const FA=function(e){let{displayName:n=MA(e),Component:r,defaultProps:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=t.forwardRef(((t,n)=>{let{className:i,bsPrefix:s,as:a=r||"div",...c}=t;const l=TA(s,e);return(0,o.jsx)(a,{ref:n,className:vA()(i,l),...c})}));return s.defaultProps=i,s.displayName=n,s}("form-floating"),jA=t.forwardRef(((e,n)=>{let{controlId:r,as:i="div",...s}=e;const a=(0,t.useMemo)((()=>({controlId:r})),[r]);return(0,o.jsx)(IA.Provider,{value:a,children:(0,o.jsx)(i,{...s,ref:n})})}));jA.displayName="FormGroup";const UA=jA,VA=["xxl","xl","lg","md","sm","xs"];const zA=t.forwardRef(((e,t)=>{const[{className:n,...r},{as:i="div",bsPrefix:s,spans:a}]=function(e){let{as:t,bsPrefix:n,className:r,...i}=e;n=TA(n,"col");const s=[],o=[];return VA.forEach((e=>{const t=i[e];let r,a,c;delete i[e],"object"===typeof t&&null!=t?({span:r,offset:a,order:c}=t):r=t;const l="xs"!==e?"-".concat(e):"";r&&s.push(!0===r?"".concat(n).concat(l):"".concat(n).concat(l,"-").concat(r)),null!=c&&o.push("order".concat(l,"-").concat(c)),null!=a&&o.push("offset".concat(l,"-").concat(a))})),[{...i,className:vA()(r,...s,...o)},{as:t,bsPrefix:n,spans:s}]}(e);return(0,o.jsx)(i,{...r,ref:t,className:vA()(n,!a.length&&s)})}));zA.displayName="Col";const BA=zA,qA=t.forwardRef(((e,n)=>{let{as:r="label",bsPrefix:i,column:s,visuallyHidden:a,className:c,htmlFor:l,...u}=e;const{controlId:h}=(0,t.useContext)(IA);i=TA(i,"form-label");let d="col-form-label";"string"===typeof s&&(d="".concat(d," ").concat(d,"-").concat(s));const f=vA()(c,i,a&&"visually-hidden",s&&d);return l=l||h,s?(0,o.jsx)(BA,{ref:n,as:"label",className:f,htmlFor:l,...u}):(0,o.jsx)(r,{ref:n,className:f,htmlFor:l,...u})}));qA.displayName="FormLabel",qA.defaultProps={column:!1,visuallyHidden:!1};const KA=qA,WA=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:i,id:s,...a}=e;const{controlId:c}=(0,t.useContext)(IA);return r=TA(r,"form-range"),(0,o.jsx)("input",{...a,type:"range",ref:n,className:vA()(i,r),id:s||c})}));WA.displayName="FormRange";const GA=WA,HA=t.forwardRef(((e,n)=>{let{bsPrefix:r,size:i,htmlSize:s,className:a,isValid:c=!1,isInvalid:l=!1,id:u,...h}=e;const{controlId:d}=(0,t.useContext)(IA);return r=TA(r,"form-select"),(0,o.jsx)("select",{...h,size:s,ref:n,className:vA()(a,r,i&&"".concat(r,"-").concat(i),c&&"is-valid",l&&"is-invalid"),id:u||d})}));HA.displayName="FormSelect";const QA=HA,$A=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i="small",muted:s,...a}=e;return n=TA(n,"form-text"),(0,o.jsx)(i,{...a,ref:t,className:vA()(r,n,s&&"text-muted")})}));$A.displayName="FormText";const YA=$A,XA=t.forwardRef(((e,t)=>(0,o.jsx)(OA,{...e,ref:t,type:"switch"})));XA.displayName="Switch";const JA=Object.assign(XA,{Input:OA.Input,Label:OA.Label}),ZA=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:i,controlId:s,label:a,...c}=e;return n=TA(n,"form-floating"),(0,o.jsxs)(UA,{ref:t,className:vA()(r,n),controlId:s,...c,children:[i,(0,o.jsx)("label",{htmlFor:s,children:a})]})}));ZA.displayName="FloatingLabel";const eN=ZA,tN={_ref:Ve().any,validated:Ve().bool,as:Ve().elementType},nN=t.forwardRef(((e,t)=>{let{className:n,validated:r,as:i="form",...s}=e;return(0,o.jsx)(i,{...s,ref:t,className:vA()(n,r&&"was-validated")})}));nN.displayName="Form",nN.propTypes=tN;const rN=Object.assign(nN,{Group:UA,Control:RA,Floating:FA,Check:OA,Switch:JA,Label:KA,Text:YA,Range:GA,Select:QA,FloatingLabel:eN});var iN,sN,oN;class aN extends t.Component{constructor(e){super(e),this.handleSubmit=async e=>{e.preventDefault();const{email:t,password:n}=this.state;try{await NS.signInWithEmailAndPassword(t,n),this.setState({email:"",password:"",showAlert:!0}),this.props.history.push("/")}catch(r){console.log(r),this.setState({errorMessage:"Invalid email or password!",showAlert:!0})}},this.handleChange=e=>{const{value:t,name:n}=e.target;this.setState({[n]:t})},this.state={email:"",password:"",errorMessage:""}}render(){return(0,o.jsxs)(lN,{children:[(0,o.jsx)(hN,{children:(0,o.jsx)("h3",{children:"Sign In"})}),(0,o.jsxs)(rN,{className:"font12",onSubmit:this.handleSubmit,children:[(0,o.jsxs)(rN.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,o.jsx)(rN.Label,{children:"Email address"}),(0,o.jsx)(rN.Control,{type:"email",name:"email",label:"email",placeholder:"Enter email",value:this.state.email,onChange:this.handleChange,required:!0})]}),(0,o.jsxs)(rN.Group,{className:"mb-3",controlId:"formBasicPassword",children:[(0,o.jsx)(rN.Label,{children:"Password"}),(0,o.jsx)(rN.Control,{type:"password",name:"password",placeholder:"Enter password",value:this.state.password,onChange:this.handleChange,label:"password",required:!0})]}),(0,o.jsx)("button",{class:"btn btn-dark",type:"submit",style:{width:"100%"},children:"Login"})]}),this.state.showAlert&&(0,o.jsx)(uN,{className:"alert alert-danger font13",role:"alert",children:this.state.errorMessage})]})}}const cN=Nx(aN),lN=kC.div(iN||(iN=s(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    text-align: start;\n"]))),uN=kC.div(sN||(sN=s(["\n    margin-top: 20px;\n    max-width: 100%;\n"]))),hN=kC.div(oN||(oN=s(["\n    text-align: center;\n"])));var dN,fN,pN;class mN extends t.Component{constructor(e){super(e),this.handleSubmit=async e=>{e.preventDefault();const{displayName:t,email:n,password:r,confirmPassword:i}=this.state;if(r===i)try{const e=this.props.history,{user:i}=await NS.createUserWithEmailAndPassword(n,r);await AS(i,{displayName:t}),this.setState({displayName:"",email:"",password:"",confirmPassword:"",showAlert:!1}),e.push("/")}catch(s){console.error(s.message),s.message.toString().includes("auth/email-already-in-use")&&this.setState({showAlert:!0})}else alert("Passwords don't match!")},this.handleChange=e=>{const{name:t,value:n}=e.target;this.setState({[t]:n})},this.state={displayName:"",email:"",password:"",confirmPassword:"",showAlert:!1}}render(){const{displayName:e,email:t,password:n,confirmPassword:r,showAlert:i}=this.state;return(0,o.jsxs)(yN,{children:[(0,o.jsx)(wN,{children:(0,o.jsx)("h3",{children:"Sign Up"})}),(0,o.jsxs)(rN,{className:"font12",onSubmit:this.handleSubmit,children:[(0,o.jsxs)(rN.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,o.jsx)(rN.Label,{children:"Username"}),(0,o.jsx)(rN.Control,{type:"text",name:"displayName",label:"Display Name",placeholder:"Username",value:e,onChange:this.handleChange,required:!0})]}),(0,o.jsxs)(rN.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,o.jsx)(rN.Label,{children:"Email address"}),(0,o.jsx)(rN.Control,{type:"email",name:"email",label:"email",placeholder:"Enter email",value:t,onChange:this.handleChange,required:!0})]}),(0,o.jsxs)(rN.Group,{className:"mb-3",controlId:"formBasicPassword",children:[(0,o.jsx)(rN.Label,{children:"Password"}),(0,o.jsx)(rN.Control,{type:"password",name:"password",placeholder:"Enter password",value:n,minLength:"6",onChange:this.handleChange,label:"password",required:!0})]}),(0,o.jsxs)(rN.Group,{className:"mb-3",controlId:"formBasicPassword",children:[(0,o.jsx)(rN.Label,{children:"Confirm Password"}),(0,o.jsx)(rN.Control,{type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:r,minLength:"6",onChange:this.handleChange,label:"Confirm Password",required:!0})]}),(0,o.jsx)("button",{type:"submit",className:"btn btn-dark",style:{width:"100%"},children:"Sign Up"})]}),(0,o.jsx)(vN,{children:i&&(0,o.jsx)("div",{className:"alert alert-danger font13",role:"alert",children:"The email address is already in use by another account."})})]})}}const gN=Nx(mN),yN=kC.div(dN||(dN=s(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    text-align: start;\n"]))),vN=kC.div(fN||(fN=s(["\n    margin-top: 20px;\n    max-width: 100%;\n"]))),wN=kC.div(pN||(pN=s(["\n    text-align: center;\n"])));var bN,_N;const IN=()=>{const[e,n]=(0,t.useState)(!0);return(0,o.jsx)(EN,{children:(0,o.jsxs)("div",{className:"content",children:[(0,o.jsx)("div",{className:"form",children:e?(0,o.jsx)(cN,{}):(0,o.jsx)(gN,{})}),(0,o.jsx)("div",{className:"toggleButton font13",children:(0,o.jsxs)(SN,{children:[e?"Don't have an account? ":"Already have an account? ",(0,o.jsx)("button",{onClick:()=>{n(!e)},children:e?"Sign Up":"Sign In"})]})})]})})},EN=kC.div(bN||(bN=s(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100vh;\n\n    .content {\n        text-align: center;\n        width: 90%;\n        max-width: 350px;\n        border: 1px solid #ccc;\n        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n        border-radius: 5px;\n        padding: 20px; /* Add some padding */\n    }\n\n    .form {\n        width: 100%;\n        margin-bottom: 20px;\n    }\n\n    .toggleButton {\n        text-align: center;\n    }\n"]))),SN=kC.div(_N||(_N=s(["\n    text-align: center;\n    margin-top: 20px;\n"])));class kN extends i.Component{constructor(){super(),this.unsubscribeFromAuth=null,this.state={book:[],authors:"",title:"",subject:"",genre:"",background:"",currentUser:null}}async componentDidMount(){this.unsubscribeFromAuth=NS.onAuthStateChanged((async e=>{if(e){(await AS(e)).onSnapshot((e=>{this.setState({currentUser:{id:e.id,...e.data()}})}))}else this.setState({currentUser:e})})),this.callAPI()}componentWillUnmount(){this.unsubscribeFromAuth()}callAPI(){const e=Math.floor(1e3*Math.random());let t="https://gutendex.com/books/?ids=".concat(e);(async()=>{fetch(t).then((e=>e.json())).then((e=>{this.setState({book:e.results[0],title:this.getTitleName(e.results[0].title),authors:this.getAuthors(e.results[0].authors),subject:this.getRepsonse(e.results[0].subjects),genre:this.getRepsonse(e.results[0].bookshelves),background:this.generateBackground()})}),(e=>{this.setState({isLoaded:!0,error:e})}))})()}getTitleName(e){return e||""}getRepsonse(e){let t="";return e.map((function(n,r){return r<2&&(n=n.replace(/--/g,""),r+1===e.length||r+1===2?t+=n:t=t+n+"; "),n})),t}getAuthors(e){let t="";return t=e.map((function(n,r){const i=(n.name.match(/,/g)||[]).length;if(n.name.includes("(")||n.name.includes(")")||1!==i)t=n.name;else{let i=n.name.split(", ");t=r+1===e.length?i[1]+" "+i[0]:i[1]+" "+i[0]+", "}return t})),t}generateBackground(){let e=this.state.background;const t=Math.floor(100*Math.random())+155,n=Math.floor(100*Math.random())+155,r=Math.floor(100*Math.random())+155;return e="".concat("rgb("+t+","+n+","+r+")"),e}render(){return(0,o.jsx)("div",{className:"App",children:(0,o.jsxs)(Px,{basename:"/booksuggester",children:[(0,o.jsx)(lA,{currentUser:this.state.currentUser}),(0,o.jsxs)(Ax,{children:[(0,o.jsx)(Ex,{exact:!0,path:"/",children:(0,o.jsx)(gA,{className:"homeContainer",currentUser:this.state.currentUser,callAPI:()=>this.callAPI(),title:this.state.title,authors:this.state.authors,subject:this.state.subject,genre:this.state.genre,background:this.state.background})}),(0,o.jsx)(Ex,{exact:!0,path:"/book-list",children:(0,o.jsx)(xC,{currentUser:this.state.currentUser})}),(0,o.jsx)(Ex,{exact:!0,path:"/login",children:(0,o.jsx)(IN,{})})]})]})})}}const TN=kN;r.render((0,o.jsx)(t.StrictMode,{children:(0,o.jsx)(TN,{})}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.0695dec8.js.map