/*! For license information please see main.ac284e6b.js.LICENSE.txt */
(()=>{var e={219:(e,t,n)=>{"use strict";var r=n(86),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var l=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=u(n);h&&(o=o.concat(h(n)));for(var a=c(t),m=c(n),g=0;g<o.length;++g){var v=o[g];if(!s[v]&&(!r||!r[v])&&(!m||!m[v])&&(!a||!a[v])){var y=d(n,v);try{l(t,v,y)}catch(w){}}}}return t}},740:e=>{"use strict";e.exports=function(e,t,n,r,i,s,o,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,s,o,a],u=0;(c=new Error(t.replace(/%s/g,(function(){return l[u++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},141:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},123:(e,t,n)=>{var r=n(141);e.exports=f,e.exports.parse=s,e.exports.compile=function(e,t){return a(s(e,t),t)},e.exports.tokensToFunction=a,e.exports.tokensToRegExp=d;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function s(e,t){for(var n,r=[],s=0,o=0,a="",u=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],d=n[1],f=n.index;if(a+=e.slice(o,f),o=f+h.length,d)a+=d[1];else{var p=e[o],m=n[2],g=n[3],v=n[4],y=n[5],w=n[6],b=n[7];a&&(r.push(a),a="");var _=null!=m&&null!=p&&p!==m,E="+"===w||"*"===w,S="?"===w||"*"===w,x=n[2]||u,I=v||y;r.push({name:g||s++,prefix:m||"",delimiter:x,optional:S,repeat:E,partial:_,asterisk:!!b,pattern:I?l(I):b?".*":"[^"+c(x)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function a(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var s="",a=t||{},c=(i||{}).pretty?o:encodeURIComponent,l=0;l<e.length;l++){var u=e[l];if("string"!==typeof u){var h,d=a[u.name];if(null==d){if(u.optional){u.partial&&(s+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(r(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<d.length;f++){if(h=c(d[f]),!n[l].test(h))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(h)+"`");s+=(0===f?u.prefix:u.delimiter)+h}}else{if(h=u.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):c(d),!n[l].test(h))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+h+'"');s+=u.prefix+h}}else s+=u}return s}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,s=!1!==n.end,o="",a=0;a<e.length;a++){var l=e[a];if("string"===typeof l)o+=c(l);else{var d=c(l.prefix),f="(?:"+l.pattern+")";t.push(l),l.repeat&&(f+="(?:"+d+f+")*"),o+=f=l.optional?l.partial?d+"("+f+")?":"(?:"+d+"("+f+"))?":d+"("+f+")"}}var p=c(n.delimiter||"/"),m=o.slice(-p.length)===p;return i||(o=(m?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=s?"$":i&&m?"":"(?="+p+"|$)",u(new RegExp("^"+o,h(n)),t)}function f(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(f(e[i],t,n).source);return u(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return d(s(e,n),t,n)}(e,t,n)}},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var c="\n"+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function B(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case I:return"Profiler";case x:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,xe=null;function Ie(e){if(e=wi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function ke(e){Se?xe?xe.push(e):xe=[e]:Se=e}function Te(){if(Se){var e=Se,t=xe;if(xe=Se=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==Se||null!==xe)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Oe=!1}function Le(e,t,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,s,o,a,c){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(s(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,St,xt,It,kt=!1,Tt=[],Ct=null,Nt=null,At=null,Rt=new Map,Pt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){kt=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Rt.forEach(Ut),Pt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var qt=b.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Gt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Ht(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Gt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Gt(e,t,n,r){if(Wt){var i=$t(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=$t(e,t,n,r))&&Wr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=yi(e=_e(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(ln),hn=F({},ln,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),vn=sn(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(F({},ln,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function In(){return xn}var kn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(kn),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),An=sn(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Rn),On=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!Dn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){ke(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){jr(e,0)}function $n(e){if(G(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&$n(Gn)){var t=[];Kn(t,Gn,e,_e(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Gn)}function sr(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Hr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},xr={};function Ir(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return Sr[e]=n[t];return e}u&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Ir("animationend"),Tr=Ir("animationiteration"),Cr=Ir("animationstart"),Nr=Ir("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),c(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Dr=Rr[Or];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(kr,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,c,l){if(Be.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,je||(je=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=c}else for(o=0;o<r.length;o++){if(c=(a=r[o]).instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=c}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(c=o.tag)||6===c){r=s=o;continue e}a=a.parentNode}}r=r.return}Re((function(){var r=s,i=_e(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Tn;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Nn;break;case kr:case Tr:case Cr:c=vn;break;case Nr:c=An;break;case"scroll":c=dn;break;case"wheel":c=Pn;break;case"copy":case"cut":case"paste":c=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Cn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Pe(p,d))&&u.push(Kr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new c(a,l,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(h=ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==c?a:bi(c),f=null==l?a:bi(l),(a=new u(m,p+"leave",c,n,i)).target=h,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",l,n,i)).target=f,u.relatedTarget=h,m=u),h=m,c&&l)e:{for(d=l,p=0,f=u=c;f;f=Gr(f))p++;for(f=0,m=d;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==c&&Qr(o,a,c,u,!1),null!==l&&null!==h&&Qr(o,h,l,u,!0)}if("select"===(c=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Yn;else if(Wn(a))if(Jn)g=or;else{g=ir;var v=rr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Kn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(y=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(v=Hr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:v}),y?w.data=y:null!==(y=Bn(n))&&(w.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}jr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Kr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Kr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=Pe(n,s))&&o.unshift(Kr(n,c,a)):i||null!=(c=Pe(n,s))&&o.push(Kr(n,c,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ei=[],Si=-1;function xi(e){return{current:e}}function Ii(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function ki(e,t){Si++,Ei[Si]=e.current,e.current=t}var Ti={},Ci=xi(Ti),Ni=xi(!1),Ai=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ii(Ni),Ii(Ci)}function Di(e,t,n){if(Ci.current!==Ti)throw Error(s(168));ki(Ci,t),ki(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,ki(Ci,e),ki(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ni),Ii(Ci),ki(Ci,e)):Ii(Ni),ki(Ni,n)}var ji=null,Ui=!1,Vi=!1;function Bi(e){null===ji?ji=[e]:ji.push(e)}function zi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=wt;try{var n=ji;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ge(Ze,zi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Wi=0,Ki=null,Hi=0,Gi=[],Qi=0,$i=null,Yi=1,Ji="";function Xi(e,t){qi[Wi++]=Hi,qi[Wi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Gi[Qi++]=Yi,Gi[Qi++]=Ji,Gi[Qi++]=$i,$i=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Yi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Ki;)Ki=qi[--Wi],qi[Wi]=null,Hi=qi[--Wi],qi[Wi]=null;for(;e===$i;)$i=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,Yi=Gi[--Qi],Gi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ls(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(cs(e))throw Error(s(418));t=li(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(cs(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=li(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?li(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=li(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vs=xi(null),ys=null,ws=null,bs=null;function _s(){bs=ws=ys=null}function Es(e){var t=vs.current;Ii(vs),e._currentValue=t}function Ss(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xs(e,t){ys=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Is(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===ys)throw Error(s(308));ws=e,ys.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var ks=null;function Ts(e){null===ks?ks=[e]:ks.push(e)}function Cs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ts(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ns(e,r)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ps(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Os(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ds(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ns(e,n)}return null===(i=r.interleaved)?(t.next=t,Ts(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ns(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,l=c.next;c.next=null,null===o?s=l:o.next=l,o=c;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(null!==s){var h=i.baseState;for(o=0,u=l=c=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(l=u=f,c=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fc|=o,e.lanes=o,e.memoizedState=h}}function js(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Us=(new r.Component).refs;function Vs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bs={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Os(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ds(e,s,i))&&(rl(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Os(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ds(e,s,i))&&(rl(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=Os(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ds(e,i,r))&&(rl(t,e,r,n),Ls(t,e,r))}};function zs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,s))}function qs(e,t,n){var r=!1,i=Ti,s=t.contextType;return"object"===typeof s&&null!==s?s=Is(s):(i=Pi(t)?Ai:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ws(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bs.enqueueReplaceState(t,t.state,null)}function Ks(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Us,Rs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Is(s):(s=Pi(t)?Ai:Ci.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Vs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Hs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Us&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function $s(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=jl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Hs(e,t,n),r.return=e,r):((r=Ll(n.type,n.key,n.props,null,e.mode,r)).ref=Hs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Ml(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=Hs(e,null,t),n.return=e,n;case E:return(t=Ul(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ml(t,e.mode,n,null)).return=e,t;Gs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Gs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Gs(t,r)}return null}function m(i,s,a,c){for(var l=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],c);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,m),null===u?l=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),l;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],c))&&(s=o(h,s,m),null===u?l=h:u.sibling=h,u=h);return is&&Xi(i,m),l}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),l}function g(i,a,c,l){var u=L(c);if("function"!==typeof u)throw Error(s(150));if(null==(c=u.call(c)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,v=null,y=c.next();null!==m&&!y.done;g++,y=c.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,l);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=v}if(y.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!y.done;g++,y=c.next())null!==(y=d(i,y.value,l))&&(a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return is&&Xi(i,g),u}for(m=r(i,m);!y.done;g++,y=c.next())null!==(y=p(m,i,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,c){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var l=o.key,u=s;null!==u;){if(u.key===l){if((l=o.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===P&&Qs(l)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Hs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((s=Ml(o.props.children,r.mode,c,o.key)).return=r,r=s):((c=Ll(o.type,o.key,o.props,null,r.mode,c)).ref=Hs(r,s,o),c.return=r,r=c)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Ul(o,r.mode,c)).return=r,r=s}return a(r);case P:return e(r,s,(u=o._init)(o._payload),c)}if(te(o))return m(r,s,o,c);if(L(o))return g(r,s,o,c);Gs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=jl(o,r.mode,c)).return=r,r=s),a(r)):n(r,s)}}var Ys=$s(!0),Js=$s(!1),Xs={},Zs=xi(Xs),eo=xi(Xs),to=xi(Xs);function no(e){if(e===Xs)throw Error(s(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Zs),ki(Zs,t)}function io(){Ii(Zs),Ii(eo),Ii(to)}function so(e){no(to.current);var t=no(Zs.current),n=ce(t,e.type);t!==n&&(ki(eo,e),ki(Zs,n))}function oo(e){eo.current===e&&(Ii(Zs),Ii(eo))}var ao=xi(0);function co(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function uo(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,vo=null,yo=!1,wo=!1,bo=0,_o=0;function Eo(){throw Error(s(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:ca,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,vo=go=null,t.updateQueue=null,ho.current=la,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,vo=go=mo=null,yo=!1,t)throw Error(s(300));return e}function Io(){var e=0!==bo;return bo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?mo.memoizedState=vo=e:vo=vo.next=e,vo}function To(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===vo?mo.memoizedState:vo.next;if(null!==t)vo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===vo?mo.memoizedState=vo=e:vo=vo.next=e}return vo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var c=a=null,l=null,u=o;do{var h=u.lane;if((po&h)===h)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=d,a=r):l=l.next=d,mo.lanes|=h,Fc|=h}u=u.next}while(null!==u&&u!==o);null===l?a=r:l.next=c,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Fc|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Po(e,t){var n=mo,r=To(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==vo&&1&vo.memoizedState.tag){if(n.flags|=2048,Uo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ac)throw Error(s(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=Ns(e,1);null!==t&&rl(t,e,1,-1)}function jo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function Bo(e,t,n,r){var i=ko();mo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=Uo(t,n,s,r))}mo.flags|=e,i.memoizedState=Uo(1|t,n,s,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Wo(e,t){return zo(2048,8,e,t)}function Ko(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Go.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Fc|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return To().memoizedState}function ta(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Cs(e,t,n,r))){rl(n,e,r,tl()),sa(n,t,r)}}function na(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var c=t.interleaved;return null===c?(i.next=i,Ts(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Cs(e,t,i,r))&&(rl(n,e,r,i=tl()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var oa={readContext:Is,useCallback:Eo,useContext:Eo,useEffect:Eo,useImperativeHandle:Eo,useInsertionEffect:Eo,useLayoutEffect:Eo,useMemo:Eo,useReducer:Eo,useRef:Eo,useState:Eo,useDebugValue:Eo,useDeferredValue:Eo,useTransition:Eo,useMutableSource:Eo,useSyncExternalStore:Eo,useId:Eo,unstable_isNewReconciler:!1},aa={readContext:Is,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Is,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:jo,useDebugValue:$o,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=ko();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ac)throw Error(s(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Ac.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ca={readContext:Is,useCallback:Yo,useContext:Is,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){return Xo(To(),go.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1},la={readContext:Is,useCallback:Yo,useContext:Is,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===go?t.memoizedState=e:Xo(t,go.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Os(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kc||(Kc=!0,Hc=r),da(0,t)},n}function ma(e,t,n){(n=Os(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Gc?Gc=new Set([this]):Gc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kl.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Os(-1,1)).tag=2,Ds(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Js(t,null,n,r):Ys(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var s=t.ref;return xs(t,i),r=xo(e,t,n,r,s,i),n=Io(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Sa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ol(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,xa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(o,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Dl(s,r)).ref=t.ref,e.return=t,t.child=e}function xa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(cr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ta(e,t,n,r,i)}function Ia(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Dc,Oc),Oc|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Dc,Oc),Oc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Dc,Oc),Oc|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Dc,Oc),Oc|=r;return _a(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var s=Pi(n)?Ai:Ci.current;return s=Ri(t,s),xs(t,i),n=xo(e,t,n,r,s,i),r=Io(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ca(e,t,n,r,i){if(Pi(n)){var s=!0;Mi(t)}else s=!1;if(xs(t,i),null===t.stateNode)Wa(e,t),qs(t,n,r),Ks(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Is(l):l=Ri(t,l=Pi(n)?Ai:Ci.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||c!==l)&&Ws(t,o,r,l),As=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),c=t.memoizedState,a!==r||d!==c||Ni.current||As?("function"===typeof u&&(Vs(t,n,u,r),c=t.memoizedState),(a=As||zs(t,n,a,r,d,c,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ps(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:gs(t.type,a),o.props=l,h=t.pendingProps,d=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=Is(c):c=Ri(t,c=Pi(n)?Ai:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==c)&&Ws(t,o,r,c),As=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||As?("function"===typeof f&&(Vs(t,n,f,r),p=t.memoizedState),(l=As||zs(t,n,l,r,d,p,c)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ka(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ys(t,e.child,null,s),t.child=Ys(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Ra(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Pa,Oa,Da,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function ja(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(ao,1&o),null===e)return ls(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Fl(c,i,0,null),e=Ml(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):Ua(t,c));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fl({mode:"visible",children:r.children},i,0,null),(o=Ml(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ys(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,Va(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(c=0!==(a&e.childLanes),ba||c){if(null!==(r=Ac)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ns(e,i),rl(r,e,i,-1))}return gl(),Va(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=li(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Qi++]=Yi,Gi[Qi++]=Ji,Gi[Qi++]=$i,Yi=e.id,Ji=e.overflow,$i=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,o,n);if(a){a=i.fallback,c=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Dl(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Dl(r,a):(a=Ml(a,c,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?Fa(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Dl(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=Fl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&ps(r),Ys(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ss(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===co(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===co(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Pi(t.type)&&Oi(),Ga(t),null;case 3:return r=t.stateNode,io(),Ii(Ni),Ii(Ci),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(al(ss),ss=null))),Oa(e,t),Ga(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ga(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var c in ye(n,o),i=null,o)if(o.hasOwnProperty(c)){var l=o[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",""+l]):a.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[di]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(c=we(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ye(n,i),l=i)if(l.hasOwnProperty(o)){var u=l[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&w(e,o,u,c))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ga(t),null;case 13:if(Ii(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),o=!1}else null!==ss&&(al(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Lc&&(Lc=3):gl())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return io(),Oa(e,t),null===e&&zr(t.stateNode.containerInfo),Ga(t),null;case 10:return Es(t.type._context),Ga(t),null;case 19:if(Ii(ao),null===(o=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(c=o.rendering))if(r)Ha(o,!1);else{if(0!==Lc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=co(e))){for(t.flags|=128,Ha(o,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qc&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=co(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!is)return Ga(t),null}else 2*Je()-o.renderingStartTime>qc&&1073741824!==n&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=o.last)?n.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ao.current,ki(ao,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Oc)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function $a(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ii(Ni),Ii(Ci),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ii(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(ao),null;case 4:return io(),null;case 10:return Es(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var c=i[u];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(o=o||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Ur("scroll",e),o||c===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function ec(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Il(e,t,r)}else n.current=null}function tc(e,t,n){try{n()}catch(r){Il(e,t,r)}}var nc=!1;function rc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tc(t,n,s)}i=i.next}while(i!==r)}}function ic(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}function uc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}var hc=null,dc=!1;function fc(e,t,n){for(n=n.child;null!==n;)pc(e,t,n),n=n.sibling}function pc(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||ec(n,t);case 6:var r=hc,i=dc;hc=null,fc(e,t,n),dc=i,null!==(hc=r)&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hc.removeChild(n.stateNode));break;case 18:null!==hc&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),zt(e)):ci(hc,n.stateNode));break;case 4:r=hc,i=dc,hc=n.stateNode.containerInfo,dc=!0,fc(e,t,n),hc=r,dc=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tc(n,t,o),i=i.next}while(i!==r)}fc(e,t,n);break;case 1:if(!Ja&&(ec(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Il(n,t,a)}fc(e,t,n);break;case 21:fc(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fc(e,t,n),Ja=r):fc(e,t,n);break;default:fc(e,t,n)}}function mc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Nl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:hc=c.stateNode,dc=!1;break e;case 3:case 4:hc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===hc)throw Error(s(160));pc(o,a,i),hc=null,dc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(u){Il(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vc(t,e),t=t.sibling}function vc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gc(t,e),yc(e),4&r){try{rc(3,e,e.return),ic(3,e)}catch(g){Il(e,e.return,g)}try{rc(5,e,e.return)}catch(g){Il(e,e.return,g)}}break;case 1:gc(t,e),yc(e),512&r&&null!==n&&ec(n,n.return);break;case 5:if(gc(t,e),yc(e),512&r&&null!==n&&ec(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Il(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===o.type&&null!=o.name&&J(i,o),we(c,a);var u=we(c,o);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(c){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Il(e,e.return,g)}}break;case 6:if(gc(t,e),yc(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Il(e,e.return,g)}}break;case 3:if(gc(t,e),yc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Il(e,e.return,g)}break;case 4:default:gc(t,e),yc(e);break;case 13:gc(t,e),yc(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zc=Je())),4&r&&mc(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,gc(t,e),Ja=u):gc(t,e),yc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rc(4,f,f.return);break;case 1:ec(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Il(r,n,g)}}break;case 5:ec(f,f.return);break;case 22:if(null!==f.memoizedState){Ec(d);continue}}null!==p?(p.return=f,Za=p):Ec(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=d.stateNode,a=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",a))}catch(g){Il(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Il(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gc(t,e),yc(e),4&r&&mc(e);case 21:}}function yc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ac(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),uc(e,cc(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;lc(e,cc(e),o);break;default:throw Error(s(161))}}catch(a){Il(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wc(e,t,n){Za=e,bc(e,t,n)}function bc(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,c=null!==a&&null!==a.memoizedState||Ja;a=Ya;var l=Ja;if(Ya=o,(Ja=c)&&!l)for(Za=i;null!==Za;)c=(o=Za).child,22===o.tag&&null!==o.memoizedState?Sc(i):null!==c?(c.return=o,Za=c):Sc(i);for(;null!==s;)Za=s,bc(s,t,n),s=s.sibling;Za=i,Ya=a,Ja=l}_c(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):_c(e)}}function _c(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||ic(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&js(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}js(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&sc(t)}catch(f){Il(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Ec(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Sc(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ic(4,t)}catch(c){Il(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Il(t,i,c)}}var s=t.return;try{sc(t)}catch(c){Il(t,s,c)}break;case 5:var o=t.return;try{sc(t)}catch(c){Il(t,o,c)}}}catch(c){Il(t,t.return,c)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var xc,Ic=Math.ceil,kc=b.ReactCurrentDispatcher,Tc=b.ReactCurrentOwner,Cc=b.ReactCurrentBatchConfig,Nc=0,Ac=null,Rc=null,Pc=0,Oc=0,Dc=xi(0),Lc=0,Mc=null,Fc=0,jc=0,Uc=0,Vc=null,Bc=null,zc=0,qc=1/0,Wc=null,Kc=!1,Hc=null,Gc=null,Qc=!1,$c=null,Yc=0,Jc=0,Xc=null,Zc=-1,el=0;function tl(){return 0!==(6&Nc)?Je():-1!==Zc?Zc:Zc=Je()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Nc)&&0!==Pc?Pc&-Pc:null!==ms.transition?(0===el&&(el=mt()),el):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rl(e,t,n,r){if(50<Jc)throw Jc=0,Xc=null,Error(s(185));vt(e,n,r),0!==(2&Nc)&&e===Ac||(e===Ac&&(0===(2&Nc)&&(jc|=n),4===Lc&&cl(e,Pc)),il(e,r),1===n&&0===Nc&&0===(1&t.mode)&&(qc=Je()+500,Ui&&zi()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,c=i[o];-1===c?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Ac?Pc:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(ll.bind(null,e)):Bi(ll.bind(null,e)),oi((function(){0===(6&Nc)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Al(n,sl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sl(e,t){if(Zc=-1,el=0,0!==(6&Nc))throw Error(s(327));var n=e.callbackNode;if(Sl()&&e.callbackNode!==n)return null;var r=dt(e,e===Ac?Pc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vl(e,r);else{t=r;var i=Nc;Nc|=2;var o=ml();for(Ac===e&&Pc===t||(Wc=null,qc=Je()+500,fl(e,t));;)try{wl();break}catch(c){pl(e,c)}_s(),kc.current=o,Nc=i,null!==Rc?t=0:(Ac=null,Pc=0,t=Lc)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ol(e,i))),1===t)throw n=Mc,fl(e,0),cl(e,r),il(e,Je()),n;if(6===t)cl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vl(e,r))&&(0!==(o=pt(e))&&(r=o,t=ol(e,o))),1===t))throw n=Mc,fl(e,0),cl(e,r),il(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:El(e,Bc,Wc);break;case 3:if(cl(e,r),(130023424&r)===r&&10<(t=zc+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(El.bind(null,e,Bc,Wc),t);break}El(e,Bc,Wc);break;case 4:if(cl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ic(r/1960))-r)){e.timeoutHandle=ri(El.bind(null,e,Bc,Wc),r);break}El(e,Bc,Wc);break;default:throw Error(s(329))}}}return il(e,Je()),e.callbackNode===n?sl.bind(null,e):null}function ol(e,t){var n=Vc;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=vl(e,t))&&(t=Bc,Bc=n,null!==t&&al(t)),e}function al(e){null===Bc?Bc=e:Bc.push.apply(Bc,e)}function cl(e,t){for(t&=~Uc,t&=~jc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Nc))throw Error(s(327));Sl();var t=dt(e,0);if(0===(1&t))return il(e,Je()),null;var n=vl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Mc,fl(e,0),cl(e,t),il(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,El(e,Bc,Wc),il(e,Je()),null}function ul(e,t){var n=Nc;Nc|=1;try{return e(t)}finally{0===(Nc=n)&&(qc=Je()+500,Ui&&zi())}}function hl(e){null!==$c&&0===$c.tag&&0===(6&Nc)&&Sl();var t=Nc;Nc|=1;var n=Cc.transition,r=wt;try{if(Cc.transition=null,wt=1,e)return e()}finally{wt=r,Cc.transition=n,0===(6&(Nc=t))&&zi()}}function dl(){Oc=Dc.current,Ii(Dc)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rc)for(n=Rc.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ii(Ni),Ii(Ci),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ii(ao);break;case 10:Es(r.type._context);break;case 22:case 23:dl()}n=n.return}if(Ac=e,Rc=e=Dl(e.current,null),Pc=Oc=t,Lc=0,Mc=null,Uc=jc=Fc=0,Bc=Vc=null,null!==ks){for(t=0;t<ks.length;t++)if(null!==(r=(n=ks[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return e}function pl(e,t){for(;;){var n=Rc;try{if(_s(),ho.current=oa,yo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,vo=go=mo=null,wo=!1,bo=0,Tc.current=null,null===n||null===n.return){Lc=1,Mc=t,Rc=null;break}e:{var o=e,a=n.return,c=n,l=t;if(t=Pc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,c,0,t),1&p.mode&&ga(o,u,t),l=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){ga(o,u,t),gl();break e}l=Error(s(426))}else if(is&&1&c.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,c,0,t),ps(ua(l,c));break e}}o=l=ua(l,c),4!==Lc&&(Lc=2),null===Vc?Vc=[o]:Vc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,l,t));break e;case 1:c=l;var y=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Gc||!Gc.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,c,t));break e}}o=o.return}while(null!==o)}_l(n)}catch(b){t=b,Rc===n&&null!==n&&(Rc=n=n.return);continue}break}}function ml(){var e=kc.current;return kc.current=oa,null===e?oa:e}function gl(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Ac||0===(268435455&Fc)&&0===(268435455&jc)||cl(Ac,Pc)}function vl(e,t){var n=Nc;Nc|=2;var r=ml();for(Ac===e&&Pc===t||(Wc=null,fl(e,t));;)try{yl();break}catch(i){pl(e,i)}if(_s(),Nc=n,kc.current=r,null!==Rc)throw Error(s(261));return Ac=null,Pc=0,Lc}function yl(){for(;null!==Rc;)bl(Rc)}function wl(){for(;null!==Rc&&!$e();)bl(Rc)}function bl(e){var t=xc(e.alternate,e,Oc);e.memoizedProps=e.pendingProps,null===t?_l(e):Rc=t,Tc.current=null}function _l(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Oc)))return void(Rc=n)}else{if(null!==(n=$a(n,t)))return n.flags&=32767,void(Rc=n);if(null===e)return Lc=6,void(Rc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rc=t);Rc=t=e}while(null!==t);0===Lc&&(Lc=5)}function El(e,t,n){var r=wt,i=Cc.transition;try{Cc.transition=null,wt=1,function(e,t,n,r){do{Sl()}while(null!==$c);if(0!==(6&Nc))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Ac&&(Rc=Ac=null,Pc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qc||(Qc=!0,Al(tt,(function(){return Sl(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cc.transition,Cc.transition=null;var a=wt;wt=1;var c=Nc;Nc|=4,Tc.current=null,function(e,t){if(ei=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,c=-1,l=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(c=a+i),d!==o||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(c=a),f===o&&++h===r&&(l=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Il(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nc,nc=!1}(e,n),vc(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,wc(n,e,i),Ye(),Nc=c,wt=a,Cc.transition=o}else e.current=n;if(Qc&&(Qc=!1,$c=e,Yc=i),o=e.pendingLanes,0===o&&(Gc=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kc)throw Kc=!1,e=Hc,Hc=null,e;0!==(1&Yc)&&0!==e.tag&&Sl(),o=e.pendingLanes,0!==(1&o)?e===Xc?Jc++:(Jc=0,Xc=e):Jc=0,zi()}(e,t,n,r)}finally{Cc.transition=i,wt=r}return null}function Sl(){if(null!==$c){var e=bt(Yc),t=Cc.transition,n=wt;try{if(Cc.transition=null,wt=16>e?16:e,null===$c)var r=!1;else{if(e=$c,$c=null,Yc=0,0!==(6&Nc))throw Error(s(331));var i=Nc;for(Nc|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var c=o.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rc(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(oc(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rc(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Za=y;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(c=Za).flags))try{switch(c.tag){case 0:case 11:case 15:ic(9,c)}}catch(E){Il(c,c.return,E)}if(c===a){Za=null;break e}var _=c.sibling;if(null!==_){_.return=c.return,Za=_;break e}Za=c.return}}if(Nc=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{wt=n,Cc.transition=t}}return!1}function xl(e,t,n){e=Ds(e,t=pa(0,t=ua(n,t),1),1),t=tl(),null!==e&&(vt(e,1,t),il(e,t))}function Il(e,t,n){if(3===e.tag)xl(e,e,n);else for(;null!==t;){if(3===t.tag){xl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gc||!Gc.has(r))){t=Ds(t,e=ma(t,e=ua(n,e),1),1),e=tl(),null!==t&&(vt(t,1,e),il(t,e));break}}t=t.return}}function kl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Ac===e&&(Pc&n)===n&&(4===Lc||3===Lc&&(130023424&Pc)===Pc&&500>Je()-zc?fl(e,0):Uc|=n),il(e,t)}function Tl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tl();null!==(e=Ns(e,t))&&(vt(e,t,n),il(e,n))}function Cl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tl(e,n)}function Nl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tl(e,n)}function Al(e,t){return Ge(e,t)}function Rl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(e,t,n,r){return new Rl(e,t,n,r)}function Ol(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dl(e,t){var n=e.alternate;return null===n?((n=Pl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Ol(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Ml(n.children,i,o,t);case x:a=8,i|=8;break;case I:return(e=Pl(12,n,t,2|i)).elementType=I,e.lanes=o,e;case N:return(e=Pl(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Pl(19,n,t,i)).elementType=A,e.lanes=o,e;case O:return Fl(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case T:a=9;break e;case C:a=11;break e;case R:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pl(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ml(e,t,n,r){return(e=Pl(7,e,r,t)).lanes=n,e}function Fl(e,t,n,r){return(e=Pl(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function jl(e,t,n){return(e=Pl(6,e,null,t)).lanes=n,e}function Ul(e,t,n){return(t=Pl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bl(e,t,n,r,i,s,o,a,c){return e=new Vl(e,t,n,a,c),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pl(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function zl(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function ql(e,t,n,r,i,s,o,a,c){return(e=Bl(n,r,!0,e,0,s,0,a,c)).context=zl(null),n=e.current,(s=Os(r=tl(),i=nl(n))).callback=void 0!==t&&null!==t?t:null,Ds(n,s,i),e.current.lanes=i,vt(e,i,r),il(e,r),e}function Wl(e,t,n,r){var i=t.current,s=tl(),o=nl(i);return n=zl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Os(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ds(i,t,o))&&(rl(e,i,o,s),Ls(e,i,o)),o}function Kl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gl(e,t){Hl(e,t),(e=e.alternate)&&Hl(e,t)}xc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:so(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(vs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ja(e,t,n):(ki(ao,1&ao.current),null!==(e=Ka(e,t,n))?e.sibling:null);ki(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ia(e,t,n)}return Ka(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);xs(t,n),i=xo(null,t,r,e,i,n);var o=Io();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Rs(t),i.updater=Bs,t.stateNode=i,i._reactInternals=t,Ks(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ol(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ps(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ra(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=li(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ka(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&ls(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&ls(t),null;case 13:return ja(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ys(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(vs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Ka(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){a=o.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Os(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ss(o.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ss(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,xs(t,n),r=r(i=Is(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Sa(e,t,r,i=gs(r.type,i),n);case 15:return xa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Wa(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,xs(t,n),qs(t,r,i),Ks(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ia(e,t,n)}throw Error(s(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function $l(e){this._internalRoot=e}function Yl(e){this._internalRoot=e}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Kl(o);a.call(e)}}Wl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Kl(o);s.call(e)}}var o=ql(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),hl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Kl(c);a.call(e)}}var c=Bl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=c,e[pi]=c.current,zr(8===e.nodeType?e.parentNode:e),hl((function(){Wl(t,c,n,r)})),c}(n,t,e,i,r);return Kl(o)}Yl.prototype.render=$l.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wl(e,t,null,null)},Yl.prototype.unmount=$l.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hl((function(){Wl(null,e,null,null)})),t[pi]=null}},Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),il(t,Je()),0===(6&Nc)&&(qc=Je()+500,zi()))}break;case 13:hl((function(){var t=Ns(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),Gl(e,1)}},Et=function(e){if(13===e.tag){var t=Ns(e,134217728);if(null!==t)rl(t,e,134217728,tl());Gl(e,134217728)}},St=function(e){if(13===e.tag){var t=nl(e),n=Ns(e,t);if(null!==n)rl(n,e,t,tl());Gl(e,t)}},xt=function(){return wt},It=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));G(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=ul,Ne=hl;var tu={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,Te,ul]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jl(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jl(e))throw Error(s(299));var n=!1,r="",i=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new $l(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return hl(e)},t.hydrate=function(e,t,n){if(!Xl(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jl(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=ql(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yl(t)},t.render=function(e,t,n){if(!Xl(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(s(40));return!!e._reactRootContainer&&(hl((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ul,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xl(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},391:(e,t,n)=>{"use strict";var r=n(950);t.H=r.createRoot,r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},82:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case l:case d:case g:case m:case c:return e;default:return t}}case i:return t}}}function E(e){return _(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=c,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return E(e)||_(e)===u},t.isConcurrentMode=E,t.isContextConsumer=function(e){return _(e)===l},t.isContextProvider=function(e){return _(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===s},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===h||e===a||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===y||e.$$typeof===w||e.$$typeof===b||e.$$typeof===v)},t.typeOf=_},86:(e,t,n)=>{"use strict";e.exports=n(82)},104:(e,t,n)=>{"use strict";var r=n(579),i=n(43),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function o(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function a(e){var t=e.size,n=void 0===t?25:t,i=e.SVGstrokeColor,o=void 0===i?"currentColor":i,a=e.SVGstorkeWidth,c=void 0===a?0:a,l=e.SVGclassName,u=void 0===l?"star-svg":l,h=e.SVGstyle;return r.jsx("svg",s({className:u,style:h,stroke:o,fill:"currentColor",strokeWidth:c,viewBox:"0 0 24 24",width:n,height:n,xmlns:"http://www.w3.org/2000/svg"},{children:r.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}))}function c(e,t){switch(t.type){case"PointerMove":return s(s({},e),{hoverValue:t.payload,hoverIndex:t.index});case"PointerLeave":return s(s({},e),{ratingValue:e.ratingValue,hoverIndex:0,hoverValue:null});case"MouseClick":return s(s({},e),{valueIndex:e.hoverIndex,ratingValue:t.payload});default:return e}}function l(){return"undefined"!=typeof window&&window.matchMedia("(pointer: coarse)").matches||"ontouchstart"in window||"undefined"!=typeof navigator&&navigator.maxTouchPoints>0}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".style-module_starRatingWrap__q-lJC{display:inline-block;touch-action:none}.style-module_simpleStarRating__nWUxf{display:inline-block;overflow:hidden;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}.style-module_fillIcons__6---A{display:inline-block;overflow:hidden;position:absolute;top:0;white-space:nowrap}.style-module_emptyIcons__Bg-FZ{display:inline-block}.style-module_tooltip__tKc3i{background-color:#333;border-radius:5px;color:#fff;display:inline-block;padding:5px 15px;vertical-align:middle}"),t.G=function(e){var t,n,u=e.onClick,h=e.onPointerMove,d=e.onPointerEnter,f=e.onPointerLeave,p=e.initialValue,m=void 0===p?0:p,g=e.iconsCount,v=void 0===g?5:g,y=e.size,w=void 0===y?40:y,b=e.readonly,_=void 0!==b&&b,E=e.rtl,S=void 0!==E&&E,x=e.customIcons,I=void 0===x?[]:x,k=e.allowFraction,T=void 0!==k&&k,C=e.style,N=e.className,A=void 0===N?"react-simple-star-rating":N,R=e.transition,P=void 0!==R&&R,O=e.allowHover,D=void 0===O||O,L=e.disableFillHover,M=void 0!==L&&L,F=e.fillIcon,j=void 0===F?null:F,U=e.fillColor,V=void 0===U?"#ffbc0b":U,B=e.fillColorArray,z=void 0===B?[]:B,q=e.fillStyle,W=e.fillClassName,K=void 0===W?"filled-icons":W,H=e.emptyIcon,G=void 0===H?null:H,Q=e.emptyColor,$=void 0===Q?"#cccccc":Q,Y=e.emptyStyle,J=e.emptyClassName,X=void 0===J?"empty-icons":J,Z=e.allowTitleTag,ee=void 0===Z||Z,te=e.showTooltip,ne=void 0!==te&&te,re=e.tooltipDefaultText,ie=void 0===re?"Your Rate":re,se=e.tooltipArray,oe=void 0===se?[]:se,ae=e.tooltipStyle,ce=e.tooltipClassName,le=void 0===ce?"react-simple-star-rating-tooltip":ce,ue=e.SVGclassName,he=void 0===ue?"star-svg":ue,de=e.titleSeparator,fe=void 0===de?"out of":de,pe=e.SVGstyle,me=e.SVGstorkeWidth,ge=void 0===me?0:me,ve=e.SVGstrokeColor,ye=void 0===ve?"currentColor":ve,we=i.useReducer(c,{hoverIndex:0,valueIndex:0,ratingValue:m,hoverValue:null}),be=we[0],_e=be.ratingValue,Ee=be.hoverValue,Se=be.hoverIndex,xe=be.valueIndex,Ie=we[1];i.useEffect((function(){m&&Ie({type:"MouseClick",payload:0})}),[m]);var ke=i.useMemo((function(){return T?2*v:v}),[T,v]),Te=i.useMemo((function(){return m>ke?0:T||Math.floor(m)===m?Math.round(m/v*100):2*Math.ceil(m)*10}),[T,m,v,ke]),Ce=i.useMemo((function(){return(T?2*m-1:m-1)||0}),[T,m]),Ne=i.useCallback((function(e){return v%2!=0?e/2/10:e*v/100}),[v]),Ae=function(e){for(var t=e.clientX,n=e.currentTarget.children[0].getBoundingClientRect(),r=n.left,i=n.right,s=n.width,o=S?i-t:t-r,a=ke,c=Math.round(s/ke),l=0;l<=ke;l+=1)if(o<=c*l){a=0===l&&o<c?0:l;break}var u=a-1;a>0&&(Ie({type:"PointerMove",payload:100*a/ke,index:u}),h&&Ee&&h(Ne(Ee),u,e))},Re=function(e){Ee&&(Ie({type:"MouseClick",payload:Ee}),u&&u(Ne(Ee),Se,e))},Pe=i.useMemo((function(){if(D){if(M){var e=_e&&_e||Te;return Ee&&Ee>e?Ee:e}return Ee&&Ee||_e&&_e||Te}return _e&&_e||Te}),[D,M,Ee,_e,Te]);i.useEffect((function(){oe.length>ke&&console.error("tooltipArray Array length is bigger then Icons Count length.")}),[oe.length,ke]);var Oe=i.useCallback((function(e){return Ee&&e[Se]||_e&&e[xe]||m&&e[Ce]}),[Ee,Se,_e,xe,m,Ce]),De=i.useMemo((function(){return Ee&&Ne(Ee)||_e&&Ne(_e)||m&&Ne(Te)}),[Ee,Ne,_e,m,Te]);return r.jsxs("span",s({className:"style-module_starRatingWrap__q-lJC",style:{direction:"".concat(S?"rtl":"ltr")}},{children:[r.jsxs("span",s({className:"".concat("style-module_simpleStarRating__nWUxf"," ").concat(A),style:s({cursor:_?"":"pointer"},C),onPointerMove:_?void 0:Ae,onPointerEnter:_?void 0:function(e){d&&d(e),l()&&Ae(e)},onPointerLeave:_?void 0:function(e){l()&&Re(),Ie({type:"PointerLeave"}),f&&f(e)},onClick:_?void 0:Re,"aria-hidden":"true"},{children:[r.jsx("span",s({className:"".concat("style-module_emptyIcons__Bg-FZ"," ").concat(X),style:s({color:$},Y)},{children:o([],Array(v),!0).map((function(e,t){var n;return r.jsx(i.Fragment,{children:(null===(n=I[t])||void 0===n?void 0:n.icon)||G||r.jsx(a,{SVGclassName:he,SVGstyle:pe,SVGstorkeWidth:ge,SVGstrokeColor:ye,size:w})},t)}))})),r.jsx("span",s({className:"".concat("style-module_fillIcons__6---A"," ").concat(K),style:s((t={},t[S?"right":"left"]=0,t.color=Oe(z)||V,t.transition=P?"width .2s ease, color .2s ease":"",t.width="".concat(Pe,"%"),t),q),title:ee?"".concat(De," ").concat(fe," ").concat(v):void 0},{children:o([],Array(v),!0).map((function(e,t){var n;return r.jsx(i.Fragment,{children:(null===(n=I[t])||void 0===n?void 0:n.icon)||j||r.jsx(a,{SVGclassName:he,SVGstyle:pe,SVGstorkeWidth:ge,SVGstrokeColor:ye,size:w})},t)}))}))]})),ne&&r.jsx("span",s({className:"".concat("style-module_tooltip__tKc3i"," ").concat(le),style:s((n={},n[S?"marginRight":"marginLeft"]=20,n),ae)},{children:(oe.length>0?Oe(oe):De)||ie}))]}))}},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,s={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!c.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=l,t.jsxs=l},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!x.hasOwnProperty(i)&&(s[i]=t[i]);var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===s[i]&&(s[i]=c[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return o=o(c=e),e=""===s?"."+C(c,0):s,_(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(c=0,s=""===s?".":s+":",_(e))for(var l=0;l<e.length;l++){var u=s+C(a=e[l],l);c+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=N(a=a.value,t,i,u=s+C(a,l++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)E.call(t,l)&&!x.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,c=e[a],l=a+1,u=e[l];if(0>s(c,n))l<i&&0>s(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[a]=n,r=a);else{if(!(l<i&&0>s(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(l))m=!0,O(E);else{var t=r(u);null!==t&&D(_,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,y(k),k=-1),p=!0;var s=f;try{for(b(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(l)&&i(l),b(n)}else i(l);d=r(l)}if(null!==d)var c=!0;else{var h=r(u);null!==h&&D(_,h.startTime-n),c=!1}return c}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,x=!1,I=null,k=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?S():(x=!1,I=null)}}else x=!1}if("function"===typeof w)S=function(){w(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,S=function(){P.postMessage(null)}}else S=function(){v(A,0)};function O(e){I=e,x||(x=!0,S())}function D(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(l)&&e===r(u)&&(g?(y(k),k=-1):g=!0,D(_,s-o))):(e.sortIndex=a,n(l,e),m||p||(m=!0,O(E))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),c=0;c<s.length;c++){var l=s[c];if(!a(l))return!1;var u=e[l],h=t[l];if(!1===(i=n?n.call(r,u,h,l):void 0)||void 0===i&&u!==h)return!1}return!0}},440:e=>{"use strict";var t=function(){};e.exports=t},139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/booksuggester/",n.nc=void 0,(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>Or,SDK_VERSION:()=>Fi,_DEFAULT_ENTRY_NAME:()=>Ii,_addComponent:()=>Ni,_addOrOverwriteComponent:()=>Ai,_apps:()=>Ti,_clearComponents:()=>Di,_components:()=>Ci,_getProvider:()=>Pi,_registerComponent:()=>Ri,_removeServiceInstance:()=>Oi,deleteApp:()=>Bi,getApp:()=>Ui,getApps:()=>Vi,initializeApp:()=>ji,onLog:()=>qi,registerVersion:()=>zi,setLogLevel:()=>Wi});var t=n(391),r=n(43);function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}var o=n(173),a=n.n(o);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function l(e){return"/"===e.charAt(0)}function u(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}const h=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],s=e&&l(e),o=t&&l(t),a=s||o;if(e&&l(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var c=i[i.length-1];n="."===c||".."===c||""===c}else n=!1;for(var h=0,d=i.length;d>=0;d--){var f=i[d];"."===f?u(i,d):".."===f?(u(i,d),h++):h&&(u(i,d),h--)}if(!a)for(;h--;h)i.unshift("..");!a||""===i[0]||i[0]&&l(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};var d=!0,f="Invariant failed";function p(e,t){if(!e){if(d)throw new Error(f);var n="function"===typeof t?t():t,r=n?"".concat(f,": ").concat(n):f;throw new Error(r)}}function m(e){return"/"===e.charAt(0)?e:"/"+e}function g(e){return"/"===e.charAt(0)?e.substr(1):e}function v(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function y(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function w(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function b(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var s=t.indexOf("?");return-1!==s&&(n=t.substr(s),t=t.substr(0,s)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=c({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=h(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function _(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var s="function"===typeof e?e(t,n):e;"string"===typeof s?"function"===typeof r?r(s,i):i(!0):i(!1!==s)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var E=!("undefined"===typeof window||!window.document||!window.document.createElement);function S(e,t){t(window.confirm(e))}var x="popstate",I="hashchange";function k(){try{return window.history.state||{}}catch(e){return{}}}function T(e){void 0===e&&(e={}),E||p(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,s=i.forceRefresh,o=void 0!==s&&s,a=i.getUserConfirmation,l=void 0===a?S:a,u=i.keyLength,h=void 0===u?6:u,d=e.basename?y(m(e.basename)):"";function f(e){var t=e||{},n=t.key,r=t.state,i=window.location,s=i.pathname+i.search+i.hash;return d&&(s=v(s,d)),b(s,r,n)}function g(){return Math.random().toString(36).substr(2,h)}var T=_();function C(e){c(V,e),V.length=t.length,T.notifyListeners(V.location,V.action)}function N(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||P(f(e.state))}function A(){P(f(k()))}var R=!1;function P(e){if(R)R=!1,C();else{T.confirmTransitionTo(e,"POP",l,(function(t){t?C({action:"POP",location:e}):function(e){var t=V.location,n=D.indexOf(t.key);-1===n&&(n=0);var r=D.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(R=!0,M(i))}(e)}))}}var O=f(k()),D=[O.key];function L(e){return d+w(e)}function M(e){t.go(e)}var F=0;function j(e){1===(F+=e)&&1===e?(window.addEventListener(x,N),r&&window.addEventListener(I,A)):0===F&&(window.removeEventListener(x,N),r&&window.removeEventListener(I,A))}var U=!1;var V={length:t.length,action:"POP",location:O,createHref:L,push:function(e,r){var i="PUSH",s=b(e,r,g(),V.location);T.confirmTransitionTo(s,i,l,(function(e){if(e){var r=L(s),a=s.key,c=s.state;if(n)if(t.pushState({key:a,state:c},null,r),o)window.location.href=r;else{var l=D.indexOf(V.location.key),u=D.slice(0,l+1);u.push(s.key),D=u,C({action:i,location:s})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",s=b(e,r,g(),V.location);T.confirmTransitionTo(s,i,l,(function(e){if(e){var r=L(s),a=s.key,c=s.state;if(n)if(t.replaceState({key:a,state:c},null,r),o)window.location.replace(r);else{var l=D.indexOf(V.location.key);-1!==l&&(D[l]=s.key),C({action:i,location:s})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=T.setPrompt(e);return U||(j(1),U=!0),function(){return U&&(U=!1,j(-1)),t()}},listen:function(e){var t=T.appendListener(e);return j(1),function(){j(-1),t()}}};return V}var C="hashchange",N={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+g(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:g,decodePath:m},slash:{encodePath:m,decodePath:m}};function A(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function R(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function P(e){window.location.replace(A(window.location.href)+"#"+e)}function O(e){void 0===e&&{},E||p(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?S:r,s=n.hashType,o=void 0===s?"slash":s,a=e.basename?y(m(e.basename)):"",l=N[o],u=l.encodePath,h=l.decodePath;function d(){var e=h(R());return a&&v(e,a),b(e)}var f=_();function g(e){c(V,e),V.length=t.length,f.notifyListeners(V.location,V.action)}var x=!1,I=null;function k(){var e=R(),t=u(e);if(e!==t)P(t);else{var n=d(),r=V.location;if(!x&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(I===w(n))return;null,function(e){if(x)!1,g();else{var t="POP";f.confirmTransitionTo(e,t,i,(function(n){n?g({action:t,location:e}):function(e){var t=V.location,n=L.lastIndexOf(w(t));-1===n&&0;var r=L.lastIndexOf(w(e));-1===r&&0;var i=n-r;i&&(!0,M(i))}(e)}))}}(n)}}var T=R(),O=u(T);T!==O&&P(O);var D=d(),L=[w(D)];function M(e){t.go(e)}var F=0;function j(e){1===(F+=e)&&1===e?window.addEventListener(C,k):0===F&&window.removeEventListener(C,k)}var U=!1;var V={length:t.length,action:"POP",location:D,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&A(window.location.href),n+"#"+u(a+w(e))},push:function(e,t){var n="PUSH",r=b(e,void 0,void 0,V.location);f.confirmTransitionTo(r,n,i,(function(e){if(e){var t=w(r),i=u(a+t);if(R()!==i){t,function(e){window.location.hash=e}(i);var s=L.lastIndexOf(w(V.location)),o=L.slice(0,s+1);o.push(t),o,g({action:n,location:r})}else g()}}))},replace:function(e,t){var n="REPLACE",r=b(e,void 0,void 0,V.location);f.confirmTransitionTo(r,n,i,(function(e){if(e){var t=w(r),i=u(a+t);R()!==i&&(t,P(i));var s=L.indexOf(w(V.location));-1!==s&&(L[s]=t),g({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&!1;var t=f.setPrompt(e);return U||(j(1),!0),function(){return U&&(!1,j(-1)),t()}},listen:function(e){var t=f.appendListener(e);return j(1),function(){j(-1),t()}}};return V}function D(e,t,n){return Math.min(Math.max(e,t),n)}var L=n(123),M=n.n(L);n(86);function F(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var j=n(219),U=n.n(j),V=1073741823,B="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var z=r.createContext||function(e,t){var n,i,o="__create-react-context-"+function(){var e="__global_unique_id__";return B[e]=(B[e]||0)+1}()+"__",c=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}s(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(n="function"===typeof t?t(r,i):V,0!==(n|=0)&&this.emitter.set(e.value,n)):n=0}},r.render=function(){return this.props.children},n}(r.Component);c.childContextTypes=((n={})[o]=a().object.isRequired,n);var l=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}s(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?V:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?V:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return l.contextTypes=((i={})[o]=a().object,i),{Provider:c,Consumer:l}},q=function(e){var t=z();return t.displayName=e,t},W=q("Router-History"),K=q("Router"),H=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}s(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return r.createElement(K.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},r.createElement(W.Provider,{children:this.props.children||null,value:this.props.history}))},t}(r.Component);r.Component;r.Component;var G={},Q=1e4,$=0;function Y(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,s=void 0!==i&&i,o=n.strict,a=void 0!==o&&o,c=n.sensitive,l=void 0!==c&&c;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=G[n]||(G[n]={});if(r[e])return r[e];var i=[],s={regexp:M()(e,i,t),keys:i};return $<Q&&(r[e]=s,$++),s}(n,{end:s,strict:a,sensitive:l}),i=r.regexp,o=r.keys,c=i.exec(e);if(!c)return null;var u=c[0],h=c.slice(1),d=e===u;return s&&!d?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:d,params:o.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var J=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.prototype.render=function(){var e=this;return r.createElement(K.Consumer,null,(function(t){t||p(!1);var n=e.props.location||t.location,i=c({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?Y(n.pathname,e.props):t.match}),s=e.props,o=s.children,a=s.component,l=s.render;return Array.isArray(o)&&function(e){return 0===r.Children.count(e)}(o)&&(o=null),r.createElement(K.Provider,{value:i},i.match?o?"function"===typeof o?o(i):o:a?r.createElement(a,i):l?l(i):null:"function"===typeof o?o(i):null)}))},t}(r.Component);function X(e){return"/"===e.charAt(0)?e:"/"+e}function Z(e,t){if(!e)return t;var n=X(e);return 0!==t.pathname.indexOf(n)?t:c({},t,{pathname:t.pathname.substr(n.length)})}function ee(e){return"string"===typeof e?e:w(e)}function te(e){return function(){p(!1)}}function ne(){}r.Component;var re=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.prototype.render=function(){var e=this;return r.createElement(K.Consumer,null,(function(t){t||p(!1);var n,i,s=e.props.location||t.location;return r.Children.forEach(e.props.children,(function(e){if(null==i&&r.isValidElement(e)){n=e;var o=e.props.path||e.props.from;i=o?Y(s.pathname,c({},e.props,{path:o})):t.match}})),i?r.cloneElement(n,{location:s,computedMatch:i}):null}))},t}(r.Component);function ie(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,i=F(t,["wrappedComponentRef"]);return r.createElement(K.Consumer,null,(function(t){return t||p(!1),r.createElement(e,c({},i,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,U()(n,e)}var se=r.useContext;function oe(){return se(K).location}var ae=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=T(t.props),t}return s(t,e),t.prototype.render=function(){return r.createElement(H,{history:this.history,children:this.props.children})},t}(r.Component);r.Component;var ce=function(e,t){return"function"===typeof e?e(t):e},le=function(e,t){return"string"===typeof e?b(e,null,null,t):e},ue=function(e){return e},he=r.forwardRef;"undefined"===typeof he&&(he=ue);var de=he((function(e,t){var n=e.innerRef,i=e.navigate,s=e.onClick,o=F(e,["innerRef","navigate","onClick"]),a=o.target,l=c({},o,{onClick:function(e){try{s&&s(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||a&&"_self"!==a||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return l.ref=ue!==he&&t||n,r.createElement("a",l)}));var fe=he((function(e,t){var n=e.component,i=void 0===n?de:n,s=e.replace,o=e.to,a=e.innerRef,l=F(e,["component","replace","to","innerRef"]);return r.createElement(K.Consumer,null,(function(e){e||p(!1);var n=e.history,u=le(ce(o,e.location),e.location),h=u?n.createHref(u):"",d=c({},l,{href:h,navigate:function(){var t=ce(o,e.location),r=w(e.location)===w(le(t));(s||r?n.replace:n.push)(t)}});return ue!==he?d.ref=t||a:d.innerRef=a,r.createElement(i,d)}))})),pe=function(e){return e},me=r.forwardRef;"undefined"===typeof me&&(me=pe);var ge=me((function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,s=e.activeClassName,o=void 0===s?"active":s,a=e.activeStyle,l=e.className,u=e.exact,h=e.isActive,d=e.location,f=e.sensitive,m=e.strict,g=e.style,v=e.to,y=e.innerRef,w=F(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return r.createElement(K.Consumer,null,(function(e){e||p(!1);var n=d||e.location,s=le(ce(v,n),n),b=s.pathname,_=b&&b.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),E=_?Y(n.pathname,{path:_,exact:u,sensitive:f,strict:m}):null,S=!!(h?h(E,n):E),x="function"===typeof l?l(S):l,I="function"===typeof g?g(S):g;S&&(x=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(x,o),I=c({},I,a));var k=c({"aria-current":S&&i||null,className:x,style:I,to:s},w);return pe!==me?k.ref=t||y:k.innerRef=y,r.createElement(fe,k)}))}));function ve(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ye=function(){return ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ye.apply(this,arguments)};Object.create;function we(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var be=n(324),_e=n.n(be),Ee="-ms-",Se="-moz-",xe="-webkit-",Ie="comm",ke="rule",Te="decl",Ce="@import",Ne="@keyframes",Ae="@layer",Re=Math.abs,Pe=String.fromCharCode,Oe=Object.assign;function De(e){return e.trim()}function Le(e,t){return(e=t.exec(e))?e[0]:e}function Me(e,t,n){return e.replace(t,n)}function Fe(e,t,n){return e.indexOf(t,n)}function je(e,t){return 0|e.charCodeAt(t)}function Ue(e,t,n){return e.slice(t,n)}function Ve(e){return e.length}function Be(e){return e.length}function ze(e,t){return t.push(e),e}function qe(e,t){return e.filter((function(e){return!Le(e,t)}))}var We=1,Ke=1,He=0,Ge=0,Qe=0,$e="";function Ye(e,t,n,r,i,s,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:We,column:Ke,length:o,return:"",siblings:a}}function Je(e,t){return Oe(Ye("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function Xe(e){for(;e.root;)e=Je(e.root,{children:[e]});ze(e,e.siblings)}function Ze(){return Qe=Ge>0?je($e,--Ge):0,Ke--,10===Qe&&(Ke=1,We--),Qe}function et(){return Qe=Ge<He?je($e,Ge++):0,Ke++,10===Qe&&(Ke=1,We++),Qe}function tt(){return je($e,Ge)}function nt(){return Ge}function rt(e,t){return Ue($e,e,t)}function it(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function st(e){return We=Ke=1,He=Ve($e=e),Ge=0,[]}function ot(e){return $e="",e}function at(e){return De(rt(Ge-1,ut(91===e?e+2:40===e?e+1:e)))}function ct(e){for(;(Qe=tt())&&Qe<33;)et();return it(e)>2||it(Qe)>3?"":" "}function lt(e,t){for(;--t&&et()&&!(Qe<48||Qe>102||Qe>57&&Qe<65||Qe>70&&Qe<97););return rt(e,nt()+(t<6&&32==tt()&&32==et()))}function ut(e){for(;et();)switch(Qe){case e:return Ge;case 34:case 39:34!==e&&39!==e&&ut(Qe);break;case 40:41===e&&ut(e);break;case 92:et()}return Ge}function ht(e,t){for(;et()&&e+Qe!==57&&(e+Qe!==84||47!==tt()););return"/*"+rt(t,Ge-1)+"*"+Pe(47===e?e:et())}function dt(e){for(;!it(tt());)et();return rt(e,Ge)}function ft(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function pt(e,t,n,r){switch(e.type){case Ae:if(e.children.length)break;case Ce:case Te:return e.return=e.return||e.value;case Ie:return"";case Ne:return e.return=e.value+"{"+ft(e.children,r)+"}";case ke:if(!Ve(e.value=e.props.join(",")))return""}return Ve(n=ft(e.children,r))?e.return=e.value+"{"+n+"}":""}function mt(e,t,n){switch(function(e,t){return 45^je(e,0)?(((t<<2^je(e,0))<<2^je(e,1))<<2^je(e,2))<<2^je(e,3):0}(e,t)){case 5103:return xe+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return xe+e+e;case 4789:return Se+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return xe+e+Se+e+Ee+e+e;case 5936:switch(je(e,t+11)){case 114:return xe+e+Ee+Me(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return xe+e+Ee+Me(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return xe+e+Ee+Me(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return xe+e+Ee+e+e;case 6165:return xe+e+Ee+"flex-"+e+e;case 5187:return xe+e+Me(e,/(\w+).+(:[^]+)/,xe+"box-$1$2"+Ee+"flex-$1$2")+e;case 5443:return xe+e+Ee+"flex-item-"+Me(e,/flex-|-self/g,"")+(Le(e,/flex-|baseline/)?"":Ee+"grid-row-"+Me(e,/flex-|-self/g,""))+e;case 4675:return xe+e+Ee+"flex-line-pack"+Me(e,/align-content|flex-|-self/g,"")+e;case 5548:return xe+e+Ee+Me(e,"shrink","negative")+e;case 5292:return xe+e+Ee+Me(e,"basis","preferred-size")+e;case 6060:return xe+"box-"+Me(e,"-grow","")+xe+e+Ee+Me(e,"grow","positive")+e;case 4554:return xe+Me(e,/([^-])(transform)/g,"$1"+xe+"$2")+e;case 6187:return Me(Me(Me(e,/(zoom-|grab)/,xe+"$1"),/(image-set)/,xe+"$1"),e,"")+e;case 5495:case 3959:return Me(e,/(image-set\([^]*)/,xe+"$1$`$1");case 4968:return Me(Me(e,/(.+:)(flex-)?(.*)/,xe+"box-pack:$3"+Ee+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+xe+e+e;case 4200:if(!Le(e,/flex-|baseline/))return Ee+"grid-column-align"+Ue(e,t)+e;break;case 2592:case 3360:return Ee+Me(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,Le(e.props,/grid-\w+-end/)}))?~Fe(e+(n=n[t].value),"span",0)?e:Ee+Me(e,"-start","")+e+Ee+"grid-row-span:"+(~Fe(n,"span",0)?Le(n,/\d+/):+Le(n,/\d+/)-+Le(e,/\d+/))+";":Ee+Me(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return Le(e.props,/grid-\w+-start/)}))?e:Ee+Me(Me(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return Me(e,/(.+)-inline(.+)/,xe+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ve(e)-1-t>6)switch(je(e,t+1)){case 109:if(45!==je(e,t+4))break;case 102:return Me(e,/(.+:)(.+)-([^]+)/,"$1"+xe+"$2-$3$1"+Se+(108==je(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Fe(e,"stretch",0)?mt(Me(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return Me(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,r,i,s,o,a){return Ee+n+":"+r+a+(i?Ee+n+"-span:"+(s?o:+o-+r)+a:"")+e}));case 4949:if(121===je(e,t+6))return Me(e,":",":"+xe)+e;break;case 6444:switch(je(e,45===je(e,14)?18:11)){case 120:return Me(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+xe+(45===je(e,14)?"inline-":"")+"box$3$1"+xe+"$2$3$1"+Ee+"$2box$3")+e;case 100:return Me(e,":",":"+Ee)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Me(e,"scroll-","scroll-snap-")+e}return e}function gt(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case Te:return void(e.return=mt(e.value,e.length,n));case Ne:return ft([Je(e,{value:Me(e.value,"@","@"+xe)})],r);case ke:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(Le(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Xe(Je(e,{props:[Me(t,/:(read-\w+)/,":"+Se+"$1")]})),Xe(Je(e,{props:[t]})),Oe(e,{props:qe(n,r)});break;case"::placeholder":Xe(Je(e,{props:[Me(t,/:(plac\w+)/,":"+xe+"input-$1")]})),Xe(Je(e,{props:[Me(t,/:(plac\w+)/,":"+Se+"$1")]})),Xe(Je(e,{props:[Me(t,/:(plac\w+)/,Ee+"input-$1")]})),Xe(Je(e,{props:[t]})),Oe(e,{props:qe(n,r)})}return""}))}}function vt(e){return ot(yt("",null,null,null,[""],e=st(e),0,[0],e))}function yt(e,t,n,r,i,s,o,a,c){for(var l=0,u=0,h=o,d=0,f=0,p=0,m=1,g=1,v=1,y=0,w="",b=i,_=s,E=r,S=w;g;)switch(p=y,y=et()){case 40:if(108!=p&&58==je(S,h-1)){-1!=Fe(S+=Me(at(y),"&","&\f"),"&\f",Re(l?a[l-1]:0))&&(v=-1);break}case 34:case 39:case 91:S+=at(y);break;case 9:case 10:case 13:case 32:S+=ct(p);break;case 92:S+=lt(nt()-1,7);continue;case 47:switch(tt()){case 42:case 47:ze(bt(ht(et(),nt()),t,n,c),c);break;default:S+="/"}break;case 123*m:a[l++]=Ve(S)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+u:-1==v&&(S=Me(S,/\f/g,"")),f>0&&Ve(S)-h&&ze(f>32?_t(S+";",r,n,h-1,c):_t(Me(S," ","")+";",r,n,h-2,c),c);break;case 59:S+=";";default:if(ze(E=wt(S,t,n,l,u,i,a,w,b=[],_=[],h,s),s),123===y)if(0===u)yt(S,t,E,E,b,s,h,a,_);else switch(99===d&&110===je(S,3)?100:d){case 100:case 108:case 109:case 115:yt(e,E,E,r&&ze(wt(e,E,E,0,0,i,a,w,i,b=[],h,_),_),i,_,h,a,r?b:_);break;default:yt(S,E,E,E,[""],_,0,a,_)}}l=u=f=0,m=v=1,w=S="",h=o;break;case 58:h=1+Ve(S),f=p;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==Ze())continue;switch(S+=Pe(y),y*m){case 38:v=u>0?1:(S+="\f",-1);break;case 44:a[l++]=(Ve(S)-1)*v,v=1;break;case 64:45===tt()&&(S+=at(et())),d=tt(),u=h=Ve(w=S+=dt(nt())),y++;break;case 45:45===p&&2==Ve(S)&&(m=0)}}return s}function wt(e,t,n,r,i,s,o,a,c,l,u,h){for(var d=i-1,f=0===i?s:[""],p=Be(f),m=0,g=0,v=0;m<r;++m)for(var y=0,w=Ue(e,d+1,d=Re(g=o[m])),b=e;y<p;++y)(b=De(g>0?f[y]+" "+w:Me(w,/&\f/g,f[y])))&&(c[v++]=b);return Ye(e,t,n,0===i?ke:a,c,l,u,h)}function bt(e,t,n,r){return Ye(e,t,n,Ie,Pe(Qe),Ue(e,2,-2),0,r)}function _t(e,t,n,r,i){return Ye(e,t,n,Te,Ue(e,0,r),Ue(e,r+1,-1),r,i)}const Et={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var St="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",xt="active",It="data-styled-version",kt="6.1.8",Tt="/*!sc*/\n",Ct="undefined"!=typeof window&&"HTMLElement"in window,Nt=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),At=(new Set,Object.freeze([])),Rt=Object.freeze({});function Pt(e,t,n){return void 0===n&&(n=Rt),e.theme!==n.theme&&e.theme||t||n.theme}var Ot=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Dt=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Lt=/(^-|-$)/g;function Mt(e){return e.replace(Dt,"-").replace(Lt,"")}var Ft=/(a)(d)/gi,jt=52,Ut=function(e){return String.fromCharCode(e+(e>25?39:97))};function Vt(e){var t,n="";for(t=Math.abs(e);t>jt;t=t/jt|0)n=Ut(t%jt)+n;return(Ut(t%jt)+n).replace(Ft,"$1-$2")}var Bt,zt=5381,qt=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Wt=function(e){return qt(zt,e)};function Kt(e){return Vt(Wt(e)>>>0)}function Ht(e){return e.displayName||e.name||"Component"}function Gt(e){return"string"==typeof e&&!0}var Qt="function"==typeof Symbol&&Symbol.for,$t=Qt?Symbol.for("react.memo"):60115,Yt=Qt?Symbol.for("react.forward_ref"):60112,Jt={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Xt={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Zt={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},en=((Bt={})[Yt]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Bt[$t]=Zt,Bt);function tn(e){return("type"in(t=e)&&t.type.$$typeof)===$t?Zt:"$$typeof"in e?en[e.$$typeof]:Jt;var t}var nn=Object.defineProperty,rn=Object.getOwnPropertyNames,sn=Object.getOwnPropertySymbols,on=Object.getOwnPropertyDescriptor,an=Object.getPrototypeOf,cn=Object.prototype;function ln(e,t,n){if("string"!=typeof t){if(cn){var r=an(t);r&&r!==cn&&ln(e,r,n)}var i=rn(t);sn&&(i=i.concat(sn(t)));for(var s=tn(e),o=tn(t),a=0;a<i.length;++a){var c=i[a];if(!(c in Xt||n&&n[c]||o&&c in o||s&&c in s)){var l=on(t,c);try{nn(e,c,l)}catch(e){}}}}return e}function un(e){return"function"==typeof e}function hn(e){return"object"==typeof e&&"styledComponentId"in e}function dn(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function fn(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function pn(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function mn(e,t,n){if(void 0===n&&(n=!1),!n&&!pn(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=mn(e[r],t[r]);else if(pn(t))for(var r in t)e[r]=mn(e[r],t[r]);return e}function gn(e,t){Object.defineProperty(e,"toString",{value:t})}function vn(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var yn=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw vn(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var s=r;s<i;s++)this.groupSizes[s]=0}for(var o=this.indexOfGroup(e+1),a=(s=0,t.length);s<a;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,s=r;s<i;s++)t+="".concat(this.tag.getRule(s)).concat(Tt);return t},e}(),wn=new Map,bn=new Map,_n=1,En=function(e){if(wn.has(e))return wn.get(e);for(;bn.has(_n);)_n++;var t=_n++;return wn.set(e,t),bn.set(t,e),t},Sn=function(e,t){_n=t+1,wn.set(e,t),bn.set(t,e)},xn="style[".concat(St,"][").concat(It,'="').concat(kt,'"]'),In=new RegExp("^".concat(St,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),kn=function(e,t,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&e.registerName(t,r)},Tn=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(Tt),i=[],s=0,o=r.length;s<o;s++){var a=r[s].trim();if(a){var c=a.match(In);if(c){var l=0|parseInt(c[1],10),u=c[2];0!==l&&(Sn(u,l),kn(e,u,c[3]),e.getTag().insertRules(l,i)),i.length=0}else i.push(a)}}};function Cn(){return n.nc}var Nn=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(St,"]")));return t[t.length-1]}(n),s=void 0!==i?i.nextSibling:null;r.setAttribute(St,xt),r.setAttribute(It,kt);var o=Cn();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},An=function(){function e(e){this.element=Nn(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw vn(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),Rn=function(){function e(e){this.element=Nn(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Pn=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),On=Ct,Dn={isServer:!Ct,useCSSOMInjection:!Nt},Ln=function(){function e(e,t,n){void 0===e&&(e=Rt),void 0===t&&(t={});var r=this;this.options=ye(ye({},Dn),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&Ct&&On&&(On=!1,function(e){for(var t=document.querySelectorAll(xn),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(St)!==xt&&(Tn(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this)),gn(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return bn.get(e)}(n);if(void 0===i)return"continue";var s=e.names.get(i),o=t.getGroup(n);if(void 0===s||0===o.length)return"continue";var a="".concat(St,".g").concat(n,'[id="').concat(i,'"]'),c="";void 0!==s&&s.forEach((function(e){e.length>0&&(c+="".concat(e,","))})),r+="".concat(o).concat(a,'{content:"').concat(c,'"}').concat(Tt)},s=0;s<n;s++)i(s);return r}(r)}))}return e.registerId=function(e){return En(e)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(ye(ye({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new Pn(n):t?new An(n):new Rn(n)}(this.options),new yn(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(En(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(En(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(En(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),Mn=/&/g,Fn=/^\s*\/\/.*$/gm;function jn(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=jn(e.children,t)),e}))}function Un(e){var t,n,r,i=void 0===e?Rt:e,s=i.options,o=void 0===s?Rt:s,a=i.plugins,c=void 0===a?At:a,l=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},u=c.slice();u.push((function(e){e.type===ke&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(Mn,n).replace(r,l))})),o.prefix&&u.push(gt),u.push(pt);var h=function(e,i,s,a){void 0===i&&(i=""),void 0===s&&(s=""),void 0===a&&(a="&"),t=a,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var c=e.replace(Fn,""),l=vt(s||i?"".concat(s," ").concat(i," { ").concat(c," }"):c);o.namespace&&(l=jn(l,o.namespace));var h,d=[];return ft(l,function(e){var t=Be(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}(u.concat((h=function(e){return d.push(e)},function(e){e.root||(e=e.return)&&h(e)})))),d};return h.hash=c.length?c.reduce((function(e,t){return t.name||vn(15),qt(e,t.name)}),zt).toString():"",h}var Vn=new Ln,Bn=Un(),zn=r.createContext({shouldForwardProp:void 0,styleSheet:Vn,stylis:Bn}),qn=(zn.Consumer,r.createContext(void 0));function Wn(){return(0,r.useContext)(zn)}function Kn(e){var t=(0,r.useState)(e.stylisPlugins),n=t[0],i=t[1],s=Wn().styleSheet,o=(0,r.useMemo)((function(){var t=s;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target,s]),a=(0,r.useMemo)((function(){return Un({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:n})}),[e.enableVendorPrefixes,e.namespace,n]);(0,r.useEffect)((function(){_e()(n,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]);var c=(0,r.useMemo)((function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:o,stylis:a}}),[e.shouldForwardProp,o,a]);return r.createElement(zn.Provider,{value:c},r.createElement(qn.Provider,{value:a},e.children))}var Hn=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=Bn);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,gn(this,(function(){throw vn(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=Bn),this.name+e.hash},e}(),Gn=function(e){return e>="A"&&e<="Z"};function Qn(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;Gn(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var $n=function(e){return null==e||!1===e||""===e},Yn=function(e){var t,n,r=[];for(var i in e){var s=e[i];e.hasOwnProperty(i)&&!$n(s)&&(Array.isArray(s)&&s.isCss||un(s)?r.push("".concat(Qn(i),":"),s,";"):pn(s)?r.push.apply(r,we(we(["".concat(i," {")],Yn(s),!1),["}"],!1)):r.push("".concat(Qn(i),": ").concat((t=i,null==(n=s)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in Et||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function Jn(e,t,n,r){return $n(e)?[]:hn(e)?[".".concat(e.styledComponentId)]:un(e)?!un(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:Jn(e(t),t,n,r):e instanceof Hn?n?(e.inject(n,r),[e.getName(r)]):[e]:pn(e)?Yn(e):Array.isArray(e)?Array.prototype.concat.apply(At,e.map((function(e){return Jn(e,t,n,r)}))):[e.toString()];var i}function Xn(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(un(n)&&!hn(n))return!1}return!0}var Zn=Wt(kt),er=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Xn(e),this.componentId=t,this.baseHash=qt(Zn,t),this.baseStyle=n,Ln.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=dn(r,this.staticRulesId);else{var i=fn(Jn(this.rules,e,t,n)),s=Vt(qt(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,s)){var o=n(i,".".concat(s),void 0,this.componentId);t.insertRules(this.componentId,s,o)}r=dn(r,s),this.staticRulesId=s}else{for(var a=qt(this.baseHash,n.hash),c="",l=0;l<this.rules.length;l++){var u=this.rules[l];if("string"==typeof u)c+=u;else if(u){var h=fn(Jn(u,e,t,n));a=qt(a,h+l),c+=h}}if(c){var d=Vt(a>>>0);t.hasNameForId(this.componentId,d)||t.insertRules(this.componentId,d,n(c,".".concat(d),void 0,this.componentId)),r=dn(r,d)}}return r},e}(),tr=r.createContext(void 0);tr.Consumer;var nr={};new Set;function rr(e,t,n){var i=hn(e),s=e,o=!Gt(e),a=t.attrs,c=void 0===a?At:a,l=t.componentId,u=void 0===l?function(e,t){var n="string"!=typeof e?"sc":Mt(e);nr[n]=(nr[n]||0)+1;var r="".concat(n,"-").concat(Kt(kt+n+nr[n]));return t?"".concat(t,"-").concat(r):r}(t.displayName,t.parentComponentId):l,h=t.displayName,d=void 0===h?function(e){return Gt(e)?"styled.".concat(e):"Styled(".concat(Ht(e),")")}(e):h,f=t.displayName&&t.componentId?"".concat(Mt(t.displayName),"-").concat(t.componentId):t.componentId||u,p=i&&s.attrs?s.attrs.concat(c).filter(Boolean):c,m=t.shouldForwardProp;if(i&&s.shouldForwardProp){var g=s.shouldForwardProp;if(t.shouldForwardProp){var v=t.shouldForwardProp;m=function(e,t){return g(e,t)&&v(e,t)}}else m=g}var y=new er(n,f,i?s.componentStyle:void 0);function w(e,t){return function(e,t,n){var i=e.attrs,s=e.componentStyle,o=e.defaultProps,a=e.foldedComponentIds,c=e.styledComponentId,l=e.target,u=r.useContext(tr),h=Wn(),d=e.shouldForwardProp||h.shouldForwardProp,f=Pt(t,u,o)||Rt,p=function(e,t,n){for(var r,i=ye(ye({},t),{className:void 0,theme:n}),s=0;s<e.length;s+=1){var o=un(r=e[s])?r(i):r;for(var a in o)i[a]="className"===a?dn(i[a],o[a]):"style"===a?ye(ye({},i[a]),o[a]):o[a]}return t.className&&(i.className=dn(i.className,t.className)),i}(i,t,f),m=p.as||l,g={};for(var v in p)void 0===p[v]||"$"===v[0]||"as"===v||"theme"===v&&p.theme===f||("forwardedAs"===v?g.as=p.forwardedAs:d&&!d(v,m)||(g[v]=p[v]));var y=function(e,t){var n=Wn();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(s,p),w=dn(a,c);return y&&(w+=" "+y),p.className&&(w+=" "+p.className),g[Gt(m)&&!Ot.has(m)?"class":"className"]=w,g.ref=n,(0,r.createElement)(m,g)}(b,e,t)}w.displayName=d;var b=r.forwardRef(w);return b.attrs=p,b.componentStyle=y,b.displayName=d,b.shouldForwardProp=m,b.foldedComponentIds=i?dn(s.foldedComponentIds,s.styledComponentId):"",b.styledComponentId=f,b.target=i?s.target:e,Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)mn(e,i[r],!0);return e}({},s.defaultProps,e):e}}),gn(b,(function(){return".".concat(b.styledComponentId)})),o&&ln(b,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),b}function ir(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var sr=function(e){return Object.assign(e,{isCss:!0})};function or(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(un(e)||pn(e))return sr(Jn(ir(At,we([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?Jn(r):sr(Jn(ir(r,t)))}function ar(e,t,n){if(void 0===n&&(n=Rt),!t)throw vn(1,t);var r=function(r){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return e(t,n,or.apply(void 0,we([r],i,!1)))};return r.attrs=function(r){return ar(e,t,ye(ye({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return ar(e,t,ye(ye({},n),r))},r}var cr=function(e){return ar(rr,e)},lr=cr;Ot.forEach((function(e){lr[e]=cr(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Xn(e),Ln.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,r){var i=r(fn(Jn(this.rules,t,n,r)),""),s=this.componentId+e;n.insertRules(s,s,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&Ln.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();function ur(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=fn(or.apply(void 0,we([e],t,!1))),i=Kt(r);return new Hn(i,r)}(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString(),n=Cn(),r=fn([n&&'nonce="'.concat(n,'"'),"".concat(St,'="true"'),"".concat(It,'="').concat(kt,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw vn(2);return e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)throw vn(2);var n=((t={})[St]="",t[It]=kt,t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),i=Cn();return i&&(n.nonce=i),[r.createElement("style",ye({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new Ln({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw vn(2);return r.createElement(Kn,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw vn(3)}})(),"__sc-".concat(St,"__");var hr=n(579);const dr=function(e){return(0,hr.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:23.335,height:23.335,...e,children:(0,hr.jsxs)("g",{"data-name":"Group 99",fill:"#fff",children:[(0,hr.jsx)("path",{"data-name":"Rectangle 58",d:"M21.213 0l2.121 2.121L2.121 23.335 0 21.213z"}),(0,hr.jsx)("path",{"data-name":"Rectangle 59",d:"M23.334 21.213l-2.121 2.121L-.001 2.121 2.121 0z"})]})})};const fr=n.p+"static/media/booksuggester.cd4082c51925227c2953c8290d3e50dd.svg";const pr=function(e){return(0,hr.jsx)("img",{src:fr,alt:"",style:{height:"30px"}})},mr=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},gr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(mr(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new vr;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class vr extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yr=function(e){return function(e){const t=mr(e);return gr.encodeByteArray(t,!0)}(e).replace(/\./g,"")},wr=function(e){try{return gr.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function br(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&_r(n)&&(e[n]=br(e[n],t[n]));return e}function _r(e){return"__proto__"!==e}const Er=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Sr=()=>{try{return Er()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&wr(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},xr=()=>{var e;return null===(e=Sr())||void 0===e?void 0:e.config};class Ir{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function kr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Tr(){var e;const t=null===(e=Sr())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Cr(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Nr(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ar(){const e=kr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Rr(){return!Tr()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pr(){try{return"object"===typeof indexedDB}catch(e){return!1}}class Or extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dr.prototype.create)}}class Dr{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Lr,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Or(n,s,t)}}const Lr=/\{\$([^}]+)}/g;function Mr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Fr(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(jr(n)&&jr(s)){if(!Fr(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function jr(e){return null!==e&&"object"===typeof e}function Ur(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Vr(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Br(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function zr(e,t){const n=new qr(e,t);return n.subscribe.bind(n)}class qr{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Wr),void 0===r.error&&(r.error=Wr),void 0===r.complete&&(r.complete=Wr);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Wr(){}function Kr(e){return e&&e._delegate?e._delegate:e}class Hr{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Gr="[DEFAULT]";class Qr{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ir;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Gr})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$r(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr;return this.component?this.component.multipleInstances?e:Gr:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function $r(e){return e===Gr?void 0:e}class Yr{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Qr(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Jr=[];var Xr;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Xr||(Xr={}));const Zr={debug:Xr.DEBUG,verbose:Xr.VERBOSE,info:Xr.INFO,warn:Xr.WARN,error:Xr.ERROR,silent:Xr.SILENT},ei=Xr.INFO,ti={[Xr.DEBUG]:"log",[Xr.VERBOSE]:"log",[Xr.INFO]:"info",[Xr.WARN]:"warn",[Xr.ERROR]:"error"},ni=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ti[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class ri{constructor(e){this.name=e,this._logLevel=ei,this._logHandler=ni,this._userLogHandler=null,Jr.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Zr[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Xr.DEBUG,...t),this._logHandler(this,Xr.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Xr.VERBOSE,...t),this._logHandler(this,Xr.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Xr.INFO,...t),this._logHandler(this,Xr.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Xr.WARN,...t),this._logHandler(this,Xr.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Xr.ERROR,...t),this._logHandler(this,Xr.ERROR,...t)}}const ii=(e,t)=>t.some((t=>e instanceof t));let si,oi;const ai=new WeakMap,ci=new WeakMap,li=new WeakMap,ui=new WeakMap,hi=new WeakMap;let di={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ci.get(e);if("objectStoreNames"===t)return e.objectStoreNames||li.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mi(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function fi(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(oi||(oi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(gi(this),n),mi(ai.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return mi(e.apply(gi(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(gi(this),t,...r);return li.set(s,t.sort?t.sort():[t]),mi(s)}}function pi(e){return"function"===typeof e?fi(e):(e instanceof IDBTransaction&&function(e){if(ci.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));ci.set(e,t)}(e),ii(e,si||(si=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,di):e)}function mi(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(mi(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&ai.set(t,e)})).catch((()=>{})),hi.set(t,e),t}(e);if(ui.has(e))return ui.get(e);const t=pi(e);return t!==e&&(ui.set(e,t),hi.set(t,e)),t}const gi=e=>hi.get(e);const vi=["get","getKey","getAll","getAllKeys","count"],yi=["put","add","delete","clear"],wi=new Map;function bi(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(wi.get(t))return wi.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=yi.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!vi.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return wi.set(t,s),s}di=(e=>({...e,get:(t,n,r)=>bi(t,n)||e.get(t,n,r),has:(t,n)=>!!bi(t,n)||e.has(t,n)}))(di);class _i{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Ei="@firebase/app",Si="0.9.28",xi=new ri("@firebase/app"),Ii="[DEFAULT]",ki={[Ei]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ti=new Map,Ci=new Map;function Ni(e,t){try{e.container.addComponent(t)}catch(n){xi.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ai(e,t){e.container.addOrOverwriteComponent(t)}function Ri(e){const t=e.name;if(Ci.has(t))return xi.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ci.set(t,e);for(const n of Ti.values())Ni(n,e);return!0}function Pi(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Oi(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ii;Pi(e,t).clearInstance(n)}function Di(){Ci.clear()}const Li=new Dr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Mi{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Hr("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Li.create("app-deleted",{appName:this._name})}}const Fi="10.8.1";function ji(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ii,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Li.create("bad-app-name",{appName:String(i)});if(n||(n=xr()),!n)throw Li.create("no-options");const s=Ti.get(i);if(s){if(Fr(n,s.options)&&Fr(r,s.config))return s;throw Li.create("duplicate-app",{appName:i})}const o=new Yr(i);for(const c of Ci.values())o.addComponent(c);const a=new Mi(n,r,o);return Ti.set(i,a),a}function Ui(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ii;const t=Ti.get(e);if(!t&&e===Ii&&xr())return ji();if(!t)throw Li.create("no-app",{appName:e});return t}function Vi(){return Array.from(Ti.values())}async function Bi(e){const t=e.name;Ti.has(t)&&(Ti.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function zi(e,t,n){var r;let i=null!==(r=ki[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void xi.warn(e.join(" "))}Ri(new Hr("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function qi(e,t){if(null!==e&&"function"!==typeof e)throw Li.create("invalid-log-argument");!function(e,t){for(const n of Jr){let r=null;t&&t.level&&(r=Zr[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Xr[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Wi(e){var t;t=e,Jr.forEach((e=>{e.setLogLevel(t)}))}const Ki="firebase-heartbeat-database",Hi=1,Gi="firebase-heartbeat-store";let Qi=null;function $i(){return Qi||(Qi=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=mi(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(mi(o.result),e.oldVersion,e.newVersion,mi(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Ki,Hi,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Gi)}catch(n){console.warn(n)}}}).catch((e=>{throw Li.create("idb-open",{originalErrorMessage:e.message})}))),Qi}async function Yi(e,t){try{const n=(await $i()).transaction(Gi,"readwrite"),r=n.objectStore(Gi);await r.put(t,Ji(e)),await n.done}catch(n){if(n instanceof Or)xi.warn(n.message);else{const e=Li.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});xi.warn(e.message)}}}function Ji(e){return"".concat(e.name,"!").concat(e.options.appId)}class Xi{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new es(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Zi();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Zi(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),ts(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ts(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=yr(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Zi(){return(new Date).toISOString().substring(0,10)}class es{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Pr()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await $i()).transaction(Gi),n=await t.objectStore(Gi).get(Ji(e));return await t.done,n}catch(t){if(t instanceof Or)xi.warn(t.message);else{const e=Li.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});xi.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Yi(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Yi(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ts(e){return yr(JSON.stringify({version:2,heartbeats:e})).length}var ns;ns="",Ri(new Hr("platform-logger",(e=>new _i(e)),"PRIVATE")),Ri(new Hr("heartbeat",(e=>new Xi(e)),"PRIVATE")),zi(Ei,Si,ns),zi(Ei,Si,"esm2017"),zi("fire-js","");class rs{constructor(e,t){this._delegate=e,this.firebase=t,Ni(e,new Hr("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Bi(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ii;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ii;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Ni(this._delegate,e)}_addOrOverwriteComponent(e){Ai(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const is=new Dr("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const ss=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=ji(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Mr(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:zi,setLogLevel:Wi,onLog:qi,apps:null,SDK_VERSION:Fi,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(Ri(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw is.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&br(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Mr(n,e=e||Ii))throw is.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(rs);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){br(n,e)},createSubscribe:zr,ErrorFactory:Dr,deepExtend:br}),n}(),os=new ri("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){os.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&os.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const as=ss;!function(e){zi("@firebase/app-compat","0.2.28",e)}();as.registerVersion("firebase","10.8.1","app-compat");var cs,ls="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},us={},hs=hs||{},ds=ls||self;function fs(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ps(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ms="closure_uid_"+(1e9*Math.random()>>>0),gs=0;function vs(e,t,n){return e.call.apply(e.bind,arguments)}function ys(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ws(e,t,n){return(ws=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vs:ys).apply(null,arguments)}function bs(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function _s(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Es(){this.s=this.s,this.o=this.o}Es.prototype.s=!1,Es.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ms)&&e[ms]||(e[ms]=++gs))},Es.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ss=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function xs(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Is(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(fs(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function ks(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ks.prototype.h=function(){this.defaultPrevented=!0};var Ts=function(){if(!ds.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};ds.addEventListener("test",e,t),ds.removeEventListener("test",e,t)}catch(n){}return e}();function Cs(e){return/^[\s\xa0]*$/.test(e)}function Ns(){var e=ds.navigator;return e&&(e=e.userAgent)?e:""}function As(e){return-1!=Ns().indexOf(e)}function Rs(e){return Rs[" "](e),e}Rs[" "]=function(){};var Ps,Os,Ds=As("Opera"),Ls=As("Trident")||As("MSIE"),Ms=As("Edge"),Fs=Ms||Ls,js=As("Gecko")&&!(-1!=Ns().toLowerCase().indexOf("webkit")&&!As("Edge"))&&!(As("Trident")||As("MSIE"))&&!As("Edge"),Us=-1!=Ns().toLowerCase().indexOf("webkit")&&!As("Edge");function Vs(){var e=ds.document;return e?e.documentMode:void 0}e:{var Bs="",zs=function(){var e=Ns();return js?/rv:([^\);]+)(\)|;)/.exec(e):Ms?/Edge\/([\d\.]+)/.exec(e):Ls?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Us?/WebKit\/(\S+)/.exec(e):Ds?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(zs&&(Bs=zs?zs[1]:""),Ls){var qs=Vs();if(null!=qs&&qs>parseFloat(Bs)){Ps=String(qs);break e}}Ps=Bs}if(ds.document&&Ls){var Ws=Vs();Os=Ws||(parseInt(Ps,10)||void 0)}else Os=void 0;var Ks=Os;function Hs(e,t){if(ks.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(js){e:{try{Rs(t.nodeName);var i=!0;break e}catch(St){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Gs[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Hs.$.h.call(this)}}_s(Hs,ks);var Gs={2:"touch",3:"pen",4:"mouse"};Hs.prototype.h=function(){Hs.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Qs="closure_listenable_"+(1e6*Math.random()|0),$s=0;function Ys(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++$s,this.fa=this.ia=!1}function Js(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Xs(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Zs(e){const t={};for(const n in e)t[n]=e[n];return t}const eo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function to(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<eo.length;t++)n=eo[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function no(e){this.src=e,this.g={},this.h=0}function ro(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Ss(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Js(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function io(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}no.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=io(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Ys(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var so="closure_lm_"+(1e6*Math.random()|0),oo={};function ao(e,t,n,r,i){if(r&&r.once)return lo(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ao(e,t[s],n,r,i);return null}return n=vo(n),e&&e[Qs]?e.O(t,n,ps(r)?!!r.capture:!!r,i):co(e,t,n,!1,r,i)}function co(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=ps(i)?!!i.capture:!!i,a=mo(e);if(a||(e[so]=a=new no(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=po;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ts||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(fo(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function lo(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)lo(e,t[s],n,r,i);return null}return n=vo(n),e&&e[Qs]?e.P(t,n,ps(r)?!!r.capture:!!r,i):co(e,t,n,!0,r,i)}function uo(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)uo(e,t[s],n,r,i);else r=ps(r)?!!r.capture:!!r,n=vo(n),e&&e[Qs]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=io(s=e.g[t],n,r,i))&&(Js(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=mo(e))&&(t=e.g[t.toString()],e=-1,t&&(e=io(t,n,r,i)),(n=-1<e?t[e]:null)&&ho(n))}function ho(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Qs])ro(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(fo(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=mo(t))?(ro(n,e),0==n.h&&(n.src=null,t[so]=null)):Js(e)}}}function fo(e){return e in oo?oo[e]:oo[e]="on"+e}function po(e,t){if(e.fa)e=!0;else{t=new Hs(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ho(e),e=n.call(r,t)}return e}function mo(e){return(e=e[so])instanceof no?e:null}var go="__closure_events_fn_"+(1e9*Math.random()>>>0);function vo(e){return"function"===typeof e?e:(e[go]||(e[go]=function(t){return e.handleEvent(t)}),e[go])}function yo(){Es.call(this),this.i=new no(this),this.S=this,this.J=null}function wo(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new ks(t,e);else if(t instanceof ks)t.target=t.target||e;else{var i=t;to(t=new ks(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=bo(o,r,!0,t)&&i}if(i=bo(o=t.g=e,r,!0,t)&&i,i=bo(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=bo(o=t.g=n[s],r,!1,t)&&i}function bo(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&ro(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}_s(yo,Es),yo.prototype[Qs]=!0,yo.prototype.removeEventListener=function(e,t,n,r){uo(this,e,t,n,r)},yo.prototype.N=function(){if(yo.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Js(n[r]);delete t.g[e],t.h--}}this.J=null},yo.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},yo.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var _o=ds.JSON.stringify;function Eo(){var e=No;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var So=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new xo),(e=>e.reset()));class xo{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Io(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ko(e){ds.setTimeout((()=>{throw e}),0)}let To,Co=!1,No=new class{constructor(){this.h=this.g=null}add(e,t){const n=So.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Ao=()=>{const e=ds.Promise.resolve(void 0);To=()=>{e.then(Ro)}};var Ro=()=>{for(var e;e=Eo();){try{e.h.call(e.g)}catch(n){ko(n)}var t=So;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Co=!1};function Po(e,t){yo.call(this),this.h=e||1,this.g=t||ds,this.j=ws(this.qb,this),this.l=Date.now()}function Oo(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Do(e,t,n){if("function"===typeof e)n&&(e=ws(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ws(e.handleEvent,e)}return 2147483647<Number(t)?-1:ds.setTimeout(e,t||0)}function Lo(e){e.g=Do((()=>{e.g=null,e.i&&(e.i=!1,Lo(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}_s(Po,yo),(cs=Po.prototype).ga=!1,cs.T=null,cs.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),wo(this,"tick"),this.ga&&(Oo(this),this.start()))}},cs.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},cs.N=function(){Po.$.N.call(this),Oo(this),delete this.g};class Mo extends Es{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Lo(this)}N(){super.N(),this.g&&(ds.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fo(e){Es.call(this),this.h=e,this.g={}}_s(Fo,Es);var jo=[];function Uo(e,t,n,r){Array.isArray(n)||(n&&(jo[0]=n.toString()),n=jo);for(var i=0;i<n.length;i++){var s=ao(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Vo(e){Xs(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ho(e)}),e),e.g={}}function Bo(){this.g=!0}function zo(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return _o(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Fo.prototype.N=function(){Fo.$.N.call(this),Vo(this)},Fo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bo.prototype.Ea=function(){this.g=!1},Bo.prototype.info=function(){};var qo={},Wo=null;function Ko(){return Wo=Wo||new yo}function Ho(e){ks.call(this,qo.Ta,e)}function Go(e){const t=Ko();wo(t,new Ho(t))}function Qo(e,t){ks.call(this,qo.STAT_EVENT,e),this.stat=t}function $o(e){const t=Ko();wo(t,new Qo(t,e))}function Yo(e,t){ks.call(this,qo.Ua,e),this.size=t}function Jo(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return ds.setTimeout((function(){e()}),t)}qo.Ta="serverreachability",_s(Ho,ks),qo.STAT_EVENT="statevent",_s(Qo,ks),qo.Ua="timingevent",_s(Yo,ks);var Xo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Zo={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ea(){}function ta(e){return e.h||(e.h=e.i())}function na(){}ea.prototype.h=null;var ra,ia={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function sa(){ks.call(this,"d")}function oa(){ks.call(this,"c")}function aa(){}function ca(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Fo(this),this.P=ua,e=Fs?125:void 0,this.V=new Po(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new la}function la(){this.i=null,this.g="",this.h=!1}_s(sa,ks),_s(oa,ks),_s(aa,ea),aa.prototype.g=function(){return new XMLHttpRequest},aa.prototype.i=function(){return{}},ra=new aa;var ua=45e3,ha={},da={};function fa(e,t,n){e.L=1,e.A=Pa(Ta(t)),e.u=n,e.S=!0,pa(e,null)}function pa(e,t){e.G=Date.now(),ya(e),e.B=Ta(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Ka(n.i,"t",r),e.o=0,n=e.l.J,e.h=new la,e.g=Hc(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Mo(ws(e.Pa,e,e.g),e.O)),Uo(e.U,e.g,"readystatechange",e.nb),t=e.I?Zs(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Go(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function ma(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function ga(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=va(e,n),r==da){4==t&&(e.s=4,$o(14),i=!1),zo(e.j,e.m,null,"[Incomplete Response]");break}if(r==ha){e.s=4,$o(15),zo(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}zo(e.j,e.m,r,null),Sa(e,r)}ma(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,$o(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),jc(t),t.M=!0,$o(11))):(zo(e.j,e.m,n,"[Invalid Chunked Response]"),Ea(e),_a(e))}function va(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?da:(n=Number(t.substring(n,r)),isNaN(n)?ha:(r+=1)+n>t.length?da:(t=t.slice(r,r+n),e.o=r+n,t))}function ya(e){e.Y=Date.now()+e.P,wa(e,e.P)}function wa(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Jo(ws(e.lb,e),t)}function ba(e){e.C&&(ds.clearTimeout(e.C),e.C=null)}function _a(e){0==e.l.H||e.J||Bc(e.l,e)}function Ea(e){ba(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Oo(e.V),Vo(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Sa(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Xa(n.i,e)))if(!e.K&&Xa(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(xt){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Vc(n),Ac(n)}Fc(n),$o(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Jo(ws(n.ib,n),6e3));if(1>=Ja(n.i)&&n.oa){try{n.oa()}catch(xt){}n.oa=void 0}}else qc(n,11)}else if((e.K||n.g==e)&&Vc(n),!Cs(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Za(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Ra(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Kc(r,r.J?r.pa:null,r.Y),o.K){ec(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(ba(a),ya(a)),r.g=o}else Mc(r);0<n.j.length&&Pc(n)}else"stop"!=l[0]&&"close"!=l[0]||qc(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?qc(n,7):Nc(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Go()}catch(xt){}}function xa(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(fs(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(fs(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(fs(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(cs=ca.prototype).setTimeout=function(e){this.P=e},cs.nb=function(e){e=e.target;const t=this.M;t&&3==Sc(e)?t.l():this.Pa(e)},cs.Pa=function(e){try{if(e==this.g)e:{const u=Sc(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Fs||this.g&&(this.h.h||this.g.ja()||xc(this.g)))){this.J||4!=u||7==t||Go(),ba(this);var n=this.g.da();this.ca=n;t:if(ma(this)){var r=xc(this.g);e="";var i=r.length,s=4==Sc(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ea(this),_a(this);var o="";break t}this.h.i=new ds.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cs(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,$o(12),Ea(this),_a(this);break e}zo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sa(this,n)}this.S?(ga(this,u,o),Fs&&this.i&&3==u&&(Uo(this.U,this.V,"tick",this.mb),this.V.start())):(zo(this.j,this.m,o,null),Sa(this,o)),4==u&&Ea(this),this.i&&!this.J&&(4==u?Bc(this.l,this):(this.i=!1,ya(this)))}else(function(e){const t={};e=(e.g&&2<=Sc(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Cs(e[r]))continue;var n=Io(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,$o(12)):(this.s=0,$o(13)),Ea(this),_a(this)}}}catch(u){}},cs.mb=function(){if(this.g){var e=Sc(this.g),t=this.g.ja();this.o<t.length&&(ba(this),ga(this,e,t),this.i&&4!=e&&ya(this))}},cs.cancel=function(){this.J=!0,Ea(this)},cs.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Go(),$o(17)),Ea(this),this.s=2,_a(this)):wa(this,this.Y-e)};var Ia=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ka(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ka){this.h=e.h,Ca(this,e.j),this.s=e.s,this.g=e.g,Na(this,e.m),this.l=e.l;var t=e.i,n=new Ba;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Aa(this,n),this.o=e.o}else e&&(t=String(e).match(Ia))?(this.h=!1,Ca(this,t[1]||"",!0),this.s=Oa(t[2]||""),this.g=Oa(t[3]||"",!0),Na(this,t[4]),this.l=Oa(t[5]||"",!0),Aa(this,t[6]||"",!0),this.o=Oa(t[7]||"")):(this.h=!1,this.i=new Ba(null,this.h))}function Ta(e){return new ka(e)}function Ca(e,t,n){e.j=n?Oa(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Na(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Aa(e,t,n){t instanceof Ba?(e.i=t,function(e,t){t&&!e.j&&(za(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(qa(this,t),Ka(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Da(t,Ua)),e.i=new Ba(t,e.h))}function Ra(e,t,n){e.i.set(t,n)}function Pa(e){return Ra(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Oa(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Da(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,La),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function La(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ka.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Da(t,Ma,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Da(t,Ma,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Da(n,"/"==n.charAt(0)?ja:Fa,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Da(n,Va)),e.join("")};var Ma=/[#\/\?@]/g,Fa=/[#\?:]/g,ja=/[#\?]/g,Ua=/[#\?@]/g,Va=/#/g;function Ba(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function za(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function qa(e,t){za(e),t=Ha(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Wa(e,t){return za(e),t=Ha(e,t),e.g.has(t)}function Ka(e,t,n){qa(e,t),0<n.length&&(e.i=null,e.g.set(Ha(e,t),xs(n)),e.h+=n.length)}function Ha(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(cs=Ba.prototype).add=function(e,t){za(this),this.i=null,e=Ha(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},cs.forEach=function(e,t){za(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},cs.ta=function(){za(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},cs.Z=function(e){za(this);let t=[];if("string"===typeof e)Wa(this,e)&&(t=t.concat(this.g.get(Ha(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},cs.set=function(e,t){return za(this),this.i=null,Wa(this,e=Ha(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},cs.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},cs.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Ga=class{constructor(e,t){this.g=e,this.map=t}};function Qa(e){this.l=e||$a,ds.PerformanceNavigationTiming?e=0<(e=ds.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(ds.g&&ds.g.Ka&&ds.g.Ka()&&ds.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var $a=10;function Ya(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ja(e){return e.h?1:e.g?e.g.size:0}function Xa(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Za(e,t){e.g?e.g.add(t):e.h=t}function ec(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function tc(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return xs(e.i)}Qa.prototype.cancel=function(){if(this.i=tc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nc,rc=class{stringify(e){return ds.JSON.stringify(e,void 0)}parse(e){return ds.JSON.parse(e,void 0)}};function ic(){this.g=new rc}function sc(e,t,n){const r=n||"";try{xa(e,(function(e,n){let i=e;ps(e)&&(i=_o(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function oc(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(St){}}function ac(e){this.l=e.ec||null,this.j=e.ob||!1}function cc(e,t){yo.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=lc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_s(ac,ea),ac.prototype.g=function(){return new cc(this.l,this.j)},ac.prototype.i=(nc={},function(){return nc}),_s(cc,yo);var lc=0;function uc(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function hc(e){e.readyState=4,e.l=null,e.j=null,e.A=null,dc(e)}function dc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(cs=cc.prototype).open=function(e,t){if(this.readyState!=lc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,dc(this)},cs.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||ds).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},cs.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hc(this)),this.readyState=lc},cs.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,dc(this)),this.g&&(this.readyState=3,dc(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof ds.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;uc(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},cs.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?hc(this):dc(this),3==this.readyState&&uc(this)}},cs.Za=function(e){this.g&&(this.response=this.responseText=e,hc(this))},cs.Ya=function(e){this.g&&(this.response=e,hc(this))},cs.ka=function(){this.g&&hc(this)},cs.setRequestHeader=function(e,t){this.v.append(e,t)},cs.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},cs.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(cc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var fc=ds.JSON.parse;function pc(e){yo.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=mc,this.L=this.M=!1}_s(pc,yo);var mc="",gc=/^https?$/i,vc=["POST","PUT"];function yc(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,wc(e),_c(e)}function wc(e){e.F||(e.F=!0,wo(e,"complete"),wo(e,"error"))}function bc(e){if(e.h&&"undefined"!=typeof hs&&(!e.C[1]||4!=Sc(e)||2!=e.da()))if(e.v&&4==Sc(e))Do(e.La,0,e);else if(wo(e,"readystatechange"),4==Sc(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Ia)[1]||null;!i&&ds.self&&ds.self.location&&(i=ds.self.location.protocol.slice(0,-1)),r=!gc.test(i?i.toLowerCase():"")}n=r}if(n)wo(e,"complete"),wo(e,"success");else{e.m=6;try{var s=2<Sc(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",wc(e)}}finally{_c(e)}}}function _c(e,t){if(e.g){Ec(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||wo(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Ec(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(ds.clearTimeout(e.A),e.A=null)}function Sc(e){return e.g?e.g.readyState:0}function xc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case mc:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ic(e){let t="";return Xs(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function kc(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ic(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ra(e,t,n))}function Tc(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Cc(e){this.Ga=0,this.j=[],this.l=new Bo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Tc("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Tc("baseRetryDelayMs",5e3,e),this.hb=Tc("retryDelaySeedMs",1e4,e),this.eb=Tc("forwardChannelMaxRetries",2,e),this.xa=Tc("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Qa(e&&e.concurrentRequestLimit),this.Ja=new ic,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Nc(e){if(Rc(e),3==e.H){var t=e.W++,n=Ta(e.I);if(Ra(n,"SID",e.K),Ra(n,"RID",t),Ra(n,"TYPE","terminate"),Dc(e,n),(t=new ca(e,e.l,t)).L=2,t.A=Pa(Ta(n)),n=!1,ds.navigator&&ds.navigator.sendBeacon)try{n=ds.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&ds.Image&&((new Image).src=t.A,n=!0),n||(t.g=Hc(t.l,null),t.g.ha(t.A)),t.G=Date.now(),ya(t)}Wc(e)}function Ac(e){e.g&&(jc(e),e.g.cancel(),e.g=null)}function Rc(e){Ac(e),e.u&&(ds.clearTimeout(e.u),e.u=null),Vc(e),e.i.cancel(),e.m&&("number"===typeof e.m&&ds.clearTimeout(e.m),e.m=null)}function Pc(e){if(!Ya(e.i)&&!e.m){e.m=!0;var t=e.Na;To||Ao(),Co||(To(),Co=!0),No.add(t,e),e.C=0}}function Oc(e,t){var n;n=t?t.m:e.W++;const r=Ta(e.I);Ra(r,"SID",e.K),Ra(r,"RID",n),Ra(r,"AID",e.V),Dc(e,r),e.o&&e.s&&kc(r,e.o,e.s),n=new ca(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Lc(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Za(e.i,n),fa(n,r,t)}function Dc(e,t){e.na&&Xs(e.na,(function(e,n){Ra(t,n,e)})),e.h&&xa({},(function(e,n){Ra(t,n,e)}))}function Lc(e,t,n){n=Math.min(e.j.length,n);var r=e.h?ws(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{sc(a,e,"req"+n+"_")}catch(Gt){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Mc(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;To||Ao(),Co||(To(),Co=!0),No.add(t,e),e.A=0}}function Fc(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Jo(ws(e.Ma,e),zc(e,e.A)),e.A++,!0)}function jc(e){null!=e.B&&(ds.clearTimeout(e.B),e.B=null)}function Uc(e){e.g=new ca(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ta(e.wa);Ra(t,"RID","rpc"),Ra(t,"SID",e.K),Ra(t,"AID",e.V),Ra(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Ra(t,"TO",e.qa),Ra(t,"TYPE","xmlhttp"),Dc(e,t),e.o&&e.s&&kc(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Pa(Ta(t)),n.u=null,n.S=!0,pa(n,e)}function Vc(e){null!=e.v&&(ds.clearTimeout(e.v),e.v=null)}function Bc(e,t){var n=null;if(e.g==t){Vc(e),jc(e),e.g=null;var r=2}else{if(!Xa(e.i,t))return;n=t.F,ec(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;wo(r=Ko(),new Yo(r,n)),Pc(e)}else Mc(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Ja(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Jo(ws(e.Na,e,t),zc(e,e.C)),e.C++,!0))}(e,t)||2==r&&Fc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:qc(e,5);break;case 4:qc(e,10);break;case 3:qc(e,6);break;default:qc(e,2)}}function zc(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function qc(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=ws(e.pb,e);n||(n=new ka("//www.google.com/images/cleardot.gif"),ds.location&&"http"==ds.location.protocol||Ca(n,"https"),Pa(n)),function(e,t){const n=new Bo;if(ds.Image){const r=new Image;r.onload=bs(oc,n,r,"TestLoadImage: loaded",!0,t),r.onerror=bs(oc,n,r,"TestLoadImage: error",!1,t),r.onabort=bs(oc,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=bs(oc,n,r,"TestLoadImage: timeout",!1,t),ds.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else $o(2);e.H=0,e.h&&e.h.za(t),Wc(e),Rc(e)}function Wc(e){if(e.H=0,e.ma=[],e.h){const t=tc(e.i);0==t.length&&0==e.j.length||(Is(e.ma,t),Is(e.ma,e.j),e.i.i.length=0,xs(e.j),e.j.length=0),e.h.ya()}}function Kc(e,t,n){var r=n instanceof ka?Ta(n):new ka(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Na(r,r.m);else{var i=ds.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new ka(null);r&&Ca(s,r),t&&(s.g=t),i&&Na(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Ra(r,n,t),Ra(r,"VER",e.ra),Dc(e,r),r}function Hc(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new pc(new ac({ob:n})):new pc(e.va)).Oa(e.J),t}function Gc(){}function Qc(){if(Ls&&!(10<=Number(Ks)))throw Error("Environmental error: no available transport.")}function $c(e,t){yo.call(this),this.g=new Cc(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Cs(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Cs(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Xc(this)}function Yc(e){sa.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Jc(){oa.call(this),this.status=1}function Xc(e){this.g=e}function Zc(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function el(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function tl(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(cs=pc.prototype).Oa=function(e){this.M=e},cs.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ra.g(),this.C=this.u?ta(this.u):ta(ra),this.g.onreadystatechange=ws(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(St){return void yc(this,St)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=ds.FormData&&e instanceof ds.FormData,!(0<=Ss(vc,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ec(this),0<this.B&&((this.L=function(e){return Ls&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ws(this.ua,this)):this.A=Do(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(St){yc(this,St)}},cs.ua=function(){"undefined"!=typeof hs&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wo(this,"timeout"),this.abort(8))},cs.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,wo(this,"complete"),wo(this,"abort"),_c(this))},cs.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_c(this,!0)),pc.$.N.call(this)},cs.La=function(){this.s||(this.G||this.v||this.l?bc(this):this.kb())},cs.kb=function(){bc(this)},cs.isActive=function(){return!!this.g},cs.da=function(){try{return 2<Sc(this)?this.g.status:-1}catch(nc){return-1}},cs.ja=function(){try{return this.g?this.g.responseText:""}catch(nc){return""}},cs.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),fc(t)}},cs.Ia=function(){return this.m},cs.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(cs=Cc.prototype).ra=8,cs.H=1,cs.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new ca(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Zs(s),to(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Lc(this,i,t),Ra(n=Ta(this.I),"RID",e),Ra(n,"CVER",22),this.F&&Ra(n,"X-HTTP-Session-Id",this.F),Dc(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ic(s)))+"&"+t:this.o&&kc(n,this.o,s)),Za(this.i,i),this.bb&&Ra(n,"TYPE","init"),this.P?(Ra(n,"$req",t),Ra(n,"SID","null"),i.aa=!0,fa(i,n,null)):fa(i,n,t),this.H=2}}else 3==this.H&&(e?Oc(this,e):0==this.j.length||Ya(this.i)||Oc(this))},cs.Ma=function(){if(this.u=null,Uc(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Jo(ws(this.jb,this),e)}},cs.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,$o(10),Ac(this),Uc(this))},cs.ib=function(){null!=this.v&&(this.v=null,Ac(this),Fc(this),$o(19))},cs.pb=function(e){e?(this.l.info("Successfully pinged google.com"),$o(2)):(this.l.info("Failed to ping google.com"),$o(1))},cs.isActive=function(){return!!this.h&&this.h.isActive(this)},(cs=Gc.prototype).Ba=function(){},cs.Aa=function(){},cs.za=function(){},cs.ya=function(){},cs.isActive=function(){return!0},cs.Va=function(){},Qc.prototype.g=function(e,t){return new $c(e,t)},_s($c,yo),$c.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;$o(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Kc(e,null,e.Y),Pc(e)},$c.prototype.close=function(){Nc(this.g)},$c.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=_o(e),e=n);t.j.push(new Ga(t.fb++,e)),3==t.H&&Pc(t)},$c.prototype.N=function(){this.g.h=null,delete this.j,Nc(this.g),delete this.g,$c.$.N.call(this)},_s(Yc,sa),_s(Jc,oa),_s(Xc,Gc),Xc.prototype.Ba=function(){wo(this.g,"a")},Xc.prototype.Aa=function(e){wo(this.g,new Yc(e))},Xc.prototype.za=function(e){wo(this.g,new Jc)},Xc.prototype.ya=function(){wo(this.g,"b")},_s(Zc,(function(){this.blockSize=-1})),Zc.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Zc.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)el(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){el(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){el(this,r),i=0;break}}this.h=i,this.i+=t},Zc.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var nl={};function rl(e){return-128<=e&&128>e?function(e,t){var n=nl;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new tl([0|e],0>e?-1:0)})):new tl([0|e],0>e?-1:0)}function il(e){if(isNaN(e)||!isFinite(e))return ol;if(0>e)return hl(il(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=sl;return new tl(t,0)}var sl=4294967296,ol=rl(0),al=rl(1),cl=rl(16777216);function ll(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function ul(e){return-1==e.h}function hl(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new tl(n,~e.h).add(al)}function dl(e,t){return e.add(hl(t))}function fl(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function pl(e,t){this.g=e,this.h=t}function ml(e,t){if(ll(t))throw Error("division by zero");if(ll(e))return new pl(ol,ol);if(ul(e))return t=ml(hl(e),t),new pl(hl(t.g),hl(t.h));if(ul(t))return t=ml(e,hl(t)),new pl(hl(t.g),t.h);if(30<e.g.length){if(ul(e)||ul(t))throw Error("slowDivide_ only works with positive integers.");for(var n=al,r=t;0>=r.X(e);)n=gl(n),r=gl(r);var i=vl(n,1),s=vl(r,1);for(r=vl(r,2),n=vl(n,2);!ll(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=vl(r,1),n=vl(n,1)}return t=dl(e,i.R(t)),new pl(i,t)}for(i=ol;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=il(n)).R(t);ul(o)||0<o.X(e);)o=(s=il(n-=r)).R(t);ll(s)&&(s=al),i=i.add(s),e=dl(e,o)}return new pl(i,e)}function gl(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new tl(n,e.h)}function vl(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new tl(i,e.h)}(cs=tl.prototype).ea=function(){if(ul(this))return-hl(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:sl+r)*t,t*=sl}return e},cs.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(ll(this))return"0";if(ul(this))return"-"+hl(this).toString(e);for(var t=il(Math.pow(e,6)),n=this,r="";;){var i=ml(n,t).g,s=((0<(n=dl(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(ll(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},cs.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},cs.X=function(e){return ul(e=dl(this,e))?-1:ll(e)?0:1},cs.abs=function(){return ul(this)?hl(this):this},cs.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new tl(n,-2147483648&n[n.length-1]?-1:0)},cs.R=function(e){if(ll(this)||ll(e))return ol;if(ul(this))return ul(e)?hl(this).R(hl(e)):hl(hl(this).R(e));if(ul(e))return hl(this.R(hl(e)));if(0>this.X(cl)&&0>e.X(cl))return il(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,fl(n,2*r+2*i),n[2*r+2*i+1]+=s*c,fl(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,fl(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,fl(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new tl(n,0)},cs.gb=function(e){return ml(this,e).h},cs.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new tl(n,this.h&e.h)},cs.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new tl(n,this.h|e.h)},cs.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new tl(n,this.h^e.h)},Qc.prototype.createWebChannel=Qc.prototype.g,$c.prototype.send=$c.prototype.u,$c.prototype.open=$c.prototype.m,$c.prototype.close=$c.prototype.close,Xo.NO_ERROR=0,Xo.TIMEOUT=8,Xo.HTTP_ERROR=6,Zo.COMPLETE="complete",na.EventType=ia,ia.OPEN="a",ia.CLOSE="b",ia.ERROR="c",ia.MESSAGE="d",yo.prototype.listen=yo.prototype.O,pc.prototype.listenOnce=pc.prototype.P,pc.prototype.getLastError=pc.prototype.Sa,pc.prototype.getLastErrorCode=pc.prototype.Ia,pc.prototype.getStatus=pc.prototype.da,pc.prototype.getResponseJson=pc.prototype.Wa,pc.prototype.getResponseText=pc.prototype.ja,pc.prototype.send=pc.prototype.ha,pc.prototype.setWithCredentials=pc.prototype.Oa,Zc.prototype.digest=Zc.prototype.l,Zc.prototype.reset=Zc.prototype.reset,Zc.prototype.update=Zc.prototype.j,tl.prototype.add=tl.prototype.add,tl.prototype.multiply=tl.prototype.R,tl.prototype.modulo=tl.prototype.gb,tl.prototype.compare=tl.prototype.X,tl.prototype.toNumber=tl.prototype.ea,tl.prototype.toString=tl.prototype.toString,tl.prototype.getBits=tl.prototype.D,tl.fromNumber=il,tl.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return hl(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=il(Math.pow(n,8)),i=ol,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=il(Math.pow(n,o)),i=i.R(o).add(il(a))):i=(i=i.R(r)).add(il(a))}return i};var yl=us.createWebChannelTransport=function(){return new Qc},wl=us.getStatEventTarget=function(){return Ko()},bl=us.ErrorCode=Xo,_l=us.EventType=Zo,El=us.Event=qo,Sl=us.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},xl=(us.FetchXmlHttpFactory=ac,us.WebChannel=na),Il=us.XhrIo=pc,kl=us.Md5=Zc,Tl=us.Integer=tl;const Cl="@firebase/firestore";class Nl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nl.UNAUTHENTICATED=new Nl(null),Nl.GOOGLE_CREDENTIALS=new Nl("google-credentials-uid"),Nl.FIRST_PARTY=new Nl("first-party-uid"),Nl.MOCK_USER=new Nl("mock-user");let Al="10.8.1";const Rl=new ri("@firebase/firestore");function Pl(){return Rl.logLevel}function Ol(e){if(Rl.logLevel<=Xr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ml);Rl.debug("Firestore (".concat(Al,"): ").concat(e),...i)}}function Dl(e){if(Rl.logLevel<=Xr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ml);Rl.error("Firestore (".concat(Al,"): ").concat(e),...i)}}function Ll(e){if(Rl.logLevel<=Xr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ml);Rl.warn("Firestore (".concat(Al,"): ").concat(e),...i)}}function Ml(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Fl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Al,") INTERNAL ASSERTION FAILED: ")+e;throw Dl(t),new Error(t)}function jl(e,t){e||Fl()}function Ul(e,t){return e}const Vl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Bl extends Or{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class zl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ql{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Wl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Nl.UNAUTHENTICATED)))}shutdown(){}}class Kl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Hl{constructor(e){this.t=e,this.currentUser=Nl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new zl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new zl,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Ol("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ol("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new zl)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ol("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(jl("string"==typeof t.accessToken),new ql(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return jl(null===e||"string"==typeof e),new Nl(e)}}class Gl{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Nl.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ql{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Gl(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Nl.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $l{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yl{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Ol("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Ol("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ol("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Ol("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(jl("string"==typeof e.token),this.R=e.token,new $l(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Jl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Xl{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Jl(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Zl(e,t){return e<t?-1:e>t?1:0}function eu(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function tu(e){return e+"\0"}class nu{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Bl(Vl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Bl(Vl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Bl(Vl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Bl(Vl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nu.fromMillis(Date.now())}static fromDate(e){return nu.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new nu(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zl(this.nanoseconds,e.nanoseconds):Zl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ru{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ru(e)}static min(){return new ru(new nu(0,0))}static max(){return new ru(new nu(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class iu{constructor(e,t,n){void 0===t?t=0:t>e.length&&Fl(),void 0===n?n=e.length-t:n>e.length-t&&Fl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===iu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof iu?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class su extends iu{construct(e,t,n){return new su(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Bl(Vl.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new su(e)}static emptyPath(){return new su([])}}const ou=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class au extends iu{construct(e,t,n){return new au(e,t,n)}static isValidIdentifier(e){return ou.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),au.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new au(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Bl(Vl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Bl(Vl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Bl(Vl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Bl(Vl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new au(t)}static emptyPath(){return new au([])}}class cu{constructor(e){this.path=e}static fromPath(e){return new cu(su.fromString(e))}static fromName(e){return new cu(su.fromString(e).popFirst(5))}static empty(){return new cu(su.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===su.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return su.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new cu(new su(e.slice()))}}class lu{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function uu(e){return e.fields.find((e=>2===e.kind))}function hu(e){return e.fields.filter((e=>2!==e.kind))}lu.UNKNOWN_ID=-1;class du{constructor(e,t){this.fieldPath=e,this.kind=t}}class fu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new fu(0,gu.min())}}function pu(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ru.fromTimestamp(1e9===r?new nu(n+1,0):new nu(n,r));return new gu(i,cu.empty(),t)}function mu(e){return new gu(e.readTime,e.key,-1)}class gu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new gu(ru.min(),cu.empty(),-1)}static max(){return new gu(ru.max(),cu.empty(),-1)}}function vu(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=cu.comparator(e.documentKey,t.documentKey),0!==n?n:Zl(e.largestBatchId,t.largestBatchId))}const yu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function bu(e){if(e.code!==Vl.FAILED_PRECONDITION||e.message!==yu)throw e;Ol("LocalStore","Unexpectedly lost primary lease")}class _u{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _u(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof _u?t:_u.resolve(t)}catch(e){return _u.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):_u.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):_u.reject(t)}static resolve(e){return new _u(((t,n)=>{t(e)}))}static reject(e){return new _u(((t,n)=>{n(e)}))}static waitFor(e){return new _u(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=_u.resolve(!1);for(const n of e)t=t.next((e=>e?_u.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new _u(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new _u(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Eu{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new zl,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Iu(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Au(t.target.error);this.V.reject(new Iu(e,n))}}static open(e,t,n,r){try{return new Eu(t,e.transaction(r,n))}catch(e){throw new Iu(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ol("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Tu(t)}}class Su{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Su.S(kr())&&Dl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ol("SimpleDb","Removing database:",e),Cu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Pr())return!1;if(Su.C())return!0;const e=kr(),t=Su.S(e),n=0<t&&t<10,r=Su.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Ol("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Iu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Bl(Vl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Bl(Vl.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Iu(e,r))},r.onupgradeneeded=e=>{Ol("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Ol("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=Eu.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),_u.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Ol("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class xu{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Cu(this.k.delete())}}class Iu extends Bl{constructor(e,t){super(Vl.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function ku(e){return"IndexedDbTransactionError"===e.name}class Tu{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Ol("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ol("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Cu(n)}add(e){return Ol("SimpleDb","ADD",this.store.name,e,e),Cu(this.store.add(e))}get(e){return Cu(this.store.get(e)).next((t=>(void 0===t&&(t=null),Ol("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Ol("SimpleDb","DELETE",this.store.name,e),Cu(this.store.delete(e))}count(){return Ol("SimpleDb","COUNT",this.store.name),Cu(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new _u(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new _u(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Ol("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new _u(((n,r)=>{t.onerror=e=>{const t=Au(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new _u(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new xu(i),o=t(i.primaryKey,i.value,s);if(o instanceof _u){const e=o.catch((e=>(s.done(),_u.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>_u.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cu(e){return new _u(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Au(e.target.error);n(t)}}))}let Nu=!1;function Au(e){const t=Su.S(kr());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Bl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Nu||(Nu=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Ru{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Ol("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Ol("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){ku(e)?Ol("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await bu(e)}await this.ee(6e4)}))}}class Pu{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return _u.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Ol("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Ol("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=mu(t);vu(r,n)>0&&(n=r)})),new gu(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ou{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Du(e){return null==e}function Lu(e){return 0===e&&1/e==-1/0}function Mu(e){return"number"==typeof e&&Number.isInteger(e)&&!Lu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Fu(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Uu(t)),t=ju(e.get(n),t);return Uu(t)}function ju(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Uu(e){return e+"\x01\x01"}function Vu(e){const t=e.length;if(jl(t>=2),2===t)return jl("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),su.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Fl(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Fl()}s=t+2}return new su(r)}Ou._e=-1;const Bu=["userId","batchId"];function zu(e,t){return[e,Fu(t)]}function qu(e,t,n){return[e,Fu(t),n]}const Wu={},Ku=["prefixPath","collectionGroup","readTime","documentId"],Hu=["prefixPath","collectionGroup","documentId"],Gu=["collectionGroup","readTime","prefixPath","documentId"],Qu=["canonicalId","targetId"],$u=["targetId","path"],Yu=["path","targetId"],Ju=["collectionId","parent"],Xu=["indexId","uid"],Zu=["uid","sequenceNumber"],eh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],th=["indexId","uid","orderedDocumentKey"],nh=["userId","collectionPath","documentId"],rh=["userId","collectionPath","largestBatchId"],ih=["userId","collectionGroup","largestBatchId"],sh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],oh=[...sh,"documentOverlays"],ah=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ch=ah,lh=[...ch,"indexConfiguration","indexState","indexEntries"];class uh extends wu{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function hh(e,t){const n=Ul(e);return Su.M(n.ae,t)}function dh(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function fh(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ph(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class mh{constructor(e,t){this.comparator=e,this.root=t||vh.EMPTY}insert(e,t){return new mh(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vh.BLACK,null,null))}remove(e){return new mh(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vh.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gh(this.root,e,this.comparator,!1)}getReverseIterator(){return new gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gh(this.root,e,this.comparator,!0)}}class gh{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vh{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:vh.RED,this.left=null!=r?r:vh.EMPTY,this.right=null!=i?i:vh.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new vh(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return vh.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return vh.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vh.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fl();if(this.right.isRed())throw Fl();const e=this.left.check();if(e!==this.right.check())throw Fl();return e+(this.isRed()?0:1)}}vh.EMPTY=null,vh.RED=!0,vh.BLACK=!1,vh.EMPTY=new class{constructor(){this.size=0}get key(){throw Fl()}get value(){throw Fl()}get color(){throw Fl()}get left(){throw Fl()}get right(){throw Fl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new vh(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yh{constructor(e){this.comparator=e,this.data=new mh(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wh(this.data.getIterator())}getIteratorFrom(e){return new wh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof yh))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new yh(this.comparator);return t.data=e,t}}class wh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bh(e){return e.hasNext()?e.getNext():void 0}class _h{constructor(e){this.fields=e,e.sort(au.comparator)}static empty(){return new _h([])}unionWith(e){let t=new yh(au.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new _h(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return eu(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Eh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Sh{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Eh("Invalid base64 string: "+e):e}}(e);return new Sh(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Sh(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sh.EMPTY_BYTE_STRING=new Sh("");const xh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ih(e){if(jl(!!e),"string"==typeof e){let t=0;const n=xh.exec(e);if(jl(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:kh(e.seconds),nanos:kh(e.nanos)}}function kh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Th(e){return"string"==typeof e?Sh.fromBase64String(e):Sh.fromUint8Array(e)}function Ch(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Nh(e){const t=e.mapValue.fields.__previous_value__;return Ch(t)?Nh(t):t}function Ah(e){const t=Ih(e.mapValue.fields.__local_write_time__.timestampValue);return new nu(t.seconds,t.nanos)}class Rh{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Ph{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ph("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ph&&e.projectId===this.projectId&&e.database===this.database}}const Oh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dh={nullValue:"NULL_VALUE"};function Lh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ch(e)?4:$h(e)?9007199254740991:10:Fl()}function Mh(e,t){if(e===t)return!0;const n=Lh(e);if(n!==Lh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ah(e).isEqual(Ah(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ih(e.timestampValue),r=Ih(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Th(e.bytesValue).isEqual(Th(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return kh(e.geoPointValue.latitude)===kh(t.geoPointValue.latitude)&&kh(e.geoPointValue.longitude)===kh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return kh(e.integerValue)===kh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=kh(e.doubleValue),r=kh(t.doubleValue);return n===r?Lu(n)===Lu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return eu(e.arrayValue.values||[],t.arrayValue.values||[],Mh);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(dh(n)!==dh(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Mh(n[i],r[i])))return!1;return!0}(e,t);default:return Fl()}}function Fh(e,t){return void 0!==(e.values||[]).find((e=>Mh(e,t)))}function jh(e,t){if(e===t)return 0;const n=Lh(e),r=Lh(t);if(n!==r)return Zl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Zl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=kh(e.integerValue||e.doubleValue),r=kh(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Uh(e.timestampValue,t.timestampValue);case 4:return Uh(Ah(e),Ah(t));case 5:return Zl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Th(e),r=Th(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Zl(n[i],r[i]);if(0!==e)return e}return Zl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Zl(kh(e.latitude),kh(t.latitude));return 0!==n?n:Zl(kh(e.longitude),kh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=jh(n[i],r[i]);if(e)return e}return Zl(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Oh.mapValue&&t===Oh.mapValue)return 0;if(e===Oh.mapValue)return 1;if(t===Oh.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Zl(r[o],s[o]);if(0!==e)return e;const t=jh(n[r[o]],i[s[o]]);if(0!==t)return t}return Zl(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Fl()}}function Uh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Zl(e,t);const n=Ih(e),r=Ih(t),i=Zl(n.seconds,r.seconds);return 0!==i?i:Zl(n.nanos,r.nanos)}function Vh(e){return Bh(e)}function Bh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ih(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Th(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return cu.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Bh(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Bh(e.fields[i]));return n+"}"}(e.mapValue):Fl()}function zh(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function qh(e){return!!e&&"integerValue"in e}function Wh(e){return!!e&&"arrayValue"in e}function Kh(e){return!!e&&"nullValue"in e}function Hh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Gh(e){return!!e&&"mapValue"in e}function Qh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return fh(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Qh(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Qh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function $h(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Yh(e){return"nullValue"in e?Dh:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?zh(Ph.empty(),cu.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Fl()}function Jh(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?zh(Ph.empty(),cu.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Oh:Fl()}function Xh(e,t){const n=jh(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Zh(e,t){const n=jh(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class ed{constructor(e){this.value=e}static empty(){return new ed({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Gh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qh(t)}setAll(e){let t=au.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Qh(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Gh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mh(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Gh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){fh(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new ed(Qh(this.value))}}function td(e){const t=[];return fh(e.fields,((e,n)=>{const r=new au([e]);if(Gh(n)){const e=td(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new _h(t)}class nd{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new nd(e,0,ru.min(),ru.min(),ru.min(),ed.empty(),0)}static newFoundDocument(e,t,n,r){return new nd(e,1,t,ru.min(),n,r,0)}static newNoDocument(e,t){return new nd(e,2,t,ru.min(),ru.min(),ed.empty(),0)}static newUnknownDocument(e,t){return new nd(e,3,t,ru.min(),ru.min(),ed.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ru.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ed.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ed.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ru.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nd&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nd(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class rd{constructor(e,t){this.position=e,this.inclusive=t}}function id(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?cu.comparator(cu.fromName(o.referenceValue),n.key):jh(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function sd(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Mh(e.position[n],t.position[n]))return!1;return!0}class od{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ad(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class cd{}class ld extends cd{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new wd(e,t,n):"array-contains"===t?new Sd(e,n):"in"===t?new xd(e,n):"not-in"===t?new Id(e,n):"array-contains-any"===t?new kd(e,n):new ld(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new bd(e,n):new _d(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(jh(t,this.value)):null!==t&&Lh(this.value)===Lh(t)&&this.matchesComparison(jh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Fl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ud extends cd{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new ud(e,t)}matches(e){return hd(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function hd(e){return"and"===e.op}function dd(e){return"or"===e.op}function fd(e){return pd(e)&&hd(e)}function pd(e){for(const t of e.filters)if(t instanceof ud)return!1;return!0}function md(e){if(e instanceof ld)return e.field.canonicalString()+e.op.toString()+Vh(e.value);if(fd(e))return e.filters.map((e=>md(e))).join(",");{const t=e.filters.map((e=>md(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function gd(e,t){return e instanceof ld?function(e,t){return t instanceof ld&&e.op===t.op&&e.field.isEqual(t.field)&&Mh(e.value,t.value)}(e,t):e instanceof ud?function(e,t){return t instanceof ud&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&gd(n,t.filters[r])),!0)}(e,t):void Fl()}function vd(e,t){const n=e.filters.concat(t);return ud.create(n,e.op)}function yd(e){return e instanceof ld?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Vh(e.value))}(e):e instanceof ud?function(e){return e.op.toString()+" {"+e.getFilters().map(yd).join(" ,")+"}"}(e):"Filter"}class wd extends ld{constructor(e,t,n){super(e,t,n),this.key=cu.fromName(n.referenceValue)}matches(e){const t=cu.comparator(e.key,this.key);return this.matchesComparison(t)}}class bd extends ld{constructor(e,t){super(e,"in",t),this.keys=Ed("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class _d extends ld{constructor(e,t){super(e,"not-in",t),this.keys=Ed("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Ed(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>cu.fromName(e.referenceValue)))}class Sd extends ld{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wh(t)&&Fh(t.arrayValue,this.value)}}class xd extends ld{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Fh(this.value.arrayValue,t)}}class Id extends ld{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Fh(this.value.arrayValue,t)}}class kd extends ld{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Fh(this.value.arrayValue,e)))}}class Td{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Cd(e){return new Td(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Nd(e){const t=Ul(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>md(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Du(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Vh(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Vh(e))).join(",")),t.ce=e}return t.ce}function Ad(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ad(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!gd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!sd(e.startAt,t.startAt)&&sd(e.endAt,t.endAt)}function Rd(e){return cu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Pd(e,t){return e.filters.filter((e=>e instanceof ld&&e.field.isEqual(t)))}function Od(e,t,n){let r=Dh,i=!0;for(const s of Pd(e,t)){let e=Dh,t=!0;switch(s.op){case"<":case"<=":e=Yh(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Dh}Xh({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Xh({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Dd(e,t,n){let r=Oh,i=!0;for(const s of Pd(e,t)){let e=Oh,t=!0;switch(s.op){case">=":case">":e=Jh(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Oh}Zh({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Zh({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Ld{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Md(e,t,n,r,i,s,o,a){return new Ld(e,t,n,r,i,s,o,a)}function Fd(e){return new Ld(e)}function jd(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ud(e){return null!==e.collectionGroup}function Vd(e){const t=Ul(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new yh(au.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new od(r,n))})),e.has(au.keyField().canonicalString())||t.le.push(new od(au.keyField(),n))}return t.le}function Bd(e){const t=Ul(e);return t.he||(t.he=zd(t,Vd(e))),t.he}function zd(e,t){if("F"===e.limitType)return Cd(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new od(e.field,t)}));const n=e.endAt?new rd(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new rd(e.startAt.position,e.startAt.inclusive):null;return Cd(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function qd(e,t){const n=e.filters.concat([t]);return new Ld(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Wd(e,t,n){return new Ld(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Kd(e,t){return Ad(Bd(e),Bd(t))&&e.limitType===t.limitType}function Hd(e){return"".concat(Nd(Bd(e)),"|lt:").concat(e.limitType)}function Gd(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>yd(e))).join(", "),"]")),Du(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Vh(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Vh(e))).join(",")),"Target(".concat(t,")")}(Bd(e)),"; limitType=").concat(e.limitType,")")}function Qd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):cu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Vd(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=id(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Vd(e),t))&&!(e.endAt&&!function(e,t,n){const r=id(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Vd(e),t))}(e,t)}function $d(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Yd(e){return(t,n)=>{let r=!1;for(const i of Vd(e)){const e=Jd(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Jd(e,t,n){const r=e.field.isKeyField()?cu.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?jh(r,i):Fl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Fl()}}class Xd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){fh(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return ph(this.inner)}size(){return this.innerSize}}const Zd=new mh(cu.comparator);function ef(){return Zd}const tf=new mh(cu.comparator);function nf(){let e=tf;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function rf(e){let t=tf;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function sf(){return af()}function of(){return af()}function af(){return new Xd((e=>e.toString()),((e,t)=>e.isEqual(t)))}const cf=new mh(cu.comparator),lf=new yh(cu.comparator);function uf(){let e=lf;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const hf=new yh(Zl);function df(){return hf}function ff(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lu(t)?"-0":t}}function pf(e){return{integerValue:""+e}}function mf(e,t){return Mu(t)?pf(t):ff(e,t)}class gf{constructor(){this._=void 0}}function vf(e,t,n){return e instanceof bf?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ch(t)&&(t=Nh(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof _f?Ef(e,t):e instanceof Sf?xf(e,t):function(e,t){const n=wf(e,t),r=kf(n)+kf(e.Ie);return qh(n)&&qh(e.Ie)?pf(r):ff(e.serializer,r)}(e,t)}function yf(e,t,n){return e instanceof _f?Ef(e,t):e instanceof Sf?xf(e,t):n}function wf(e,t){return e instanceof If?function(e){return qh(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class bf extends gf{}class _f extends gf{constructor(e){super(),this.elements=e}}function Ef(e,t){const n=Tf(t);for(const r of e.elements)n.some((e=>Mh(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Sf extends gf{constructor(e){super(),this.elements=e}}function xf(e,t){let n=Tf(t);for(const r of e.elements)n=n.filter((e=>!Mh(e,r)));return{arrayValue:{values:n}}}class If extends gf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function kf(e){return kh(e.integerValue||e.doubleValue)}function Tf(e){return Wh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Cf{constructor(e,t){this.field=e,this.transform=t}}class Nf{constructor(e,t){this.version=e,this.transformResults=t}}class Af{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Af}static exists(e){return new Af(void 0,e)}static updateTime(e){return new Af(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Pf{}function Of(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new qf(e.key,Af.none()):new jf(e.key,e.data,Af.none());{const n=e.data,r=ed.empty();let i=new yh(au.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Uf(e.key,r,new _h(i.toArray()),Af.none())}}function Df(e,t,n){e instanceof jf?function(e,t,n){const r=e.value.clone(),i=Bf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Uf?function(e,t,n){if(!Rf(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Bf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Vf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Lf(e,t,n,r){return e instanceof jf?function(e,t,n,r){if(!Rf(e.precondition,t))return n;const i=e.value.clone(),s=zf(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Uf?function(e,t,n,r){if(!Rf(e.precondition,t))return n;const i=zf(e.fieldTransforms,r,t),s=t.data;return s.setAll(Vf(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Rf(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Mf(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=wf(r.transform,e||null);null!=i&&(null===n&&(n=ed.empty()),n.set(r.field,i))}return n||null}function Ff(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&eu(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof _f&&t instanceof _f||e instanceof Sf&&t instanceof Sf?eu(e.elements,t.elements,Mh):e instanceof If&&t instanceof If?Mh(e.Ie,t.Ie):e instanceof bf&&t instanceof bf}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class jf extends Pf{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Uf extends Pf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Vf(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Bf(e,t,n){const r=new Map;jl(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,yf(o,a,n[i]))}return r}function zf(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,vf(e,s,t))}return r}class qf extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wf extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Kf{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Df(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Lf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Lf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=of();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Of(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(ru.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),uf())}isEqual(e){return this.batchId===e.batchId&&eu(this.mutations,e.mutations,((e,t)=>Ff(e,t)))&&eu(this.baseMutations,e.baseMutations,((e,t)=>Ff(e,t)))}}class Hf{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){jl(e.mutations.length===n.length);let r=cf;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Hf(e,t,n,r)}}class Gf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Qf{constructor(e,t){this.count=e,this.unchangedNames=t}}var $f,Yf;function Jf(e){switch(e){default:return Fl();case Vl.CANCELLED:case Vl.UNKNOWN:case Vl.DEADLINE_EXCEEDED:case Vl.RESOURCE_EXHAUSTED:case Vl.INTERNAL:case Vl.UNAVAILABLE:case Vl.UNAUTHENTICATED:return!1;case Vl.INVALID_ARGUMENT:case Vl.NOT_FOUND:case Vl.ALREADY_EXISTS:case Vl.PERMISSION_DENIED:case Vl.FAILED_PRECONDITION:case Vl.ABORTED:case Vl.OUT_OF_RANGE:case Vl.UNIMPLEMENTED:case Vl.DATA_LOSS:return!0}}function Xf(e){if(void 0===e)return Dl("GRPC error has no .code"),Vl.UNKNOWN;switch(e){case $f.OK:return Vl.OK;case $f.CANCELLED:return Vl.CANCELLED;case $f.UNKNOWN:return Vl.UNKNOWN;case $f.DEADLINE_EXCEEDED:return Vl.DEADLINE_EXCEEDED;case $f.RESOURCE_EXHAUSTED:return Vl.RESOURCE_EXHAUSTED;case $f.INTERNAL:return Vl.INTERNAL;case $f.UNAVAILABLE:return Vl.UNAVAILABLE;case $f.UNAUTHENTICATED:return Vl.UNAUTHENTICATED;case $f.INVALID_ARGUMENT:return Vl.INVALID_ARGUMENT;case $f.NOT_FOUND:return Vl.NOT_FOUND;case $f.ALREADY_EXISTS:return Vl.ALREADY_EXISTS;case $f.PERMISSION_DENIED:return Vl.PERMISSION_DENIED;case $f.FAILED_PRECONDITION:return Vl.FAILED_PRECONDITION;case $f.ABORTED:return Vl.ABORTED;case $f.OUT_OF_RANGE:return Vl.OUT_OF_RANGE;case $f.UNIMPLEMENTED:return Vl.UNIMPLEMENTED;case $f.DATA_LOSS:return Vl.DATA_LOSS;default:return Fl()}}(Yf=$f||($f={}))[Yf.OK=0]="OK",Yf[Yf.CANCELLED=1]="CANCELLED",Yf[Yf.UNKNOWN=2]="UNKNOWN",Yf[Yf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yf[Yf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yf[Yf.NOT_FOUND=5]="NOT_FOUND",Yf[Yf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yf[Yf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yf[Yf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yf[Yf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yf[Yf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yf[Yf.ABORTED=10]="ABORTED",Yf[Yf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yf[Yf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yf[Yf.INTERNAL=13]="INTERNAL",Yf[Yf.UNAVAILABLE=14]="UNAVAILABLE",Yf[Yf.DATA_LOSS=15]="DATA_LOSS";let Zf=null;function ep(){return new TextEncoder}const tp=new Tl([4294967295,4294967295],0);function np(e){const t=ep().encode(e),n=new kl;return n.update(t),new Uint8Array(n.digest())}function rp(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Tl([n,r],0),new Tl([i,s],0)]}class ip{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new sp("Invalid padding: ".concat(t));if(n<0)throw new sp("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new sp("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new sp("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Tl.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Tl.fromNumber(n)));return 1===r.compare(tp)&&(r=new Tl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=np(e),[n,r]=rp(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ip(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=np(e),[n,r]=rp(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class sp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class op{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ap.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new op(ru.min(),r,new mh(Zl),ef(),uf())}}class ap{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ap(n,t,uf(),uf(),uf())}}class cp{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class lp{constructor(e,t){this.targetId=e,this.fe=t}}class up{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sh.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class hp{constructor(){this.ge=0,this.pe=pp(),this.ye=Sh.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=uf(),t=uf(),n=uf();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Fl()}})),new ap(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=pp()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,jl(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class dp{constructor(e){this.Le=e,this.ke=new Map,this.qe=ef(),this.Qe=fp(),this.Ke=new mh(Zl)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Fl()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Rd(i))if(0===n){const e=new cu(i.path);this.We(t,e,nd.newNoDocument(e,ru.min()))}else jl(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Zf||Zf.tt(function(e,t,n,r,i){var s,o,a,c,l,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(c=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==c?c:0,padding:null!==(u=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Th(n).toUint8Array()}catch(e){if(e instanceof Eh)return Ll("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new ip(s,r,i)}catch(e){return Ll(e instanceof sp?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Rd(i.target)){const t=new cu(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,nd.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=uf();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new op(e,t,this.Ke,this.qe,n);return this.qe=ef(),this.Qe=fp(),this.Ke=new mh(Zl),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new hp,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new yh(Zl),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Ol("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new hp),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function fp(){return new mh(cu.comparator)}function pp(){return new mh(cu.comparator)}const mp={asc:"ASCENDING",desc:"DESCENDING"},gp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vp={and:"AND",or:"OR"};class yp{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wp(e,t){return e.useProto3Json||Du(t)?t:{value:t}}function bp(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function _p(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ep(e,t){return bp(e,t.toTimestamp())}function Sp(e){return jl(!!e),ru.fromTimestamp(function(e){const t=Ih(e);return new nu(t.seconds,t.nanos)}(e))}function xp(e,t){return Ip(e,t).canonicalString()}function Ip(e,t){const n=function(e){return new su(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function kp(e){const t=su.fromString(e);return jl(Qp(t)),t}function Tp(e,t){return xp(e.databaseId,t.path)}function Cp(e,t){const n=kp(t);if(n.get(1)!==e.databaseId.projectId)throw new Bl(Vl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Bl(Vl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new cu(Pp(n))}function Np(e,t){return xp(e.databaseId,t)}function Ap(e){const t=kp(e);return 4===t.length?su.emptyPath():Pp(t)}function Rp(e){return new su(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Pp(e){return jl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Op(e,t,n){return{name:Tp(e,t),fields:n.value.mapValue.fields}}function Dp(e,t,n){const r=Cp(e,t.name),i=Sp(t.updateTime),s=t.createTime?Sp(t.createTime):ru.min(),o=new ed({mapValue:{fields:t.fields}}),a=nd.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Lp(e,t){let n;if(t instanceof jf)n={update:Op(e,t.key,t.value)};else if(t instanceof qf)n={delete:Tp(e,t.key)};else if(t instanceof Uf)n={update:Op(e,t.key,t.data),updateMask:Gp(t.fieldMask)};else{if(!(t instanceof Wf))return Fl();n={verify:Tp(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof bf)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof _f)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Sf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof If)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Fl()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ep(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Fl()}(e,t.precondition)),n}function Mp(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Af.updateTime(Sp(e.updateTime)):void 0!==e.exists?Af.exists(e.exists):Af.none()}(t.currentDocument):Af.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)jl("REQUEST_TIME"===t.setToServerValue),n=new bf;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new _f(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Sf(e)}else"increment"in t?n=new If(e,t.increment):Fl();const r=au.fromServerFormat(t.fieldPath);return new Cf(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Cp(e,t.update.name),s=new ed({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new _h(t.map((e=>au.fromServerFormat(e))))}(t.updateMask);return new Uf(i,s,e,n,r)}return new jf(i,s,n,r)}if(t.delete){const r=Cp(e,t.delete);return new qf(r,n)}if(t.verify){const r=Cp(e,t.verify);return new Wf(r,n)}return Fl()}function Fp(e,t){return{documents:[Np(e,t.path)]}}function jp(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Np(e,i);const s=function(e){if(0!==e.length)return Hp(ud.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Wp(e.field),direction:Bp(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=wp(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function Up(e){let t=Ap(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){jl(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Vp(e);return t instanceof ud&&fd(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new od(Kp(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Du(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new rd(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new rd(n,t)}(n.endAt)),Md(t,i,o,s,a,"F",c,l)}function Vp(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Kp(e.unaryFilter.field);return ld.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Kp(e.unaryFilter.field);return ld.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Kp(e.unaryFilter.field);return ld.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Kp(e.unaryFilter.field);return ld.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Fl()}}(e):void 0!==e.fieldFilter?function(e){return ld.create(Kp(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fl()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ud.create(e.compositeFilter.filters.map((e=>Vp(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Fl()}}(e.compositeFilter.op))}(e):Fl()}function Bp(e){return mp[e]}function zp(e){return gp[e]}function qp(e){return vp[e]}function Wp(e){return{fieldPath:e.canonicalString()}}function Kp(e){return au.fromServerFormat(e.fieldPath)}function Hp(e){return e instanceof ld?function(e){if("=="===e.op){if(Hh(e.value))return{unaryFilter:{field:Wp(e.field),op:"IS_NAN"}};if(Kh(e.value))return{unaryFilter:{field:Wp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Hh(e.value))return{unaryFilter:{field:Wp(e.field),op:"IS_NOT_NAN"}};if(Kh(e.value))return{unaryFilter:{field:Wp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wp(e.field),op:zp(e.op),value:e.value}}}(e):e instanceof ud?function(e){const t=e.getFilters().map((e=>Hp(e)));return 1===t.length?t[0]:{compositeFilter:{op:qp(e.op),filters:t}}}(e):Fl()}function Gp(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Qp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class $p{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ru.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ru.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Sh.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new $p(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $p(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $p(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $p(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Yp{constructor(e){this.ct=e}}function Jp(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Xp(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Tp(e,t.key),fields:t.data.value.mapValue.fields,updateTime:bp(e,t.version.toTimestamp()),createTime:bp(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Zp(t.version)};else{if(!t.isUnknownDocument())return Fl();r.unknownDocument={path:n.path.toArray(),version:Zp(t.version)}}return r}function Xp(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Zp(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function em(e){const t=new nu(e.seconds,e.nanoseconds);return ru.fromTimestamp(t)}function tm(e,t){const n=(t.baseMutations||[]).map((t=>Mp(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Mp(e.ct,t))),i=nu.fromMillis(t.localWriteTimeMs);return new Kf(t.batchId,i,n,r)}function nm(e){const t=em(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?em(e.lastLimboFreeSnapshotVersion):ru.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return jl(1===e.documents.length),Bd(Fd(Ap(e.documents[0])))}(e.query):function(e){return Bd(Up(e))}(e.query),new $p(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Sh.fromBase64String(e.resumeToken))}function rm(e,t){const n=Zp(t.snapshotVersion),r=Zp(t.lastLimboFreeSnapshotVersion);let i;i=Rd(t.target)?Fp(e.ct,t.target):jp(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Nd(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function im(e){const t=Up({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Wd(t,t.limit,"L"):t}function sm(e,t){return new Gf(t.largestBatchId,Mp(e.ct,t.overlayMutation))}function om(e,t){const n=t.path.lastSegment();return[e,Fu(t.path.popLast()),n]}function am(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Zp(r.readTime),documentKey:Fu(r.documentKey.path),largestBatchId:r.largestBatchId}}class cm{getBundleMetadata(e,t){return lm(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:em(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return lm(e).put(function(e){return{bundleId:e.id,createTime:Zp(Sp(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return um(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:im(e.bundledQuery),readTime:em(e.readTime)}}(e)}))}saveNamedQuery(e,t){return um(e).put(function(e){return{name:e.name,readTime:Zp(Sp(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function lm(e){return hh(e,"bundles")}function um(e){return hh(e,"namedQueries")}class hm{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new hm(e,n)}getOverlay(e,t){return dm(e).get(om(this.userId,t)).next((e=>e?sm(this.serializer,e):null))}getOverlays(e,t){const n=sf();return _u.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Gf(t,i);r.push(this.ht(e,s))})),_u.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Fu(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(dm(e).H("collectionPathOverlayIndex",r))})),_u.waitFor(i)}getOverlaysForCollection(e,t,n){const r=sf(),i=Fu(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return dm(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=sm(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=sf();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return dm(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=sm(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return dm(e).put(function(e,t,n){const[r,i,s]=om(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Lp(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function dm(e){return hh(e,"documentOverlays")}class fm{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(kh(e.integerValue));else if("doubleValue"in e){const n=kh(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Lu(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Th(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?$h(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Fl()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),cu.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function pm(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function mm(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=pm(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}fm.bt=new fm;class gm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Bt(e){const t=this.Lt(e),n=mm(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Lt(e),n=mm(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class vm{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class ym{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class wm{constructor(){this.Gt=new gm,this.zt=new vm(this.Gt),this.jt=new ym(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class bm{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new bm(this.indexId,this.documentKey,this.arrayValue,n)}}function _m(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Em(e.arrayValue,t.arrayValue),0!==n?n:(n=Em(e.directionalValue,t.directionalValue),0!==n?n:cu.comparator(e.documentKey,t.documentKey)))}function Em(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Sm{constructor(e){this.Yt=new yh(((e,t)=>au.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(jl(e.collectionGroup===this.collectionId),this.en)return!1;const t=uu(e);if(void 0!==t&&!this.nn(t))return!1;const n=hu(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new yh(au.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new du(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new du(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new du(n.field,"asc"===n.dir?0:1)));return new lu(lu.UNKNOWN_ID,this.collectionId,t,fu.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function xm(e){var t,n;if(jl(e instanceof ld||e instanceof ud),e instanceof ld){if(e instanceof xd){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>ld.create(e.field,"==",t))))||[];return ud.create(r,"or")}return e}const r=e.filters.map((e=>xm(e)));return ud.create(r,e.op)}function Im(e){if(0===e.getFilters().length)return[];const t=Nm(xm(e));return jl(Cm(t)),km(t)||Tm(t)?[t]:t.getFilters()}function km(e){return e instanceof ld}function Tm(e){return e instanceof ud&&fd(e)}function Cm(e){return km(e)||Tm(e)||function(e){if(e instanceof ud&&dd(e)){for(const t of e.getFilters())if(!km(t)&&!Tm(t))return!1;return!0}return!1}(e)}function Nm(e){if(jl(e instanceof ld||e instanceof ud),e instanceof ld)return e;if(1===e.filters.length)return Nm(e.filters[0]);const t=e.filters.map((e=>Nm(e)));let n=ud.create(t,e.op);return n=Pm(n),Cm(n)?n:(jl(n instanceof ud),jl(hd(n)),jl(n.filters.length>1),n.filters.reduce(((e,t)=>Am(e,t))))}function Am(e,t){let n;return jl(e instanceof ld||e instanceof ud),jl(t instanceof ld||t instanceof ud),n=e instanceof ld?t instanceof ld?function(e,t){return ud.create([e,t],"and")}(e,t):Rm(e,t):t instanceof ld?Rm(t,e):function(e,t){if(jl(e.filters.length>0&&t.filters.length>0),hd(e)&&hd(t))return vd(e,t.getFilters());const n=dd(e)?e:t,r=dd(e)?t:e,i=n.filters.map((e=>Am(e,r)));return ud.create(i,"or")}(e,t),Pm(n)}function Rm(e,t){if(hd(t))return vd(t,e.getFilters());{const n=t.filters.map((t=>Am(e,t)));return ud.create(n,"or")}}function Pm(e){if(jl(e instanceof ld||e instanceof ud),e instanceof ld)return e;const t=e.getFilters();if(1===t.length)return Pm(t[0]);if(pd(e))return e;const n=t.map((e=>Pm(e))),r=[];return n.forEach((t=>{t instanceof ld?r.push(t):t instanceof ud&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:ud.create(r,e.op)}class Om{constructor(){this._n=new Dm}addToCollectionParentIndex(e,t){return this._n.add(t),_u.resolve()}getCollectionParents(e,t){return _u.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return _u.resolve()}deleteFieldIndex(e,t){return _u.resolve()}deleteAllFieldIndexes(e){return _u.resolve()}createTargetIndexes(e,t){return _u.resolve()}getDocumentsMatchingTarget(e,t){return _u.resolve(null)}getIndexType(e,t){return _u.resolve(0)}getFieldIndexes(e,t){return _u.resolve([])}getNextCollectionGroupToUpdate(e){return _u.resolve(null)}getMinOffset(e,t){return _u.resolve(gu.min())}getMinOffsetFromCollectionGroup(e,t){return _u.resolve(gu.min())}updateCollectionGroup(e,t,n){return _u.resolve()}updateIndexEntries(e,t){return _u.resolve()}}class Dm{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new yh(su.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new yh(su.comparator)).toArray()}}const Lm=new Uint8Array(0);class Mm{constructor(e,t){this.databaseId=t,this.an=new Dm,this.un=new Xd((e=>Nd(e)),((e,t)=>Ad(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Fu(r)};return Fm(e).put(i)}return _u.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[tu(t),""],!1,!0);return Fm(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Vu(r.parent))}return n}))}addFieldIndex(e,t){const n=Um(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Vm(e);return i.next((e=>{n.put(am(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Um(e),r=Vm(e),i=jm(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Um(e),n=jm(e),r=Vm(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return _u.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Sm(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=jm(e);let r=!0;const i=new Map;return _u.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=uf();const r=[];return _u.forEach(i,((i,s)=>{Ol("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Nd(t)));const o=function(e,t){const n=uu(t);if(void 0===n)return null;for(const r of Pd(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of hu(t))for(const t of Pd(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of hu(t)){const t=0===i.kind?Od(e,i.fieldPath,e.startAt):Dd(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new rd(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of hu(t)){const t=0===i.kind?Dd(e,i.fieldPath,e.endAt):Od(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new rd(n,r)}(s,i),u=this.hn(i,s,c),h=this.hn(i,s,l),d=this.Pn(i,s,a),f=this.In(i.indexId,o,u,c.inclusive,h,l.inclusive,d);return _u.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=cu.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return _u.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Im(ud.create(e.filters,"and")).map((t=>Cd(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/c]):Lm,h=this.En(e,a,n[u%c],r),d=this.dn(e,a,i[u%c],s),f=o.map((t=>this.En(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}En(e,t,n,r){const i=new bm(e,cu.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new bm(e,cu.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new Sm(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return _u.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new yh(au.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new wm;for(const r of hu(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);fm.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new wm;return fm.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new wm;return fm.bt.Pt(zh(this.databaseId,t),n.Ht(function(e){const t=hu(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new wm);let i=0;for(const s of hu(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&Wh(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);fm.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new wm;n.seed(e.Wt()),fm.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof ld&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Um(e),r=Vm(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return _u.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new fu(t.sequenceNumber,new gu(em(t.readTime),new cu(Vu(t.documentKey)),t.largestBatchId)):fu.empty(),r=e.fields.map((e=>{let[t,n]=e;return new du(au.fromServerFormat(t),n)}));return new lu(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Zl(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Um(e),i=Vm(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>_u.forEach(t,(t=>i.put(am(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return _u.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?_u.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),_u.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?_u.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return jm(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return jm(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=jm(e);let i=new yh(_m);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new bm(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new yh(_m);const r=this.An(t,e);if(null==r)return n;const i=uu(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Wh(s))for(const i of s.arrayValue.values||[])n=n.add(new bm(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new bm(t.indexId,e.key,Lm,r));return n}wn(e,t,n,r,i){Ol("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=bh(s),c=bh(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=bh(o)):t?(i(a),a=bh(s)):(a=bh(s),c=bh(o))}}(r,i,_m,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),_u.waitFor(s)}gn(e){let t=1;return Vm(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>_m(e,t))).filter(((e,t,n)=>!t||0!==_m(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=_m(s,e),i=_m(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Lm,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Lm,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return _m(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Bm)}getMinOffset(e,t){return _u.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||Fl())))).next(Bm)}}function Fm(e){return hh(e,"collectionParents")}function jm(e){return hh(e,"indexEntries")}function Um(e){return hh(e,"indexConfiguration")}function Vm(e){return hh(e,"indexState")}function Bm(e){jl(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;vu(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new gu(t.readTime,t.documentKey,n)}const zm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qm{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new qm(e,qm.DEFAULT_COLLECTION_PERCENTILE,qm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Wm(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(c.next((()=>{jl(1===a)})));const l=[];for(const u of n.mutations){const e=qu(t,u.key.path,n.batchId);s.push(i.delete(e)),l.push(u.key)}return _u.waitFor(s).next((()=>l))}function Km(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Fl();t=e.noDocument}return JSON.stringify(t).length}qm.DEFAULT_COLLECTION_PERCENTILE=10,qm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qm.DEFAULT=new qm(41943040,qm.DEFAULT_COLLECTION_PERCENTILE,qm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qm.DISABLED=new qm(-1,0,0);class Hm{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){jl(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Hm(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qm(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=$m(e),s=Qm(e);return s.add({}).next((o=>{jl("number"==typeof o);const a=new Kf(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>Lp(e.ct,t))),i=n.mutations.map((t=>Lp(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let u=new yh(((e,t)=>Zl(e.canonicalString(),t.canonicalString())));for(const e of r){const t=qu(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(s.put(c)),l.push(i.put(t,Wu))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),_u.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return Qm(e).get(t).next((e=>e?(jl(e.userId===this.userId),tm(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?_u.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Qm(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(jl(t.batchId>=n),i=tm(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Qm(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qm(e).W("userMutationsIndex",t).next((e=>e.map((e=>tm(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=zu(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return $m(e).Y({range:r},((n,r,s)=>{const[o,a,c]=n,l=Vu(a);if(o===this.userId&&t.path.isEqual(l))return Qm(e).get(c).next((e=>{if(!e)throw Fl();jl(e.userId===this.userId),i.push(tm(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new yh(Zl);const r=[];return t.forEach((t=>{const i=zu(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=$m(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,c=Vu(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),_u.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=zu(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new yh(Zl);return $m(e).Y({range:s},((e,t,i)=>{const[s,a,c]=e,l=Vu(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Qm(e).get(t).next((e=>{if(null===e)throw Fl();jl(e.userId===this.userId),n.push(tm(this.serializer,e))})))})),_u.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Wm(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),_u.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return _u.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return $m(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Vu(e[1]);r.push(t)}else n.done()})).next((()=>{jl(0===r.length)}))}))}containsKey(e,t){return Gm(e,this.userId,t)}xn(e){return Ym(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Gm(e,t,n){const r=zu(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return $m(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Qm(e){return hh(e,"mutations")}function $m(e){return hh(e,"documentMutations")}function Ym(e){return hh(e,"mutationQueues")}class Jm{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Jm(0)}static Bn(){return new Jm(-1)}}class Xm{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new Jm(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>ru.fromTimestamp(new nu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Zm(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(jl(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Zm(e).Y(((s,o)=>{const a=nm(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>_u.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Zm(e).Y(((e,n)=>{const r=nm(n);t(r)}))}Ln(e){return eg(e).get("targetGlobalKey").next((e=>(jl(null!==e),e)))}kn(e,t){return eg(e).put("targetGlobalKey",t)}qn(e,t){return Zm(e).put(rm(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Nd(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Zm(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=nm(n);Ad(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=tg(e);return t.forEach((t=>{const s=Fu(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),_u.waitFor(r)}removeMatchingKeys(e,t,n){const r=tg(e);return _u.forEach(t,(t=>{const i=Fu(t.path);return _u.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=tg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=tg(e);let i=uf();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Vu(e[1]),s=new cu(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Fu(t.path),r=IDBKeyRange.bound([n],[tu(n)],!1,!0);let i=0;return tg(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return Zm(e).get(t).next((e=>e?nm(e):null))}}function Zm(e){return hh(e,"targets")}function eg(e){return hh(e,"targetGlobal")}function tg(e){return hh(e,"targetDocuments")}function ng(e,t){let[n,r]=e,[i,s]=t;const o=Zl(n,i);return 0===o?Zl(r,s):o}class rg{constructor(e){this.Kn=e,this.buffer=new yh(ng),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ng(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ig{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Ol("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ku(e)?Ol("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await bu(e)}await this.zn(3e5)}))}}class sg{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return _u.resolve(Ou._e);const n=new rg(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ol("LruGarbageCollector","Garbage collection skipped; disabled"),_u.resolve(zm)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ol("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),zm):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Ol("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Pl()<=Xr.DEBUG&&Ol("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),_u.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function og(e,t){return new sg(e,t)}class ag{constructor(e,t){this.db=e,this.garbageCollector=og(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return cg(e,n)}removeReference(e,t,n){return cg(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return cg(e,t)}er(e,t){return function(e,t){let n=!1;return Ym(e).Z((r=>Gm(e,r,t).next((e=>(e&&(n=!0),_u.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,ru.min()),tg(e).delete(function(e){return[0,Fu(e.path)]}(s)))))}));r.push(t)}})).next((()=>_u.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return cg(e,t)}Xn(e,t){const n=tg(e);let r,i=Ou._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:c}=n;0===s?(i!==Ou._e&&t(new cu(Vu(r)),i),i=c,r=a):i=Ou._e})).next((()=>{i!==Ou._e&&t(new cu(Vu(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cg(e,t){return tg(e).put(function(e,t){return{targetId:0,path:Fu(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class lg{constructor(){this.changes=new Xd((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nd.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?_u.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ug{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return pg(e).put(n)}removeEntry(e,t,n){return pg(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Xp(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=nd.newInvalidDocument(t);return pg(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(mg(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:nd.newInvalidDocument(t)};return pg(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(mg(t))},((e,r)=>{n={document:this.nr(t,r),size:Km(r)}})).next((()=>n))}getEntries(e,t){let n=ef();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=ef(),r=new mh(cu.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,Km(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return _u.resolve();let r=new yh(vg);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(mg(r.first()),mg(r.last())),s=r.getIterator();let o=s.getNext();return pg(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=cu.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&vg(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(mg(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Xp(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pg(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=ef();for(const i of e){const e=this.nr(cu.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Qd(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=ef();const s=gg(t,n),o=gg(t,gu.max());return pg(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(cu.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new dg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return fg(e).get("remoteDocumentGlobalKey").next((e=>(jl(!!e),e)))}tr(e,t){return fg(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Dp(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=cu.fromSegments(t.noDocument.path),r=em(t.noDocument.readTime);n=nd.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Fl();{const e=cu.fromSegments(t.unknownDocument.path),r=em(t.unknownDocument.version);n=nd.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new nu(e[0],e[1]);return ru.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(ru.min()))return e}return nd.newInvalidDocument(e)}}function hg(e){return new ug(e)}class dg extends lg{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Xd((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new yh(((e,t)=>Zl(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Jp(this.ar.serializer,s);r=r.add(i.path.popLast());const c=Km(a);n+=c-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Jp(this.ar.serializer,s.convertToNoDocument(ru.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),_u.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function fg(e){return hh(e,"remoteDocumentGlobal")}function pg(e){return hh(e,"remoteDocumentsV14")}function mg(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function gg(e,t){const n=t.documentKey.path.toArray();return[e,Xp(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function vg(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Zl(n[s],r[s]),i)return i;return i=Zl(n.length,r.length),i||(i=Zl(n[n.length-2],r[r.length-2]),i||Zl(n[n.length-1],r[r.length-1]))}class yg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class wg{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Lf(n.mutation,e,_h.empty(),nu.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,uf()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uf();const r=sf();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=nf();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=sf();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,uf())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=ef();const s=af(),o=af();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Uf)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Lf(o.mutation,t,o.mutation.getFieldMask(),nu.now())):s.set(t.key,_h.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new yg(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=af();let r=new mh(((e,t)=>e-t)),i=uf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||_h.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||uf()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=of();c.forEach((e=>{if(!i.has(e)){const r=Of(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return _u.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return cu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ud(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):_u.resolve(sf());let o=-1,a=i;return s.next((t=>_u.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?_u.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,uf()))).next((e=>({batchId:o,changes:rf(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new cu(t)).next((e=>{let t=nf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=nf();return this.indexManager.getCollectionParents(e,i).next((o=>_u.forEach(o,(o=>{const a=function(e,t){return new Ld(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,nd.newInvalidDocument(r)))}));let n=nf();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Lf(s.mutation,r,_h.empty(),nu.now()),Qd(t,r)&&(n=n.insert(e,r))})),n}))}}class bg{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return _u.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Sp(e.createTime)}}(t)),_u.resolve()}getNamedQuery(e,t){return _u.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:im(e.bundledQuery),readTime:Sp(e.readTime)}}(t)),_u.resolve()}}class _g{constructor(){this.overlays=new mh(cu.comparator),this.hr=new Map}getOverlay(e,t){return _u.resolve(this.overlays.get(t))}getOverlays(e,t){const n=sf();return _u.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),_u.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),_u.resolve()}getOverlaysForCollection(e,t,n){const r=sf(),i=t.length+1,s=new cu(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return _u.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new mh(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=sf(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=sf(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return _u.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Gf(t,n));let i=this.hr.get(t);void 0===i&&(i=uf(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class Eg{constructor(){this.Pr=new yh(Sg.Ir),this.Tr=new yh(Sg.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new Sg(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Sg(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new cu(new su([])),n=new Sg(t,e),r=new Sg(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new cu(new su([])),n=new Sg(t,e),r=new Sg(t,e+1);let i=uf();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Sg(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Sg{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return cu.comparator(e.key,t.key)||Zl(e.pr,t.pr)}static Er(e,t){return Zl(e.pr,t.pr)||cu.comparator(e.key,t.key)}}class xg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new yh(Sg.Ir)}checkEmpty(e){return _u.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Kf(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new Sg(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return _u.resolve(s)}lookupMutationBatch(e,t){return _u.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return _u.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return _u.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return _u.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Sg(t,0),r=new Sg(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),_u.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new yh(Zl);return t.forEach((e=>{const t=new Sg(e,0),r=new Sg(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),_u.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;cu.isDocumentKey(i)||(i=i.child(""));const s=new Sg(new cu(i),0);let o=new yh(Zl);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),_u.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){jl(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return _u.forEach(t.mutations,(r=>{const i=new Sg(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new Sg(t,0),r=this.wr.firstAfterOrEqual(n);return _u.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,_u.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ig{constructor(e){this.vr=e,this.docs=new mh(cu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return _u.resolve(n?n.document.mutableCopy():nd.newInvalidDocument(t))}getEntries(e,t){let n=ef();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():nd.newInvalidDocument(e))})),_u.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ef();const s=t.path,o=new cu(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||vu(mu(o),n)<=0||(r.has(o.key)||Qd(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return _u.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Fl()}Fr(e,t){return _u.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new kg(this)}getSize(e){return _u.resolve(this.size)}}class kg extends lg{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),_u.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Tg{constructor(e){this.persistence=e,this.Mr=new Xd((e=>Nd(e)),Ad),this.lastRemoteSnapshotVersion=ru.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Eg,this.targetCount=0,this.Br=Jm.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),_u.resolve()}getLastRemoteSnapshotVersion(e){return _u.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _u.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),_u.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),_u.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Jm(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,_u.resolve()}updateTargetData(e,t){return this.qn(t),_u.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,_u.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),_u.waitFor(i).next((()=>r))}getTargetCount(e){return _u.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return _u.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),_u.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),_u.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),_u.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return _u.resolve(n)}containsKey(e,t){return _u.resolve(this.Nr.containsKey(t))}}class Cg{constructor(e,t){this.Lr={},this.overlays={},this.kr=new Ou(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Tg(this),this.indexManager=new Om,this.remoteDocumentCache=function(e){return new Ig(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Yp(t),this.$r=new bg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _g,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new xg(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Ol("MemoryPersistence","Starting transaction:",e);const r=new Ng(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return _u.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class Ng extends wu{constructor(e){super(),this.currentSequenceNumber=e}}class Ag{constructor(e){this.persistence=e,this.zr=new Eg,this.jr=null}static Hr(e){return new Ag(e)}get Jr(){if(this.jr)return this.jr;throw Fl()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),_u.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),_u.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),_u.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _u.forEach(this.Jr,(n=>{const r=cu.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,ru.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return _u.or([()=>_u.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Rg{constructor(e){this.serializer=e}N(e,t,n,r){const i=new Eu("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Bu,{unique:!0}),e.createObjectStore("documentMutations")}(e),Pg(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=_u.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Pg(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ru.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Bu,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return _u.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:nh});t.createIndex("collectionPathOverlayIndex",rh,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ih,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ku});t.createIndex("documentKeyIndex",Hu),t.createIndex("collectionGroupIndex",Gu)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Xu}).createIndex("sequenceNumberIndex",Zu,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:eh}).createIndex("documentKeyIndex",th,{unique:!1})}(e)))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=Km(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>_u.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>_u.forEach(n,(n=>{jl(n.userId===t.userId);const r=tm(this.serializer,n);return Wm(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new su(n),o=function(e){return[0,Fu(e)]}(s);r.push(t.get(o).next((n=>n?_u.resolve():(n=>t.put({targetId:0,path:Fu(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>_u.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Ju});const n=t.store("collectionParents"),r=new Dm,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Fu(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new su(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=Vu(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=nm(n),i=rm(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new cu(su.fromString(e.document.name).popFirst(5)):e.noDocument?cu.fromSegments(e.noDocument.path):e.unknownDocument?cu.fromSegments(e.unknownDocument.path):Fl()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>_u.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=hg(this.serializer),i=new Cg(Ag.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:uf();tm(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),_u.forEach(n,((e,n)=>{const s=new Nl(n),o=hm.lt(this.serializer,s),a=i.getIndexManager(s),c=Hm.lt(s,this.serializer,a,i.referenceDelegate);return new wg(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new uh(t,Ou._e),e).next()}))}))}}function Pg(e){e.createObjectStore("targetDocuments",{keyPath:$u}).createIndex("documentTargetsIndex",Yu,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Qu,{unique:!0}),e.createObjectStore("targetGlobal")}const Og="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Dg{constructor(e,t,n,r,i,s,o,a,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=c,this.ai=l,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Dg.D())throw new Bl(Vl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ag(this,r),this.Ti=t+"main",this.serializer=new Yp(a),this.Ei=new Su(this.Ti,this.ui,new Rg(this.serializer)),this.Qr=new Xm(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hg(this.serializer),this.$r=new cm,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===l&&Dl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Bl(Vl.FAILED_PRECONDITION,Og);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Ou(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Mg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(ku(e))return Ol("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ol("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Lg(e).get("owner").next((e=>_u.resolve(this.Si(e))))}bi(e){return Mg(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=hh(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return _u.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?_u.resolve(!0):Lg(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Bl(Vl.FAILED_PRECONDITION,Og);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mg(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Ol("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new uh(e,Ou._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Bi()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>Mg(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return Hm.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Mm(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return hm.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){Ol("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?lh:14===e?ch:13===e?ah:12===e?oh:11===e?sh:void Fl()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new uh(r,this.kr?this.kr.next():Ou._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw Dl("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new Bl(Vl.FAILED_PRECONDITION,yu);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return Lg(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Bl(Vl.FAILED_PRECONDITION,Og)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lg(e).put("owner",t)}static D(){return Su.D()}yi(e){const t=Lg(e);return t.get("owner").next((e=>this.Si(e)?(Ol("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):_u.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Dl("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;Rr()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Ol("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Dl("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Dl("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Lg(e){return hh(e,"owner")}function Mg(e){return hh(e,"clientMetadata")}function Fg(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class jg{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=uf(),r=uf();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new jg(e,t.fromCache,n,r)}}class Ug{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Vg{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Rr()?8:Su.v(kr())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Ug;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Pl()<=Xr.DEBUG&&Ol("QueryEngine","SDK will not create cache indexes for query:",Gd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),_u.resolve()):(Pl()<=Xr.DEBUG&&Ol("QueryEngine","Query:",Gd(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Pl()<=Xr.DEBUG&&Ol("QueryEngine","The SDK decides to create cache indexes for query:",Gd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bd(t))):_u.resolve())}ji(e,t){if(jd(t))return _u.resolve(null);let n=Bd(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Wd(t,null,"F"),n=Bd(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=uf(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,Wd(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return jd(t)||r.isEqual(ru.min())?_u.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?_u.resolve(null):(Pl()<=Xr.DEBUG&&Ol("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Gd(t)),this.es(e,s,t,pu(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new yh(Yd(e));return t.forEach(((t,r)=>{Qd(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Pl()<=Xr.DEBUG&&Ol("QueryEngine","Using full collection scan to execute query:",Gd(t)),this.zi.getDocumentsMatchingQuery(e,t,gu.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Bg{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new mh(Zl),this.rs=new Xd((e=>Nd(e)),Ad),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wg(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function zg(e,t,n,r){return new Bg(e,t,n,r)}async function qg(e,t){const n=Ul(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=uf();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Wg(e){const t=Ul(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Kg(e,t,n){let r=uf(),i=uf();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=ef();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ru.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Ol("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function Hg(e,t){const n=Ul(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Gg(e,t){const n=Ul(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,_u.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new $p(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Qg(e,t,n){const r=Ul(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!ku(e))throw e;Ol("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function $g(e,t,n){const r=Ul(e);let i=ru.min(),s=uf();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Ul(e),i=r.rs.get(n);return void 0!==i?_u.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Bd(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:ru.min(),n?s:uf()))).next((e=>(Xg(r,$d(t),e),{documents:e,hs:s})))))}function Yg(e,t){const n=Ul(e),r=Ul(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function Jg(e,t){const n=Ul(e),r=n.ss.get(t)||ru.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,pu(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Xg(n,t,e),e)))}function Xg(e,t,n){let r=e.ss.get(t)||ru.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Zg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uf();const r=await Gg(e,Bd(im(t.bundledQuery))),i=Ul(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Sp(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(Sh.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function ev(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function tv(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function nv(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class rv{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Bl(r.error.code,r.error.message))),s?new rv(e,t,r.state,i):(Dl("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class iv{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Bl(n.error.code,n.error.message))),i?new iv(e,n.state,r):(Dl("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=df();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Mu(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new sv(e,i):(Dl("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class ov{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ov(t.clientId,t.onlineState):(Dl("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class av{constructor(){this.activeTargetIds=df()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cv{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new mh(Zl),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=ev(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new av),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(ev(this.persistenceKey,n));if(e){const t=sv.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,n){this.Bs(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(nv(this.persistenceKey,e));if(n){const r=iv.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(nv(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ol("SharedClientState","READ",e,t),t}setItem(e,t){Ol("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ol("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(Ol("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Dl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Ou._e;if(null!=e)try{const n=JSON.parse(e);jl("number"==typeof n),t=n}catch(e){Dl("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Ou._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,n){const r=new rv(this.currentUser,e,t,n),i=tv(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Ls(e){const t=tv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=nv(this.persistenceKey,e),i=new iv(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return sv.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return rv.Es(new Nl(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return iv.Es(r,t)}xs(e){return ov.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Ol("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=df();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class lv{constructor(){this.no=new av,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new av,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class uv{io(e){}shutdown(){}}class hv{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ol("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ol("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let dv=null;function fv(){return null===dv?dv=268435456+Math.round(2147483648*Math.random()):dv++,"0x"+dv.toString(16)}const pv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mv{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const gv="WebChannelConnection";class vv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=fv(),o=this.bo(e,t.toUriEncodedString());Ol("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(Ol("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Ll("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Al,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=pv[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=fv();return new Promise(((s,o)=>{const a=new Il;a.setWithCredentials(!0),a.listenOnce(_l.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case bl.NO_ERROR:const t=a.getResponseJson();Ol(gv,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case bl.TIMEOUT:Ol(gv,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Bl(Vl.DEADLINE_EXCEEDED,"Request time out"));break;case bl.HTTP_ERROR:const n=a.getStatus();if(Ol(gv,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Vl).indexOf(t)>=0?t:Vl.UNKNOWN}(t.status);o(new Bl(e,t.message))}else o(new Bl(Vl.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Bl(Vl.UNAVAILABLE,"Connection failed."));break;default:Fl()}}finally{Ol(gv,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);Ol(gv,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)}))}Fo(e,t,n){const r=fv(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=yl(),o=wl(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");Ol(gv,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new mv({lo:t=>{d?Ol(gv,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Ol(gv,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Ol(gv,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,xl.EventType.OPEN,(()=>{d||Ol(gv,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,xl.EventType.CLOSE,(()=>{d||(d=!0,Ol(gv,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(u,xl.EventType.ERROR,(t=>{d||(d=!0,Ll(gv,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new Bl(Vl.UNAVAILABLE,"The operation could not be completed")))})),p(u,xl.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];jl(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ol(gv,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=$f[e];if(void 0!==t)return Xf(t)}(t),i=o.message;void 0===n&&(n=Vl.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new Bl(n,i)),u.close()}else Ol(gv,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,El.STAT_EVENT,(t=>{t.stat===Sl.PROXY?Ol(gv,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Sl.NOPROXY&&Ol(gv,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function yv(){return"undefined"!=typeof window?window:null}function wv(){return"undefined"!=typeof document?document:null}function bv(e){return new yp(e,!0)}class _v{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&Ol("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class Ev{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new _v(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Vl.RESOURCE_EXHAUSTED?(Dl(t.toString()),Dl("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Vl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new Bl(Vl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Ol("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Ol("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Sv extends Ev{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Fl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(jl(void 0===t||"string"==typeof t),Sh.fromBase64String(t||"")):(jl(void 0===t||t instanceof Uint8Array),Sh.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Vl.UNKNOWN:Xf(e.code);return new Bl(t,e.message||"")}(o);n=new up(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Cp(e,r.document.name),s=Sp(r.document.updateTime),o=r.document.createTime?Sp(r.document.createTime):ru.min(),a=new ed({mapValue:{fields:r.document.fields}}),c=nd.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new cp(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Cp(e,r.document),s=r.readTime?Sp(r.readTime):ru.min(),o=nd.newNoDocument(i,s),a=r.removedTargetIds||[];n=new cp([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Cp(e,r.document),s=r.removedTargetIds||[];n=new cp([],s,i,null)}else{if(!("filter"in t))return Fl();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Qf(r,i),o=e.targetId;n=new lp(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ru.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ru.min():t.readTime?Sp(t.readTime):ru.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=Rp(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Rd(r)?{documents:Fp(e,r)}:{query:jp(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=_p(e,t.resumeToken);const r=wp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ru.min())>0){n.readTime=bp(e,t.snapshotVersion.toTimestamp());const r=wp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=Rp(this.serializer),t.removeTarget=e,this.t_(t)}}class xv extends Ev{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(jl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(jl(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Sp(e.updateTime):Sp(t);return n.isEqual(ru.min())&&(n=Sp(t)),new Nf(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Sp(e.commitTime);return this.listener.T_(n,t)}return jl(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Rp(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Lp(this.serializer,e)))};this.t_(t)}}class Iv extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new Bl(Vl.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,Ip(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Vl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Bl(Vl.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,Ip(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Vl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Bl(Vl.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class kv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Dl(t),this.g_=!1):Ol("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Tv{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{Mv(this)&&(Ol("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ul(e);t.v_.add(4),await Nv(t),t.x_.set("Unknown"),t.v_.delete(4),await Cv(t)}(this))}))})),this.x_=new kv(n,r)}}async function Cv(e){if(Mv(e))for(const t of e.F_)await t(!0)}async function Nv(e){for(const t of e.F_)await t(!1)}function Av(e,t){const n=Ul(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Lv(n)?Dv(n):ey(n).Jo()&&Pv(n,t))}function Rv(e,t){const n=Ul(e),r=ey(n);n.C_.delete(t),r.Jo()&&Ov(n,t),0===n.C_.size&&(r.Jo()?r.Xo():Mv(n)&&n.x_.set("Unknown"))}function Pv(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ru.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ey(e).c_(t)}function Ov(e,t){e.O_.Oe(t),ey(e).l_(t)}function Dv(e){e.O_=new dp({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),ey(e).start(),e.x_.p_()}function Lv(e){return Mv(e)&&!ey(e).Ho()&&e.C_.size>0}function Mv(e){return 0===Ul(e).v_.size}function Fv(e){e.O_=void 0}async function jv(e){e.C_.forEach(((t,n)=>{Pv(e,t)}))}async function Uv(e,t){Fv(e),Lv(e)?(e.x_.S_(t),Dv(e)):e.x_.set("Unknown")}async function Vv(e,t,n){if(e.x_.set("Online"),t instanceof up&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){Ol("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Bv(e,n)}else if(t instanceof cp?e.O_.$e(t):t instanceof lp?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(ru.min()))try{const t=await Wg(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(Sh.EMPTY_BYTE_STRING,r.snapshotVersion)),Ov(e,t);const i=new $p(r.target,t,n,r.sequenceNumber);Pv(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ol("RemoteStore","Failed to raise snapshot:",t),await Bv(e,t)}}async function Bv(e,t,n){if(!ku(t))throw t;e.v_.add(1),await Nv(e),e.x_.set("Offline"),n||(n=()=>Wg(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ol("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Cv(e)}))}function zv(e,t){return t().catch((n=>Bv(e,n,t)))}async function qv(e){const t=Ul(e),n=ty(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Wv(t);)try{const e=await Hg(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,Kv(t,e)}catch(e){await Bv(t,e)}Hv(t)&&Gv(t)}function Wv(e){return Mv(e)&&e.D_.length<10}function Kv(e,t){e.D_.push(t);const n=ty(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Hv(e){return Mv(e)&&!ty(e).Ho()&&e.D_.length>0}function Gv(e){ty(e).start()}async function Qv(e){ty(e).d_()}async function $v(e){const t=ty(e);for(const n of e.D_)t.I_(n.mutations)}async function Yv(e,t,n){const r=e.D_.shift(),i=Hf.from(r,t,n);await zv(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await qv(e)}async function Jv(e,t){t&&ty(e).P_&&await async function(e,t){if(function(e){return Jf(e)&&e!==Vl.ABORTED}(t.code)){const n=e.D_.shift();ty(e).Zo(),await zv(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await qv(e)}}(e,t),Hv(e)&&Gv(e)}async function Xv(e,t){const n=Ul(e);n.asyncQueue.verifyOperationInProgress(),Ol("RemoteStore","RemoteStore received new credentials");const r=Mv(n);n.v_.add(3),await Nv(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Cv(n)}async function Zv(e,t){const n=Ul(e);t?(n.v_.delete(2),await Cv(n)):t||(n.v_.add(2),await Nv(n),n.x_.set("Unknown"))}function ey(e){return e.N_||(e.N_=function(e,t,n){const r=Ul(e);return r.R_(),new Sv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:jv.bind(null,e),To:Uv.bind(null,e),u_:Vv.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),Lv(e)?Dv(e):e.x_.set("Unknown")):(await e.N_.stop(),Fv(e))}))),e.N_}function ty(e){return e.B_||(e.B_=function(e,t,n){const r=Ul(e);return r.R_(),new xv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Qv.bind(null,e),To:Jv.bind(null,e),E_:$v.bind(null,e),T_:Yv.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await qv(e)):(await e.B_.stop(),e.D_.length>0&&(Ol("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.B_}class ny{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new zl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new ny(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Bl(Vl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ry(e,t){if(Dl("AsyncQueue","".concat(t,": ").concat(e)),ku(e))return new Bl(Vl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class iy{constructor(e){this.comparator=e?(t,n)=>e(t,n)||cu.comparator(t.key,n.key):(e,t)=>cu.comparator(e.key,t.key),this.keyedMap=nf(),this.sortedSet=new mh(this.comparator)}static emptySet(e){return new iy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof iy))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new iy;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class sy{constructor(){this.L_=new mh(cu.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):Fl():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class oy{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new oy(e,t,iy.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class ay{constructor(){this.q_=void 0,this.Q_=[]}}class cy{constructor(){this.queries=new Xd((e=>Hd(e)),Kd),this.onlineState="Unknown",this.K_=new Set}}async function ly(e,t){const n=Ul(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new ay),i)try{s.q_=await n.onListen(r)}catch(e){const n=ry(e,"Initialization of query '".concat(Gd(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.Q_.push(t),t.U_(n.onlineState),s.q_&&t.W_(s.q_)&&fy(n)}async function uy(e,t){const n=Ul(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function hy(e,t){const n=Ul(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.W_(i)&&(r=!0);t.q_=i}}r&&fy(n)}function dy(e,t,n){const r=Ul(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function fy(e){e.K_.forEach((e=>{e.next()}))}class py{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new oy(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=oy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class my{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class gy{constructor(e){this.serializer=e}Ps(e){return Cp(this.serializer,e)}Is(e){return e.metadata.exists?Dp(this.serializer,e.document,!1):nd.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Sp(e)}}class vy{constructor(e,t,n){this.ta=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yy(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const n=su.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,n=new gy(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||uf()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Ul(e);let s=uf(),o=ef();for(const l of n){const e=t.Ps(l.metadata.name);l.document&&(s=s.add(e));const n=t.Is(l);n.setReadTime(t.Ts(l.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=await Gg(i,function(e){return Bd(Fd(su.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Kg(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.Qr.addMatchingKeys(e,s,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new gy(this.serializer),this.documents,this.ta.id),t=this.ra(this.documents);for(const n of this.queries)await Zg(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function yy(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class wy{constructor(e){this.key=e}}class by{constructor(e){this.key=e}}class _y{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=uf(),this.mutatedKeys=uf(),this.ua=Yd(e),this.ca=new iy(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new sy,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=Qd(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ia(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ua(u,a)>0||c&&this.ua(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:s,Pa:n,Xi:o,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fl()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const o=t&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,c=a!==this._a;return this._a=a,0!==s.length||c?{snapshot:new oy(this.query,e.ca,i,s,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new sy,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=uf(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new by(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new wy(n))})),t}Ra(e){this.oa=e.hs,this.aa=uf();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return oy.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Ey{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Sy{constructor(e){this.key=e,this.ma=!1}}class xy{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Xd((e=>Hd(e)),Kd),this.pa=new Map,this.ya=new Set,this.wa=new mh(cu.comparator),this.Sa=new Map,this.ba=new Eg,this.Da={},this.Ca=new Map,this.va=Jm.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function Iy(e,t){const n=Jy(e);let r,i;const s=n.ga.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const e=await Gg(n.localStore,Bd(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await ky(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&Av(n.remoteStore,e)}return i}async function ky(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await $g(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ha(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Fy(e,t.targetId,a.da),a.snapshot}(e,t,n,r);const s=await $g(e.localStore,t,!0),o=new _y(t,s.hs),a=o.ha(s.documents),c=ap.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,c);Fy(e,n,l.da);const u=new Ey(t,n,o);return e.ga.set(t,u),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),l.snapshot}async function Ty(e,t){const n=Ul(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!Kd(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Qg(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Rv(n.remoteStore,r.targetId),Ly(n,r.targetId)})).catch(bu)):(Ly(n,r.targetId),await Qg(n.localStore,r.targetId,!0))}async function Cy(e,t){const n=Ul(e);try{const e=await function(e,t){const n=Ul(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(Sh.EMPTY_BYTE_STRING,ru.min()).withLastLimboFreeSnapshotVersion(ru.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Qr.updateTargetData(e,l))}));let a=ef(),c=uf();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Kg(e,s,t.documentUpdates).next((e=>{a=e.cs,c=e.ls}))),!r.isEqual(ru.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return _u.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(jl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?jl(r.ma):e.removedDocuments.size>0&&(jl(r.ma),r.ma=!1))})),await Vy(n,e,t)}catch(e){await bu(e)}}function Ny(e,t,n){const r=Ul(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Ul(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&fy(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Ay(e,t,n){const r=Ul(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),s=i&&i.key;if(s){let e=new mh(cu.comparator);e=e.insert(s,nd.newNoDocument(s,ru.min()));const n=uf().add(s),i=new op(ru.min(),new Map,new mh(Zl),e,n);await Cy(r,i),r.wa=r.wa.remove(s),r.Sa.delete(t),Uy(r)}else await Qg(r.localStore,t,!1).then((()=>Ly(r,t,n))).catch(bu)}async function Ry(e,t){const n=Ul(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ul(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=_u.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);jl(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=uf();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Dy(n,r,null),Oy(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vy(n,e)}catch(e){await bu(e)}}async function Py(e,t,n){const r=Ul(e);try{const e=await function(e,t){const n=Ul(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(jl(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Dy(r,t,n),Oy(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Vy(r,e)}catch(n){await bu(n)}}function Oy(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function Dy(e,t,n){const r=Ul(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function Ly(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||My(e,t)}))}function My(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(Rv(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Uy(e))}function Fy(e,t,n){for(const r of n)r instanceof wy?(e.ba.addReference(r.key,t),jy(e,r)):r instanceof by?(Ol("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||My(e,r.key)):Fl()}function jy(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(Ol("SyncEngine","New document in limbo: "+n),e.ya.add(r),Uy(e))}function Uy(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new cu(su.fromString(t)),r=e.va.next();e.Sa.set(r,new Sy(n)),e.wa=e.wa.insert(n,r),Av(e.remoteStore,new $p(Bd(Fd(n.path)),r,"TargetPurposeLimboResolution",Ou._e))}}async function Vy(e,t,n){const r=Ul(e),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach(((e,a)=>{o.push(r.Ma(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=jg.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.fa.u_(i),await async function(e,t){const n=Ul(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>_u.forEach(t,(t=>_u.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>_u.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!ku(e))throw e;Ol("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function By(e,t){const n=Ul(e);if(!n.currentUser.isEqual(t)){Ol("SyncEngine","User change. New user:",t.toKey());const e=await qg(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new Bl(Vl.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Vy(n,e.us)}}function zy(e,t){const n=Ul(e),r=n.Sa.get(t);if(r&&r.ma)return uf().add(r.key);{let e=uf();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}async function qy(e,t){const n=Ul(e),r=await $g(n.localStore,t.query,!0),i=t.view.Ra(r);return n.isPrimaryClient&&Fy(n,t.targetId,i.da),i}async function Wy(e,t){const n=Ul(e);return Jg(n.localStore,t).then((e=>Vy(n,e)))}async function Ky(e,t,n,r){const i=Ul(e),s=await function(e,t){const n=Ul(e),r=Ul(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):_u.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await qv(i.remoteStore):"acknowledged"===n||"rejected"===n?(Dy(i,t,r||null),Oy(i,t),function(e,t){Ul(Ul(e).mutationQueue).Mn(t)}(i.localStore,t)):Fl(),await Vy(i,s)):Ol("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Hy(e,t,n){const r=Ul(e),i=[],s=[];for(const o of t){let e;const t=r.pa.get(o);if(t&&0!==t.length){e=await Gg(r.localStore,Bd(t[0]));for(const e of t){const t=r.ga.get(e),n=await qy(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Yg(r.localStore,o);e=await Gg(r.localStore,t),await ky(r,Gy(t),o,!1,e.resumeToken)}i.push(e)}return r.fa.u_(s),i}function Gy(e){return Md(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Qy(e){return function(e){return Ul(Ul(e).persistence).Li()}(Ul(e).localStore)}async function $y(e,t,n,r){const i=Ul(e);if(i.Fa)return void Ol("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Jg(i.localStore,$d(s[0])),r=op.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Sh.EMPTY_BYTE_STRING);await Vy(i,e,r);break}case"rejected":await Qg(i.localStore,t,!0),Ly(i,t,r);break;default:Fl()}}async function Yy(e,t,n){const r=Jy(e);if(r.Fa){for(const e of t){if(r.pa.has(e)){Ol("SyncEngine","Adding an already active target "+e);continue}const t=await Yg(r.localStore,e),n=await Gg(r.localStore,t);await ky(r,Gy(t),n.targetId,!1,n.resumeToken),Av(r.remoteStore,n)}for(const e of n)r.pa.has(e)&&await Qg(r.localStore,e,!1).then((()=>{Rv(r.remoteStore,e),Ly(r,e)})).catch(bu)}}function Jy(e){const t=Ul(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Cy.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=zy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ay.bind(null,t),t.fa.u_=hy.bind(null,t.eventManager),t.fa.xa=dy.bind(null,t.eventManager),t}function Xy(e){const t=Ul(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ry.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Py.bind(null,t),t}class Zy{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=bv(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return zg(this.persistence,new Vg,e.initialUser,this.serializer)}createPersistence(e){return new Cg(Ag.Hr,this.serializer)}createSharedClientState(e){return new lv}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ew extends Zy{constructor(e,t,n){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await Xy(this.Na.syncEngine),await qv(this.Na.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return zg(this.persistence,new Vg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new ig(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Pu(t,this.persistence);return new Ru(e.asyncQueue,n)}createPersistence(e){const t=Fg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?qm.withCacheSize(this.cacheSizeBytes):qm.DEFAULT;return new Dg(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,yv(),wv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new lv}}class tw extends ew{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Na.syncEngine;this.sharedClientState instanceof cv&&(this.sharedClientState.syncEngine={Zs:Ky.bind(null,t),Xs:$y.bind(null,t),eo:Yy.bind(null,t),Li:Qy.bind(null,t),Ys:Wy.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Ul(e);if(Jy(n),Xy(n),!0===t&&!0!==n.Fa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Hy(n,e.toArray());n.Fa=!0,await Zv(n.remoteStore,!0);for(const r of t)Av(n.remoteStore,r)}else if(!1===t&&!1!==n.Fa){const e=[];let t=Promise.resolve();n.pa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Ly(n,i),Qg(n.localStore,i,!0)))),Rv(n.remoteStore,i)})),await t,await Hy(n,e),function(e){const t=Ul(e);t.Sa.forEach(((e,n)=>{Rv(t.remoteStore,n)})),t.ba.mr(),t.Sa=new Map,t.wa=new mh(cu.comparator)}(n),n.Fa=!1,await Zv(n.remoteStore,!1)}}(this.Na.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=yv();if(!cv.D(t))throw new Bl(Vl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Fg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cv(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class nw{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ny(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=By.bind(null,this.syncEngine),await Zv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new cy}createDatastore(e){const t=bv(e.databaseInfo.databaseId),n=function(e){return new vv(e)}(e.databaseInfo);return function(e,t,n,r){return new Iv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Tv(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Ny(this.syncEngine,e,0)),hv.D()?new hv:new uv)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new xy(e,t,n,r,i,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Ul(e);Ol("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await Nv(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function rw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class iw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Dl("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class sw{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new zl,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((e=>{e&&e.ea()?this.metadata.resolve(e.X_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(e=>this.metadata.reject(e)))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(null===e)return null;const t=this.qa.decode(e),n=Number(t);isNaN(n)&&this.$a("length string (".concat(t,") is not valid number"));const r=await this.Ua(n);return new my(JSON.parse(r),e.length+n)}Wa(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(0===this.buffer.length)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const t=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}$a(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ga(){const e=await this.ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class ow{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Bl(Vl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Ul(e),r={documents:t.map((e=>Tp(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,su.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){jl(!!t.found),t.found.name,t.found.updateTime;const n=Cp(e,t.found.name),r=Sp(t.found.updateTime),i=t.found.createTime?Sp(t.found.createTime):ru.min(),s=new ed({mapValue:{fields:t.found.fields}});return nd.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){jl(!!t.missing),jl(!!t.readTime);const n=Cp(e,t.missing),r=Sp(t.readTime);return nd.newNoDocument(n,r)}(e,t):Fl()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());jl(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new qf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=cu.fromPath(t);this.mutations.push(new Wf(n,this.precondition(n)))})),await async function(e,t){const n=Ul(e),r={writes:t.map((e=>Lp(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,su.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Fl();t=ru.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Bl(Vl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ru.min())?Af.exists(!1):Af.updateTime(t):Af.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ru.min()))throw new Bl(Vl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Af.updateTime(t)}return Af.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class aw{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.za=n.maxAttempts,this.jo=new _v(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo((async()=>{const e=new ow(this.datastore),t=this.Ja(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Ya(e)}))))})).catch((e=>{this.Ya(e)}))}))}Ja(e){try{const t=this.updateFunction(e);return!Du(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ha(),Promise.resolve())))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Jf(t)}return!1}}class cw{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Nl.UNAUTHENTICATED,this.clientId=Xl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Ol("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ol("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Bl(Vl.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ry(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function lw(e,t){e.asyncQueue.verifyOperationInProgress(),Ol("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await qg(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function uw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await dw(e);Ol("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Xv(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Xv(t.remoteStore,n))),e._onlineComponents=t}function hw(e){return"FirebaseError"===e.name?e.code===Vl.FAILED_PRECONDITION||e.code===Vl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function dw(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ol("FirestoreClient","Using user provided OfflineComponentProvider");try{await lw(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!hw(n))throw n;Ll("Error using user provided cache. Falling back to memory cache: "+n),await lw(e,new Zy)}}else Ol("FirestoreClient","Using default OfflineComponentProvider"),await lw(e,new Zy);return e._offlineComponents}async function fw(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ol("FirestoreClient","Using user provided OnlineComponentProvider"),await uw(e,e._uninitializedComponentsProvider._online)):(Ol("FirestoreClient","Using default OnlineComponentProvider"),await uw(e,new nw))),e._onlineComponents}function pw(e){return dw(e).then((e=>e.persistence))}function mw(e){return dw(e).then((e=>e.localStore))}function gw(e){return fw(e).then((e=>e.remoteStore))}function vw(e){return fw(e).then((e=>e.syncEngine))}function yw(e){return fw(e).then((e=>e.datastore))}async function ww(e){const t=await fw(e),n=t.eventManager;return n.onListen=Iy.bind(null,t.syncEngine),n.onUnlisten=Ty.bind(null,t.syncEngine),n}function bw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new zl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new iw({next:s=>{t.enqueueAndForget((()=>uy(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Bl(Vl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Bl(Vl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new py(Fd(n.path),s,{includeMetadataChanges:!0,Z_:!0});return ly(e,o)}(await ww(e),e.asyncQueue,t,n,r))),r.promise}function _w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new zl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new iw({next:n=>{t.enqueueAndForget((()=>uy(e,o))),n.fromCache&&"server"===r.source?i.reject(new Bl(Vl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new py(n,s,{includeMetadataChanges:!0,Z_:!0});return ly(e,o)}(await ww(e),e.asyncQueue,t,n,r))),r.promise}function Ew(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?ep().encode(e):e,function(e,t){return new sw(e,t)}(function(e,t){if(e instanceof Uint8Array)return rw(e,t);if(e instanceof ArrayBuffer)return rw(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,bv(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Ul(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Ul(e),r=Sp(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(yy(r));const i=new vy(r,e.localStore,t.serializer);let s=await t.Oa();for(;s;){const e=await i.na(s);e&&n._updateProgress(e),s=await t.Oa()}const o=await i.complete();return await Vy(e,o.sa,void 0),await function(e,t){const n=Ul(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ia)}catch(e){return Ll("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await vw(e),i,r)}))}function Sw(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const xw=new Map;function Iw(e,t,n){if(!n)throw new Bl(Vl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function kw(e,t,n,r){if(!0===t&&!0===r)throw new Bl(Vl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Tw(e){if(!cu.isDocumentKey(e))throw new Bl(Vl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Cw(e){if(cu.isDocumentKey(e))throw new Bl(Vl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Nw(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Fl()}function Aw(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Bl(Vl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nw(e);throw new Bl(Vl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Rw(e,t){if(t<=0)throw new Bl(Vl.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Pw{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Bl(Vl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Bl(Vl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sw(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Bl(Vl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Bl(Vl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Bl(Vl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ow{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Bl(Vl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Bl(Vl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pw(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Wl;switch(e.type){case"firstParty":return new Ql(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Bl(Vl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=xw.get(e);t&&(Ol("ComponentProvider","Removing Datastore"),xw.delete(e),t.terminate())}(this),Promise.resolve()}}function Dw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Aw(e,Ow))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ll("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Nl.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[yr(JSON.stringify({alg:"none",type:"JWT"})),yr(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Bl(Vl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Nl(s)}e._authCredentials=new Kl(new ql(t,n))}}class Lw{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Lw(this.firestore,e,this._query)}}class Mw{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fw(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mw(this.firestore,e,this._key)}}class Fw extends Lw{constructor(e,t,n){super(e,t,Fd(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mw(this.firestore,null,new cu(e))}withConverter(e){return new Fw(this.firestore,e,this._path)}}function jw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Kr(e),Iw("collection","path",t),e instanceof Ow){const n=su.fromString(t,...r);return Cw(n),new Fw(e,null,n)}{if(!(e instanceof Mw||e instanceof Fw))throw new Bl(Vl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(su.fromString(t,...r));return Cw(n),new Fw(e.firestore,null,n)}}function Uw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Kr(e),1===arguments.length&&(t=Xl.newId()),Iw("doc","path",t),e instanceof Ow){const n=su.fromString(t,...r);return Tw(n),new Mw(e,null,new cu(n))}{if(!(e instanceof Mw||e instanceof Fw))throw new Bl(Vl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(su.fromString(t,...r));return Tw(n),new Mw(e.firestore,e instanceof Fw?e.converter:null,new cu(n))}}function Vw(e,t){return e=Kr(e),t=Kr(t),(e instanceof Mw||e instanceof Fw)&&(t instanceof Mw||t instanceof Fw)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Bw(e,t){return e=Kr(e),t=Kr(t),e instanceof Lw&&t instanceof Lw&&e.firestore===t.firestore&&Kd(e._query,t._query)&&e.converter===t.converter}class zw{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new _v(this,"async_queue_retry"),this._u=()=>{const e=wv();e&&Ol("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=wv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=wv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new zl;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!ku(e))throw e;Ol("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Dl("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=ny.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&Fl()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function qw(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Ww{constructor(){this._progressObserver={},this._taskCompletionResolver=new zl,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Kw extends Ow{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new zw,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Gw(this),this._firestoreClient.terminate()}}function Hw(e){return e._firestoreClient||Gw(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Gw(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Rh(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Sw(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new cw(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Qw(e,t,n){const r=new zl;return e.asyncQueue.enqueue((async()=>{try{await lw(e,n),await uw(e,t),r.resolve()}catch(e){const n=e;if(!hw(n))throw n;Ll("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function $w(e){return function(e){const t=new zl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Ul(e);Mv(n.remoteStore)||Ol("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Ul(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ca.get(e)||[];r.push(t),n.Ca.set(e,r)}catch(e){const n=ry(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await vw(e),t))),t.promise}(Hw(e=Aw(e,Kw)))}function Yw(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await pw(e),n=await gw(e);return t.setNetworkEnabled(!0),function(e){const t=Ul(e);return t.v_.delete(0),Cv(t)}(n)}))}(Hw(e=Aw(e,Kw)))}function Jw(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await pw(e),n=await gw(e);return t.setNetworkEnabled(!1),async function(e){const t=Ul(e);t.v_.add(0),await Nv(t),t.x_.set("Offline")}(n)}))}(Hw(e=Aw(e,Kw)))}function Xw(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Ul(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await mw(e),t)))}(Hw(e=Aw(e,Kw)),t).then((t=>t?new Lw(e,null,t.query):null))}function Zw(e){if(e._initialized||e._terminated)throw new Bl(Vl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class eb{constructor(e){this._byteString=e}static fromBase64String(e){try{return new eb(Sh.fromBase64String(e))}catch(e){throw new Bl(Vl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new eb(Sh.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class tb{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Bl(Vl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new au(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class nb{constructor(e){this._methodName=e}}class rb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Bl(Vl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Bl(Vl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zl(this._lat,e._lat)||Zl(this._long,e._long)}}const ib=/^__.*__$/;class sb{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Uf(e,this.data,this.fieldMask,t,this.fieldTransforms):new jf(e,this.data,t,this.fieldTransforms)}}class ob{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Uf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ab(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fl()}}class cb{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new cb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Cb(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(ab(this.du)&&ib.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class lb{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||bv(e)}Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new cb({du:e,methodName:t,wu:n,path:au.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ub(e){const t=e._freezeSettings(),n=bv(e._databaseId);return new lb(e._databaseId,!!t.ignoreUndefinedProperties,n)}function hb(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Su(s.merge||s.mergeFields?2:0,t,n,i);xb("Data must be an object, but it was:",o,r);const a=Eb(r,o);let c,l;if(s.merge)c=new _h(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Ib(t,r,n);if(!o.contains(i))throw new Bl(Vl.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Nb(e,i)||e.push(i)}c=new _h(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new sb(new ed(a),c,l)}class db extends nb{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof db}}function fb(e,t,n){return new cb({du:3,wu:t.settings.wu,methodName:e._methodName,Vu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class pb extends nb{_toFieldTransform(e){return new Cf(e.path,new bf)}isEqual(e){return e instanceof pb}}class mb extends nb{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=fb(this,e,!0),n=this.bu.map((e=>_b(e,t))),r=new _f(n);return new Cf(e.path,r)}isEqual(e){return e instanceof mb&&Fr(this.bu,e.bu)}}class gb extends nb{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=fb(this,e,!0),n=this.bu.map((e=>_b(e,t))),r=new Sf(n);return new Cf(e.path,r)}isEqual(e){return e instanceof gb&&Fr(this.bu,e.bu)}}class vb extends nb{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new If(e.serializer,mf(e.serializer,this.Du));return new Cf(e.path,t)}isEqual(e){return e instanceof vb&&this.Du===e.Du}}function yb(e,t,n,r){const i=e.Su(1,t,n);xb("Data must be an object, but it was:",i,r);const s=[],o=ed.empty();fh(r,((e,r)=>{const a=Tb(t,e,n);r=Kr(r);const c=i.fu(a);if(r instanceof db)s.push(a);else{const e=_b(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new _h(s);return new ob(o,a,i.fieldTransforms)}function wb(e,t,n,r,i,s){const o=e.Su(1,t,n),a=[Ib(t,r,n)],c=[i];if(s.length%2!=0)throw new Bl(Vl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(Ib(t,s[d])),c.push(s[d+1]);const l=[],u=ed.empty();for(let d=a.length-1;d>=0;--d)if(!Nb(l,a[d])){const e=a[d];let t=c[d];t=Kr(t);const n=o.fu(e);if(t instanceof db)l.push(e);else{const r=_b(t,n);null!=r&&(l.push(e),u.set(e,r))}}const h=new _h(l);return new ob(u,h,o.fieldTransforms)}function bb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return _b(n,e.Su(r?4:3,t))}function _b(e,t){if(Sb(e=Kr(e)))return xb("Unsupported field value:",t,e),Eb(e,t);if(e instanceof nb)return function(e,t){if(!ab(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=_b(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Kr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return mf(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=nu.fromDate(e);return{timestampValue:bp(t.serializer,n)}}if(e instanceof nu){const n=new nu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:bp(t.serializer,n)}}if(e instanceof rb)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof eb)return{bytesValue:_p(t.serializer,e._byteString)};if(e instanceof Mw){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:xp(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(Nw(e)))}(e,t)}function Eb(e,t){const n={};return ph(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):fh(e,((e,r)=>{const i=_b(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Sb(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof nu||e instanceof rb||e instanceof eb||e instanceof Mw||e instanceof nb)}function xb(e,t,n){if(!Sb(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Nw(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function Ib(e,t,n){if((t=Kr(t))instanceof tb)return t._internalPath;if("string"==typeof t)return Tb(e,t);throw Cb("Field path arguments must be of type string or ",e,!1,void 0,n)}const kb=new RegExp("[~\\*/\\[\\]]");function Tb(e,t,n){if(t.search(kb)>=0)throw Cb("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new tb(...t.split("."))._internalPath}catch(_s){throw Cb("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Cb(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field ".concat(r)),o&&(c+=" in document ".concat(i)),c+=")"),new Bl(Vl.INVALID_ARGUMENT,a+e+c)}function Nb(e,t){return e.some((e=>e.isEqual(t)))}class Ab{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Mw(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Rb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Pb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Rb extends Ab{data(){return super.data()}}function Pb(e,t){return"string"==typeof t?Tb(e,t):t instanceof tb?t._internalPath:t._delegate._internalPath}function Ob(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Bl(Vl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Db{}class Lb extends Db{}function Mb(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Db&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof jb)).length,n=e.filter((e=>e instanceof Fb)).length;if(t>1||t>0&&n>0)throw new Bl(Vl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Fb extends Lb{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Fb(e,t,n)}_apply(e){const t=this._parse(e);return Hb(e._query,t),new Lw(e.firestore,e.converter,qd(e._query,t))}_parse(e){const t=ub(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Bl(Vl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Kb(o,s);const t=[];for(const n of o)t.push(Wb(r,e,n));a={arrayValue:{values:t}}}else a=Wb(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Kb(o,s),a=bb(n,t,o,"in"===s||"not-in"===s);return ld.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class jb extends Db{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new jb(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:ud.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Hb(n,i),n=qd(n,i)}(e._query,t),new Lw(e.firestore,e.converter,qd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ub extends Lb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ub(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Bl(Vl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Bl(Vl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new od(t,n)}(e._query,this._field,this._direction);return new Lw(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ld(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Vb extends Lb{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Vb(e,t,n)}_apply(e){return new Lw(e.firestore,e.converter,Wd(e._query,this._limit,this._limitType))}}class Bb extends Lb{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Bb(e,t,n)}_apply(e){const t=qb(e,this.type,this._docOrFields,this._inclusive);return new Lw(e.firestore,e.converter,function(e,t){return new Ld(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class zb extends Lb{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new zb(e,t,n)}_apply(e){const t=qb(e,this.type,this._docOrFields,this._inclusive);return new Lw(e.firestore,e.converter,function(e,t){return new Ld(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function qb(e,t,n,r){if(n[0]=Kr(n[0]),n[0]instanceof Ab)return function(e,t,n,r,i){if(!r)throw new Bl(Vl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Vd(e))if(o.field.isKeyField())s.push(zh(t,r.key));else{const e=r.data.field(o.field);if(Ch(e))throw new Bl(Vl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Bl(Vl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new rd(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=ub(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Bl(Vl.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new Bl(Vl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Ud(e)&&-1!==s.indexOf("/"))throw new Bl(Vl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(su.fromString(s));if(!cu.isDocumentKey(n))throw new Bl(Vl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new cu(n);a.push(zh(t,i))}else{const e=bb(n,r,s);a.push(e)}}return new rd(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Wb(e,t,n){if("string"==typeof(n=Kr(n))){if(""===n)throw new Bl(Vl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ud(t)&&-1!==n.indexOf("/"))throw new Bl(Vl.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(su.fromString(n));if(!cu.isDocumentKey(r))throw new Bl(Vl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return zh(e,new cu(r))}if(n instanceof Mw)return zh(e,n._key);throw new Bl(Vl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Nw(n),"."))}function Kb(e,t){if(!Array.isArray(e)||0===e.length)throw new Bl(Vl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Hb(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Bl(Vl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Bl(Vl.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Gb{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Lh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Th(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Fl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return fh(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new rb(kh(e.latitude),kh(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Nh(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ah(e));default:return null}}convertTimestamp(e){const t=Ih(e);return new nu(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=su.fromString(e);jl(Qp(n));const r=new Ph(n.get(1),n.get(3)),i=new cu(n.popFirst(5));return r.isEqual(t)||Dl("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Qb(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class $b extends Gb{constructor(e){super(),this.firestore=e}convertBytes(e){return new eb(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mw(this.firestore,null,t)}}class Yb{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jb extends Ab{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Xb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Pb("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Xb extends Jb{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Zb{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Yb(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Xb(this._firestore,this._userDataWriter,n.key,n,new Yb(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Bl(Vl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Xb(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Yb(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Xb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Yb(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:e_(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function e_(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fl()}}function t_(e,t){return e instanceof Jb&&t instanceof Jb?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Zb&&t instanceof Zb&&e._firestore===t._firestore&&Bw(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class n_ extends Gb{constructor(e){super(),this.firestore=e}convertBytes(e){return new eb(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mw(this.firestore,null,t)}}function r_(e){e=Aw(e,Mw);const t=Aw(e.firestore,Kw),n=Hw(t),r=new n_(t);return function(e,t){const n=new zl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Ul(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Bl(Vl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=ry(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await mw(e),t,n))),n.promise}(n,e._key).then((n=>new Jb(t,r,e._key,n,new Yb(null!==n&&n.hasLocalMutations,!0),e.converter)))}function i_(e){e=Aw(e,Lw);const t=Aw(e.firestore,Kw),n=Hw(t),r=new n_(t);return function(e,t){const n=new zl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await $g(e,t,!0),i=new _y(t,r.hs),s=i.ha(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=ry(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await mw(e),t,n))),n.promise}(n,e._query).then((n=>new Zb(t,r,e,n)))}function s_(e,t,n){e=Aw(e,Mw);const r=Aw(e.firestore,Kw),i=Qb(e.converter,t,n);return l_(r,[hb(ub(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Af.none())])}function o_(e,t,n){e=Aw(e,Mw);const r=Aw(e.firestore,Kw),i=ub(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(t=Kr(t))||t instanceof tb?wb(i,"updateDoc",e._key,t,n,a):yb(i,"updateDoc",e._key,t),l_(r,[s.toMutation(e._key,Af.exists(!0))])}function a_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Kr(e);let a={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||qw(n[c])||(a=n[c],c++);const l={includeMetadataChanges:a.includeMetadataChanges};if(qw(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[c+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof Mw)h=Aw(e.firestore,Kw),d=Fd(e._key.path),u={next:t=>{n[c]&&n[c](u_(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=Aw(e,Lw);h=Aw(t.firestore,Kw),d=t._query;const r=new n_(h);u={next:e=>{n[c]&&n[c](new Zb(h,r,t,e))},error:n[c+1],complete:n[c+2]},Ob(e._query)}return function(e,t,n,r){const i=new iw(r),s=new py(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>ly(await ww(e),s))),()=>{i.La(),e.asyncQueue.enqueueAndForget((async()=>uy(await ww(e),s)))}}(Hw(h),d,l,u)}function c_(e,t){return function(e,t){const n=new iw(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Ul(e).K_.add(t),t.next()}(await ww(e),n))),()=>{n.La(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Ul(e).K_.delete(t)}(await ww(e),n)))}}(Hw(e=Aw(e,Kw)),qw(t)?t:{next:t})}function l_(e,t){return function(e,t){const n=new zl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Xy(e);try{const e=await function(e,t){const n=Ul(e),r=nu.now(),i=t.reduce(((e,t)=>e.add(t.key)),uf());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=ef(),c=uf();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Mf(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Uf(e.key,t,td(t.value.mapValue),Af.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:rf(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new mh(Zl)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await Vy(r,e.changes),await qv(r.remoteStore)}catch(e){const t=ry(e,"Failed to persist write");n.reject(t)}}(await vw(e),t,n))),n.promise}(Hw(e),t)}function u_(e,t,n){const r=n.docs.get(t._key),i=new n_(e);return new Jb(e,i,t._key,r,new Yb(n.hasPendingWrites,n.fromCache),t.converter)}const h_={maxAttempts:5};class d_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ub(e)}set(e,t,n){this._verifyNotCommitted();const r=f_(e,this._firestore),i=Qb(r.converter,t,n),s=hb(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Af.none())),this}update(e,t,n){this._verifyNotCommitted();const r=f_(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Kr(t))||t instanceof tb?wb(this._dataReader,"WriteBatch.update",r._key,t,n,o):yb(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Af.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=f_(e,this._firestore);return this._mutations=this._mutations.concat(new qf(t._key,Af.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Bl(Vl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function f_(e,t){if((e=Kr(e)).firestore!==t)throw new Bl(Vl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class p_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ub(e)}get(e){const t=f_(e,this._firestore),n=new $b(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Fl();const r=e[0];if(r.isFoundDocument())return new Ab(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Ab(this._firestore,n,t._key,null,t.converter);throw Fl()}))}set(e,t,n){const r=f_(e,this._firestore),i=Qb(r.converter,t,n),s=hb(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=f_(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Kr(t))||t instanceof tb?wb(this._dataReader,"Transaction.update",r._key,t,n,o):yb(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=f_(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=f_(e,this._firestore),n=new n_(this._firestore);return super.get(e).then((e=>new Jb(this._firestore,n,t._key,e._document,new Yb(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Al=e}(Fi),Ri(new Hr("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Kw(new Hl(e.getProvider("auth-internal")),new Yl(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Bl(Vl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ph(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),zi(Cl,"4.4.3",e),zi(Cl,"4.4.3","esm2017")}();function m_(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Bl("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function g_(){if("undefined"===typeof Uint8Array)throw new Bl("unimplemented","Uint8Arrays are not available in this environment.")}function v_(){if("undefined"==typeof atob)throw new Bl("unimplemented","Blobs are unavailable in Firestore in this environment.")}class y_{constructor(e){this._delegate=e}static fromBase64String(e){return v_(),new y_(eb.fromBase64String(e))}static fromUint8Array(e){return g_(),new y_(eb.fromUint8Array(e))}toBase64(){return v_(),this._delegate.toBase64()}toUint8Array(){return g_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function w_(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class b_{enableIndexedDbPersistence(e,t){return function(e,t){Zw(e=Aw(e,Kw));const n=Hw(e);if(n._uninitializedComponentsProvider)throw new Bl(Vl.FAILED_PRECONDITION,"SDK cache is already specified.");Ll("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new nw;return Qw(n,i,new ew(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Zw(e=Aw(e,Kw));const t=Hw(e);if(t._uninitializedComponentsProvider)throw new Bl(Vl.FAILED_PRECONDITION,"SDK cache is already specified.");Ll("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new nw;return Qw(t,r,new tw(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Bl(Vl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new zl;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Su.D())return Promise.resolve();const t=e+"main";await Su.delete(t)}(Fg(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class __{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ph||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Ll("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Dw(this._delegate,e,t,n)}enableNetwork(){return Yw(this._delegate)}disableNetwork(){return Jw(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,kw("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return $w(this._delegate)}onSnapshotsInSync(e){return c_(this._delegate,e)}get app(){if(!this._appCompat)throw new Bl("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new L_(this,jw(this._delegate,e))}catch(t){throw T_(t,"collection()","Firestore.collection()")}}doc(e){try{return new k_(this,Uw(this._delegate,e))}catch(t){throw T_(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new P_(this,function(e,t){if(e=Aw(e,Ow),Iw("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Bl(Vl.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Lw(e,null,function(e){return new Ld(su.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw T_(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Aw(e,Kw);const r=Object.assign(Object.assign({},h_),n);return function(e){if(e.maxAttempts<1)throw new Bl(Vl.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new zl;return e.asyncQueue.enqueueAndForget((async()=>{const i=await yw(e);new aw(e.asyncQueue,i,n,t,r).ja()})),r.promise}(Hw(e),(n=>t(new p_(e,n))),r)}(this._delegate,(t=>e(new S_(this,t))))}batch(){return Hw(this._delegate),new x_(new d_(this._delegate,(e=>l_(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Hw(e=Aw(e,Kw)),r=new Ww;return Ew(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Xw(this._delegate,e).then((e=>e?new P_(this,e):null))}}class E_ extends Gb{constructor(e){super(),this.firestore=e}convertBytes(e){return new y_(new eb(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return k_.forKey(t,this.firestore,null)}}class S_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new E_(e)}get(e){const t=M_(e);return this._delegate.get(t).then((e=>new A_(this._firestore,new Jb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=M_(e);return n?(m_("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=M_(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=M_(e);return this._delegate.delete(t),this}}class x_{constructor(e){this._delegate=e}set(e,t,n){const r=M_(e);return n?(m_("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=M_(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=M_(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class I_{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Xb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new R_(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=I_.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new I_(e,new E_(e),t),r.set(t,i)),i}}I_.INSTANCES=new WeakMap;class k_{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new E_(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Bl("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new k_(t,new Mw(t._delegate,n,new cu(e)))}static forKey(e,t,n){return new k_(t,new Mw(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new L_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new L_(this.firestore,jw(this._delegate,e))}catch(t){throw T_(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Kr(e))instanceof Mw&&Vw(this._delegate,e)}set(e,t){t=m_("DocumentReference.set",t);try{return t?s_(this._delegate,e,t):s_(this._delegate,e)}catch(n){throw T_(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?o_(this._delegate,e):o_(this._delegate,e,t,...r)}catch(s){throw T_(s,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return l_(Aw(e.firestore,Kw),[new qf(e._key,Af.none())])}(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=C_(t),i=N_(t,(e=>new A_(this.firestore,new Jb(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return a_(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?r_(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Aw(e,Mw);const t=Aw(e.firestore,Kw);return bw(Hw(t),e._key,{source:"server"}).then((n=>u_(t,e,n)))}(this._delegate):function(e){e=Aw(e,Mw);const t=Aw(e.firestore,Kw);return bw(Hw(t),e._key).then((n=>u_(t,e,n)))}(this._delegate),t.then((e=>new A_(this.firestore,new Jb(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new k_(this.firestore,e?this._delegate.withConverter(I_.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function T_(e,t,n){return e.message=e.message.replace(t,n),e}function C_(e){for(const t of e)if("object"===typeof t&&!w_(t))return t;return{}}function N_(e,t){var n,r;let i;return i=w_(e[0])?e[0]:w_(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class A_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new k_(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return t_(this._delegate,e._delegate)}}class R_ extends A_{data(e){const t=this._delegate.data(e);return this._delegate._converter||function(e,t){e||Fl()}(void 0!==t),t}}class P_{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new E_(e)}where(e,t,n){try{return new P_(this.firestore,Mb(this._delegate,function(e,t,n){const r=t,i=Pb("where",e);return Fb._create(i,r,n)}(e,t,n)))}catch(r){throw T_(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new P_(this.firestore,Mb(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Pb("orderBy",e);return Ub._create(n,t)}(e,t)))}catch(n){throw T_(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new P_(this.firestore,Mb(this._delegate,function(e){return Rw("limit",e),Vb._create("limit",e,"F")}(e)))}catch(t){throw T_(t,"limit()","Query.limit()")}}limitToLast(e){try{return new P_(this.firestore,Mb(this._delegate,function(e){return Rw("limitToLast",e),Vb._create("limitToLast",e,"L")}(e)))}catch(t){throw T_(t,"limitToLast()","Query.limitToLast()")}}startAt(){try{return new P_(this.firestore,Mb(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Bb._create("startAt",t,!0)}(...arguments)))}catch(e){throw T_(e,"startAt()","Query.startAt()")}}startAfter(){try{return new P_(this.firestore,Mb(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Bb._create("startAfter",t,!1)}(...arguments)))}catch(e){throw T_(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new P_(this.firestore,Mb(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zb._create("endBefore",t,!1)}(...arguments)))}catch(e){throw T_(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new P_(this.firestore,Mb(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zb._create("endAt",t,!0)}(...arguments)))}catch(e){throw T_(e,"endAt()","Query.endAt()")}}isEqual(e){return Bw(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?i_(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Aw(e,Lw);const t=Aw(e.firestore,Kw),n=Hw(t),r=new n_(t);return _w(n,e._query,{source:"server"}).then((n=>new Zb(t,r,e,n)))}(this._delegate):function(e){e=Aw(e,Lw);const t=Aw(e.firestore,Kw),n=Hw(t),r=new n_(t);return Ob(e._query),_w(n,e._query).then((n=>new Zb(t,r,e,n)))}(this._delegate),t.then((e=>new D_(this.firestore,new Zb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=C_(t),i=N_(t,(e=>new D_(this.firestore,new Zb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return a_(this._delegate,r,i)}withConverter(e){return new P_(this.firestore,e?this._delegate.withConverter(I_.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class O_{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new R_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class D_{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new P_(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new R_(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new O_(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new R_(this._firestore,n))}))}isEqual(e){return t_(this._delegate,e._delegate)}}class L_ extends P_{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new k_(this.firestore,e):null}doc(e){try{return new k_(this.firestore,void 0===e?Uw(this._delegate):Uw(this._delegate,e))}catch(t){throw T_(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Aw(e.firestore,Kw),r=Uw(e),i=Qb(e.converter,t);return l_(n,[hb(ub(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Af.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new k_(this.firestore,e)))}isEqual(e){return Vw(this._delegate,e._delegate)}withConverter(e){return new L_(this.firestore,e?this._delegate.withConverter(I_.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function M_(e){return Aw(e,Mw)}class F_{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new tb(...t)}static documentId(){return new F_(au.keyField().canonicalString())}isEqual(e){return(e=Kr(e))instanceof tb&&this._delegate._internalPath.isEqual(e._internalPath)}}class j_{constructor(e){this._delegate=e}static serverTimestamp(){const e=new pb("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new j_(e)}static delete(){const e=new db("deleteField");return e._methodName="FieldValue.delete",new j_(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new mb("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new j_(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gb("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new j_(e)}static increment(e){const t=function(e){return new vb("increment",e)}(e);return t._methodName="FieldValue.increment",new j_(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const U_={Firestore:__,GeoPoint:rb,Timestamp:nu,Blob:y_,Transaction:S_,WriteBatch:x_,DocumentReference:k_,DocumentSnapshot:A_,Query:P_,QueryDocumentSnapshot:R_,QuerySnapshot:D_,CollectionReference:L_,FieldPath:F_,FieldValue:j_,setLogLevel:function(e){!function(e){Rl.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};var V_;(function(e,t){e.INTERNAL.registerComponent(new Hr("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},U_)))})(V_=as,((e,t)=>new __(e,t,new b_))),V_.registerVersion("@firebase/firestore-compat","0.3.26");function B_(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const z_={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q_="EMAIL_SIGNIN",W_="PASSWORD_RESET",K_="RECOVER_EMAIL",H_="REVERT_SECOND_FACTOR_ADDITION",G_="VERIFY_AND_CHANGE_EMAIL",Q_="VERIFY_EMAIL";function $_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Y_=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},J_=$_,X_=new Dr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Z_=new ri("@firebase/auth");function eE(e){if(Z_.logLevel<=Xr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Z_.error("Auth (".concat(Fi,"): ").concat(e),...n)}}function tE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw sE(e,...n)}function nE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sE(e,...n)}function rE(e,t,n){const r=Object.assign(Object.assign({},J_()),{[t]:n});return new Dr("auth","Firebase",r).create(t,{appName:e.name})}function iE(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&tE(e,"argument-error"),rE(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function sE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return X_.create(e,...n)}function oE(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw sE(t,...r)}}function aE(e){const t="INTERNAL ASSERTION FAILED: "+e;throw eE(t),new Error(t)}function cE(e,t){e||aE(t)}function lE(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function uE(){return"http:"===hE()||"https:"===hE()}function hE(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class dE{constructor(e,t){this.shortDelay=e,this.longDelay=t,cE(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kr())||Nr()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(uE()||Cr()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function fE(e,t){cE(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class pE{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void aE("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void aE("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void aE("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const mE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},gE=new dE(3e4,6e4);function vE(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function yE(e,t,n,r){return wE(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Ur(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),pE.fetch()(_E(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function wE(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},mE),t);try{const t=new SE(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw xE(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw xE(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw xE(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw xE(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw rE(e,a,o);tE(e,a)}}catch(i){if(i instanceof Or)throw i;tE(e,"network-request-failed",{message:String(i)})}}async function bE(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await yE(e,t,n,r,i);return"mfaPendingCredential"in s&&tE(e,"multi-factor-auth-required",{_serverResponse:s}),s}function _E(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?fE(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function EE(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SE{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(nE(this.auth,"network-request-failed"))),gE.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function xE(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=nE(e,t,r);return i.customData._tokenResponse=n,i}function IE(e){return void 0!==e&&void 0!==e.getResponse}function kE(e){return void 0!==e&&void 0!==e.enterprise}class TE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return EE(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function CE(e,t){return yE(e,"GET","/v2/recaptchaConfig",vE(e,t))}function NE(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function AE(e){return 1e3*Number(e)}function RE(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return eE("JWT malformed, contained fewer than 3 sections"),null;try{const e=wr(n);return e?JSON.parse(e):(eE("Failed to decode base64 JWT payload"),null)}catch(i){return eE("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function PE(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof Or&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class OE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class DE{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=NE(this.lastLoginAt),this.creationTime=NE(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function LE(e){var t;const n=e.auth,r=await e.getIdToken(),i=await PE(e,async function(e,t){return yE(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));oE(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=B_(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new DE(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class ME{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oE(e.idToken,"internal-error"),oE("undefined"!==typeof e.idToken,"internal-error"),oE("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=RE(e);return oE(t,"internal-error"),oE("undefined"!==typeof t.exp,"internal-error"),oE("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return oE(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await wE(e,{},(async()=>{const n=Ur({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=_E(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",pE.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new ME;return n&&(oE("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(oE("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(oE("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ME,this.toJSON())}_performRefresh(){return aE("not implemented")}}function FE(e,t){oE("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class jE{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=B_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new OE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new DE(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await PE(this,this.stsTokenManager.getToken(this.auth,e));return oE(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Kr(e),r=await n.getIdToken(t),i=RE(r);oE(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:NE(AE(i.auth_time)),issuedAtTime:NE(AE(i.iat)),expirationTime:NE(AE(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Kr(e);await LE(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(oE(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new jE(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){oE(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await LE(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await PE(this,async function(e,t){return yE(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;oE(y&&E,e,"internal-error");const S=ME.fromJSON(this.name,E);oE("string"===typeof y,e,"internal-error"),FE(u,e.name),FE(h,e.name),oE("boolean"===typeof w,e,"internal-error"),oE("boolean"===typeof b,e,"internal-error"),FE(d,e.name),FE(f,e.name),FE(p,e.name),FE(m,e.name),FE(g,e.name),FE(v,e.name);const x=new jE({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(x.providerData=_.map((e=>Object.assign({},e)))),m&&(x._redirectEventId=m),x}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new ME;r.updateFromServerResponse(t);const i=new jE({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await LE(i),i}}const UE=new Map;function VE(e){cE(e instanceof Function,"Expected a class definition");let t=UE.get(e);return t?(cE(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,UE.set(e,t),t)}class BE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}BE.type="NONE";const zE=BE;function qE(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class WE{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=qE(this.userKey,r.apiKey,i),this.fullPersistenceKey=qE("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?jE._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new WE(VE(zE),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||VE(zE);const s=qE(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=jE._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(c){}}))),new WE(i,e,n)):new WE(i,e,n)}}function KE(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if($E(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(HE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(JE(t))return"Blackberry";if(XE(t))return"Webos";if(GE(t))return"Safari";if((t.includes("chrome/")||QE(t))&&!t.includes("edge/"))return"Chrome";if(YE(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function HE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr();return/firefox\//i.test(e)}function GE(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr();return/crios\//i.test(e)}function $E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr();return/iemobile/i.test(e)}function YE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr();return/android/i.test(e)}function JE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr();return/blackberry/i.test(e)}function XE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr();return/webos/i.test(e)}function ZE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function eS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr();return ZE(e)||YE(e)||XE(e)||JE(e)||/windows phone/i.test(e)||$E(e)}function tS(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=KE(kr());break;case"Worker":t="".concat(KE(kr()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Fi,"/").concat(r)}class nS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(At){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class rS{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class iS{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oS(this),this.idTokenSubscription=new oS(this),this.beforeStateQueue=new nS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=X_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=VE(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await WE.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return oE(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await LE(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Kr(e):null;return t&&oE(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&oE(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(VE(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return yE(e,"GET","/v2/passwordPolicy",vE(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new rS(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Dr("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return yE(e,"POST","/v2/accounts:revokeToken",vE(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&VE(e)||this._popupRedirectResolver;oE(t,this,"argument-error"),this.redirectPersistenceManager=await WE.create(this,[VE(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(oE(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oE(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Z_.logLevel<=Xr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Z_.warn("Auth (".concat(Fi,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function sS(e){return Kr(e)}class oS{constructor(e){this.auth=e,this.observer=null,this.addObserver=zr((e=>this.observer=e))}get next(){return oE(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let aS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cS(e){return aS.loadJS(e)}function lS(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class uS{constructor(e){this.type="recaptcha-enterprise",this.auth=sS(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;kE(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{CE(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new TE(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&kE(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=aS.recaptchaEnterpriseScript;0!==t.length&&(t+=i),cS(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function hS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new uS(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function dS(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await hS(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await hS(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function fS(e,t,n){const r=sS(e);oE(r._canInitEmulator,r,"emulator-config-failed"),oE(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=pS(t),{host:o,port:a}=function(e){const t=pS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:mS(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:mS(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function pS(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function mS(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class gS{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return aE("not implemented")}_getIdTokenResponse(e){return aE("not implemented")}_linkToIdToken(e,t){return aE("not implemented")}_getReauthenticationResolver(e){return aE("not implemented")}}async function vS(e,t){return yE(e,"POST","/v1/accounts:resetPassword",vE(e,t))}async function yS(e,t){return yE(e,"POST","/v1/accounts:signUp",t)}async function wS(e,t){return bE(e,"POST","/v1/accounts:signInWithPassword",vE(e,t))}async function bS(e,t){return yE(e,"POST","/v1/accounts:sendOobCode",vE(e,t))}async function _S(e,t){return bS(e,t)}async function ES(e,t){return bS(e,t)}class SS extends gS{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new SS(e,t,"password")}static _fromEmailAndCode(e,t){return new SS(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return dS(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",wS);case"emailLink":return async function(e,t){return bE(e,"POST","/v1/accounts:signInWithEmailLink",vE(e,t))}(e,{email:this._email,oobCode:this._password});default:tE(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return dS(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yS);case"emailLink":return async function(e,t){return bE(e,"POST","/v1/accounts:signInWithEmailLink",vE(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:tE(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function xS(e,t){return bE(e,"POST","/v1/accounts:signInWithIdp",vE(e,t))}class IS extends gS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new IS(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tE("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=B_(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new IS(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return xS(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,xS(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xS(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ur(t)}return e}}const kS={USER_NOT_FOUND:"user-not-found"};class TS extends gS{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new TS({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new TS({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return bE(e,"POST","/v1/accounts:signInWithPhoneNumber",vE(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await bE(e,"POST","/v1/accounts:signInWithPhoneNumber",vE(e,t));if(n.temporaryProof)throw xE(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return bE(e,"POST","/v1/accounts:signInWithPhoneNumber",vE(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),kS)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new TS({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class CS{constructor(e){var t,n,r,i,s,o;const a=Vr(Br(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);oE(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Vr(Br(e)).link,n=t?Vr(Br(t)).deep_link_id:null,r=Vr(Br(e)).deep_link_id;return(r?Vr(Br(r)).link:null)||r||n||t||e}(e);try{return new CS(t)}catch(n){return null}}}class NS{constructor(){this.providerId=NS.PROVIDER_ID}static credential(e,t){return SS._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=CS.parseLink(t);return oE(n,"argument-error"),SS._fromEmailAndCode(e,n.code,n.tenantId)}}NS.PROVIDER_ID="password",NS.EMAIL_PASSWORD_SIGN_IN_METHOD="password",NS.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class AS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class RS extends AS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class PS extends RS{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return oE("providerId"in t&&"signInMethod"in t,"argument-error"),IS._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return oE(e.idToken||e.accessToken,"argument-error"),IS._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return PS.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return PS.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new PS(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(c){return null}}}class OS extends RS{constructor(){super("facebook.com")}static credential(e){return IS._fromParams({providerId:OS.PROVIDER_ID,signInMethod:OS.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return OS.credentialFromTaggedObject(e)}static credentialFromError(e){return OS.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return OS.credential(t.oauthAccessToken)}catch(n){return null}}}OS.FACEBOOK_SIGN_IN_METHOD="facebook.com",OS.PROVIDER_ID="facebook.com";class DS extends RS{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return IS._fromParams({providerId:DS.PROVIDER_ID,signInMethod:DS.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return DS.credentialFromTaggedObject(e)}static credentialFromError(e){return DS.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return DS.credential(n,r)}catch(i){return null}}}DS.GOOGLE_SIGN_IN_METHOD="google.com",DS.PROVIDER_ID="google.com";class LS extends RS{constructor(){super("github.com")}static credential(e){return IS._fromParams({providerId:LS.PROVIDER_ID,signInMethod:LS.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return LS.credentialFromTaggedObject(e)}static credentialFromError(e){return LS.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return LS.credential(t.oauthAccessToken)}catch(n){return null}}}LS.GITHUB_SIGN_IN_METHOD="github.com",LS.PROVIDER_ID="github.com";class MS extends gS{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return xS(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,xS(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xS(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new MS(n,i):null}static _create(e,t){return new MS(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class FS extends AS{constructor(e){oE(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return FS.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return FS.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=MS.fromJSON(e);return oE(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return MS._create(r,n)}catch(i){return null}}}class jS extends RS{constructor(){super("twitter.com")}static credential(e,t){return IS._fromParams({providerId:jS.PROVIDER_ID,signInMethod:jS.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return jS.credentialFromTaggedObject(e)}static credentialFromError(e){return jS.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return jS.credential(n,r)}catch(i){return null}}}async function US(e,t){return bE(e,"POST","/v1/accounts:signUp",vE(e,t))}jS.TWITTER_SIGN_IN_METHOD="twitter.com",jS.PROVIDER_ID="twitter.com";class VS{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await jE._fromIdTokenResponse(e,n,r),s=BS(n);return new VS({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=BS(n);return new VS({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function BS(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class zS extends Or{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,zS.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new zS(e,t,n,r)}}function qS(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw zS._fromErrorAndOperation(e,n,t,r);throw n}))}function WS(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function KS(e,t){const n=Kr(e);await GS(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return yE(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=WS(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function HS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await PE(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return VS._forOperation(e,"link",r)}async function GS(e,t,n){await LE(t);const r=!1===e?"provider-already-linked":"no-such-provider";oE(WS(t.providerData).has(n)===e,t.auth,r)}async function QS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await PE(e,qS(r,i,t,e),n);oE(s.idToken,r,"internal-error");const o=RE(s.idToken);oE(o,r,"internal-error");const{sub:a}=o;return oE(e.uid===a,r,"user-mismatch"),VS._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&tE(r,"user-mismatch"),s}}async function $S(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await qS(e,r,t),s=await VS._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function YS(e,t){return $S(sS(e),t)}async function JS(e,t){const n=Kr(e);return await GS(!1,n,t.providerId),HS(n,t)}async function XS(e,t){return QS(Kr(e),t)}async function ZS(e,t){const n=sS(e),r=await async function(e,t){return bE(e,"POST","/v1/accounts:signInWithCustomToken",vE(e,t))}(n,{token:t,returnSecureToken:!0}),i=await VS._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class ex{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?tx._fromServerResponse(e,t):"totpInfo"in t?nx._fromServerResponse(e,t):tE(e,"internal-error")}}class tx extends ex{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new tx(t)}}class nx extends ex{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new nx(t)}}function rx(e,t,n){var r;oE((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),oE("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(oE(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(oE(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function ix(e){const t=sS(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function sx(e,t){await async function(e,t){return yE(e,"POST","/v1/accounts:update",vE(e,t))}(Kr(e),{oobCode:t})}async function ox(e,t){const n=Kr(e),r=await vS(n,{oobCode:t}),i=r.requestType;switch(oE(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oE(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oE(r.mfaInfo,n,"internal-error");default:oE(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=ex._fromServerResponse(sS(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function ax(e,t){const n={identifier:t,continueUri:uE()?lE():"http://localhost"},{signinMethods:r}=await async function(e,t){return yE(e,"POST","/v1/accounts:createAuthUri",vE(e,t))}(Kr(e),n);return r||[]}async function cx(e,t){const n=Kr(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&rx(n.auth,r,t);const{email:i}=await async function(e,t){return bS(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function lx(e,t,n){const r=Kr(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&rx(r.auth,i,n);const{email:s}=await async function(e,t){return bS(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function ux(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Kr(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await PE(i,async function(e,t){return yE(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function hx(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await PE(e,async function(e,t){return yE(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class dx{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class fx extends dx{constructor(e,t,n,r){super(e,t,n),this.username=r}}class px extends dx{constructor(e,t){super(e,"facebook.com",t)}}class mx extends fx{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class gx extends dx{constructor(e,t){super(e,"google.com",t)}}class vx extends fx{constructor(e,t,n){super(e,"twitter.com",t,n)}}function yx(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=RE(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new dx(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new px(s,i);case"github.com":return new mx(s,i);case"google.com":return new gx(s,i);case"twitter.com":return new vx(s,i,e.screenName||null);case"custom":case"anonymous":return new dx(s,null);default:return new dx(s,r,i)}}(n)}class wx{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new wx("enroll",e,t)}static _fromMfaPendingCredential(e){return new wx("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return wx._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return wx._fromIdtoken(e.multiFactorSession.idToken)}return null}}class bx{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=sS(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>ex._fromServerResponse(n,e)));oE(r.mfaPendingCredential,n,"internal-error");const s=wx._fromMfaPendingCredential(r.mfaPendingCredential);return new bx(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await VS._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return oE(t.user,n,"internal-error"),VS._forOperation(t.user,t.operationType,o);default:tE(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class _x{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>ex._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new _x(e)}async getSession(){return wx._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await PE(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await PE(this.user,function(e,t){return yE(e,"POST","/v2/accounts/mfaEnrollment:withdraw",vE(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(r){throw r}}}const Ex=new WeakMap;const Sx="__sak";class xx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sx,"1"),this.storage.removeItem(Sx),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ix extends xx{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=kr();return GE(e)||ZE(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=eS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Ar()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ix.type="LOCAL";const kx=Ix;class Tx extends xx{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Tx.type="SESSION";const Cx=Tx;class Nx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Nx(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ax(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Nx.receivers=[];class Rx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=Ax("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Px(){return window}function Ox(){return"undefined"!==typeof Px().WorkerGlobalScope&&"function"===typeof Px().importScripts}const Dx="firebaseLocalStorageDb",Lx="firebaseLocalStorage",Mx="fbase_key";class Fx{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function jx(e,t){return e.transaction([Lx],t?"readwrite":"readonly").objectStore(Lx)}function Ux(){const e=indexedDB.open(Dx,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Lx,{keyPath:Mx})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Lx)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Dx);return new Fx(e).toPromise()}(),t(await Ux()))}))}))}async function Vx(e,t,n){const r=jx(e,!0).put({[Mx]:t,value:n});return new Fx(r).toPromise()}function Bx(e,t){const n=jx(e,!0).delete(t);return new Fx(n).toPromise()}class zx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ux()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ox()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nx._getInstance(Ox()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Rx(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ux();return await Vx(e,Sx,"1"),await Bx(e,Sx),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Vx(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=jx(e,!1).get(t),r=await new Fx(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Bx(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=jx(e,!1).getAll();return new Fx(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}zx.type="LOCAL";const qx=zx;const Wx=1e12;class Kx{constructor(e){this.auth=e,this.counter=Wx,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Hx(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Wx;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Wx;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Wx;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Hx{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;oE(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Gx=lS("rcb"),Qx=new dE(3e4,6e4);class $x{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Px().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return oE(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&IE(Px().grecaptcha)?Promise.resolve(Px().grecaptcha):new Promise(((n,r)=>{const i=Px().setTimeout((()=>{r(nE(e,"network-request-failed"))}),Qx.get());Px()[Gx]=()=>{Px().clearTimeout(i),delete Px()[Gx];const s=Px().grecaptcha;if(!s||!IE(s))return void r(nE(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};cS("".concat(aS.recaptchaV2Script,"?").concat(Ur({onload:Gx,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(nE(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Px().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Yx{async load(e){return new Kx(e)}clearedOneInstance(){}}const Jx="recaptcha",Xx={theme:"light",type:"image"};class Zx{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Xx);this.parameters=n,this.type=Jx,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=sS(e),this.isInvisible="invisible"===this.parameters.size,oE("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;oE(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Yx:new $x,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){oE(!this.parameters.sitekey,this.auth,"argument-error"),oE(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oE("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Px()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){oE(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){oE(uE()&&!Ox(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await yE(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);oE(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return oE(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class eI{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=TS._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function tI(e,t,n){var r;const i=await n.verify();try{let s;if(oE("string"===typeof i,e,"argument-error"),oE(n.type===Jx,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){oE("enroll"===t.type,e,"internal-error");const n=await function(e,t){return yE(e,"POST","/v2/accounts/mfaEnrollment:start",vE(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{oE("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;oE(n,e,"missing-multi-factor-info");const o=await function(e,t){return yE(e,"POST","/v2/accounts/mfaSignIn:start",vE(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return yE(e,"POST","/v1/accounts:sendVerificationCode",vE(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class nI{constructor(e){this.providerId=nI.PROVIDER_ID,this.auth=sS(e)}verifyPhoneNumber(e,t){return tI(this.auth,e,Kr(t))}static credential(e,t){return TS._fromVerification(e,t)}static credentialFromResult(e){const t=e;return nI.credentialFromTaggedObject(t)}static credentialFromError(e){return nI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?TS._fromTokenResponse(n,r):null}}function rI(e,t){return t?VE(t):(oE(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}nI.PROVIDER_ID="phone",nI.PHONE_SIGN_IN_METHOD="phone";class iI extends gS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xS(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xS(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xS(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function sI(e){return $S(e.auth,new iI(e),e.bypassAuthState)}function oI(e){const{auth:t,user:n}=e;return oE(n,t,"internal-error"),QS(n,new iI(e),e.bypassAuthState)}async function aI(e){const{auth:t,user:n}=e;return oE(n,t,"internal-error"),HS(n,new iI(e),e.bypassAuthState)}class cI{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sI;case"linkViaPopup":case"linkViaRedirect":return aI;case"reauthViaPopup":case"reauthViaRedirect":return oI;default:tE(this.auth,"internal-error")}}resolve(e){cE(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cE(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const lI=new dE(2e3,1e4);class uI extends cI{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,uI.currentPopupAction&&uI.currentPopupAction.cancel(),uI.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oE(e,this.auth,"internal-error"),e}async onExecution(){cE(1===this.filter.length,"Popup operations only handle one event");const e=Ax();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(nE(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(nE(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,uI.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(nE(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,lI.get())};e()}}uI.currentPopupAction=null;const hI="pendingRedirect",dI=new Map;class fI extends cI{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=dI.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=vI(t),r=gI(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}dI.set(this.auth._key(),e)}return this.bypassAuthState||dI.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function pI(e,t){return gI(e)._set(vI(t),"true")}function mI(e,t){dI.set(e._key(),t)}function gI(e){return VE(e._redirectPersistence)}function vI(e){return qE(hI,e.config.apiKey,e.name)}function yI(e,t,n){return async function(e,t,n){const r=sS(e);iE(e,t,AS),await r._initializationPromise;const i=rI(r,n);return await pI(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function wI(e,t,n){return async function(e,t,n){const r=Kr(e);iE(r.auth,t,AS),await r.auth._initializationPromise;const i=rI(r.auth,n);await pI(i,r.auth);const s=await EI(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function bI(e,t,n){return async function(e,t,n){const r=Kr(e);iE(r.auth,t,AS),await r.auth._initializationPromise;const i=rI(r.auth,n);await GS(!1,r,t.providerId),await pI(i,r.auth);const s=await EI(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function _I(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=sS(e),i=rI(r,t),s=new fI(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function EI(e){const t=Ax("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class SI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return II(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!II(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(nE(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xI(e))}saveEventToCache(e){this.cachedEventUids.add(xI(e)),this.lastProcessedEventTime=Date.now()}}function xI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function II(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function kI(e){return yE(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const TI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CI=/^https?/;function NI(e){const t=lE(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!CI.test(n))return!1;if(TI.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const AI=new dE(3e4,6e4);function RI(){const e=Px().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function PI(e){return new Promise(((t,n)=>{var r,i,s;function o(){RI(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{RI(),n(nE(e,"network-request-failed"))},timeout:AI.get()})}if(null===(i=null===(r=Px().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Px().gapi)||void 0===s?void 0:s.load)){const t=lS("iframefcb");return Px()[t]=()=>{gapi.load?o():n(nE(e,"network-request-failed"))},cS("".concat(aS.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw OI=null,e}))}let OI=null;const DI=new dE(5e3,15e3),LI="__/auth/iframe",MI="emulator/auth/iframe",FI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UI(e){const t=e.config;oE(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?fE(t,MI):"https://".concat(e.config.authDomain,"/").concat(LI),r={apiKey:t.apiKey,appName:e.name,v:Fi},i=jI.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Ur(r).slice(1))}async function VI(e){const t=await function(e){return OI=OI||PI(e),OI}(e),n=Px().gapi;return oE(n,e,"internal-error"),t.open({where:document.body,url:UI(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FI,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=nE(e,"network-request-failed"),s=Px().setTimeout((()=>{r(i)}),DI.get());function o(){Px().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const BI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class zI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function qI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},BI),{width:r.toString(),height:i.toString(),top:s,left:o}),l=kr().toLowerCase();n&&(a=QE(l)?"_blank":n),HE(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return ZE(arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new zI(null);const h=window.open(t||"",a,u);oE(h,e,"popup-blocked");try{h.focus()}catch(d){}return new zI(h)}const WI="__/auth/handler",KI="emulator/auth/handler",HI=encodeURIComponent("fac");async function GI(e,t,n,r,i,s){oE(e.config.authDomain,e,"auth-domain-config-required"),oE(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Fi,eventId:i};if(t instanceof AS){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof RS){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=await e._getAppCheckToken(),l=c?"#".concat(HI,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(WI);return fE(t,KI)}(e),"?").concat(Ur(a).slice(1)).concat(l)}const QI="webStorageSupport";const $I=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cx,this._completeRedirectFn=_I,this._overrideRedirectResult=mI}async _openPopup(e,t,n,r){var i;cE(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return qI(e,await GI(e,t,n,lE(),r),Ax())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Px().location.href=e}(await GI(e,t,n,lE(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(cE(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await VI(e),n=new SI(e);return t.register("authEvent",(t=>{oE(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(QI,{type:QI},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[QI];void 0!==i&&t(!!i),tE(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await kI(e);for(const r of t)try{if(NI(r))return}catch(n){}tE(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eS()||GE()||ZE()}};class YI{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return aE("unexpected MultiFactorSessionType")}}}class JI extends YI{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new JI(e)}_finalizeEnroll(e,t,n){return function(e,t){return yE(e,"POST","/v2/accounts/mfaEnrollment:finalize",vE(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return yE(e,"POST","/v2/accounts/mfaSignIn:finalize",vE(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class XI{constructor(){}static assertion(e){return JI._fromCredential(e)}}XI.FACTOR_ID="phone";var ZI="@firebase/auth",ek="1.6.1";class tk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){oE(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=Sr())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var nk;function rk(){return window}!function(e){aS=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=nE("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),nk="Browser",Ri(new Hr("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;oE(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:nk,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tS(nk)},l=new iS(r,i,s,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(VE);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ri(new Hr("auth-internal",(e=>(e=>new tk(e))(sS(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),zi(ZI,ek,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(nk)),zi(ZI,ek,"esm2017");async function ik(e,t,n){var r;const{BuildInfo:i}=rk();cE(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(cE(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return ZE()?o.ibi=i.packageName:YE()?o.apn=i.packageName:tE(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,GI(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function sk(e){const{cordova:t}=rk();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const ok=20;class ak extends SI{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function ck(e){const t=await hk()._get(dk(e));return t&&await hk()._remove(dk(e)),t}function lk(e,t){var n,r;const i=function(e){const t=fk(e),n=t.link?decodeURIComponent(t.link):void 0,r=fk(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return fk(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=fk(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?nE(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function uk(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<ok;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function hk(){return VE(kx)}function dk(e){return qE("authEvent",e.config.apiKey,e.name)}function fk(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Vr(n.join("?"))}const pk=class{constructor(){this._redirectPersistence=Cx,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=_I,this._overrideRedirectResult=mI}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new ak(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){tE(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,c,l,u;const h=rk();oE("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),oE("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),oE("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oE("function"===typeof(null===(c=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oE("function"===typeof(null===(u=null===(l=null===h||void 0===h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),dI.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:uk(),postBody:null,tenantId:e.tenantId,error:nE(e,"no-auth-event")}}(e,n,r);await function(e,t){return hk()._set(dk(e),t)}(e,s);const o=await ik(e,s,t);return async function(e,t,n){const{cordova:r}=rk();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{o(nE(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),YE()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await sk(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=rk(),n={};ZE()?n.iosBundleId=t.packageName:YE()?n.androidPackageName=t.packageName:tE(e,"operation-not-supported-in-this-environment"),await kI(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=rk(),s=setTimeout((async()=>{await ck(e),t.onEvent(mk())}),500),o=async n=>{clearTimeout(s);const r=await ck(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=lk(r,n.url)),t.onEvent(i||mk())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,c="".concat(i.packageName.toLowerCase(),"://");rk().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&o({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function mk(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:nE("no-auth-event")}}function gk(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function vk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr();return!("file:"!==gk()&&"ionic:"!==gk()&&"capacitor:"!==gk()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function yk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr();return Ar()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr();return/Edge\/\d+/.test(e)}(e)}function wk(){try{const e=self.localStorage,t=Ax();if(e)return e.setItem(t,"1"),e.removeItem(t),!yk()||Pr()}catch(e){return bk()&&Pr()}return!1}function bk(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function _k(){return("http:"===gk()||"https:"===gk()||Cr()||vk())&&!(Nr()||Tr())&&wk()&&!bk()}function Ek(){return vk()&&"undefined"!==typeof document}const Sk={LOCAL:"local",NONE:"none",SESSION:"session"},xk=oE,Ik="persistence";async function kk(e){await e._initializationPromise;const t=Tk(),n=qE(Ik,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function Tk(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const Ck=oE;class Nk{constructor(){this.browserResolver=VE($I),this.cordovaResolver=VE(pk),this.underlyingResolver=null,this._redirectPersistence=Cx,this._completeRedirectFn=_I,this._overrideRedirectResult=mI}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Ek()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ck(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Ek()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function Ak(e){return e.unwrap()}function Rk(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new Lk(e,function(e,t){var n;const r=Kr(e),i=t;return oE(t.customData.operationType,r,"argument-error"),oE(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),bx._fromError(r,i)}(e,t))}else if(r){const e=Pk(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Pk(e){const{_tokenResponse:t}=e instanceof Or?e.customData:e;if(!t)return null;if(!(e instanceof Or)&&"temporaryProof"in t&&"phoneNumber"in t)return nI.credentialFromResult(e);const n=t.providerId;if(!n||n===z_.PASSWORD)return null;let r;switch(n){case z_.GOOGLE:r=DS;break;case z_.FACEBOOK:r=OS;break;case z_.GITHUB:r=LS;break;case z_.TWITTER:r=jS;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?MS._create(n,o):IS._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new PS(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Or?r.credentialFromError(e):r.credentialFromResult(e)}function Ok(e,t){return t.catch((t=>{throw t instanceof Or&&Rk(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,Pk(r)),additionalUserInfo:yx(e),user:Mk.getOrCreate(n)};var r}))}async function Dk(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>Ok(e,n.confirm(t))}}class Lk{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Ok(Ak(this.auth),this.resolver.resolveSignIn(e))}}class Mk{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Kr(e);return Ex.has(t)||Ex.set(t,_x._fromUser(t)),Ex.get(t)}(e)}static getOrCreate(e){return Mk.USER_MAP.has(e)||Mk.USER_MAP.set(e,new Mk(e)),Mk.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Ok(this.auth,JS(this._delegate,e))}async linkWithPhoneNumber(e,t){return Dk(this.auth,async function(e,t,n){const r=Kr(e);await GS(!1,r,"phone");const i=await tI(r.auth,t,Kr(n));return new eI(i,(e=>JS(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return Ok(this.auth,async function(e,t,n){const r=Kr(e);iE(r.auth,t,AS);const i=rI(r.auth,n);return new uI(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Nk))}async linkWithRedirect(e){return await kk(sS(this.auth)),bI(this._delegate,e,Nk)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Ok(this.auth,XS(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Dk(this.auth,async function(e,t,n){const r=Kr(e),i=await tI(r.auth,t,Kr(n));return new eI(i,(e=>XS(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return Ok(this.auth,async function(e,t,n){const r=Kr(e);iE(r.auth,t,AS);const i=rI(r.auth,n);return new uI(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Nk))}async reauthenticateWithRedirect(e){return await kk(sS(this.auth)),wI(this._delegate,e,Nk)}sendEmailVerification(e){return cx(this._delegate,e)}async unlink(e){return await KS(this._delegate,e),this}updateEmail(e){return function(e,t){return hx(Kr(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return hx(Kr(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await HS(Kr(e),t)}(this._delegate,e)}updateProfile(e){return ux(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return lx(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Mk.USER_MAP=new WeakMap;const Fk=oE;class jk{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Fk(n,"invalid-api-key",{appName:e.name}),Fk(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?Nk:void 0;this._delegate=t.initialize({options:{persistence:Vk(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Y_),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Mk.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){fS(this._delegate,e,t)}applyActionCode(e){return sx(this._delegate,e)}checkActionCode(e){return ox(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await vS(Kr(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ix(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Ok(this._delegate,async function(e,t,n){const r=sS(e),i=dS(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",US),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ix(e),t})),o=await VS._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return ax(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=CS.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){Fk(_k(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await sS(e)._initializationPromise,_I(e,t,!1)}(this._delegate,Nk);return e?Ok(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){sS(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=Uk(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=Uk(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=sS(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){oE(t.handleCodeInApp,r,"argument-error"),t&&rx(r,e,t)}(i,n),await dS(r,i,"getOobCode",ES)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=sS(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&rx(r,i,n),await dS(r,i,"getOobCode",_S)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){xk(Object.values(Sk).includes(t),e,"invalid-persistence-type"),Nr()?xk(t!==Sk.SESSION,e,"unsupported-persistence-type"):Tr()?xk(t===Sk.NONE,e,"unsupported-persistence-type"):bk()?xk(t===Sk.NONE||t===Sk.LOCAL&&Pr(),e,"unsupported-persistence-type"):xk(t===Sk.NONE||wk(),e,"unsupported-persistence-type")}(this._delegate,e),e){case Sk.SESSION:t=Cx;break;case Sk.LOCAL:t=await VE(qx)._isAvailable()?qx:kx;break;case Sk.NONE:t=zE;break;default:return tE("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Ok(this._delegate,async function(e){var t;const n=sS(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new VS({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await US(n,{returnSecureToken:!0}),i=await VS._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return Ok(this._delegate,YS(this._delegate,e))}signInWithCustomToken(e){return Ok(this._delegate,ZS(this._delegate,e))}signInWithEmailAndPassword(e,t){return Ok(this._delegate,function(e,t,n){return YS(Kr(e),NS.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ix(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Ok(this._delegate,async function(e,t,n){const r=Kr(e),i=NS.credentialWithLink(t,n||lE());return oE(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),YS(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Dk(this._delegate,async function(e,t,n){const r=sS(e),i=await tI(r,t,Kr(n));return new eI(i,(e=>YS(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return Fk(_k(),this._delegate,"operation-not-supported-in-this-environment"),Ok(this._delegate,async function(e,t,n){const r=sS(e);iE(e,t,AS);const i=rI(r,n);return new uI(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,Nk))}async signInWithRedirect(e){return Fk(_k(),this._delegate,"operation-not-supported-in-this-environment"),await kk(this._delegate),yI(this._delegate,e,Nk)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await ox(Kr(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Uk(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Mk.getOrCreate(e)),error:t,complete:n}}function Vk(e,t){const n=function(e,t){const n=Tk();if(!n)return[];const r=qE(Ik,e,t);switch(n.getItem(r)){case Sk.NONE:return[zE];case Sk.LOCAL:return[qx,Cx];case Sk.SESSION:return[Cx];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(qx)||n.push(qx),"undefined"!==typeof window)for(const r of[kx,Cx])n.includes(r)||n.push(r);return n.includes(zE)||n.push(zE),n}jk.Persistence=Sk;class Bk{constructor(){this.providerId="phone",this._delegate=new nI(Ak(as.auth()))}static credential(e,t){return nI.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Bk.PHONE_SIGN_IN_METHOD=nI.PHONE_SIGN_IN_METHOD,Bk.PROVIDER_ID=nI.PROVIDER_ID;const zk=oE;class qk{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:as.app();var r;zk(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Zx(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new Hr("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new jk(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:q_,PASSWORD_RESET:W_,RECOVER_EMAIL:K_,REVERT_SECOND_FACTOR_ADDITION:H_,VERIFY_AND_CHANGE_EMAIL:G_,VERIFY_EMAIL:Q_}},EmailAuthProvider:NS,FacebookAuthProvider:OS,GithubAuthProvider:LS,GoogleAuthProvider:DS,OAuthProvider:PS,SAMLAuthProvider:FS,PhoneAuthProvider:Bk,PhoneMultiFactorGenerator:XI,RecaptchaVerifier:qk,TwitterAuthProvider:jS,Auth:jk,AuthCredential:gS,Error:Or}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.5.3")}(as);const Wk=async(e,t)=>{if(!e)return;const n=Hk.doc("users/".concat(e.uid));if(!(await n.get()).exists){const{displayName:i,email:s}=e,o=new Date;try{await n.set({displayName:i,email:s,createAt:o,...t})}catch(r){console.log("error creating user: ",r.message)}}return n};as.initializeApp({apiKey:"AIzaSyAWo9SvxOW4qvYf-iyFg8Tq1ZYNzhmJ5GM",authDomain:"booksuggester-94bd1.firebaseapp.com",projectId:"booksuggester-94bd1",storageBucket:"booksuggester-94bd1.appspot.com",messagingSenderId:"1083435225479",appId:"1:1083435225479:web:2b08b2b9011a5be26cc322",measurementId:"G-G9Q0SQZYFS"});const Kk=as.auth(),Hk=as.firestore(),Gk=new as.auth.GoogleAuthProvider;Gk.setCustomParameters({prompt:"select_account"});var Qk,$k,Yk,Jk;function Xk(e){let{sidebaropen:t,toggleSidebar:n,currentUser:r}=e;return(0,hr.jsxs)(Zk,{className:"animate darkBg",sidebaropen:t,children:[(0,hr.jsxs)(eT,{className:"flexSpaceCenter",children:[(0,hr.jsxs)("div",{className:"flexNullCenter",children:[(0,hr.jsx)(pr,{}),(0,hr.jsx)("h1",{className:"whiteColor font20",style:{marginLeft:"15px"},children:"BookSuggester"})]}),(0,hr.jsx)(tT,{onClick:()=>n(!t),className:"animate pointer",children:(0,hr.jsx)(dr,{})})]}),(0,hr.jsxs)(nT,{className:"flexNullCenter flexColumn",children:[(0,hr.jsx)("li",{className:"semiBold font15 pointer",children:(0,hr.jsx)(fe,{onClick:()=>n(!t),className:"whiteColor",style:{padding:"10px 15px"},to:"/",children:"Home"})}),(0,hr.jsx)("li",{className:"semiBold font15 pointer",children:(0,hr.jsx)(fe,{onClick:()=>n(!t),className:"whiteColor",style:{padding:"10px 15px"},to:"/discover",children:"Discover"})}),(0,hr.jsx)("li",{className:"semiBold font15 pointer",children:(0,hr.jsx)(fe,{onClick:()=>n(!t),className:"whiteColor",style:{padding:"10px 15px"},to:"/bookshelf",children:"Bookshelf"})}),(0,hr.jsx)("li",{className:"semiBold font15 pointer",children:r?(0,hr.jsx)(fe,{onClick:()=>{Kk.signOut(),n(!1)},className:"whiteColor",style:{padding:"10px 15px"},to:"/login",children:"Logout"}):(0,hr.jsx)(fe,{onClick:()=>n(!t),className:"whiteColor",style:{padding:"10px 15px"},to:"/login",children:"Login"})})]})]})}const Zk=lr.nav(Qk||(Qk=ve(["\n  width: 400px;\n  height: 100vh;\n  position: fixed;\n  top: 0;\n  padding: 0 30px;\n  right: ",";\n  z-index: 9999;\n  @media (max-width: 400px) {\n    width: 100%;\n  }\n"])),(e=>"true"===e.sidebaropen?"0px":"-400px")),eT=lr.div($k||($k=ve(["\n  padding: 20px 0;\n"]))),tT=lr.button(Yk||(Yk=ve(["\n  border: 0px;\n  outline: none;\n  background-color: transparent;\n  padding: 10px;\n"]))),nT=lr.ul(Jk||(Jk=ve(["\n  padding: 40px;\n  li {\n    margin: 20px 0;\n  }\n"])));var rT;function iT(e){let{toggleSidebar:t}=e;return(0,hr.jsx)(sT,{className:"darkBg",onClick:()=>t(!1)})}const sT=lr.div(rT||(rT=ve(["\n  width: 100%;\n  height: 100vh;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 99;\n  opacity: 0.8;\n"])));const oT=function(e){return(0,hr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:28,height:22,viewBox:"0 0 28 22",...e,children:[(0,hr.jsx)("path",{"data-name":"Line 5",fill:"none",stroke:"#0b093b",strokeLinecap:"round",strokeWidth:2,d:"M1 1h26"}),(0,hr.jsx)("path",{"data-name":"Line 6",fill:"none",stroke:"#0b093b",strokeLinecap:"round",strokeWidth:2,d:"M1 11h26"}),(0,hr.jsx)("path",{"data-name":"Line 7",fill:"none",stroke:"#0b093b",strokeLinecap:"round",strokeWidth:2,d:"M1 21h26"})]})};var aT,cT,lT,uT,hT,dT;function fT(e){let{currentUser:t}=e;const[n,i]=(0,r.useState)(window.scrollY),[s,o]=(0,r.useState)(!1),a=oe();return(0,r.useEffect)((()=>{const e=()=>{i(window.scrollY)};if("undefined"!==typeof window)return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}),[]),(0,hr.jsxs)(hr.Fragment,{children:[(0,hr.jsx)(Xk,{sidebaropen:s.toString(),toggleSidebar:o,currentUser:t}),s&&(0,hr.jsx)(iT,{toggleSidebar:o}),(0,hr.jsx)(pT,{style:{height:n>100?"60px":"80px"},children:(0,hr.jsxs)(mT,{children:[(0,hr.jsxs)(gT,{to:"/",className:"flexNullCenter pointer",activeClassName:"inactive",children:[(0,hr.jsx)(pr,{}),(0,hr.jsx)("h5",{style:{marginLeft:"5px",marginTop:"5px"},children:"BookSuggester"})]}),(0,hr.jsx)(vT,{onClick:()=>o(!s),children:(0,hr.jsx)(oT,{})}),(0,hr.jsxs)(yT,{children:[(0,hr.jsx)("li",{children:(0,hr.jsx)(wT,{exact:!0,to:"/",isActive:()=>"/"===a.pathname,children:"Home"})}),(0,hr.jsx)("li",{children:(0,hr.jsx)(wT,{to:"/discover",isActive:()=>"/discover"===a.pathname,children:"Discover"})}),(0,hr.jsx)("li",{children:(0,hr.jsx)(wT,{to:"/bookshelf",isActive:()=>"/bookshelf"===a.pathname,children:"Bookshelf"})}),t?(0,hr.jsx)("li",{children:(0,hr.jsx)(wT,{to:"/login",isActive:()=>"/login"===a.pathname,onClick:()=>Kk.signOut(),children:"Logout"})}):(0,hr.jsx)("li",{children:(0,hr.jsx)(wT,{to:"/login",isActive:()=>"/login"===a.pathname,children:"Login"})})]})]})})]})}const pT=lr.nav(aT||(aT=ve(["\n  width: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 999;\n  background-color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.2);\n"]))),mT=lr.div(cT||(cT=ve(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  max-width: 1200px;\n  padding: 0 20px;\n  height: 100%;\n"]))),gT=lr(ge)(lT||(lT=ve(["\n  display: flex;\n  align-items: center;\n  text-decoration: none;\n  color: black;\n  font-weight: bold;\n  font-size: 1.5rem;\n  cursor: pointer;\n"]))),vT=lr.button(uT||(uT=ve(["\n  display: none;\n  background: none;\n  border: none;\n  cursor: pointer;\n  @media (max-width: 760px) {\n    display: block;\n  }\n"]))),yT=lr.ul(hT||(hT=ve(["\n  display: flex;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  @media (max-width: 760px) {\n    display: none;\n  }\n"]))),wT=lr(ge)(dT||(dT=ve(["\n  text-decoration: none;\n  color: black;\n  font-weight: bold;\n  font-size: 1rem;\n  padding: 10px 15px;\n  cursor: pointer;\n  &.active {\n    border-bottom: 2px solid blue; /* You can adjust the active link styling */\n  }\n"])));var bT;const _T=lr.div(bT||(bT=ve(["\n  display: flex;\n  flex-direction: column;\n  border: 1.5px solid light-gray;\n  border-left: 1px solid black;\n  border-radius: 8px;\n  padding: 25px;\n  cursor: pointer;\n  width: 260px;\n  font-family: Garamond, serif;\n  height: 380px;\n  align-items: center;\n  justify-content: space-around;\n  box-shadow: 0 8px 16px 0 rgba(0,0,0,0.5);\n  transition: all 0.5s ease;\n\n  &:hover {\n    transform: scale(1.01);\n    transition: transform 1.5s ease-out;\n    border-left: 0px;\n    border-right: 1px solid black;\n  }\n\n  @media only screen and (max-width: 600px) {\n    width: 220px;\n    min-height: 330px;\n    padding: 10px;\n  }\n"])));var ET,ST,xT,IT,kT,TT,CT;class NT extends r.Component{constructor(e){super(e),this.toggleHoverState=()=>{this.setState((e=>({showInfo:!e.showInfo})))},this.state={showInfo:!1}}render(){const{title:e,background:t,authors:n,subject:r,genre:i}=this.props,{showInfo:s}=this.state;return(0,hr.jsx)(_T,{style:{backgroundColor:t},onMouseEnter:this.toggleHoverState,onMouseLeave:this.toggleHoverState,children:(0,hr.jsx)(RT,{children:s?(0,hr.jsx)(DT,{className:"font12",children:[{label:"Title",value:e},{label:"Authors",value:n},{label:"Subject",value:r},{label:"Category",value:i}].map(((e,t)=>e.value&&(0,hr.jsxs)("span",{children:[(0,hr.jsxs)(LT,{children:[e.label,":"]}),(0,hr.jsx)(MT,{children:e.value.length>120?e.value.substring(0,120)+"...":e.value})]},t)))}):(0,hr.jsxs)(hr.Fragment,{children:[(0,hr.jsx)(PT,{children:e.length>120?e.substring(0,120)+"...":e}),(0,hr.jsx)(OT,{children:n.length>120?e.substring(0,120)+"...":n})]})})})}}const AT=ur(ET||(ET=ve(["\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n"]))),RT=lr.div(ST||(ST=ve([""]))),PT=lr.h6(xT||(xT=ve(["\n  margin: 0;\n  text-overflow: ellipsis;\n  animation: "," 1s ease;\n"])),AT),OT=lr.span(IT||(IT=ve(["\n  font-size: 12px;\n  color: #555;\n  animation: "," 1s ease;\n"])),AT),DT=lr.div(kT||(kT=ve(["\n  margin-top: 10px;\n  display: flex;\n  flex-direction: column;\n"]))),LT=lr.span(TT||(TT=ve(["\n  font-weight: bold;\n  animation: "," 1s ease;\n"])),AT),MT=lr.span(CT||(CT=ve(["\n  margin-left: 5px;\n  animation: "," 1s ease;\n"])),AT);const FT=n.p+"static/media/dice-solid.f86902b205c6a8d89d7ac2f60436a0fb.svg";const jT=function(e){return(0,hr.jsx)("img",{src:FT,alt:"",style:{height:"38px"}})};const UT=n.p+"static/media/floppy-disk-solid.c87e40eb52d0d26128b3ef3c4528fc06.svg";const VT=function(e){return(0,hr.jsx)("img",{src:UT,alt:"",style:{height:"30px"}})};const BT=n.p+"static/media/gear-solid.37ee32abde6a49398c42354170f37562.svg";const zT=function(e){return(0,hr.jsx)("img",{src:BT,alt:"",style:{height:"30px"}})};function qT(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function WT(){const e=(0,r.useRef)(!0),t=(0,r.useRef)((()=>e.current));return(0,r.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),t.current}function KT(e){const t=function(e){const t=(0,r.useRef)(e);return t.current=e,t}(e);(0,r.useEffect)((()=>()=>t.current()),[])}const HT=2**31-1;function GT(e,t,n){const r=n-Date.now();e.current=r<=HT?setTimeout(t,r):setTimeout((()=>GT(e,t,n)),HT)}function QT(){const e=WT(),t=(0,r.useRef)();return KT((()=>clearTimeout(t.current))),(0,r.useMemo)((()=>{const n=()=>clearTimeout(t.current);return{set:function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e()&&(n(),i<=HT?t.current=setTimeout(r,i):GT(t,r,Date.now()+i))},clear:n,handleRef:t}}),[])}var $T=n(440),YT=n.n($T);n(740);function JT(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function XT(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function ZT(e,t,n){var i=(0,r.useRef)(void 0!==e),s=(0,r.useState)(t),o=s[0],a=s[1],c=void 0!==e,l=i.current;return i.current=c,!c&&l&&o!==t&&a(t),[c?e:o,(0,r.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n&&n.apply(void 0,[e].concat(r)),a(e)}),[n])]}function eC(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function tC(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function nC(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}eC.__suppressDeprecationWarning=!0,tC.__suppressDeprecationWarning=!0,nC.__suppressDeprecationWarning=!0;const rC=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const iC=function(e,t){return(0,r.useMemo)((()=>function(e,t){const n=rC(e),r=rC(t);return e=>{n&&n(e),r&&r(e)}}(e,t)),[e,t])};var sC=n(139),oC=n.n(sC),aC=n(950);function cC(){return(0,r.useState)(null)}var lC=Object.prototype.hasOwnProperty;function uC(e,t,n){for(n of e.keys())if(hC(n,t))return n}function hC(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&hC(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e){if((i=r)&&"object"===typeof i&&!(i=uC(t,i)))return!1;if(!t.has(i))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e){if((i=r[0])&&"object"===typeof i&&!(i=uC(t,i)))return!1;if(!hC(r[1],t.get(i)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"===typeof e){for(n in r=0,e){if(lC.call(e,n)&&++r&&!lC.call(t,n))return!1;if(!(n in t)||!hC(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!==e&&t!==t}const dC=function(e){const t=WT();return[e[0],(0,r.useCallback)((n=>{if(t())return e[1](n)}),[t,e[1]])]};function fC(e){return e.split("-")[0]}function pC(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function mC(e){return e instanceof pC(e).Element||e instanceof Element}function gC(e){return e instanceof pC(e).HTMLElement||e instanceof HTMLElement}function vC(e){return"undefined"!==typeof ShadowRoot&&(e instanceof pC(e).ShadowRoot||e instanceof ShadowRoot)}var yC=Math.max,wC=Math.min,bC=Math.round;function _C(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function EC(){return!/^((?!chrome|android).)*safari/i.test(_C())}function SC(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,s=1;t&&gC(e)&&(i=e.offsetWidth>0&&bC(r.width)/e.offsetWidth||1,s=e.offsetHeight>0&&bC(r.height)/e.offsetHeight||1);var o=(mC(e)?pC(e):window).visualViewport,a=!EC()&&n,c=(r.left+(a&&o?o.offsetLeft:0))/i,l=(r.top+(a&&o?o.offsetTop:0))/s,u=r.width/i,h=r.height/s;return{width:u,height:h,top:l,right:c+u,bottom:l+h,left:c,x:c,y:l}}function xC(e){var t=SC(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function IC(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&vC(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function kC(e){return e?(e.nodeName||"").toLowerCase():null}function TC(e){return pC(e).getComputedStyle(e)}function CC(e){return["table","td","th"].indexOf(kC(e))>=0}function NC(e){return((mC(e)?e.ownerDocument:e.document)||window.document).documentElement}function AC(e){return"html"===kC(e)?e:e.assignedSlot||e.parentNode||(vC(e)?e.host:null)||NC(e)}function RC(e){return gC(e)&&"fixed"!==TC(e).position?e.offsetParent:null}function PC(e){for(var t=pC(e),n=RC(e);n&&CC(n)&&"static"===TC(n).position;)n=RC(n);return n&&("html"===kC(n)||"body"===kC(n)&&"static"===TC(n).position)?t:n||function(e){var t=/firefox/i.test(_C());if(/Trident/i.test(_C())&&gC(e)&&"fixed"===TC(e).position)return null;var n=AC(e);for(vC(n)&&(n=n.host);gC(n)&&["html","body"].indexOf(kC(n))<0;){var r=TC(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function OC(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function DC(e,t,n){return yC(e,wC(t,n))}function LC(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function MC(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}var FC="top",jC="bottom",UC="right",VC="left",BC="auto",zC=[FC,jC,UC,VC],qC="start",WC="end",KC="clippingParents",HC="viewport",GC="popper",QC="reference",$C=zC.reduce((function(e,t){return e.concat([t+"-"+qC,t+"-"+WC])}),[]),YC=[].concat(zC,[BC]).reduce((function(e,t){return e.concat([t,t+"-"+qC,t+"-"+WC])}),[]),JC=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];const XC={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=fC(n.placement),c=OC(a),l=[VC,UC].indexOf(a)>=0?"height":"width";if(s&&o){var u=function(e,t){return LC("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:MC(e,zC))}(i.padding,n),h=xC(s),d="y"===c?FC:VC,f="y"===c?jC:UC,p=n.rects.reference[l]+n.rects.reference[c]-o[c]-n.rects.popper[l],m=o[c]-n.rects.reference[c],g=PC(s),v=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,y=p/2-m/2,w=u[d],b=v-h[l]-u[f],_=v/2-h[l]/2+y,E=DC(w,_,b),S=c;n.modifiersData[r]=((t={})[S]=E,t.centerOffset=E-_,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&IC(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ZC(e){return e.split("-")[1]}var eN={top:"auto",right:"auto",bottom:"auto",left:"auto"};function tN(e){var t,n=e.popper,r=e.popperRect,i=e.placement,s=e.variation,o=e.offsets,a=e.position,c=e.gpuAcceleration,l=e.adaptive,u=e.roundOffsets,h=e.isFixed,d=o.x,f=void 0===d?0:d,p=o.y,m=void 0===p?0:p,g="function"===typeof u?u({x:f,y:m}):{x:f,y:m};f=g.x,m=g.y;var v=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),w=VC,b=FC,_=window;if(l){var E=PC(n),S="clientHeight",x="clientWidth";if(E===pC(n)&&"static"!==TC(E=NC(n)).position&&"absolute"===a&&(S="scrollHeight",x="scrollWidth"),i===FC||(i===VC||i===UC)&&s===WC)b=jC,m-=(h&&E===_&&_.visualViewport?_.visualViewport.height:E[S])-r.height,m*=c?1:-1;if(i===VC||(i===FC||i===jC)&&s===WC)w=UC,f-=(h&&E===_&&_.visualViewport?_.visualViewport.width:E[x])-r.width,f*=c?1:-1}var I,k=Object.assign({position:a},l&&eN),T=!0===u?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:bC(n*i)/i||0,y:bC(r*i)/i||0}}({x:f,y:m},pC(n)):{x:f,y:m};return f=T.x,m=T.y,c?Object.assign({},k,((I={})[b]=y?"0":"",I[w]=v?"0":"",I.transform=(_.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",I)):Object.assign({},k,((t={})[b]=y?m+"px":"",t[w]=v?f+"px":"",t.transform="",t))}const nN={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,c=void 0===a||a,l={placement:fC(t.placement),variation:ZC(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,tN(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,tN(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var rN={passive:!0};const iN={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,s=void 0===i||i,o=r.resize,a=void 0===o||o,c=pC(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&l.forEach((function(e){e.addEventListener("scroll",n.update,rN)})),a&&c.addEventListener("resize",n.update,rN),function(){s&&l.forEach((function(e){e.removeEventListener("scroll",n.update,rN)})),a&&c.removeEventListener("resize",n.update,rN)}},data:{}};var sN={left:"right",right:"left",bottom:"top",top:"bottom"};function oN(e){return e.replace(/left|right|bottom|top/g,(function(e){return sN[e]}))}var aN={start:"end",end:"start"};function cN(e){return e.replace(/start|end/g,(function(e){return aN[e]}))}function lN(e){var t=pC(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function uN(e){return SC(NC(e)).left+lN(e).scrollLeft}function hN(e){var t=TC(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function dN(e){return["html","body","#document"].indexOf(kC(e))>=0?e.ownerDocument.body:gC(e)&&hN(e)?e:dN(AC(e))}function fN(e,t){var n;void 0===t&&(t=[]);var r=dN(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),s=pC(r),o=i?[s].concat(s.visualViewport||[],hN(r)?r:[]):r,a=t.concat(o);return i?a:a.concat(fN(AC(o)))}function pN(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function mN(e,t,n){return t===HC?pN(function(e,t){var n=pC(e),r=NC(e),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;var l=EC();(l||!l&&"fixed"===t)&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a+uN(e),y:c}}(e,n)):mC(t)?function(e,t){var n=SC(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):pN(function(e){var t,n=NC(e),r=lN(e),i=null==(t=e.ownerDocument)?void 0:t.body,s=yC(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=yC(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+uN(e),c=-r.scrollTop;return"rtl"===TC(i||n).direction&&(a+=yC(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:c}}(NC(e)))}function gN(e,t,n,r){var i="clippingParents"===t?function(e){var t=fN(AC(e)),n=["absolute","fixed"].indexOf(TC(e).position)>=0&&gC(e)?PC(e):e;return mC(n)?t.filter((function(e){return mC(e)&&IC(e,n)&&"body"!==kC(e)})):[]}(e):[].concat(t),s=[].concat(i,[n]),o=s[0],a=s.reduce((function(t,n){var i=mN(e,n,r);return t.top=yC(i.top,t.top),t.right=wC(i.right,t.right),t.bottom=wC(i.bottom,t.bottom),t.left=yC(i.left,t.left),t}),mN(e,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function vN(e){var t,n=e.reference,r=e.element,i=e.placement,s=i?fC(i):null,o=i?ZC(i):null,a=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(s){case FC:t={x:a,y:n.y-r.height};break;case jC:t={x:a,y:n.y+n.height};break;case UC:t={x:n.x+n.width,y:c};break;case VC:t={x:n.x-r.width,y:c};break;default:t={x:n.x,y:n.y}}var l=s?OC(s):null;if(null!=l){var u="y"===l?"height":"width";switch(o){case qC:t[l]=t[l]-(n[u]/2-r[u]/2);break;case WC:t[l]=t[l]+(n[u]/2-r[u]/2)}}return t}function yN(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,s=n.strategy,o=void 0===s?e.strategy:s,a=n.boundary,c=void 0===a?KC:a,l=n.rootBoundary,u=void 0===l?HC:l,h=n.elementContext,d=void 0===h?GC:h,f=n.altBoundary,p=void 0!==f&&f,m=n.padding,g=void 0===m?0:m,v=LC("number"!==typeof g?g:MC(g,zC)),y=d===GC?QC:GC,w=e.rects.popper,b=e.elements[p?y:d],_=gN(mC(b)?b:b.contextElement||NC(e.elements.popper),c,u,o),E=SC(e.elements.reference),S=vN({reference:E,element:w,strategy:"absolute",placement:i}),x=pN(Object.assign({},w,S)),I=d===GC?x:E,k={top:_.top-I.top+v.top,bottom:I.bottom-_.bottom+v.bottom,left:_.left-I.left+v.left,right:I.right-_.right+v.right},T=e.modifiersData.offset;if(d===GC&&T){var C=T[i];Object.keys(k).forEach((function(e){var t=[UC,jC].indexOf(e)>=0?1:-1,n=[FC,jC].indexOf(e)>=0?"y":"x";k[e]+=C[n]*t}))}return k}const wN={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,s=void 0===i||i,o=n.altAxis,a=void 0===o||o,c=n.fallbackPlacements,l=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,p=void 0===f||f,m=n.allowedAutoPlacements,g=t.options.placement,v=fC(g),y=c||(v===g||!p?[oN(g)]:function(e){if(fC(e)===BC)return[];var t=oN(e);return[cN(e),t,cN(t)]}(g)),w=[g].concat(y).reduce((function(e,n){return e.concat(fC(n)===BC?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?YC:c,u=ZC(r),h=u?a?$C:$C.filter((function(e){return ZC(e)===u})):zC,d=h.filter((function(e){return l.indexOf(e)>=0}));0===d.length&&(d=h);var f=d.reduce((function(t,n){return t[n]=yN(e,{placement:n,boundary:i,rootBoundary:s,padding:o})[fC(n)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}(t,{placement:n,boundary:u,rootBoundary:h,padding:l,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),b=t.rects.reference,_=t.rects.popper,E=new Map,S=!0,x=w[0],I=0;I<w.length;I++){var k=w[I],T=fC(k),C=ZC(k)===qC,N=[FC,jC].indexOf(T)>=0,A=N?"width":"height",R=yN(t,{placement:k,boundary:u,rootBoundary:h,altBoundary:d,padding:l}),P=N?C?UC:VC:C?jC:FC;b[A]>_[A]&&(P=oN(P));var O=oN(P),D=[];if(s&&D.push(R[T]<=0),a&&D.push(R[P]<=0,R[O]<=0),D.every((function(e){return e}))){x=k,S=!1;break}E.set(k,D)}if(S)for(var L=function(e){var t=w.find((function(t){var n=E.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return x=t,"break"},M=p?3:1;M>0;M--){if("break"===L(M))break}t.placement!==x&&(t.modifiersData[r]._skip=!0,t.placement=x,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function bN(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function _N(e){return[FC,UC,jC,VC].some((function(t){return e[t]>=0}))}const EN={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,s=void 0===i?[0,0]:i,o=YC.reduce((function(e,n){return e[n]=function(e,t,n){var r=fC(e),i=[VC,FC].indexOf(r)>=0?-1:1,s="function"===typeof n?n(Object.assign({},t,{placement:e})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[VC,UC].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}(n,t.rects,s),e}),{}),a=o[t.placement],c=a.x,l=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=o}};const SN={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,s=void 0===i||i,o=n.altAxis,a=void 0!==o&&o,c=n.boundary,l=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,f=void 0===d||d,p=n.tetherOffset,m=void 0===p?0:p,g=yN(t,{boundary:c,rootBoundary:l,padding:h,altBoundary:u}),v=fC(t.placement),y=ZC(t.placement),w=!y,b=OC(v),_="x"===b?"y":"x",E=t.modifiersData.popperOffsets,S=t.rects.reference,x=t.rects.popper,I="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,k="number"===typeof I?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,C={x:0,y:0};if(E){if(s){var N,A="y"===b?FC:VC,R="y"===b?jC:UC,P="y"===b?"height":"width",O=E[b],D=O+g[A],L=O-g[R],M=f?-x[P]/2:0,F=y===qC?S[P]:x[P],j=y===qC?-x[P]:-S[P],U=t.elements.arrow,V=f&&U?xC(U):{width:0,height:0},B=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},z=B[A],q=B[R],W=DC(0,S[P],V[P]),K=w?S[P]/2-M-W-z-k.mainAxis:F-W-z-k.mainAxis,H=w?-S[P]/2+M+W+q+k.mainAxis:j+W+q+k.mainAxis,G=t.elements.arrow&&PC(t.elements.arrow),Q=G?"y"===b?G.clientTop||0:G.clientLeft||0:0,$=null!=(N=null==T?void 0:T[b])?N:0,Y=O+H-$,J=DC(f?wC(D,O+K-$-Q):D,O,f?yC(L,Y):L);E[b]=J,C[b]=J-O}if(a){var X,Z="x"===b?FC:VC,ee="x"===b?jC:UC,te=E[_],ne="y"===_?"height":"width",re=te+g[Z],ie=te-g[ee],se=-1!==[FC,VC].indexOf(v),oe=null!=(X=null==T?void 0:T[_])?X:0,ae=se?re:te-S[ne]-x[ne]-oe+k.altAxis,ce=se?te+S[ne]+x[ne]-oe-k.altAxis:ie,le=f&&se?function(e,t,n){var r=DC(e,t,n);return r>n?n:r}(ae,te,ce):DC(f?ae:re,te,f?ce:ie);E[_]=le,C[_]=le-te}t.modifiersData[r]=C}},requiresIfExists:["offset"]};function xN(e,t,n){void 0===n&&(n=!1);var r=gC(t),i=gC(t)&&function(e){var t=e.getBoundingClientRect(),n=bC(t.width)/e.offsetWidth||1,r=bC(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),s=NC(t),o=SC(e,i,n),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!n)&&(("body"!==kC(t)||hN(s))&&(a=function(e){return e!==pC(e)&&gC(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:lN(e);var t}(t)),gC(t)?((c=SC(t,!0)).x+=t.clientLeft,c.y+=t.clientTop):s&&(c.x=uN(s))),{x:o.left+a.scrollLeft-c.x,y:o.top+a.scrollTop-c.y,width:o.width,height:o.height}}function IN(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function kN(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var TN={placement:"bottom",modifiers:[],strategy:"absolute"};function CN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function NN(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,s=void 0===i?TN:i;return function(e,t,n){void 0===n&&(n=s);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},TN,s),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],a=!1,c={state:i,setOptions:function(n){var a="function"===typeof n?n(i.options):n;l(),i.options=Object.assign({},s,i.options,a),i.scrollParents={reference:mC(e)?fN(e):e.contextElement?fN(e.contextElement):[],popper:fN(t)};var u=function(e){var t=IN(e);return JC.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=u.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,s=e.effect;if("function"===typeof s){var a=s({state:i,name:t,instance:c,options:r}),l=function(){};o.push(a||l)}})),c.update()},forceUpdate:function(){if(!a){var e=i.elements,t=e.reference,n=e.popper;if(CN(t,n)){i.rects={reference:xN(t,PC(n),"fixed"===i.options.strategy),popper:xC(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var s=i.orderedModifiers[r],o=s.fn,l=s.options,u=void 0===l?{}:l,h=s.name;"function"===typeof o&&(i=o({state:i,options:u,name:h,instance:c})||i)}else i.reset=!1,r=-1}}},update:kN((function(){return new Promise((function(e){c.forceUpdate(),e(i)}))})),destroy:function(){l(),a=!0}};if(!CN(e,t))return c;function l(){o.forEach((function(e){return e()})),o=[]}return c.setOptions(n).then((function(e){!a&&n.onFirstUpdate&&n.onFirstUpdate(e)})),c}}const AN=NN({defaultModifiers:[{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,o=yN(t,{elementContext:"reference"}),a=yN(t,{altBoundary:!0}),c=bN(o,r),l=bN(a,i,s),u=_N(c),h=_N(l);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=vN({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},nN,iN,EN,wN,SN,XC]}),RN=["enabled","placement","strategy","modifiers"];const PN={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},ON={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:e=>{let{state:t}=e;return()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const t=(e.getAttribute("aria-describedby")||"").split(",").filter((e=>e.trim()!==n.id));t.length?e.setAttribute("aria-describedby",t.join(",")):e.removeAttribute("aria-describedby")}}},fn:e=>{let{state:t}=e;var n;const{popper:r,reference:i}=t.elements,s=null==(n=r.getAttribute("role"))?void 0:n.toLowerCase();if(r.id&&"tooltip"===s&&"setAttribute"in i){const e=i.getAttribute("aria-describedby");if(e&&-1!==e.split(",").indexOf(r.id))return;i.setAttribute("aria-describedby",e?"".concat(e,",").concat(r.id):r.id)}}},DN=[];const LN=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{enabled:i=!0,placement:s="bottom",strategy:o="absolute",modifiers:a=DN}=n,c=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,RN);const l=(0,r.useRef)(a),u=(0,r.useRef)(),h=(0,r.useCallback)((()=>{var e;null==(e=u.current)||e.update()}),[]),d=(0,r.useCallback)((()=>{var e;null==(e=u.current)||e.forceUpdate()}),[]),[f,p]=dC((0,r.useState)({placement:s,update:h,forceUpdate:d,attributes:{},styles:{popper:{},arrow:{}}})),m=(0,r.useMemo)((()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:e=>{let{state:t}=e;const n={},r={};Object.keys(t.elements).forEach((e=>{n[e]=t.styles[e],r[e]=t.attributes[e]})),p({state:t,styles:n,attributes:r,update:h,forceUpdate:d,placement:t.placement})}})),[h,d,p]),g=(0,r.useMemo)((()=>(hC(l.current,a)||(l.current=a),l.current)),[a]);return(0,r.useEffect)((()=>{u.current&&i&&u.current.setOptions({placement:s,strategy:o,modifiers:[...g,m,PN]})}),[o,s,m,i,g]),(0,r.useEffect)((()=>{if(i&&null!=e&&null!=t)return u.current=AN(e,t,Object.assign({},c,{placement:s,strategy:o,modifiers:[...g,ON,m]})),()=>{null!=u.current&&(u.current.destroy(),u.current=void 0,p((e=>Object.assign({},e,{attributes:{},styles:{popper:{}}}))))}}),[i,e,t]),f},MN=!("undefined"===typeof window||!window.document||!window.document.createElement);var FN=!1,jN=!1;try{var UN={get passive(){return FN=!0},get once(){return jN=FN=!0}};MN&&(window.addEventListener("test",UN,UN),window.removeEventListener("test",UN,!0))}catch(HM){}const VN=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!jN){var i=r.once,s=r.capture,o=n;!jN&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,s),n.call(this,r)},n.__once=o),e.addEventListener(t,o,FN?r:s)}e.addEventListener(t,n,r)};const BN=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};const zN=function(e,t,n,r){return VN(e,t,n,r),function(){BN(e,t,n,r)}};function qN(e){return e&&e.ownerDocument||document}const WN=function(e){const t=(0,r.useRef)(e);return(0,r.useEffect)((()=>{t.current=e}),[e]),t};function KN(e){const t=WN(e);return(0,r.useCallback)((function(){return t.current&&t.current(...arguments)}),[t])}const HN=()=>{};const GN=e=>e&&("current"in e?e.current:e),QN={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};const $N=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:HN,{disabled:n,clickTrigger:i="click"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(0,r.useRef)(!1),o=(0,r.useRef)(!1),a=(0,r.useCallback)((t=>{const n=GN(e);var r;YT()(!!n,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),s.current=!n||!!((r=t).metaKey||r.altKey||r.ctrlKey||r.shiftKey)||!function(e){return 0===e.button}(t)||!!qT(n,t.target)||o.current,o.current=!1}),[e]),c=KN((t=>{const n=GN(e);n&&qT(n,t.target)&&(o.current=!0)})),l=KN((e=>{s.current||t(e)}));(0,r.useEffect)((()=>{var t,r;if(n||null==e)return;const s=qN(GN(e)),o=s.defaultView||window;let u=null!=(t=o.event)?t:null==(r=o.parent)?void 0:r.event,h=null;QN[i]&&(h=zN(s,QN[i],c,!0));const d=zN(s,i,a,!0),f=zN(s,i,(e=>{e!==u?l(e):u=void 0}));let p=[];return"ontouchstart"in s.documentElement&&(p=[].slice.call(s.body.children).map((e=>zN(e,"mousemove",HN)))),()=>{null==h||h(),d(),f(),p.forEach((e=>e()))}}),[e,n,i,a,c,l])};function YN(e){return"Escape"===e.code||27===e.keyCode}const JN=()=>{};const XN=function(e,t){let{disabled:n,clickTrigger:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=t||JN;$N(e,s,{disabled:n,clickTrigger:i});const o=KN((e=>{YN(e)&&s(e)}));(0,r.useEffect)((()=>{if(n||null==e)return;const t=qN(GN(e));let r=(t.defaultView||window).event;const i=zN(t,"keyup",(e=>{e!==r?o(e):r=void 0}));return()=>{i()}}),[e,n,o])},ZN=(0,r.createContext)(MN?window:void 0);ZN.Provider;function eA(){return(0,r.useContext)(ZN)}const tA=(e,t)=>MN?null==e?(t||qN()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function nA(e,t){const n=eA(),[i,s]=(0,r.useState)((()=>tA(e,null==n?void 0:n.document)));if(!i){const t=tA(e);t&&s(t)}return(0,r.useEffect)((()=>{t&&i&&t(i)}),[t,i]),(0,r.useEffect)((()=>{const t=tA(e);t!==i&&s(t)}),[e,i]),i}function rA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(e)?e:Object.keys(e).map((t=>(e[t].name=t,e[t])))}function iA(e){let{enabled:t,enableEvents:n,placement:r,flip:i,offset:s,fixed:o,containerPadding:a,arrowElement:c,popperConfig:l={}}=e;var u,h,d,f,p;const m=function(e){const t={};return Array.isArray(e)?(null==e||e.forEach((e=>{t[e.name]=e})),t):e||t}(l.modifiers);return Object.assign({},l,{placement:r,enabled:t,strategy:o?"fixed":l.strategy,modifiers:rA(Object.assign({},m,{eventListeners:{enabled:n,options:null==(u=m.eventListeners)?void 0:u.options},preventOverflow:Object.assign({},m.preventOverflow,{options:a?Object.assign({padding:a},null==(h=m.preventOverflow)?void 0:h.options):null==(d=m.preventOverflow)?void 0:d.options}),offset:{options:Object.assign({offset:s},null==(f=m.offset)?void 0:f.options)},arrow:Object.assign({},m.arrow,{enabled:!!c,options:Object.assign({},null==(p=m.arrow)?void 0:p.options,{element:c})}),flip:Object.assign({enabled:!!i},m.flip)}))})}const sA="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,oA="undefined"!==typeof document||sA?r.useLayoutEffect:r.useEffect;const aA=function(e){let{children:t,in:n,onExited:i,mountOnEnter:s,unmountOnExit:o}=e;const a=(0,r.useRef)(null),c=(0,r.useRef)(n),l=KN(i);(0,r.useEffect)((()=>{n?c.current=!0:l(a.current)}),[n,l]);const u=iC(a,t.ref),h=(0,r.cloneElement)(t,{ref:u});return n?h:o||!c.current&&s?null:h};function cA(e){let{children:t,in:n,onExited:i,onEntered:s,transition:o}=e;const[a,c]=(0,r.useState)(!n);n&&a&&c(!1);const l=function(e){let{in:t,onTransition:n}=e;const i=(0,r.useRef)(null),s=(0,r.useRef)(!0),o=KN(n);return oA((()=>{if(!i.current)return;let e=!1;return o({in:t,element:i.current,initial:s.current,isStale:()=>e}),()=>{e=!0}}),[t,o]),oA((()=>(s.current=!1,()=>{s.current=!0})),[]),i}({in:!!n,onTransition:e=>{Promise.resolve(o(e)).then((()=>{e.isStale()||(e.in?null==s||s(e.element,e.initial):(c(!0),null==i||i(e.element)))}),(t=>{throw e.in||c(!0),t}))}}),u=iC(l,t.ref);return a&&!n?null:(0,r.cloneElement)(t,{ref:u})}function lA(e,t,n){return e?(0,hr.jsx)(e,Object.assign({},n)):t?(0,hr.jsx)(cA,Object.assign({},n,{transition:t})):(0,hr.jsx)(aA,Object.assign({},n))}const uA=r.forwardRef(((e,t)=>{const{flip:n,offset:i,placement:s,containerPadding:o,popperConfig:a={},transition:c,runTransition:l}=e,[u,h]=cC(),[d,f]=cC(),p=iC(h,t),m=nA(e.container),g=nA(e.target),[v,y]=(0,r.useState)(!e.show),w=LN(g,u,iA({placement:s,enableEvents:!!e.show,containerPadding:o||5,flip:n,offset:i,arrowElement:d,popperConfig:a}));e.show&&v&&y(!1);const b=e.show||!v;if(XN(u,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!b)return null;const{onExit:_,onExiting:E,onEnter:S,onEntering:x,onEntered:I}=e;let k=e.children(Object.assign({},w.attributes.popper,{style:w.styles.popper,ref:p}),{popper:w,placement:s,show:!!e.show,arrowProps:Object.assign({},w.attributes.arrow,{style:w.styles.arrow,ref:f})});return k=lA(c,l,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:k,onExit:_,onExiting:E,onExited:function(){y(!0),e.onExited&&e.onExited(...arguments)},onEnter:S,onEntering:x,onEntered:I}),m?aC.createPortal(k,m):null}));uA.displayName="Overlay";const hA=uA;function dA(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}const fA=["xxl","xl","lg","md","sm","xs"],pA="xs",mA=r.createContext({prefixes:{},breakpoints:fA,minBreakpoint:pA}),{Consumer:gA,Provider:vA}=mA;function yA(e,t){const{prefixes:n}=(0,r.useContext)(mA);return e||n[t]||t}function wA(){const{dir:e}=(0,r.useContext)(mA);return"rtl"===e}const bA=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=yA(r,"popover-header"),(0,hr.jsx)(i,{ref:t,className:oC()(n,r),...s})}));bA.displayName="PopoverHeader";const _A=bA,EA=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=yA(r,"popover-body"),(0,hr.jsx)(i,{ref:t,className:oC()(n,r),...s})}));EA.displayName="PopoverBody";const SA=EA;r.Component;function xA(e,t){let n=e;return"left"===e?n=t?"end":"start":"right"===e&&(n=t?"start":"end"),n}function IA(){return{position:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"absolute",top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const kA=r.forwardRef(((e,t)=>{let{bsPrefix:n,placement:r="right",className:i,style:s,children:o,body:a,arrowProps:c,hasDoneInitialMeasure:l,popper:u,show:h,...d}=e;const f=yA(n,"popover"),p=wA(),[m]=(null==r?void 0:r.split("-"))||[],g=xA(m,p);let v=s;return h&&!l&&(v={...s,...IA(null==u?void 0:u.strategy)}),(0,hr.jsxs)("div",{ref:t,role:"tooltip",style:v,"x-placement":m,className:oC()(i,f,m&&"bs-popover-".concat(g)),...d,children:[(0,hr.jsx)("div",{className:"popover-arrow",...c}),a?(0,hr.jsx)(SA,{children:o}):o]})})),TA=Object.assign(kA,{Header:_A,Body:SA,POPPER_OFFSET:[0,8]}),CA=r.forwardRef(((e,t)=>{let{bsPrefix:n,placement:r="right",className:i,style:s,children:o,arrowProps:a,hasDoneInitialMeasure:c,popper:l,show:u,...h}=e;n=yA(n,"tooltip");const d=wA(),[f]=(null==r?void 0:r.split("-"))||[],p=xA(f,d);let m=s;return u&&!c&&(m={...s,...IA(null==l?void 0:l.strategy)}),(0,hr.jsxs)("div",{ref:t,style:m,role:"tooltip","x-placement":f,className:oC()(i,n,"bs-tooltip-".concat(p)),...h,children:[(0,hr.jsx)("div",{className:"tooltip-arrow",...a}),(0,hr.jsx)("div",{className:"".concat(n,"-inner"),children:o})]})}));CA.displayName="Tooltip";const NA=Object.assign(CA,{TOOLTIP_OFFSET:[0,6]});const AA=!1,RA=r.createContext(null);var PA="unmounted",OA="exited",DA="entering",LA="entered",MA="exiting",FA=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,s=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?s?(i=OA,r.appearStatus=DA):i=LA:i=t.unmountOnExit||t.mountOnEnter?PA:OA,r.state={status:i},r.nextCallback=null,r}s(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===PA?{status:OA}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==DA&&n!==LA&&(t=DA):n!==DA&&n!==LA||(t=MA)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===DA){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:aC.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===OA&&this.setState({status:PA})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[aC.findDOMNode(this),r],s=i[0],o=i[1],a=this.getTimeouts(),c=r?a.appear:a.enter;!e&&!n||AA?this.safeSetState({status:LA},(function(){t.props.onEntered(s)})):(this.props.onEnter(s,o),this.safeSetState({status:DA},(function(){t.props.onEntering(s,o),t.onTransitionEnd(c,(function(){t.safeSetState({status:LA},(function(){t.props.onEntered(s,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:aC.findDOMNode(this);t&&!AA?(this.props.onExit(r),this.safeSetState({status:MA},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:OA},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:OA},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:aC.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=i[0],o=i[1];this.props.addEndListener(s,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===PA)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,F(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(RA.Provider,{value:null},"function"===typeof n?n(e,i):r.cloneElement(r.Children.only(n),i))},t}(r.Component);function jA(){}FA.contextType=RA,FA.propTypes={},FA.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:jA,onEntering:jA,onEntered:jA,onExit:jA,onExiting:jA,onExited:jA},FA.UNMOUNTED=PA,FA.EXITED=OA,FA.ENTERING=DA,FA.ENTERED=LA,FA.EXITING=MA;const UA=FA;function VA(e,t){return function(e){var t=qN(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var BA=/([A-Z])/g;var zA=/^ms-/;function qA(e){return function(e){return e.replace(BA,"-$1").toLowerCase()}(e).replace(zA,"-ms-")}var WA=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const KA=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(qA(t))||VA(e).getPropertyValue(qA(t));Object.keys(t).forEach((function(i){var s=t[i];s||0===s?!function(e){return!(!e||!WA.test(e))}(i)?n+=qA(i)+": "+s+";":r+=i+"("+s+") ":e.style.removeProperty(qA(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};function HA(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),s=zN(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),s()}}function GA(e,t,n,r){null==n&&(n=function(e){var t=KA(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=HA(e,n,r),s=zN(e,"transitionend",t);return function(){i(),s()}}function QA(e,t){const n=KA(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function $A(e,t){const n=QA(e,"transitionDuration"),r=QA(e,"transitionDelay"),i=GA(e,(n=>{n.target===e&&(i(),t(n))}),n+r)}function YA(e){return e&&"setState"in e?aC.findDOMNode(e):null!=e?e:null}const JA=r.forwardRef(((e,t)=>{let{onEnter:n,onEntering:i,onEntered:s,onExit:o,onExiting:a,onExited:c,addEndListener:l,children:u,childRef:h,...d}=e;const f=(0,r.useRef)(null),p=iC(f,h),m=e=>{p(YA(e))},g=e=>t=>{e&&f.current&&e(f.current,t)},v=(0,r.useCallback)(g(n),[n]),y=(0,r.useCallback)(g(i),[i]),w=(0,r.useCallback)(g(s),[s]),b=(0,r.useCallback)(g(o),[o]),_=(0,r.useCallback)(g(a),[a]),E=(0,r.useCallback)(g(c),[c]),S=(0,r.useCallback)(g(l),[l]);return(0,hr.jsx)(UA,{ref:t,...d,onEnter:v,onEntered:w,onEntering:y,onExit:b,onExited:E,onExiting:_,addEndListener:S,nodeRef:f,children:"function"===typeof u?(e,t)=>u(e,{...t,ref:m}):r.cloneElement(u,{ref:m})})})),XA=JA,ZA={[DA]:"show",[LA]:"show"},eR=r.forwardRef(((e,t)=>{let{className:n,children:i,transitionClasses:s={},onEnter:o,...a}=e;const c={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},l=(0,r.useCallback)(((e,t)=>{!function(e){e.offsetHeight}(e),null==o||o(e,t)}),[o]);return(0,hr.jsx)(XA,{ref:t,addEndListener:$A,...c,onEnter:l,childRef:i.ref,children:(e,t)=>r.cloneElement(i,{...t,className:oC()("fade",n,i.props.className,ZA[e],s[e])})})}));eR.displayName="Fade";const tR=eR;const nR=r.forwardRef(((e,t)=>{let{children:n,transition:i=tR,popperConfig:s={},rootClose:o=!1,placement:a="top",show:c=!1,...l}=e;const u=(0,r.useRef)({}),[h,d]=(0,r.useState)(null),[f,p]=function(e){const t=(0,r.useRef)(null),n=yA(void 0,"popover"),i=yA(void 0,"tooltip"),s=(0,r.useMemo)((()=>({name:"offset",options:{offset:()=>{if(e)return e;if(t.current){if(dA(t.current,n))return TA.POPPER_OFFSET;if(dA(t.current,i))return NA.TOOLTIP_OFFSET}return[0,0]}}})),[e,n,i]);return[t,[s]]}(l.offset),m=iC(t,f),g=!0===i?tR:i||void 0,v=KN((e=>{d(e),null==s||null==s.onFirstUpdate||s.onFirstUpdate(e)}));return oA((()=>{h&&l.target&&(null==u.current.scheduleUpdate||u.current.scheduleUpdate())}),[h,l.target]),(0,r.useEffect)((()=>{c||d(null)}),[c]),(0,hr.jsx)(hA,{...l,ref:m,popperConfig:{...s,modifiers:p.concat(s.modifiers||[]),onFirstUpdate:v},transition:g,rootClose:o,placement:a,show:c,children:(e,t)=>{let{arrowProps:o,popper:a,show:c}=t;var l,d;!function(e,t){const{ref:n}=e,{ref:r}=t;e.ref=n.__wrapped||(n.__wrapped=e=>n(YA(e))),t.ref=r.__wrapped||(r.__wrapped=e=>r(YA(e)))}(e,o);const f=null==a?void 0:a.placement,p=Object.assign(u.current,{state:null==a?void 0:a.state,scheduleUpdate:null==a?void 0:a.update,placement:f,outOfBoundaries:(null==a||null==(l=a.state)||null==(d=l.modifiersData.hide)?void 0:d.isReferenceHidden)||!1,strategy:s.strategy}),m=!!h;return"function"===typeof n?n({...e,placement:f,show:c,...!i&&c&&{className:"show"},popper:p,arrowProps:o,hasDoneInitialMeasure:m}):r.cloneElement(n,{...e,placement:f,arrowProps:o,popper:p,hasDoneInitialMeasure:m,className:oC()(n.props.className,!i&&c&&"show"),style:{...n.props.style,...e.style}})}})}));nR.displayName="Overlay";const rR=nR;function iR(e,t,n){const[r]=t,i=r.currentTarget,s=r.relatedTarget||r.nativeEvent[n];s&&s===i||qT(i,s)||e(...t)}a().oneOf(["click","hover","focus"]);const sR=e=>{let{trigger:t=["hover","focus"],overlay:n,children:i,popperConfig:s={},show:o,defaultShow:a=!1,onToggle:c,delay:l,placement:u,flip:h=u&&-1!==u.indexOf("auto"),...d}=e;const f=(0,r.useRef)(null),p=iC(f,i.ref),m=QT(),g=(0,r.useRef)(""),[v,y]=ZT(o,a,c),w=function(e){return e&&"object"===typeof e?e:{show:e,hide:e}}(l),{onFocus:b,onBlur:_,onClick:E}="function"!==typeof i?r.Children.only(i).props:{},S=(0,r.useCallback)((()=>{m.clear(),g.current="show",w.show?m.set((()=>{"show"===g.current&&y(!0)}),w.show):y(!0)}),[w.show,y,m]),x=(0,r.useCallback)((()=>{m.clear(),g.current="hide",w.hide?m.set((()=>{"hide"===g.current&&y(!1)}),w.hide):y(!1)}),[w.hide,y,m]),I=(0,r.useCallback)((function(){S(),null==b||b(...arguments)}),[S,b]),k=(0,r.useCallback)((function(){x(),null==_||_(...arguments)}),[x,_]),T=(0,r.useCallback)((function(){y(!v),null==E||E(...arguments)}),[E,y,v]),C=(0,r.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];iR(S,t,"fromElement")}),[S]),N=(0,r.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];iR(x,t,"toElement")}),[x]),A=null==t?[]:[].concat(t),R={ref:e=>{p(YA(e))}};return-1!==A.indexOf("click")&&(R.onClick=T),-1!==A.indexOf("focus")&&(R.onFocus=I,R.onBlur=k),-1!==A.indexOf("hover")&&(R.onMouseOver=C,R.onMouseOut=N),(0,hr.jsxs)(hr.Fragment,{children:["function"===typeof i?i(R):(0,r.cloneElement)(i,R),(0,hr.jsx)(rR,{...d,show:v,onHide:x,flip:h,placement:u,popperConfig:s,target:f.current,children:n})]})},oR=r.forwardRef(((e,t)=>{let{bsPrefix:n,variant:r,animation:i="border",size:s,as:o="div",className:a,...c}=e;n=yA(n,"spinner");const l="".concat(n,"-").concat(i);return(0,hr.jsx)(o,{ref:t,...c,className:oC()(a,l,s&&"".concat(l,"-").concat(s),r&&"text-".concat(r))})}));oR.displayName="Spinner";const aR=oR,cR={[DA]:"showing",[MA]:"showing show"},lR=r.forwardRef(((e,t)=>(0,hr.jsx)(tR,{...e,ref:t,transitionClasses:cR})));lR.displayName="ToastFade";const uR=lR,hR={"aria-label":a().string,onClick:a().func,variant:a().oneOf(["white"])},dR=r.forwardRef(((e,t)=>{let{className:n,variant:r,"aria-label":i="Close",...s}=e;return(0,hr.jsx)("button",{ref:t,type:"button",className:oC()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":i,...s})}));dR.displayName="CloseButton",dR.propTypes=hR;const fR=dR,pR=r.createContext({onClose(){}}),mR=r.forwardRef(((e,t)=>{let{bsPrefix:n,closeLabel:i="Close",closeVariant:s,closeButton:o=!0,className:a,children:c,...l}=e;n=yA(n,"toast-header");const u=(0,r.useContext)(pR),h=KN((e=>{null==u||null==u.onClose||u.onClose(e)}));return(0,hr.jsxs)("div",{ref:t,...l,className:oC()(n,a),children:[c,o&&(0,hr.jsx)(fR,{"aria-label":i,variant:s,onClick:h,"data-dismiss":"toast"})]})}));mR.displayName="ToastHeader";const gR=mR,vR=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=yA(r,"toast-body"),(0,hr.jsx)(i,{ref:t,className:oC()(n,r),...s})}));vR.displayName="ToastBody";const yR=vR,wR=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,transition:s=uR,show:o=!0,animation:a=!0,delay:c=5e3,autohide:l=!1,onClose:u,onEntered:h,onExit:d,onExiting:f,onEnter:p,onEntering:m,onExited:g,bg:v,...y}=e;n=yA(n,"toast");const w=(0,r.useRef)(c),b=(0,r.useRef)(u);(0,r.useEffect)((()=>{w.current=c,b.current=u}),[c,u]);const _=QT(),E=!(!l||!o),S=(0,r.useCallback)((()=>{E&&(null==b.current||b.current())}),[E]);(0,r.useEffect)((()=>{_.set(S,w.current)}),[_,S]);const x=(0,r.useMemo)((()=>({onClose:u})),[u]),I=!(!s||!a),k=(0,hr.jsx)("div",{...y,ref:t,className:oC()(n,i,v&&"bg-".concat(v),!I&&(o?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return(0,hr.jsx)(pR.Provider,{value:x,children:I&&s?(0,hr.jsx)(s,{in:o,onEnter:p,onEntering:m,onEntered:h,onExit:d,onExiting:f,onExited:g,unmountOnExit:!0,children:k}):k})}));wR.displayName="Toast";const bR=Object.assign(wR,{Body:yR,Header:gR}),_R={baseUrl:"https://gutendex.com/books/"};function ER(e){let t="";return e.forEach((function(n,r){r<2&&(n=n.replace(/--/g,""),r+1===e.length||r+1===2?t+=n:t=t+n+"; ")})),t}function SR(e){let t="";return t=e.map((function(n,r){const i=(n.name.match(/,/g)||[]).length;if(n.name.includes("(")||n.name.includes(")")||1!==i)t=n.name;else{let i=n.name.split(", ");t=r+1===e.length?i[1]+" "+i[0]:i[1]+" "+i[0]+", "}return t})),t}function xR(){const e=Math.floor(100*Math.random())+155,t=Math.floor(100*Math.random())+155,n=Math.floor(100*Math.random())+155;return"rgb(".concat(e,",").concat(t,",").concat(n,")")}var IR;const kR=lr.button(IR||(IR=ve(['\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    width: 50px;\n    height: 50px;\n    border: none;\n    border-radius: 100%;\n    padding: 10px;\n    margin: 20px 15px;\n    box-shadow: 0 12px 16px rgba(0,0,0,0.4);\n    background-color: #ffffff;\n    color: #222222;\n    cursor: pointer;\n    transition: all 0.3s ease 0s;\n    position: relative; /*To properly place ripple for button feedback on active state*/\n\n    /*Styles when button is hovered*/\n    &:hover{\n       box-shadow: 0 3px 8px rgba(0,0,0,0.2);\n       background-color: #f2f2f2;\n    }\n\n    /*Styles when button is focused*/\n    &:focus{\n        outline: none;\n    }\n\n    /*Styles when button is active*/\n    &:active::after{\n        content: "";\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0,0,0,0.1);\n        border-radius: 100%;\n        transform: translate(-50%, -50%) scale(0); /*Starts scale from middle of button*/\n        animation: ripple 0.6s linear; /*Ripple effect when button is clicked/active state*/\n    }\n\n    /*Ripple effect animation*/\n    @keyframes ripple {\n     to {\n       transform: translate(-50%, -50%) scale(2); /*Ends scale covering button*/\n       opacity: 0;\n     }\n    }\n'])));var TR;function CR(e){if((!TR&&0!==TR||e)&&MN){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),TR=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return TR}function NR(e){void 0===e&&(e=qN());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(HM){return e.body}}function AR(e){const t=(0,r.useRef)(null);return(0,r.useEffect)((()=>{t.current=e})),t.current}const RR="data-rr-ui-";function PR(e){return"".concat(RR).concat(e)}const OR=PR("modal-open");const DR=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]="".concat(parseInt(KA(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(OR,""),KA(r,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(OR),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},LR=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let MR;function FR(e){const t=eA(),n=e||function(e){return MR||(MR=new DR({ownerDocument:null==e?void 0:e.document})),MR}(t),i=(0,r.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:(0,r.useCallback)((e=>{i.current.dialog=e}),[]),setBackdropRef:(0,r.useCallback)((e=>{i.current.backdrop=e}),[])})}const jR=(0,r.forwardRef)(((e,t)=>{let{show:n=!1,role:i="dialog",className:s,style:o,children:a,backdrop:c=!0,keyboard:l=!0,onBackdropClick:u,onEscapeKeyDown:h,transition:d,runTransition:f,backdropTransition:p,runBackdropTransition:m,autoFocus:g=!0,enforceFocus:v=!0,restoreFocus:y=!0,restoreFocusOptions:w,renderDialog:b,renderBackdrop:_=(e=>(0,hr.jsx)("div",Object.assign({},e))),manager:E,container:S,onShow:x,onHide:I=(()=>{}),onExit:k,onExited:T,onExiting:C,onEnter:N,onEntering:A,onEntered:R}=e,P=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,LR);const O=eA(),D=nA(S),L=FR(E),M=WT(),F=AR(n),[j,U]=(0,r.useState)(!n),V=(0,r.useRef)(null);(0,r.useImperativeHandle)(t,(()=>L),[L]),MN&&!F&&n&&(V.current=NR(null==O?void 0:O.document)),n&&j&&U(!1);const B=KN((()=>{if(L.add(),G.current=zN(document,"keydown",K),H.current=zN(document,"focus",(()=>setTimeout(q)),!0),x&&x(),g){var e,t;const n=NR(null!=(e=null==(t=L.dialog)?void 0:t.ownerDocument)?e:null==O?void 0:O.document);L.dialog&&n&&!qT(L.dialog,n)&&(V.current=n,L.dialog.focus())}})),z=KN((()=>{var e;(L.remove(),null==G.current||G.current(),null==H.current||H.current(),y)&&(null==(e=V.current)||null==e.focus||e.focus(w),V.current=null)}));(0,r.useEffect)((()=>{n&&D&&B()}),[n,D,B]),(0,r.useEffect)((()=>{j&&z()}),[j,z]),KT((()=>{z()}));const q=KN((()=>{if(!v||!M()||!L.isTopModal())return;const e=NR(null==O?void 0:O.document);L.dialog&&e&&!qT(L.dialog,e)&&L.dialog.focus()})),W=KN((e=>{e.target===e.currentTarget&&(null==u||u(e),!0===c&&I())})),K=KN((e=>{l&&YN(e)&&L.isTopModal()&&(null==h||h(e),e.defaultPrevented||I())})),H=(0,r.useRef)(),G=(0,r.useRef)();if(!D)return null;const Q=Object.assign({role:i,ref:L.setDialogRef,"aria-modal":"dialog"===i||void 0},P,{style:o,className:s,tabIndex:-1});let $=b?b(Q):(0,hr.jsx)("div",Object.assign({},Q,{children:r.cloneElement(a,{role:"document"})}));$=lA(d,f,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:k,onExiting:C,onExited:function(){U(!0),null==T||T(...arguments)},onEnter:N,onEntering:A,onEntered:R,children:$});let Y=null;return c&&(Y=_({ref:L.setBackdropRef,onClick:W}),Y=lA(p,m,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Y})),(0,hr.jsx)(hr.Fragment,{children:aC.createPortal((0,hr.jsxs)(hr.Fragment,{children:[Y,$]}),D)})}));jR.displayName="Modal";const UR=Object.assign(jR,{Manager:DR});var VR=Function.prototype.bind.call(Function.prototype.call,[].slice);function BR(e,t){return VR(e.querySelectorAll(t))}function zR(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const qR=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",WR=".sticky-top",KR=".navbar-toggler";class HR extends DR{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,KA(t,{[e]:"".concat(parseFloat(KA(t,e))+n,"px")})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],KA(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,r;if(r="modal-open",(n=t).classList?n.classList.add(r):dA(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";BR(t,qR).forEach((t=>this.adjustAndStore(i,t,e.scrollBarWidth))),BR(t,WR).forEach((t=>this.adjustAndStore(s,t,-e.scrollBarWidth))),BR(t,KR).forEach((t=>this.adjustAndStore(s,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,r;r="modal-open",(n=t).classList?n.classList.remove(r):"string"===typeof n.className?n.className=zR(n.className,r):n.setAttribute("class",zR(n.className&&n.className.baseVal||"",r));const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";BR(t,qR).forEach((e=>this.restore(i,e))),BR(t,WR).forEach((e=>this.restore(s,e))),BR(t,KR).forEach((e=>this.restore(s,e)))}}let GR;const QR=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=yA(r,"modal-body"),(0,hr.jsx)(i,{ref:t,className:oC()(n,r),...s})}));QR.displayName="ModalBody";const $R=QR,YR=r.createContext({onHide(){}}),JR=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,contentClassName:i,centered:s,size:o,fullscreen:a,children:c,scrollable:l,...u}=e;n=yA(n,"modal");const h="".concat(n,"-dialog"),d="string"===typeof a?"".concat(n,"-fullscreen-").concat(a):"".concat(n,"-fullscreen");return(0,hr.jsx)("div",{...u,ref:t,className:oC()(h,r,o&&"".concat(n,"-").concat(o),s&&"".concat(h,"-centered"),l&&"".concat(h,"-scrollable"),a&&d),children:(0,hr.jsx)("div",{className:oC()("".concat(n,"-content"),i),children:c})})}));JR.displayName="ModalDialog";const XR=JR,ZR=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=yA(r,"modal-footer"),(0,hr.jsx)(i,{ref:t,className:oC()(n,r),...s})}));ZR.displayName="ModalFooter";const eP=ZR,tP=r.forwardRef(((e,t)=>{let{closeLabel:n="Close",closeVariant:i,closeButton:s=!1,onHide:o,children:a,...c}=e;const l=(0,r.useContext)(YR),u=KN((()=>{null==l||l.onHide(),null==o||o()}));return(0,hr.jsxs)("div",{ref:t,...c,children:[a,s&&(0,hr.jsx)(fR,{"aria-label":n,variant:i,onClick:u})]})})),nP=tP,rP=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:s=!1,...o}=e;return n=yA(n,"modal-header"),(0,hr.jsx)(nP,{ref:t,...o,className:oC()(r,n),closeLabel:i,closeButton:s})}));rP.displayName="ModalHeader";const iP=rP,sP=(oP="h4",r.forwardRef(((e,t)=>(0,hr.jsx)("div",{...e,ref:t,className:oC()(e.className,oP)}))));var oP;const aP=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=sP,...s}=e;return r=yA(r,"modal-title"),(0,hr.jsx)(i,{ref:t,className:oC()(n,r),...s})}));aP.displayName="ModalTitle";const cP=aP;function lP(e){return(0,hr.jsx)(tR,{...e,timeout:null})}function uP(e){return(0,hr.jsx)(tR,{...e,timeout:null})}const hP=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,style:s,dialogClassName:o,contentClassName:a,children:c,dialogAs:l=XR,"data-bs-theme":u,"aria-labelledby":h,"aria-describedby":d,"aria-label":f,show:p=!1,animation:m=!0,backdrop:g=!0,keyboard:v=!0,onEscapeKeyDown:y,onShow:w,onHide:b,container:_,autoFocus:E=!0,enforceFocus:S=!0,restoreFocus:x=!0,restoreFocusOptions:I,onEntered:k,onExit:T,onExiting:C,onEnter:N,onEntering:A,onExited:R,backdropClassName:P,manager:O,...D}=e;const[L,M]=(0,r.useState)({}),[F,j]=(0,r.useState)(!1),U=(0,r.useRef)(!1),V=(0,r.useRef)(!1),B=(0,r.useRef)(null),[z,q]=cC(),W=iC(t,q),K=KN(b),H=wA();n=yA(n,"modal");const G=(0,r.useMemo)((()=>({onHide:K})),[K]);function Q(){return O||function(e){return GR||(GR=new HR(e)),GR}({isRTL:H})}function $(e){if(!MN)return;const t=Q().getScrollbarWidth()>0,n=e.scrollHeight>qN(e).documentElement.clientHeight;M({paddingRight:t&&!n?CR():void 0,paddingLeft:!t&&n?CR():void 0})}const Y=KN((()=>{z&&$(z.dialog)}));KT((()=>{BN(window,"resize",Y),null==B.current||B.current()}));const J=()=>{U.current=!0},X=e=>{U.current&&z&&e.target===z.dialog&&(V.current=!0),U.current=!1},Z=()=>{j(!0),B.current=GA(z.dialog,(()=>{j(!1)}))},ee=e=>{"static"!==g?V.current||e.target!==e.currentTarget?V.current=!1:null==b||b():(e=>{e.target===e.currentTarget&&Z()})(e)},te=(0,r.useCallback)((e=>(0,hr.jsx)("div",{...e,className:oC()("".concat(n,"-backdrop"),P,!m&&"show")})),[m,P,n]),ne={...s,...L};ne.display="block";return(0,hr.jsx)(YR.Provider,{value:G,children:(0,hr.jsx)(UR,{show:p,ref:W,backdrop:g,container:_,keyboard:!0,autoFocus:E,enforceFocus:S,restoreFocus:x,restoreFocusOptions:I,onEscapeKeyDown:e=>{v?null==y||y(e):(e.preventDefault(),"static"===g&&Z())},onShow:w,onHide:b,onEnter:(e,t)=>{e&&$(e),null==N||N(e,t)},onEntering:(e,t)=>{null==A||A(e,t),VN(window,"resize",Y)},onEntered:k,onExit:e=>{null==B.current||B.current(),null==T||T(e)},onExiting:C,onExited:e=>{e&&(e.style.display=""),null==R||R(e),BN(window,"resize",Y)},manager:Q(),transition:m?lP:void 0,backdropTransition:m?uP:void 0,renderBackdrop:te,renderDialog:e=>(0,hr.jsx)("div",{role:"dialog",...e,style:ne,className:oC()(i,n,F&&"".concat(n,"-static"),!m&&"show"),onClick:g?ee:void 0,onMouseUp:X,"data-bs-theme":u,"aria-label":f,"aria-labelledby":h,"aria-describedby":d,children:(0,hr.jsx)(l,{...D,onMouseDown:J,className:o,contentClassName:a,children:c})})})})}));hP.displayName="Modal";const dP=Object.assign(hP,{Body:$R,Header:iP,Title:cP,Footer:eP,Dialog:XR,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});function fP(e,t,n){const i=(0,r.useRef)(void 0!==e),[s,o]=(0,r.useState)(t),a=void 0!==e,c=i.current;return i.current=a,!a&&c&&s!==t&&o(t),[a?e:s,(0,r.useCallback)((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,...s]=t;let a=null==n?void 0:n(i,...s);return o(i),a}),[n])]}const pP=r.createContext(null),mP=["children"];const gP=()=>{};function vP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,r.useContext)(pP),[n,i]=cC(),s=(0,r.useRef)(!1),{flip:o,offset:a,rootCloseEvent:c,fixed:l=!1,placement:u,popperConfig:h={},enableEventListeners:d=!0,usePopper:f=!!t}=e,p=null==(null==t?void 0:t.show)?!!e.show:t.show;p&&!s.current&&(s.current=!0);const{placement:m,setMenu:g,menuElement:v,toggleElement:y}=t||{},w=LN(y,v,iA({placement:u||m||"bottom-start",enabled:f,enableEvents:null==d?p:d,offset:a,flip:o,fixed:l,arrowElement:n,popperConfig:h})),b=Object.assign({ref:g||gP,"aria-labelledby":null==y?void 0:y.id},w.attributes.popper,{style:w.styles.popper}),_={show:p,placement:m,hasShown:s.current,toggle:null==t?void 0:t.toggle,popper:f?w:null,arrowProps:f?Object.assign({ref:i},w.attributes.arrow,{style:w.styles.arrow}):{}};return $N(v,(e=>{null==t||t.toggle(!1,e)}),{clickTrigger:c,disabled:!p}),[b,_]}function yP(e){let{children:t}=e,n=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,mP);const[r,i]=vP(n);return(0,hr.jsx)(hr.Fragment,{children:t(r,i)})}yP.displayName="DropdownMenu",yP.defaultProps={usePopper:!0};const wP=yP,bP={prefix:String(Math.round(1e10*Math.random())),current:0},_P=r.createContext(bP),EP=r.createContext(!1);let SP=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement),xP=new WeakMap;function IP(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r.useContext)(_P),n=(0,r.useRef)(null);if(null===n.current&&!e){var i,s;let e=null===(s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===s||null===(i=s.ReactCurrentOwner)||void 0===i?void 0:i.current;if(e){let n=xP.get(e);null==n?xP.set(e,{id:t.current,state:e.memoizedState}):e.memoizedState!==n.state&&(t.current=n.id,xP.delete(e))}n.current=++t.current}return n.current}const kP="function"===typeof r.useId?function(e){let t=r.useId(),[n]=(0,r.useState)("function"===typeof r.useSyncExternalStore?r.useSyncExternalStore(NP,TP,CP):(0,r.useContext)(EP)),i=n?"react-aria":"react-aria".concat(bP.prefix);return e||"".concat(i,"-").concat(t)}:function(e){let t=(0,r.useContext)(_P);t!==bP||SP||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=IP(!!e),i="react-aria".concat(t.prefix);return e||"".concat(i,"-").concat(n)};function TP(){return!1}function CP(){return!0}function NP(e){return()=>{}}const AP=e=>{var t;return"menu"===(null==(t=e.getAttribute("role"))?void 0:t.toLowerCase())},RP=()=>{};function PP(){const e=kP(),{show:t=!1,toggle:n=RP,setToggle:i,menuElement:s}=(0,r.useContext)(pP)||{},o=(0,r.useCallback)((e=>{n(!t,e)}),[t,n]),a={id:e,ref:i||RP,onClick:o,"aria-expanded":!!t};return s&&AP(s)&&(a["aria-haspopup"]=!0),[a,{show:t,toggle:n}]}function OP(e){let{children:t}=e;const[n,r]=PP();return(0,hr.jsx)(hr.Fragment,{children:t(n,r)})}OP.displayName="DropdownToggle";const DP=OP,LP=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},MP=r.createContext(null),FP=r.createContext(null);FP.displayName="NavContext";const jP=FP,UP=["as","disabled"];function VP(e){let{tagName:t,disabled:n,href:r,target:i,rel:s,role:o,onClick:a,tabIndex:c=0,type:l}=e;t||(t=null!=r||null!=i||null!=s?"a":"button");const u={tagName:t};if("button"===t)return[{type:l||"button",disabled:n},u];const h=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==a||a(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:c,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?s:void 0,onClick:h,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),h(e))}},u]}const BP=r.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,UP);const[s,{tagName:o}]=VP(Object.assign({tagName:n,disabled:r},i));return(0,hr.jsx)(o,Object.assign({},i,s,{ref:t}))}));BP.displayName="Button";const zP=BP,qP=["eventKey","disabled","onClick","active","as"];function WP(e){let{key:t,href:n,active:i,disabled:s,onClick:o}=e;const a=(0,r.useContext)(MP),c=(0,r.useContext)(jP),{activeKey:l}=c||{},u=LP(t,n),h=null==i&&null!=t?LP(l)===u:i;return[{onClick:KN((e=>{s||(null==o||o(e),a&&!e.isPropagationStopped()&&a(u,e))})),"aria-disabled":s||void 0,"aria-selected":h,[PR("dropdown-item")]:""},{isActive:h}]}const KP=r.forwardRef(((e,t)=>{let{eventKey:n,disabled:r,onClick:i,active:s,as:o=zP}=e,a=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,qP);const[c]=WP({key:n,href:a.href,disabled:r,onClick:i,active:s});return(0,hr.jsx)(o,Object.assign({},a,{ref:t},c))}));KP.displayName="DropdownItem";const HP=KP;function GP(){const e=function(){const[,e]=(0,r.useReducer)((e=>!e),!1);return e}(),t=(0,r.useRef)(null),n=(0,r.useCallback)((n=>{t.current=n,e()}),[e]);return[t,n]}function QP(e){let{defaultShow:t,show:n,onSelect:i,onToggle:s,itemSelector:o="* [".concat(PR("dropdown-item"),"]"),focusFirstItemOnShow:a,placement:c="bottom-start",children:l}=e;const u=eA(),[h,d]=fP(n,t,s),[f,p]=GP(),m=f.current,[g,v]=GP(),y=g.current,w=AR(h),b=(0,r.useRef)(null),_=(0,r.useRef)(!1),E=(0,r.useContext)(MP),S=(0,r.useCallback)((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?void 0:t.type;d(e,{originalEvent:t,source:n})}),[d]),x=KN(((e,t)=>{null==i||i(e,t),S(!1,t,"select"),t.isPropagationStopped()||null==E||E(e,t)})),I=(0,r.useMemo)((()=>({toggle:S,placement:c,show:h,menuElement:m,toggleElement:y,setMenu:p,setToggle:v})),[S,c,h,m,y,p,v]);m&&w&&!h&&(_.current=m.contains(m.ownerDocument.activeElement));const k=KN((()=>{y&&y.focus&&y.focus()})),T=KN((()=>{const e=b.current;let t=a;if(null==t&&(t=!(!f.current||!AP(f.current))&&"keyboard"),!1===t||"keyboard"===t&&!/^key.+$/.test(e))return;const n=BR(f.current,o)[0];n&&n.focus&&n.focus()}));(0,r.useEffect)((()=>{h?T():_.current&&(_.current=!1,k())}),[h,_,k,T]),(0,r.useEffect)((()=>{b.current=null}));const C=(e,t)=>{if(!f.current)return null;const n=BR(f.current,o);let r=n.indexOf(e)+t;return r=Math.max(0,Math.min(r,n.length)),n[r]};return function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=KN(n);(0,r.useEffect)((()=>{const n="function"===typeof e?e():e;return n.addEventListener(t,s,i),()=>n.removeEventListener(t,s,i)}),[e])}((0,r.useCallback)((()=>u.document),[u]),"keydown",(e=>{var t,n;const{key:r}=e,i=e.target,s=null==(t=f.current)?void 0:t.contains(i),o=null==(n=g.current)?void 0:n.contains(i);if(/input|textarea/i.test(i.tagName)&&(" "===r||"Escape"!==r&&s||"Escape"===r&&"search"===i.type))return;if(!s&&!o)return;if("Tab"===r&&(!f.current||!h))return;b.current=e.type;const a={originalEvent:e,source:e.type};switch(r){case"ArrowUp":{const t=C(i,-1);return t&&t.focus&&t.focus(),void e.preventDefault()}case"ArrowDown":if(e.preventDefault(),h){const e=C(i,1);e&&e.focus&&e.focus()}else d(!0,a);return;case"Tab":VN(i.ownerDocument,"keyup",(e=>{var t;("Tab"!==e.key||e.target)&&null!=(t=f.current)&&t.contains(e.target)||d(!1,a)}),{once:!0});break;case"Escape":"Escape"===r&&(e.preventDefault(),e.stopPropagation()),d(!1,a)}})),(0,hr.jsx)(MP.Provider,{value:x,children:(0,hr.jsx)(pP.Provider,{value:I,children:l})})}QP.displayName="Dropdown",QP.Menu=wP,QP.Toggle=DP,QP.Item=HP;const $P=QP,YP=r.createContext({});YP.displayName="DropdownContext";const JP=YP,XP=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="hr",role:s="separator",...o}=e;return r=yA(r,"dropdown-divider"),(0,hr.jsx)(i,{ref:t,className:oC()(n,r),role:s,...o})}));XP.displayName="DropdownDivider";const ZP=XP,eO=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",role:s="heading",...o}=e;return r=yA(r,"dropdown-header"),(0,hr.jsx)(i,{ref:t,className:oC()(n,r),role:s,...o})}));eO.displayName="DropdownHeader";const tO=eO;new WeakMap;const nO=["onKeyDown"];const rO=r.forwardRef(((e,t)=>{let{onKeyDown:n}=e,r=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,nO);const[i]=VP(Object.assign({tagName:"a"},r)),s=KN((e=>{i.onKeyDown(e),null==n||n(e)}));return(o=r.href)&&"#"!==o.trim()&&"button"!==r.role?(0,hr.jsx)("a",Object.assign({ref:t},r,{onKeyDown:n})):(0,hr.jsx)("a",Object.assign({ref:t},r,i,{onKeyDown:s}));var o}));rO.displayName="Anchor";const iO=rO,sO=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,eventKey:i,disabled:s=!1,onClick:o,active:a,as:c=iO,...l}=e;const u=yA(n,"dropdown-item"),[h,d]=WP({key:i,href:l.href,disabled:s,onClick:o,active:a});return(0,hr.jsx)(c,{...l,...h,ref:t,className:oC()(r,u,d.isActive&&"active",s&&"disabled")})}));sO.displayName="DropdownItem";const oO=sO,aO=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="span",...s}=e;return r=yA(r,"dropdown-item-text"),(0,hr.jsx)(i,{ref:t,className:oC()(n,r),...s})}));aO.displayName="DropdownItemText";const cO=aO,lO=r.createContext(null);lO.displayName="InputGroupContext";const uO=lO,hO=r.createContext(null);hO.displayName="NavbarContext";const dO=hO;function fO(e,t){return e}function pO(e,t,n){let r=e?n?"bottom-start":"bottom-end":n?"bottom-end":"bottom-start";return"up"===t?r=e?n?"top-start":"top-end":n?"top-end":"top-start":"end"===t?r=e?n?"left-end":"right-end":n?"left-start":"right-start":"start"===t?r=e?n?"right-end":"left-end":n?"right-start":"left-start":"down-centered"===t?r="bottom":"up-centered"===t&&(r="top"),r}const mO=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,align:s,rootCloseEvent:o,flip:a=!0,show:c,renderOnMount:l,as:u="div",popperConfig:h,variant:d,...f}=e,p=!1;const m=(0,r.useContext)(dO),g=yA(n,"dropdown-menu"),{align:v,drop:y,isRTL:w}=(0,r.useContext)(JP);s=s||v;const b=(0,r.useContext)(uO),_=[];if(s)if("object"===typeof s){const e=Object.keys(s);if(e.length){const t=e[0],n=s[t];p="start"===n,_.push("".concat(g,"-").concat(t,"-").concat(n))}}else"end"===s&&(p=!0);const E=pO(p,y,w),[S,{hasShown:x,popper:I,show:k,toggle:T}]=vP({flip:a,rootCloseEvent:o,show:c,usePopper:!m&&0===_.length,offset:[0,2],popperConfig:h,placement:E});if(S.ref=iC(fO(t),S.ref),oA((()=>{k&&(null==I||I.update())}),[k]),!x&&!l&&!b)return null;"string"!==typeof u&&(S.show=k,S.close=()=>null==T?void 0:T(!1),S.align=s);let C=f.style;return null!=I&&I.placement&&(C={...f.style,...S.style},f["x-placement"]=I.placement),(0,hr.jsx)(u,{...f,...S,style:C,...(_.length||m)&&{"data-bs-popper":"static"},className:oC()(i,g,k&&"show",p&&"".concat(g,"-end"),d&&"".concat(g,"-").concat(d),..._)})}));mO.displayName="DropdownMenu";const gO=mO,vO=r.forwardRef(((e,t)=>{let{as:n,bsPrefix:r,variant:i="primary",size:s,active:o=!1,disabled:a=!1,className:c,...l}=e;const u=yA(r,"btn"),[h,{tagName:d}]=VP({tagName:n,disabled:a,...l}),f=d;return(0,hr.jsx)(f,{...h,...l,ref:t,disabled:a,className:oC()(c,u,o&&"active",i&&"".concat(u,"-").concat(i),s&&"".concat(u,"-").concat(s),l.href&&a&&"disabled")})}));vO.displayName="Button";const yO=vO,wO=r.forwardRef(((e,t)=>{let{bsPrefix:n,split:i,className:s,childBsPrefix:o,as:a=yO,...c}=e;const l=yA(n,"dropdown-toggle"),u=(0,r.useContext)(pP);void 0!==o&&(c.bsPrefix=o);const[h]=PP();return h.ref=iC(h.ref,fO(t)),(0,hr.jsx)(a,{className:oC()(s,l,i&&"".concat(l,"-split"),(null==u?void 0:u.show)&&"show"),...h,...c})}));wO.displayName="DropdownToggle";const bO=wO,_O=r.forwardRef(((e,t)=>{const{bsPrefix:n,drop:i="down",show:s,className:o,align:a="start",onSelect:l,onToggle:u,focusFirstItemOnShow:h,as:d="div",navbar:f,autoClose:p=!0,...m}=function(e,t){return Object.keys(t).reduce((function(n,r){var i,s=n,o=s[JT(r)],a=s[r],l=F(s,[JT(r),r].map(XT)),u=t[r],h=ZT(a,o,e[u]),d=h[0],f=h[1];return c({},l,((i={})[r]=d,i[u]=f,i))}),e)}(e,{show:"onToggle"}),g=(0,r.useContext)(uO),v=yA(n,"dropdown"),y=wA(),w=KN(((e,t)=>{var n,r;var i;(null==(n=t.originalEvent)||null==(r=n.target)?void 0:r.classList.contains("dropdown-toggle"))&&"mousedown"===t.source||(t.originalEvent.currentTarget!==document||"keydown"===t.source&&"Escape"!==t.originalEvent.key||(t.source="rootClose"),i=t.source,(!1===p?"click"===i:"inside"===p?"rootClose"!==i:"outside"!==p||"select"!==i)&&(null==u||u(e,t)))})),b=pO("end"===a,i,y),_=(0,r.useMemo)((()=>({align:a,drop:i,isRTL:y})),[a,i,y]),E={down:v,"down-centered":"".concat(v,"-center"),up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return(0,hr.jsx)(JP.Provider,{value:_,children:(0,hr.jsx)($P,{placement:b,show:s,onSelect:l,onToggle:w,focusFirstItemOnShow:h,itemSelector:".".concat(v,"-item:not(.disabled):not(:disabled)"),children:g?m.children:(0,hr.jsx)(d,{...m,ref:t,className:oC()(o,s&&"show",E[i])})})})}));_O.displayName="Dropdown";const EO=Object.assign(_O,{Toggle:bO,Menu:gO,Item:oO,ItemText:cO,Divider:ZP,Header:tO});var SO;const xO=lr.button(SO||(SO=ve(["        \n    display: inline-block;\n    outline: none;\n    cursor: pointer;\n    font-size: 16px;\n    line-height: 20px;\n    font-weight: 600;\n    border-radius: 8px;\n    padding: 13px 23px;\n    border: 1px solid #222222;\n    transition: box-shadow 0.2s ease 0s, -ms-transform 0.1s ease 0s, -webkit-transform 0.1s ease 0s, transform 0.1s ease 0s;\n    color: #222222;\n    :hover {\n        border-color: #000000;\n        background: #f7f7f7;\n    }\n"])));var IO,kO,TO,CO;const NO=lr.form(IO||(IO=ve(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-around;\n  height: 150px;\n"]))),AO=lr.div(kO||(kO=ve(["\n  display: flex;\n  justify-content: flex-end;\n"]))),RO=lr.div(TO||(TO=ve(["\n  display: flex;\n  align-items: center; \n  justify-content: space-between;\n  flex: 1;\n  width: 90%;\n"]))),PO=lr.label(CO||(CO=ve(["\n  flex: 1;\n"]))),OO=e=>{let{showModal:t,authorYearStart:n,authorYearEnd:r,topics:i,handleDropdownPeriods:s,handleDropdownTopics:o,submitForm:a}=e;return(0,hr.jsx)(dP,{style:{marginTop:"200px"},show:t,children:(0,hr.jsxs)(dP.Body,{children:[(0,hr.jsxs)(NO,{children:[(0,hr.jsxs)(RO,{children:[(0,hr.jsx)(PO,{className:"col-form-label-sm",style:{marginRight:"20px"},children:"Literary Periods: "}),(0,hr.jsxs)(EO,{variant:"btn-sm",children:[(0,hr.jsxs)(EO.Toggle,{variant:"secondary btn-sm",id:"dropdown-periods",style:{width:"200px"},children:[n," - ",r]}),(0,hr.jsxs)(EO.Menu,{className:"font12",children:[(0,hr.jsx)(EO.Item,{className:"font12",onClick:()=>s(500,1500),children:"Medieval (500 - 1500)"}),(0,hr.jsx)(EO.Item,{className:"font12",onClick:()=>s(1500,1700),children:"Renaissance (1500 - 1700)"}),(0,hr.jsx)(EO.Item,{className:"font12",onClick:()=>s(1700,1800),children:"Enlightenment (1700 - 1800)"}),(0,hr.jsx)(EO.Item,{className:"font12",onClick:()=>s(1800,1870),children:"Romantic Period (1800 - 1870)"}),(0,hr.jsx)(EO.Item,{className:"font12",onClick:()=>s(1900,1965),children:"Modernism (1900 - 1965)"})]})]})]}),(0,hr.jsxs)(RO,{children:[(0,hr.jsx)(PO,{className:"col-form-label-sm",style:{marginRight:"20px"},children:"Topics: "}),(0,hr.jsxs)(EO,{variant:"btn-sm",children:[(0,hr.jsx)(EO.Toggle,{variant:"secondary btn-sm",id:"dropdown-topic",style:{width:"200px"},children:i}),(0,hr.jsxs)(EO.Menu,{className:"font12",children:[(0,hr.jsx)(EO.Item,{onClick:()=>o("All"),className:"font12",children:"All"}),(0,hr.jsx)(EO.Item,{onClick:()=>o("History"),className:"font12",children:"History"}),(0,hr.jsx)(EO.Item,{onClick:()=>o("Science"),className:"font12",children:"Science"}),(0,hr.jsx)(EO.Item,{onClick:()=>o("Religion"),className:"font12",children:"Religion"}),(0,hr.jsx)(EO.Item,{onClick:()=>o("Philosophy"),className:"font12",children:"Philosophy"}),(0,hr.jsx)(EO.Item,{onClick:()=>o("Fiction"),className:"font12",children:"Fiction"})]})]})]})]}),(0,hr.jsx)(AO,{children:(0,hr.jsx)(xO,{onClick:a,children:"Submit"})})]})})};var DO,LO,MO,FO;class jO extends r.Component{constructor(e){super(e),this.handleDropdownPeriods=(e,t)=>{this.setState({author_year_start:e,author_year_end:t})},this.handleDropdownTopics=e=>{this.setState({topics:e})},this.submitForm=async e=>{e.preventDefault(),this.setState({book:[],books:[]},(async()=>{await this.callAPI(),this.setState({showModal:!1})}))},this.callAPI=async()=>{this.setState({isLoading:!0}),this.state.books&&this.state.books.length>0?this.selectRandomBook():await this.fetchRandomPage()},this.fetchRandomPage=async()=>{const e="All"===this.state.topics?"":"topic=".concat(this.state.topics,"&"),t="All"===this.state.topics?Math.floor(15*Math.random()):1,n="".concat(_R.baseUrl,"?")+"author_year_start=".concat(this.state.author_year_start,"&")+"author_year_end=".concat(this.state.author_year_end,"&")+e+"page=".concat(t);fetch(n,{signal:this.abortController.signal}).then((e=>e.json())).then((e=>{e&&e.results&&e.results.length>0?this.setState({books:e.results},this.selectRandomBook):this.fetchRandomPage()}),(e=>{this.setState({isLoaded:!0,error:e})}))},this._isMounted=!1,this.state={showToast:!1,book:[],books:[],authors:"",title:"",subject:"",genre:"",background:"",isLoading:!1,showModal:!1,author_year_start:1700,author_year_end:1800,topics:"All"},this.submitForm=this.submitForm.bind(this)}componentDidMount(){this._isMounted=!0,this.abortController=new AbortController,this.callAPI()}componentWillUnmount(){this._isMounted=!1,this.abortController.abort()}handleClickNext(){this.callAPI()}handleClickSave(){if(this.props.currentUser)try{(async()=>{this._isMounted&&Hk.collection("users").doc(this.props.currentUser.id).collection("books").add({title:this.state.title,authors:this.state.authors,subject:this.state.subject,genre:this.state.genre,background:this.state.background,hasRated:!1,createAt:Date()})})(),this.handleClickNext()}catch(e){console.log(e)}else this.setState({showToast:!0})}selectRandomBook(){if(this.state.books.length>0){const t=Math.floor(Math.random()*this.state.books.length),n=this.state.books[t],r=this.state.books.filter(((e,n)=>n!==t));this.setState({book:n,title:(e=n.title,e||""),authors:SR(n.authors),subject:ER(n.subjects),genre:ER(n.bookshelves),background:xR(),books:r,isLoading:!1},(()=>{0===this.state.books.length&&this.setState({topics:"All"},(async()=>{await this.callAPI()}))}))}var e}render(){return(0,hr.jsxs)(UO,{children:[this.state.isLoading?(0,hr.jsx)(_T,{children:(0,hr.jsx)(zO,{})}):(0,hr.jsx)(NT,{title:this.state.title,authors:this.state.authors,subject:this.state.subject,genre:this.state.genre,background:this.state.background,isLoading:this.isLoading}),(0,hr.jsxs)(VO,{children:[(0,hr.jsx)(sR,{placement:"top",overlay:(0,hr.jsx)(NA,{children:"Settings"}),children:(0,hr.jsx)(kR,{onClick:()=>this.setState({showModal:!0}),children:this.state.isLoading?(0,hr.jsx)(aR,{}):(0,hr.jsxs)("div",{className:"font13",children:[" ",(0,hr.jsx)(zT,{})," "]})})}),(0,hr.jsx)(sR,{placement:"top",overlay:(0,hr.jsx)(NA,{children:"Save"}),children:(0,hr.jsx)(kR,{id:"btnBookMark",onClick:()=>this.handleClickSave(),children:this.state.isLoading?(0,hr.jsx)(aR,{}):(0,hr.jsxs)("div",{className:"font13",children:[" ",(0,hr.jsx)(VT,{})," "]})})}),(0,hr.jsx)(sR,{placement:"top",overlay:(0,hr.jsx)(NA,{children:"Next"}),children:(0,hr.jsx)(kR,{id:"btnNext",onClick:()=>this.handleClickNext(),disabled:this.state.isLoading,children:this.state.isLoading?(0,hr.jsx)(aR,{}):(0,hr.jsxs)("div",{className:"font13",children:[" ",(0,hr.jsx)(jT,{})," "]})})})]}),(0,hr.jsxs)(bR,{show:this.state.showToast,onClose:()=>this.setState({showToast:!1}),style:{position:"absolute",top:120,right:20},children:[(0,hr.jsx)(bR.Header,{className:"d-flex justify-content-between font12",children:(0,hr.jsx)("strong",{className:"mr-auto",children:"Sign in Reminder"})}),(0,hr.jsx)(bR.Body,{className:"font12",children:"Please sign in to save the book in the bookshelf."})]}),(0,hr.jsx)(OO,{showModal:this.state.showModal,authorYearStart:this.state.author_year_start,authorYearEnd:this.state.author_year_end,topics:this.state.topics,handleDropdownPeriods:this.handleDropdownPeriods,handleDropdownTopics:this.handleDropdownTopics,submitForm:this.submitForm})]})}}const UO=lr.div(DO||(DO=ve(["\n  display: flex;\n  height: 100vh;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]))),VO=lr.div(LO||(LO=ve(["\n  display: flex;\n  justify-content: flex-end;\n"]))),BO=ur(MO||(MO=ve(["\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n"]))),zO=lr.div(FO||(FO=ve(["\n  border: 4px solid rgba(0, 0, 0, 0.1);\n  border-top: 4px solid #333;\n  border-radius: 50%;\n  width: 30px;\n  height: 30px;\n  animation: "," 1s linear infinite;\n"])),BO),qO=jO;const WO=n.p+"static/media/empty.d8b54aebec93fdf83b956c93284bfcb7.svg";const KO=function(e){return(0,hr.jsx)("img",{src:WO,alt:"",style:{height:"80px"}})};var HO=n(104);const GO={type:a().string,tooltip:a().bool,as:a().elementType},QO=r.forwardRef(((e,t)=>{let{as:n="div",className:r,type:i="valid",tooltip:s=!1,...o}=e;return(0,hr.jsx)(n,{...o,ref:t,className:oC()(r,"".concat(i,"-").concat(s?"tooltip":"feedback"))})}));QO.displayName="Feedback",QO.propTypes=GO;const $O=QO,YO=r.createContext({}),JO=r.forwardRef(((e,t)=>{let{id:n,bsPrefix:i,className:s,type:o="checkbox",isValid:a=!1,isInvalid:c=!1,as:l="input",...u}=e;const{controlId:h}=(0,r.useContext)(YO);return i=yA(i,"form-check-input"),(0,hr.jsx)(l,{...u,ref:t,type:o,id:n||h,className:oC()(s,i,a&&"is-valid",c&&"is-invalid")})}));JO.displayName="FormCheckInput";const XO=JO,ZO=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,htmlFor:s,...o}=e;const{controlId:a}=(0,r.useContext)(YO);return n=yA(n,"form-check-label"),(0,hr.jsx)("label",{...o,ref:t,htmlFor:s||a,className:oC()(i,n)})}));ZO.displayName="FormCheckLabel";const eD=ZO;const tD=r.forwardRef(((e,t)=>{let{id:n,bsPrefix:i,bsSwitchPrefix:s,inline:o=!1,reverse:a=!1,disabled:c=!1,isValid:l=!1,isInvalid:u=!1,feedbackTooltip:h=!1,feedback:d,feedbackType:f,className:p,style:m,title:g="",type:v="checkbox",label:y,children:w,as:b="input",..._}=e;i=yA(i,"form-check"),s=yA(s,"form-switch");const{controlId:E}=(0,r.useContext)(YO),S=(0,r.useMemo)((()=>({controlId:n||E})),[E,n]),x=!w&&null!=y&&!1!==y||function(e,t){return r.Children.toArray(e).some((e=>r.isValidElement(e)&&e.type===t))}(w,eD),I=(0,hr.jsx)(XO,{..._,type:"switch"===v?"checkbox":v,ref:t,isValid:l,isInvalid:u,disabled:c,as:b});return(0,hr.jsx)(YO.Provider,{value:S,children:(0,hr.jsx)("div",{style:m,className:oC()(p,x&&i,o&&"".concat(i,"-inline"),a&&"".concat(i,"-reverse"),"switch"===v&&s),children:w||(0,hr.jsxs)(hr.Fragment,{children:[I,x&&(0,hr.jsx)(eD,{title:g,children:y}),d&&(0,hr.jsx)($O,{type:f,tooltip:h,children:d})]})})})}));tD.displayName="FormCheck";const nD=Object.assign(tD,{Input:XO,Label:eD}),rD=r.forwardRef(((e,t)=>{let{bsPrefix:n,type:i,size:s,htmlSize:o,id:a,className:c,isValid:l=!1,isInvalid:u=!1,plaintext:h,readOnly:d,as:f="input",...p}=e;const{controlId:m}=(0,r.useContext)(YO);return n=yA(n,"form-control"),(0,hr.jsx)(f,{...p,type:i,size:o,ref:t,readOnly:d,id:a||m,className:oC()(c,h?"".concat(n,"-plaintext"):n,s&&"".concat(n,"-").concat(s),"color"===i&&"".concat(n,"-color"),l&&"is-valid",u&&"is-invalid")})}));rD.displayName="FormControl";const iD=Object.assign(rD,{Feedback:$O}),sD=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=yA(r,"form-floating"),(0,hr.jsx)(i,{ref:t,className:oC()(n,r),...s})}));sD.displayName="FormFloating";const oD=sD,aD=r.forwardRef(((e,t)=>{let{controlId:n,as:i="div",...s}=e;const o=(0,r.useMemo)((()=>({controlId:n})),[n]);return(0,hr.jsx)(YO.Provider,{value:o,children:(0,hr.jsx)(i,{...s,ref:t})})}));aD.displayName="FormGroup";const cD=aD;function lD(e){let{as:t,bsPrefix:n,className:i,...s}=e;n=yA(n,"col");const o=function(){const{breakpoints:e}=(0,r.useContext)(mA);return e}(),a=function(){const{minBreakpoint:e}=(0,r.useContext)(mA);return e}(),c=[],l=[];return o.forEach((e=>{const t=s[e];let r,i,o;delete s[e],"object"===typeof t&&null!=t?({span:r,offset:i,order:o}=t):r=t;const u=e!==a?"-".concat(e):"";r&&c.push(!0===r?"".concat(n).concat(u):"".concat(n).concat(u,"-").concat(r)),null!=o&&l.push("order".concat(u,"-").concat(o)),null!=i&&l.push("offset".concat(u,"-").concat(i))})),[{...s,className:oC()(i,...c,...l)},{as:t,bsPrefix:n,spans:c}]}const uD=r.forwardRef(((e,t)=>{const[{className:n,...r},{as:i="div",bsPrefix:s,spans:o}]=lD(e);return(0,hr.jsx)(i,{...r,ref:t,className:oC()(n,!o.length&&s)})}));uD.displayName="Col";const hD=uD,dD=r.forwardRef(((e,t)=>{let{as:n="label",bsPrefix:i,column:s=!1,visuallyHidden:o=!1,className:a,htmlFor:c,...l}=e;const{controlId:u}=(0,r.useContext)(YO);i=yA(i,"form-label");let h="col-form-label";"string"===typeof s&&(h="".concat(h," ").concat(h,"-").concat(s));const d=oC()(a,i,o&&"visually-hidden",s&&h);return c=c||u,s?(0,hr.jsx)(hD,{ref:t,as:"label",className:d,htmlFor:c,...l}):(0,hr.jsx)(n,{ref:t,className:d,htmlFor:c,...l})}));dD.displayName="FormLabel";const fD=dD,pD=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,id:s,...o}=e;const{controlId:a}=(0,r.useContext)(YO);return n=yA(n,"form-range"),(0,hr.jsx)("input",{...o,type:"range",ref:t,className:oC()(i,n),id:s||a})}));pD.displayName="FormRange";const mD=pD,gD=r.forwardRef(((e,t)=>{let{bsPrefix:n,size:i,htmlSize:s,className:o,isValid:a=!1,isInvalid:c=!1,id:l,...u}=e;const{controlId:h}=(0,r.useContext)(YO);return n=yA(n,"form-select"),(0,hr.jsx)("select",{...u,size:s,ref:t,className:oC()(o,n,i&&"".concat(n,"-").concat(i),a&&"is-valid",c&&"is-invalid"),id:l||h})}));gD.displayName="FormSelect";const vD=gD,yD=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i="small",muted:s,...o}=e;return n=yA(n,"form-text"),(0,hr.jsx)(i,{...o,ref:t,className:oC()(r,n,s&&"text-muted")})}));yD.displayName="FormText";const wD=yD,bD=r.forwardRef(((e,t)=>(0,hr.jsx)(nD,{...e,ref:t,type:"switch"})));bD.displayName="Switch";const _D=Object.assign(bD,{Input:nD.Input,Label:nD.Label}),ED=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:i,controlId:s,label:o,...a}=e;return n=yA(n,"form-floating"),(0,hr.jsxs)(cD,{ref:t,className:oC()(r,n),controlId:s,...a,children:[i,(0,hr.jsx)("label",{htmlFor:s,children:o})]})}));ED.displayName="FloatingLabel";const SD=ED,xD={_ref:a().any,validated:a().bool,as:a().elementType},ID=r.forwardRef(((e,t)=>{let{className:n,validated:r,as:i="form",...s}=e;return(0,hr.jsx)(i,{...s,ref:t,className:oC()(n,r&&"was-validated")})}));ID.displayName="Form",ID.propTypes=xD;const kD=Object.assign(ID,{Group:cD,Control:iD,Floating:oD,Check:nD,Switch:_D,Label:fD,Text:wD,Range:mD,Select:vD,FloatingLabel:SD});function TD(e){return Array.isArray?Array.isArray(e):"[object Array]"===MD(e)}const CD=1/0;function ND(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-CD?"-0":t}(e)}function AD(e){return"string"===typeof e}function RD(e){return"number"===typeof e}function PD(e){return!0===e||!1===e||function(e){return OD(e)&&null!==e}(e)&&"[object Boolean]"==MD(e)}function OD(e){return"object"===typeof e}function DD(e){return void 0!==e&&null!==e}function LD(e){return!e.trim().length}function MD(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const FD=e=>"Missing ".concat(e," property in key"),jD=e=>"Property 'weight' in key '".concat(e,"' must be a positive integer"),UD=Object.prototype.hasOwnProperty;class VD{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let n=BD(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function BD(e){let t=null,n=null,r=null,i=1,s=null;if(AD(e)||TD(e))r=e,t=zD(e),n=qD(e);else{if(!UD.call(e,"name"))throw new Error(FD("name"));const o=e.name;if(r=o,UD.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(jD(o));t=zD(o),n=qD(o),s=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:s}}function zD(e){return TD(e)?e:e.split(".")}function qD(e){return TD(e)?e.join("."):e}var WD={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(e,t){let n=[],r=!1;const i=(e,t,s)=>{if(DD(e))if(t[s]){const o=e[t[s]];if(!DD(o))return;if(s===t.length-1&&(AD(o)||RD(o)||PD(o)))n.push(ND(o));else if(TD(o)){r=!0;for(let e=0,n=o.length;e<n;e+=1)i(o[e],t,s+1)}else t.length&&i(o,t,s+1)}else n.push(e)};return i(e,AD(t)?t.split("."):t,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const KD=/[^ ]+/g;class HD{constructor(){let{getFn:e=WD.getFn,fieldNormWeight:t=WD.fieldNormWeight}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.norm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const n=new Map,r=Math.pow(10,t);return{get(t){const i=t.match(KD).length;if(n.has(i))return n.get(i);const s=1/Math.pow(i,.5*e),o=parseFloat(Math.round(s*r)/r);return n.set(i,o),o},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=e}setIndexRecords(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=e}setKeys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,AD(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();AD(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!DD(e)||LD(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach(((t,r)=>{let i=t.getFn?t.getFn(e):this.getFn(e,t.path);if(DD(i))if(TD(i)){let e=[];const t=[{nestedArrIndex:-1,value:i}];for(;t.length;){const{nestedArrIndex:n,value:r}=t.pop();if(DD(r))if(AD(r)&&!LD(r)){let t={v:r,i:n,n:this.norm.get(r)};e.push(t)}else TD(r)&&r.forEach(((e,n)=>{t.push({nestedArrIndex:n,value:e})}))}n.$[r]=e}else if(AD(i)&&!LD(i)){let e={v:i,n:this.norm.get(i)};n.$[r]=e}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function GD(e,t){let{getFn:n=WD.getFn,fieldNormWeight:r=WD.fieldNormWeight}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new HD({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(BD)),i.setSources(t),i.create(),i}function QD(e){let{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=WD.distance,ignoreLocation:s=WD.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=t/e.length;if(s)return o;const a=Math.abs(r-n);return i?o+a/i:a?1:o}const $D=32;function YD(e,t,n){let{location:r=WD.location,distance:i=WD.distance,threshold:s=WD.threshold,findAllMatches:o=WD.findAllMatches,minMatchCharLength:a=WD.minMatchCharLength,includeMatches:c=WD.includeMatches,ignoreLocation:l=WD.ignoreLocation}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t.length>$D)throw new Error("Pattern length exceeds max of ".concat($D,"."));const u=t.length,h=e.length,d=Math.max(0,Math.min(r,h));let f=s,p=d;const m=a>1||c,g=m?Array(h):[];let v;for(;(v=e.indexOf(t,p))>-1;){let e=QD(t,{currentLocation:v,expectedLocation:d,distance:i,ignoreLocation:l});if(f=Math.min(e,f),p=v+u,m){let e=0;for(;e<u;)g[v+e]=1,e+=1}}p=-1;let y=[],w=1,b=u+h;const _=1<<u-1;for(let S=0;S<u;S+=1){let r=0,s=b;for(;r<s;){QD(t,{errors:S,currentLocation:d+s,expectedLocation:d,distance:i,ignoreLocation:l})<=f?r=s:b=s,s=Math.floor((b-r)/2+r)}b=s;let a=Math.max(1,d-s+1),c=o?h:Math.min(d+s,h)+u,v=Array(c+2);v[c+1]=(1<<S)-1;for(let o=c;o>=a;o-=1){let r=o-1,s=n[e.charAt(r)];if(m&&(g[r]=+!!s),v[o]=(v[o+1]<<1|1)&s,S&&(v[o]|=(y[o+1]|y[o])<<1|1|y[o+1]),v[o]&_&&(w=QD(t,{errors:S,currentLocation:r,expectedLocation:d,distance:i,ignoreLocation:l}),w<=f)){if(f=w,p=r,p<=d)break;a=Math.max(1,2*d-p)}}if(QD(t,{errors:S+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:l})>f)break;y=v}const E={isMatch:p>=0,score:Math.max(.001,w)};if(m){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WD.minMatchCharLength,n=[],r=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let o=e[s];o&&-1===r?r=s:o||-1===r||(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}(g,a);e.length?c&&(E.indices=e):E.isMatch=!1}return E}function JD(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}class XD{constructor(e){let{location:t=WD.location,threshold:n=WD.threshold,distance:r=WD.distance,includeMatches:i=WD.includeMatches,findAllMatches:s=WD.findAllMatches,minMatchCharLength:o=WD.minMatchCharLength,isCaseSensitive:a=WD.isCaseSensitive,ignoreLocation:c=WD.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options={location:t,threshold:n,distance:r,includeMatches:i,findAllMatches:s,minMatchCharLength:o,isCaseSensitive:a,ignoreLocation:c},this.pattern=a?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const l=(e,t)=>{this.chunks.push({pattern:e,alphabet:JD(e),startIndex:t})},u=this.pattern.length;if(u>$D){let e=0;const t=u%$D,n=u-t;for(;e<n;)l(this.pattern.substr(e,$D),e),e+=$D;if(t){const e=u-$D;l(this.pattern.substr(e),e)}}else l(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:r,distance:i,threshold:s,findAllMatches:o,minMatchCharLength:a,ignoreLocation:c}=this.options;let l=[],u=0,h=!1;this.chunks.forEach((t=>{let{pattern:d,alphabet:f,startIndex:p}=t;const{isMatch:m,score:g,indices:v}=YD(e,d,f,{location:r+p,distance:i,threshold:s,findAllMatches:o,minMatchCharLength:a,includeMatches:n,ignoreLocation:c});m&&(h=!0),u+=g,m&&v&&(l=[...l,...v])}));let d={isMatch:h,score:h?u/this.chunks.length:1};return h&&n&&(d.indices=l),d}}class ZD{constructor(e){this.pattern=e}static isMultiMatch(e){return eL(e,this.multiRegex)}static isSingleMatch(e){return eL(e,this.singleRegex)}search(){}}function eL(e,t){const n=e.match(t);return n?n[1]:null}class tL extends ZD{constructor(e){let{location:t=WD.location,threshold:n=WD.threshold,distance:r=WD.distance,includeMatches:i=WD.includeMatches,findAllMatches:s=WD.findAllMatches,minMatchCharLength:o=WD.minMatchCharLength,isCaseSensitive:a=WD.isCaseSensitive,ignoreLocation:c=WD.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this._bitapSearch=new XD(e,{location:t,threshold:n,distance:r,includeMatches:i,findAllMatches:s,minMatchCharLength:o,isCaseSensitive:a,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class nL extends ZD{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const r=[],i=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+i,r.push([t,n-1]);const s=!!r.length;return{isMatch:s,score:s?0:1,indices:r}}}const rL=[class extends ZD{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},nL,class extends ZD{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends ZD{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends ZD{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends ZD{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends ZD{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},tL],iL=rL.length,sL=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const oL=new Set([tL.type,nL.type]);class aL{constructor(e){let{isCaseSensitive:t=WD.isCaseSensitive,includeMatches:n=WD.includeMatches,minMatchCharLength:r=WD.minMatchCharLength,ignoreLocation:i=WD.ignoreLocation,findAllMatches:s=WD.findAllMatches,location:o=WD.location,threshold:a=WD.threshold,distance:c=WD.distance}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:r,findAllMatches:s,ignoreLocation:i,location:o,threshold:a,distance:c},this.pattern=t?e:e.toLowerCase(),this.query=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.split("|").map((e=>{let n=e.trim().split(sL).filter((e=>e&&!!e.trim())),r=[];for(let i=0,s=n.length;i<s;i+=1){const e=n[i];let s=!1,o=-1;for(;!s&&++o<iL;){const n=rL[o];let i=n.isMultiMatch(e);i&&(r.push(new n(i,t)),s=!0)}if(!s)for(o=-1;++o<iL;){const n=rL[o];let i=n.isSingleMatch(e);if(i){r.push(new n(i,t));break}}}return r}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let i=0,s=[],o=0;for(let a=0,c=t.length;a<c;a+=1){const r=t[a];s.length=0,i=0;for(let t=0,a=r.length;t<a;t+=1){const a=r[t],{isMatch:c,indices:l,score:u}=a.search(e);if(!c){o=0,i=0,s.length=0;break}if(i+=1,o+=u,n){const e=a.constructor.type;oL.has(e)?s=[...s,...l]:s.push(l)}}if(i){let e={isMatch:!0,score:o/i};return n&&(e.indices=s),e}}return{isMatch:!1,score:1}}}const cL=[];function lL(e,t){for(let n=0,r=cL.length;n<r;n+=1){let r=cL[n];if(r.condition(e,t))return new r(e,t)}return new XD(e,t)}const uL="$and",hL="$or",dL="$path",fL="$val",pL=e=>!(!e[uL]&&!e[hL]),mL=e=>({[uL]:Object.keys(e).map((t=>({[t]:e[t]})))});function gL(e,t){let{auto:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e=>{let i=Object.keys(e);const s=(e=>!!e[dL])(e);if(!s&&i.length>1&&!pL(e))return r(mL(e));if((e=>!TD(e)&&OD(e)&&!pL(e))(e)){const r=s?e[dL]:i[0],o=s?e[fL]:e[r];if(!AD(o))throw new Error((e=>"Invalid value for key ".concat(e))(r));const a={keyId:qD(r),pattern:o};return n&&(a.searcher=lL(o,t)),a}let o={children:[],operator:i[0]};return i.forEach((t=>{const n=e[t];TD(n)&&n.forEach((e=>{o.children.push(r(e))}))})),o};return pL(e)||(e=mL(e)),r(e)}function vL(e,t){const n=e.matches;t.matches=[],DD(n)&&n.forEach((e=>{if(!DD(e.indices)||!e.indices.length)return;const{indices:n,value:r}=e;let i={indices:n,value:r};e.key&&(i.key=e.key.src),e.idx>-1&&(i.refIndex=e.idx),t.matches.push(i)}))}function yL(e,t){t.score=e.score}class wL{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.options={...WD,...t},this.options.useExtendedSearch,this._keyStore=new VD(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof HD))throw new Error("Incorrect 'index' type");this._myIndex=t||GD(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){DD(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!1;const t=[];for(let n=0,r=this._docs.length;n<r;n+=1){const i=this._docs[n];e(i,n)&&(this.removeAt(n),n-=1,r-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e){let{limit:t=-1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{includeMatches:n,includeScore:r,shouldSort:i,sortFn:s,ignoreFieldNorm:o}=this.options;let a=AD(e)?AD(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,t){let{ignoreFieldNorm:n=WD.ignoreFieldNorm}=t;e.forEach((e=>{let t=1;e.matches.forEach((e=>{let{key:r,norm:i,score:s}=e;const o=r?r.weight:null;t*=Math.pow(0===s&&o?Number.EPSILON:s,(o||1)*(n?1:i))})),e.score=t}))}(a,{ignoreFieldNorm:o}),i&&a.sort(s),RD(t)&&t>-1&&(a=a.slice(0,t)),function(e,t){let{includeMatches:n=WD.includeMatches,includeScore:r=WD.includeScore}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=[];return n&&i.push(vL),r&&i.push(yL),e.map((e=>{const{idx:n}=e,r={item:t[n],refIndex:n};return i.length&&i.forEach((t=>{t(e,r)})),r}))}(a,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(e){const t=lL(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach((e=>{let{v:n,i:i,n:s}=e;if(!DD(n))return;const{isMatch:o,score:a,indices:c}=t.searchIn(n);o&&r.push({item:n,idx:i,matches:[{score:a,value:n,norm:s,indices:c}]})})),r}_searchLogical(e){const t=gL(e,this.options),n=(e,t,r)=>{if(!e.children){const{keyId:n,searcher:i}=e,s=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:i});return s&&s.length?[{idx:r,item:t,matches:s}]:[]}const i=[];for(let s=0,o=e.children.length;s<o;s+=1){const o=e.children[s],a=n(o,t,r);if(a.length)i.push(...a);else if(e.operator===uL)return[]}return i},r=this._myIndex.records,i={},s=[];return r.forEach((e=>{let{$:r,i:o}=e;if(DD(r)){let e=n(t,r,o);e.length&&(i[o]||(i[o]={idx:o,item:r,matches:[]},s.push(i[o])),e.forEach((e=>{let{matches:t}=e;i[o].matches.push(...t)})))}})),s}_searchObjectList(e){const t=lL(e,this.options),{keys:n,records:r}=this._myIndex,i=[];return r.forEach((e=>{let{$:r,i:s}=e;if(!DD(r))return;let o=[];n.forEach(((e,n)=>{o.push(...this._findMatches({key:e,value:r[n],searcher:t}))})),o.length&&i.push({idx:s,item:r,matches:o})})),i}_findMatches(e){let{key:t,value:n,searcher:r}=e;if(!DD(n))return[];let i=[];if(TD(n))n.forEach((e=>{let{v:n,i:s,n:o}=e;if(!DD(n))return;const{isMatch:a,score:c,indices:l}=r.searchIn(n);a&&i.push({score:c,key:t,value:n,idx:s,norm:o,indices:l})}));else{const{v:e,n:s}=n,{isMatch:o,score:a,indices:c}=r.searchIn(e);o&&i.push({score:a,key:t,value:e,norm:s,indices:c})}return i}}wL.version="7.0.0",wL.createIndex=GD,wL.parseIndex=function(e){let{getFn:t=WD.getFn,fieldNormWeight:n=WD.fieldNormWeight}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{keys:r,records:i}=e,s=new HD({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s},wL.config=WD,wL.parseQuery=gL,function(){cL.push(...arguments)}(aL);const bL=n.p+"static/media/dice.abf8e1db410e4103e62c46605fbae4c4.svg";const _L=function(e){return(0,hr.jsx)("img",{src:bL,alt:"",style:{height:"28px"}})};const EL=n.p+"static/media/trash-solid.16207fda462567fa761c8bb0c7319486.svg";const SL=function(e){return(0,hr.jsx)("img",{src:EL,alt:"",style:{height:"23px"}})};const xL=n.p+"static/media/sort.82008bd9d6bc443b229ac2828c981bbe.svg";const IL=function(e){return(0,hr.jsx)("img",{src:xL,alt:"",style:{height:"15px"}})};const kL=n.p+"static/media/sort-alph.5e33dbe2f71064af4282f533d0ac51c7.svg";const TL=function(e){return(0,hr.jsx)("img",{src:kL,alt:"",style:{height:"18px"}})};const CL=n.p+"static/media/rating-star.d41bc86f4b3a65599aa84a6a4ce0e894.svg";const NL=function(e){return(0,hr.jsx)("img",{src:CL,alt:"",style:{height:"24px"}})};const AL=n.p+"static/media/calendar.73aaa97e0536b97f81857c2d1b757937.svg";const RL=function(e){return(0,hr.jsx)("img",{src:AL,alt:"",style:{height:"20px"}})};var PL,OL,DL,LL,ML,FL,jL,UL,VL;class BL extends r.Component{constructor(){super(),this.handleClickDelete=async e=>{try{await Hk.collection("users").doc(this.props.currentUser.id).collection("books").doc(e).delete();const t=this.state.books.filter((t=>t.id!==e)),n=this.state.filteredBooks.filter((t=>t.id!==e));this.setState({books:t,filteredBooks:n})}catch(t){console.error("Error deleting a document: ",t)}},this.handleClickUpdateRead=async(e,t)=>{try{await Hk.collection("users").doc(this.props.currentUser.id).collection("books").doc(e).update({hasRated:t});const n=this.state.books.map((n=>n.id===e?{...n,hasRated:t}:n));this.setState({books:n})}catch(n){console.error("Error updating a document: ",n)}},this.handleSearch=e=>{const t=e.target.value;this.setState({searchQuery:t},(()=>{if(""===t.trim())this.setState({filteredBooks:this.state.books});else{const e=new wL(this.state.books,{keys:["title"]}).search(t).map((e=>e.item));this.setState({filteredBooks:e})}}))},this.handleSort=e=>{this.setState({sort:e},this.sortBooks)},this.sortBooks=()=>{let e=[...this.state.books];switch(this.state.sort){case"date":e.sort(((e,t)=>t.createdAt-e.createdAt));break;case"rating":e.sort(((e,t)=>t.hasRated-e.hasRated));break;case"alpha":e.sort(((e,t)=>e.title.localeCompare(t.title)));break;case"random":e.sort((()=>.5-Math.random()))}this.setState({filteredBooks:e})},this.state={books:[],hasHoveredOver:!1,searchQuery:"",filteredBooks:[],sort:"Title"}}async componentDidMount(){try{if(!this.props.currentUser)return;const e=(await Hk.collection("users").doc(this.props.currentUser.id).collection("books").get()).docs.map((e=>{const t=e.data();return t.hasRated=t.hasRated||0,{id:e.id,...t}}));this.setState({books:e,filteredBooks:e},this.sortBooks)}catch(e){console.error("Error fetching books:",e)}}render(){const{books:e}=this.state;return this.props.currentUser?(0,hr.jsxs)(KL,{children:[(0,hr.jsxs)(GL,{children:[(0,hr.jsx)(QL,{children:(0,hr.jsx)(kD,{children:(0,hr.jsx)(kD.Group,{controlId:"search",children:(0,hr.jsx)(kD.Control,{type:"text",placeholder:"Search...",className:"font11",value:this.state.searchQuery,onChange:this.handleSearch})})})}),(0,hr.jsx)($L,{children:(0,hr.jsxs)(EO,{variant:"btn-sm",children:[(0,hr.jsx)(EO.Toggle,{variant:"secondary btn-sm",children:(0,hr.jsx)(IL,{})}),(0,hr.jsxs)(EO.Menu,{className:"font12",children:[(0,hr.jsxs)(EO.Item,{onClick:()=>this.handleSort("date"),className:"font12",children:[" ",(0,hr.jsx)(RL,{}),"  Created"]}),(0,hr.jsxs)(EO.Item,{onClick:()=>this.handleSort("rating"),className:"font12",children:[" ",(0,hr.jsx)(NL,{}),"  Rating"]}),(0,hr.jsxs)(EO.Item,{onClick:()=>this.handleSort("alpha"),className:"font12",children:[" ",(0,hr.jsx)(TL,{}),"  Alphabetical"]}),(0,hr.jsxs)(EO.Item,{onClick:()=>this.handleSort("random"),className:"font12",children:[" ",(0,hr.jsx)(_L,{}),"  Random"]})]})]})})]}),(0,hr.jsx)(qL,{children:this.props.currentUser&&e.length>0?this.state.filteredBooks.map(((e,t)=>(0,hr.jsxs)("div",{children:[(0,hr.jsx)(NT,{className:"book",title:e.title,authors:e.authors,subject:e.subject,genre:e.genre,background:e.background},"book-".concat(t)),(0,hr.jsxs)(HL,{children:[(0,hr.jsx)(JL,{children:(0,hr.jsx)(HO.G,{onClick:t=>this.handleClickUpdateRead(e.id,t),ratingValue:e.hasRated,initialValue:e.hasRated,size:"28px"})}),(0,hr.jsx)(YL,{onClick:()=>this.handleClickDelete(e.id),children:(0,hr.jsx)(SL,{})})]})]},"wrapper-".concat(t)))):(0,hr.jsx)(WL,{children:(0,hr.jsxs)("div",{className:"flexColumn flexCenter",children:[(0,hr.jsx)(KO,{}),(0,hr.jsx)("span",{className:"font20",children:"No books found"})]})})})]}):(0,hr.jsx)(qL,{children:(0,hr.jsx)(WL,{children:(0,hr.jsxs)("div",{className:"flexColumn flexCenter",children:[(0,hr.jsx)(KO,{}),(0,hr.jsx)("span",{className:"font20",children:"No books found"})]})})})}}const zL=BL,qL=lr.div(PL||(PL=ve(["\n    width: 55vw;\n    margin: 50px auto 60px;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center; \n    gap: 40px;\n    min-height: 70vh;\n"]))),WL=lr.div(OL||(OL=ve(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%; \n"]))),KL=lr.div(DL||(DL=ve(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    margin-top: 120px;\n"]))),HL=lr.div(LL||(LL=ve(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-top: 10px;\n    width: 100%; \n    gap: 20px;\n"]))),GL=lr.div(ML||(ML=ve(["\n    width: 90vw;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n"]))),QL=lr.div(FL||(FL=ve(["\n    width: 30%; \n"]))),$L=lr.div(jL||(jL=ve(["\n    margin-left: 20px;\n"]))),YL=lr.div(UL||(UL=ve(["\n    cursor: pointer;\n    transition: color 0.3s;\n    &:hover {\n        color: #ff0000;\n        opacity: 0.7;\n    }\n"]))),JL=lr.div(VL||(VL=ve(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    transition: opacity 0.3s;\n    color: white;\n    &:hover {\n        opacity: 0.7;\n    }\n"])));var XL,ZL,eM;class tM extends r.Component{constructor(e){super(e),this.handleSubmit=async e=>{e.preventDefault();const{email:t,password:n}=this.state;try{await Kk.signInWithEmailAndPassword(t,n),this.setState({email:"",password:"",showAlert:!0}),this.props.history.push("/")}catch(r){console.log(r),this.setState({errorMessage:"Invalid email or password!",showAlert:!0})}},this.handleChange=e=>{const{value:t,name:n}=e.target;this.setState({[n]:t})},this.state={email:"",password:"",errorMessage:""}}render(){return(0,hr.jsxs)(rM,{className:"font12",children:[(0,hr.jsx)(sM,{children:(0,hr.jsx)("h5",{children:"Sign In"})}),(0,hr.jsxs)(kD,{className:"font12",onSubmit:this.handleSubmit,children:[(0,hr.jsxs)(kD.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,hr.jsx)(kD.Label,{children:"Email address"}),(0,hr.jsx)(kD.Control,{type:"email",name:"email",label:"email",placeholder:"Enter email",value:this.state.email,onChange:this.handleChange,className:"form-control-sm",required:!0})]}),(0,hr.jsxs)(kD.Group,{className:"mb-3",controlId:"formBasicPassword",children:[(0,hr.jsx)(kD.Label,{children:"Password"}),(0,hr.jsx)(kD.Control,{type:"password",name:"password",placeholder:"Enter password",value:this.state.password,onChange:this.handleChange,className:"form-control-sm",label:"password",required:!0})]}),(0,hr.jsx)("button",{className:"btn btn-dark font12",type:"submit",style:{width:"100%"},children:"Login"})]}),this.state.showAlert&&(0,hr.jsx)(iM,{className:"alert alert-danger font12",role:"alert",children:this.state.errorMessage})]})}}const nM=ie(tM),rM=lr.div(XL||(XL=ve(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    text-align: start;\n"]))),iM=lr.div(ZL||(ZL=ve(["\n    margin-top: 20px;\n    max-width: 100%;\n"]))),sM=lr.div(eM||(eM=ve(["\n    text-align: center;\n"])));var oM,aM,cM;class lM extends r.Component{constructor(e){super(e),this.handleSubmit=async e=>{e.preventDefault();const{displayName:t,email:n,password:r,confirmPassword:i}=this.state;if(r===i)try{const e=this.props.history,{user:i}=await Kk.createUserWithEmailAndPassword(n,r);await Wk(i,{displayName:t}),this.setState({displayName:"",email:"",password:"",confirmPassword:"",showAlert:!1}),e.push("/")}catch(s){console.error(s.message),s.message.toString().includes("auth/email-already-in-use")&&this.setState({showAlert:!0})}else alert("Passwords don't match!")},this.handleChange=e=>{const{name:t,value:n}=e.target;this.setState({[t]:n})},this.state={displayName:"",email:"",password:"",confirmPassword:"",showAlert:!1}}render(){const{displayName:e,email:t,password:n,confirmPassword:r,showAlert:i}=this.state;return(0,hr.jsxs)(hM,{children:[(0,hr.jsx)(fM,{children:(0,hr.jsx)("h5",{children:"Sign Up"})}),(0,hr.jsxs)(kD,{className:"font12",onSubmit:this.handleSubmit,children:[(0,hr.jsxs)(kD.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,hr.jsx)(kD.Label,{className:"font12",children:"Username"}),(0,hr.jsx)(kD.Control,{type:"text",name:"displayName",label:"Display Name",placeholder:"Username",value:e,onChange:this.handleChange,className:"form-control-sm",required:!0})]}),(0,hr.jsxs)(kD.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,hr.jsx)(kD.Label,{className:"font12",children:"Email address"}),(0,hr.jsx)(kD.Control,{type:"email",name:"email",label:"email",placeholder:"Enter email",value:t,onChange:this.handleChange,className:"form-control-sm",required:!0})]}),(0,hr.jsxs)(kD.Group,{className:"mb-3",controlId:"formBasicPassword",children:[(0,hr.jsx)(kD.Label,{className:"font12",children:"Password"}),(0,hr.jsx)(kD.Control,{type:"password",name:"password",placeholder:"Enter password",value:n,minLength:"6",onChange:this.handleChange,className:"form-control-sm",label:"password",required:!0})]}),(0,hr.jsxs)(kD.Group,{className:"mb-3",controlId:"formBasicPassword",children:[(0,hr.jsx)(kD.Label,{className:"font12",children:"Confirm Password"}),(0,hr.jsx)(kD.Control,{type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:r,minLength:"6",onChange:this.handleChange,className:"form-control-sm",label:"Confirm Password",required:!0})]}),(0,hr.jsx)("button",{type:"submit",className:"btn btn-dark font12",style:{width:"100%"},children:"Sign Up"})]}),(0,hr.jsx)(dM,{children:i&&(0,hr.jsx)("div",{className:"alert alert-danger font12",role:"alert",children:"The email address is already in use by another account."})})]})}}const uM=ie(lM),hM=lr.div(oM||(oM=ve(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    text-align: start;\n"]))),dM=lr.div(aM||(aM=ve(["\n    margin-top: 20px;\n    max-width: 100%;\n"]))),fM=lr.div(cM||(cM=ve(["\n    text-align: center;\n"])));var pM,mM,gM;const vM=()=>{const[e,t]=(0,r.useState)(!0);return(0,hr.jsx)(yM,{children:(0,hr.jsxs)("div",{className:"content",children:[(0,hr.jsx)("div",{className:"form",children:e?(0,hr.jsx)(nM,{}):(0,hr.jsx)(uM,{})}),(0,hr.jsx)("div",{className:"toggleButton font12",children:(0,hr.jsxs)(wM,{children:[e?"Don't have an account? ":"Already have an account? ",(0,hr.jsx)(bM,{onClick:()=>{t(!e)},children:e?"Sign Up":"Sign In"})]})})]})})},yM=lr.div(pM||(pM=ve(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100vh;\n    .content {\n        text-align: center;\n        width: 90%;\n        max-width: 350px;\n        border: 1px solid #ccc;\n        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n        border-radius: 5px;\n        padding: 20px;\n    }\n    .form {\n        width: 100%;\n    }\n    .toggleButton {\n        text-align: center;\n    }\n    @media (max-width: 1400px) {\n        margin-top: 40px;\n      }\n"]))),wM=lr.div(mM||(mM=ve(["\n    text-align: center;\n"]))),bM=lr.button(gM||(gM=ve(["\n  margin-right: 5px;\n  border: none;\n  border-radius: 10px;\n  color: black;\n  padding: 8px 16px;\n  text-align: center;\n  text-decoration: none;\n  font-weight: 600;\n  display: inline-block;\n  margin: 4px 10px;\n  cursor: pointer;\n  background-color: #fff;\n\n  &:hover {\n    transition: 0.2s ease-in-out;\n    text-decoration: underline;\n  }\n"])));var _M;function EM(e){let{title:t,action:n,border:r}=e;return(0,hr.jsx)(SM,{className:"animate pointer radius8 font14",onClick:n?()=>n():null,border:r,children:t})}const SM=lr.button(_M||(_M=ve(["\n  border: 3px solid #025464;\n  background-color: ",";\n  width: fit-content;\n  padding: 15px;\n  outline: none;\n  color: #025464;\n  transition: background-color 0.3s ease-in-out;\n  &:hover {\n    background-color: #025464;\n    color: #fff;\n    transform: scale(1.1);\n  }\n"])),(e=>e.border?"transparent":"#FFF"));const xM=n.p+"static/media/rocket.221d381235cff4046dd599afbc8b06c0.svg";const IM=n.p+"static/media/wave.37fab2d601686a1f5ce01566429757d9.svg";const kM=function(e){return(0,hr.jsx)("img",{src:IM,alt:""})};var TM,CM,NM,AM,RM,PM,OM;function DM(){return(0,hr.jsxs)(LM,{id:"home",className:"container flexSpaceCenter",children:[(0,hr.jsx)(MM,{className:"flexCenter flexColumn flex",style:{zIndex:9},children:(0,hr.jsxs)("div",{children:[(0,hr.jsx)("h1",{className:"extraBold font60",children:"Explore infinite worlds\u2014your perfect book awaits!"}),(0,hr.jsx)(jM,{className:"font14 semiBold",children:"Experience the literary exploration with BookSuggester. Delve into the diverse offerings of the Gutenberg library, where each click unveils a random literary gem waiting to be discovered."}),(0,hr.jsx)(ge,{className:"pointer extraBold",to:"/discover",children:(0,hr.jsx)(EM,{className:"semiBold",title:"Get Started"})})]})}),(0,hr.jsx)(FM,{children:(0,hr.jsx)(VM,{children:(0,hr.jsx)(BM,{className:"radius8",src:xM,alt:"office",style:{zIndex:9,width:"60%"}})})}),(0,hr.jsx)(UM,{children:(0,hr.jsx)("div",{className:"wave-container",children:(0,hr.jsx)(kM,{})})})]})}const LM=lr.section(TM||(TM=ve(["\n  display: flex;\n  flex-direction: row;  \n  overflow: auto;\n  width: 100%;\n  min-height: 100vh;\n  height: -moz-fit-content;\n  height: -webkit-fit-content;\n  height: -fit-content;\n  @media (max-width: 960px) {\n    flex-direction: column;\n    padding-top: 50px;\n  }\n  @media (max-width: 550px) {\n    padding-top: 50px;\n  }\n"]))),MM=lr.div(CM||(CM=ve(["\n  width: 50%;\n  height: 100%;\n  @media (max-width: 960px) {\n    width: 75%;\n    order: 2;\n    padding-bottom: 150px;\n    text-align: left;\n  }\n  @media (max-width: 560px) {\n    width: 95%;\n    margin-bottom: 50px;\n  }\n"]))),FM=lr.div(NM||(NM=ve(["\n  width: 50%;\n  height: 100%;\n  @media (max-width: 960px) {\n    width: 60%;\n    order: 1;\n    margin-top: 20px;\n  }\n"]))),jM=lr.div(AM||(AM=ve(["\n  max-width: 470px;\n  padding: 12px 0 12px 0;\n  line-height: 1.5rem;\n  @media (max-width: 960px) {\n    padding: 0px 0 20px 0;\n    text-align: left;\n    max-width: 100%;\n  }\n"]))),UM=lr.div(RM||(RM=ve([" \n.wave-container {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    overflow: hidden;\n    line-height: 0;\n  } \n"]))),VM=lr.div(PM||(PM=ve(["\n  display: flex;\n  justify-content: flex-end;\n  position: relative;\n  z-index: 9;\n  @media (max-width: 960px) {\n    width: 100%;\n    justify-content: center;\n  }\n"]))),BM=lr.img(OM||(OM=ve(["\n  @media (max-width: 560px) {\n    width: 80%;\n    height: auto;\n  }\n"])));class zM extends r.Component{constructor(){super(),this.unsubscribeFromAuth=null,this.state={currentUser:null}}componentDidMount(){this.unsubscribeFromAuth=Kk.onAuthStateChanged((async e=>{if(e){(await Wk(e)).onSnapshot((e=>{this.setState({currentUser:{id:e.id,...e.data()}})}))}else this.setState({currentUser:e})}))}componentWillUnmount(){this.unsubscribeFromAuth()}render(){return(0,hr.jsx)("div",{children:(0,hr.jsxs)(ae,{basename:"/booksuggester",children:[(0,hr.jsx)(fT,{currentUser:this.state.currentUser}),(0,hr.jsxs)(re,{children:[(0,hr.jsx)(J,{exact:!0,path:"/",children:(0,hr.jsx)(DM,{currentUser:this.state.currentUser})}),(0,hr.jsx)(J,{exact:!0,path:"/discover",children:(0,hr.jsx)(qO,{currentUser:this.state.currentUser})}),(0,hr.jsx)(J,{exact:!0,path:"/bookshelf",children:(0,hr.jsx)(zL,{currentUser:this.state.currentUser})}),(0,hr.jsx)(J,{exact:!0,path:"/login",children:(0,hr.jsx)(vM,{})})]})]})})}}const qM=zM;const WM=function(){return(0,hr.jsx)("div",{className:"App",children:(0,hr.jsx)(qM,{})})},KM=document.getElementById("root");(0,t.H)(KM).render((0,hr.jsx)(WM,{}))})()})();
//# sourceMappingURL=main.ac284e6b.js.map