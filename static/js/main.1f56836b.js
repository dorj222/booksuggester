/*! For license information please see main.1f56836b.js.LICENSE.txt */
(()=>{var e={219:(e,t,n)=>{"use strict";var r=n(86),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var l=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=u(n);h&&(o=o.concat(h(n)));for(var a=c(t),m=c(n),g=0;g<o.length;++g){var v=o[g];if(!s[v]&&(!r||!r[v])&&(!m||!m[v])&&(!a||!a[v])){var y=d(n,v);try{l(t,v,y)}catch(w){}}}}return t}},740:e=>{"use strict";e.exports=function(e,t,n,r,i,s,o,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,s,o,a],u=0;(c=new Error(t.replace(/%s/g,(function(){return l[u++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},141:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},123:(e,t,n)=>{var r=n(141);e.exports=f,e.exports.parse=s,e.exports.compile=function(e,t){return a(s(e,t),t)},e.exports.tokensToFunction=a,e.exports.tokensToRegExp=d;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function s(e,t){for(var n,r=[],s=0,o=0,a="",u=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],d=n[1],f=n.index;if(a+=e.slice(o,f),o=f+h.length,d)a+=d[1];else{var p=e[o],m=n[2],g=n[3],v=n[4],y=n[5],w=n[6],b=n[7];a&&(r.push(a),a="");var _=null!=m&&null!=p&&p!==m,E="+"===w||"*"===w,S="?"===w||"*"===w,x=n[2]||u,I=v||y;r.push({name:g||s++,prefix:m||"",delimiter:x,optional:S,repeat:E,partial:_,asterisk:!!b,pattern:I?l(I):b?".*":"[^"+c(x)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function a(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var s="",a=t||{},c=(i||{}).pretty?o:encodeURIComponent,l=0;l<e.length;l++){var u=e[l];if("string"!==typeof u){var h,d=a[u.name];if(null==d){if(u.optional){u.partial&&(s+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(r(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<d.length;f++){if(h=c(d[f]),!n[l].test(h))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(h)+"`");s+=(0===f?u.prefix:u.delimiter)+h}}else{if(h=u.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):c(d),!n[l].test(h))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+h+'"');s+=u.prefix+h}}else s+=u}return s}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,s=!1!==n.end,o="",a=0;a<e.length;a++){var l=e[a];if("string"===typeof l)o+=c(l);else{var d=c(l.prefix),f="(?:"+l.pattern+")";t.push(l),l.repeat&&(f+="(?:"+d+f+")*"),o+=f=l.optional?l.partial?d+"("+f+")?":"(?:"+d+"("+f+"))?":d+"("+f+")"}}var p=c(n.delimiter||"/"),m=o.slice(-p.length)===p;return i||(o=(m?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=s?"$":i&&m?"":"(?="+p+"|$)",u(new RegExp("^"+o,h(n)),t)}function f(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(f(e[i],t,n).source);return u(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return d(s(e,n),t,n)}(e,t,n)}},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var c="\n"+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function B(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case I:return"Profiler";case x:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,xe=null;function Ie(e){if(e=wi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function ke(e){Se?xe?xe.push(e):xe=[e]:Se=e}function Te(){if(Se){var e=Se,t=xe;if(xe=Se=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==Se||null!==xe)&&(Ne(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Oe=!1}function Le(e,t,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,s,o,a,c){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(s(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,St,xt,It,kt=!1,Tt=[],Ct=null,Nt=null,At=null,Pt=new Map,Rt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){kt=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Pt.forEach(Ut),Rt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var qt=b.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Gt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Ht(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Gt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Gt(e,t,n,r){if(Wt){var i=$t(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=$t(e,t,n,r))&&Wr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=yi(e=_e(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(ln),hn=F({},ln,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),vn=sn(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(F({},ln,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function In(){return xn}var kn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(kn),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),An=sn(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Pn),On=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!Dn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){ke(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){jr(e,0)}function $n(e){if(G(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&$n(Gn)){var t=[];Kn(t,Gn,e,_e(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Gn)}function sr(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Hr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},xr={};function Ir(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return Sr[e]=n[t];return e}u&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Ir("animationend"),Tr=Ir("animationiteration"),Cr=Ir("animationstart"),Nr=Ir("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),c(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Dr=Pr[Or];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(kr,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,c,l){if(Be.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,je||(je=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=c}else for(o=0;o<r.length;o++){if(c=(a=r[o]).instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=c}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(c=o.tag)||6===c){r=s=o;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=s,i=_e(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Tn;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Nn;break;case kr:case Tr:case Cr:c=vn;break;case Nr:c=An;break;case"scroll":c=dn;break;case"wheel":c=Rn;break;case"copy":case"cut":case"paste":c=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Cn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(Kr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new c(a,l,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(h=ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==c?a:bi(c),f=null==l?a:bi(l),(a=new u(m,p+"leave",c,n,i)).target=h,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",l,n,i)).target=f,u.relatedTarget=h,m=u),h=m,c&&l)e:{for(d=l,p=0,f=u=c;f;f=Gr(f))p++;for(f=0,m=d;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==c&&Qr(o,a,c,u,!1),null!==l&&null!==h&&Qr(o,h,l,u,!0)}if("select"===(c=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Yn;else if(Wn(a))if(Jn)g=or;else{g=ir;var v=rr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Kn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(y=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(v=Hr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:v}),y?w.data=y:null!==(y=Bn(n))&&(w.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}jr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Kr(e,s,i)),null!=(s=Re(e,t))&&r.push(Kr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=Re(n,s))&&o.unshift(Kr(n,c,a)):i||null!=(c=Re(n,s))&&o.push(Kr(n,c,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ei=[],Si=-1;function xi(e){return{current:e}}function Ii(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function ki(e,t){Si++,Ei[Si]=e.current,e.current=t}var Ti={},Ci=xi(Ti),Ni=xi(!1),Ai=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ii(Ni),Ii(Ci)}function Di(e,t,n){if(Ci.current!==Ti)throw Error(s(168));ki(Ci,t),ki(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,ki(Ci,e),ki(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ni),Ii(Ci),ki(Ci,e)):Ii(Ni),ki(Ni,n)}var ji=null,Ui=!1,Vi=!1;function Bi(e){null===ji?ji=[e]:ji.push(e)}function zi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=wt;try{var n=ji;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ge(Ze,zi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Wi=0,Ki=null,Hi=0,Gi=[],Qi=0,$i=null,Yi=1,Ji="";function Xi(e,t){qi[Wi++]=Hi,qi[Wi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Gi[Qi++]=Yi,Gi[Qi++]=Ji,Gi[Qi++]=$i,$i=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Yi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Ki;)Ki=qi[--Wi],qi[Wi]=null,Hi=qi[--Wi],qi[Wi]=null;for(;e===$i;)$i=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,Yi=Gi[--Qi],Gi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Rl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ls(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(cs(e))throw Error(s(418));t=li(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(cs(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=li(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?li(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=li(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vs=xi(null),ys=null,ws=null,bs=null;function _s(){bs=ws=ys=null}function Es(e){var t=vs.current;Ii(vs),e._currentValue=t}function Ss(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xs(e,t){ys=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Is(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===ys)throw Error(s(308));ws=e,ys.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var ks=null;function Ts(e){null===ks?ks=[e]:ks.push(e)}function Cs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ts(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ns(e,r)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Ps(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Os(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ds(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ns(e,n)}return null===(i=r.interleaved)?(t.next=t,Ts(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ns(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,l=c.next;c.next=null,null===o?s=l:o.next=l,o=c;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(null!==s){var h=i.baseState;for(o=0,u=l=c=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(l=u=f,c=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fc|=o,e.lanes=o,e.memoizedState=h}}function js(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Us=(new r.Component).refs;function Vs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bs={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Os(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ds(e,s,i))&&(rl(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Os(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ds(e,s,i))&&(rl(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=Os(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ds(e,i,r))&&(rl(t,e,r,n),Ls(t,e,r))}};function zs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,s))}function qs(e,t,n){var r=!1,i=Ti,s=t.contextType;return"object"===typeof s&&null!==s?s=Is(s):(i=Ri(t)?Ai:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ws(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bs.enqueueReplaceState(t,t.state,null)}function Ks(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Us,Ps(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Is(s):(s=Ri(t)?Ai:Ci.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Vs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Hs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Us&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function $s(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=jl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Hs(e,t,n),r.return=e,r):((r=Ll(n.type,n.key,n.props,null,e.mode,r)).ref=Hs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Ml(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=Hs(e,null,t),n.return=e,n;case E:return(t=Ul(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ml(t,e.mode,n,null)).return=e,t;Gs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Gs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Gs(t,r)}return null}function m(i,s,a,c){for(var l=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],c);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,m),null===u?l=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),l;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],c))&&(s=o(h,s,m),null===u?l=h:u.sibling=h,u=h);return is&&Xi(i,m),l}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),l}function g(i,a,c,l){var u=L(c);if("function"!==typeof u)throw Error(s(150));if(null==(c=u.call(c)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,v=null,y=c.next();null!==m&&!y.done;g++,y=c.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,l);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=v}if(y.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!y.done;g++,y=c.next())null!==(y=d(i,y.value,l))&&(a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return is&&Xi(i,g),u}for(m=r(i,m);!y.done;g++,y=c.next())null!==(y=p(m,i,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,c){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var l=o.key,u=s;null!==u;){if(u.key===l){if((l=o.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===R&&Qs(l)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Hs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((s=Ml(o.props.children,r.mode,c,o.key)).return=r,r=s):((c=Ll(o.type,o.key,o.props,null,r.mode,c)).ref=Hs(r,s,o),c.return=r,r=c)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Ul(o,r.mode,c)).return=r,r=s}return a(r);case R:return e(r,s,(u=o._init)(o._payload),c)}if(te(o))return m(r,s,o,c);if(L(o))return g(r,s,o,c);Gs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=jl(o,r.mode,c)).return=r,r=s),a(r)):n(r,s)}}var Ys=$s(!0),Js=$s(!1),Xs={},Zs=xi(Xs),eo=xi(Xs),to=xi(Xs);function no(e){if(e===Xs)throw Error(s(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Zs),ki(Zs,t)}function io(){Ii(Zs),Ii(eo),Ii(to)}function so(e){no(to.current);var t=no(Zs.current),n=ce(t,e.type);t!==n&&(ki(eo,e),ki(Zs,n))}function oo(e){eo.current===e&&(Ii(Zs),Ii(eo))}var ao=xi(0);function co(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function uo(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,vo=null,yo=!1,wo=!1,bo=0,_o=0;function Eo(){throw Error(s(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:ca,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,vo=go=null,t.updateQueue=null,ho.current=la,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,vo=go=mo=null,yo=!1,t)throw Error(s(300));return e}function Io(){var e=0!==bo;return bo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?mo.memoizedState=vo=e:vo=vo.next=e,vo}function To(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===vo?mo.memoizedState:vo.next;if(null!==t)vo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===vo?mo.memoizedState=vo=e:vo=vo.next=e}return vo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var c=a=null,l=null,u=o;do{var h=u.lane;if((po&h)===h)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=d,a=r):l=l.next=d,mo.lanes|=h,Fc|=h}u=u.next}while(null!==u&&u!==o);null===l?a=r:l.next=c,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Fc|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ro(e,t){var n=mo,r=To(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==vo&&1&vo.memoizedState.tag){if(n.flags|=2048,Uo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ac)throw Error(s(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=Ns(e,1);null!==t&&rl(t,e,1,-1)}function jo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function Bo(e,t,n,r){var i=ko();mo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=Uo(t,n,s,r))}mo.flags|=e,i.memoizedState=Uo(1|t,n,s,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Wo(e,t){return zo(2048,8,e,t)}function Ko(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Go.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Fc|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return To().memoizedState}function ta(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Cs(e,t,n,r))){rl(n,e,r,tl()),sa(n,t,r)}}function na(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var c=t.interleaved;return null===c?(i.next=i,Ts(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Cs(e,t,i,r))&&(rl(n,e,r,i=tl()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var oa={readContext:Is,useCallback:Eo,useContext:Eo,useEffect:Eo,useImperativeHandle:Eo,useInsertionEffect:Eo,useLayoutEffect:Eo,useMemo:Eo,useReducer:Eo,useRef:Eo,useState:Eo,useDebugValue:Eo,useDeferredValue:Eo,useTransition:Eo,useMutableSource:Eo,useSyncExternalStore:Eo,useId:Eo,unstable_isNewReconciler:!1},aa={readContext:Is,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Is,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:jo,useDebugValue:$o,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=ko();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ac)throw Error(s(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Ac.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ca={readContext:Is,useCallback:Yo,useContext:Is,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){return Xo(To(),go.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:ea,unstable_isNewReconciler:!1},la={readContext:Is,useCallback:Yo,useContext:Is,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===go?t.memoizedState=e:Xo(t,go.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Os(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kc||(Kc=!0,Hc=r),da(0,t)},n}function ma(e,t,n){(n=Os(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Gc?Gc=new Set([this]):Gc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kl.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Os(-1,1)).tag=2,Ds(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Js(t,null,n,r):Ys(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var s=t.ref;return xs(t,i),r=xo(e,t,n,r,s,i),n=Io(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Sa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ol(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,xa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(o,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Dl(s,r)).ref=t.ref,e.return=t,t.child=e}function xa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(cr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ta(e,t,n,r,i)}function Ia(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Dc,Oc),Oc|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Dc,Oc),Oc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Dc,Oc),Oc|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Dc,Oc),Oc|=r;return _a(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var s=Ri(n)?Ai:Ci.current;return s=Pi(t,s),xs(t,i),n=xo(e,t,n,r,s,i),r=Io(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ca(e,t,n,r,i){if(Ri(n)){var s=!0;Mi(t)}else s=!1;if(xs(t,i),null===t.stateNode)Wa(e,t),qs(t,n,r),Ks(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Is(l):l=Pi(t,l=Ri(n)?Ai:Ci.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||c!==l)&&Ws(t,o,r,l),As=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),c=t.memoizedState,a!==r||d!==c||Ni.current||As?("function"===typeof u&&(Vs(t,n,u,r),c=t.memoizedState),(a=As||zs(t,n,a,r,d,c,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Rs(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:gs(t.type,a),o.props=l,h=t.pendingProps,d=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=Is(c):c=Pi(t,c=Ri(n)?Ai:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==c)&&Ws(t,o,r,c),As=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||As?("function"===typeof f&&(Vs(t,n,f,r),p=t.memoizedState),(l=As||zs(t,n,l,r,d,p,c)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ka(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ys(t,e.child,null,s),t.child=Ys(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Pa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Ra,Oa,Da,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function ja(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(ao,1&o),null===e)return ls(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Fl(c,i,0,null),e=Ml(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):Ua(t,c));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fl({mode:"visible",children:r.children},i,0,null),(o=Ml(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ys(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,Va(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(c=0!==(a&e.childLanes),ba||c){if(null!==(r=Ac)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ns(e,i),rl(r,e,i,-1))}return gl(),Va(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=li(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Qi++]=Yi,Gi[Qi++]=Ji,Gi[Qi++]=$i,Yi=e.id,Ji=e.overflow,$i=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,o,n);if(a){a=i.fallback,c=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Dl(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Dl(r,a):(a=Ml(a,c,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?Fa(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Dl(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=Fl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&ps(r),Ys(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ss(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===co(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===co(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Ri(t.type)&&Oi(),Ga(t),null;case 3:return r=t.stateNode,io(),Ii(Ni),Ii(Ci),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(al(ss),ss=null))),Oa(e,t),Ga(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ga(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var c in ye(n,o),i=null,o)if(o.hasOwnProperty(c)){var l=o[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",""+l]):a.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[di]=t,e[fi]=r,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(c=we(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ye(n,i),l=i)if(l.hasOwnProperty(o)){var u=l[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&w(e,o,u,c))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ga(t),null;case 13:if(Ii(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),o=!1}else null!==ss&&(al(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Lc&&(Lc=3):gl())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return io(),Oa(e,t),null===e&&zr(t.stateNode.containerInfo),Ga(t),null;case 10:return Es(t.type._context),Ga(t),null;case 19:if(Ii(ao),null===(o=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(c=o.rendering))if(r)Ha(o,!1);else{if(0!==Lc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=co(e))){for(t.flags|=128,Ha(o,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qc&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=co(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!is)return Ga(t),null}else 2*Je()-o.renderingStartTime>qc&&1073741824!==n&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=o.last)?n.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ao.current,ki(ao,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Oc)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function $a(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ii(Ni),Ii(Ci),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ii(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(ao),null;case 4:return io(),null;case 10:return Es(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var c=i[u];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(o=o||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Ur("scroll",e),o||c===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function ec(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Il(e,t,r)}else n.current=null}function tc(e,t,n){try{n()}catch(r){Il(e,t,r)}}var nc=!1;function rc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tc(t,n,s)}i=i.next}while(i!==r)}}function ic(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}function uc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}var hc=null,dc=!1;function fc(e,t,n){for(n=n.child;null!==n;)pc(e,t,n),n=n.sibling}function pc(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||ec(n,t);case 6:var r=hc,i=dc;hc=null,fc(e,t,n),dc=i,null!==(hc=r)&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hc.removeChild(n.stateNode));break;case 18:null!==hc&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),zt(e)):ci(hc,n.stateNode));break;case 4:r=hc,i=dc,hc=n.stateNode.containerInfo,dc=!0,fc(e,t,n),hc=r,dc=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tc(n,t,o),i=i.next}while(i!==r)}fc(e,t,n);break;case 1:if(!Ja&&(ec(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Il(n,t,a)}fc(e,t,n);break;case 21:fc(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fc(e,t,n),Ja=r):fc(e,t,n);break;default:fc(e,t,n)}}function mc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Nl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:hc=c.stateNode,dc=!1;break e;case 3:case 4:hc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===hc)throw Error(s(160));pc(o,a,i),hc=null,dc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(u){Il(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vc(t,e),t=t.sibling}function vc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gc(t,e),yc(e),4&r){try{rc(3,e,e.return),ic(3,e)}catch(g){Il(e,e.return,g)}try{rc(5,e,e.return)}catch(g){Il(e,e.return,g)}}break;case 1:gc(t,e),yc(e),512&r&&null!==n&&ec(n,n.return);break;case 5:if(gc(t,e),yc(e),512&r&&null!==n&&ec(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Il(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===o.type&&null!=o.name&&J(i,o),we(c,a);var u=we(c,o);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(c){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Il(e,e.return,g)}}break;case 6:if(gc(t,e),yc(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Il(e,e.return,g)}}break;case 3:if(gc(t,e),yc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Il(e,e.return,g)}break;case 4:default:gc(t,e),yc(e);break;case 13:gc(t,e),yc(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zc=Je())),4&r&&mc(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,gc(t,e),Ja=u):gc(t,e),yc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rc(4,f,f.return);break;case 1:ec(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Il(r,n,g)}}break;case 5:ec(f,f.return);break;case 22:if(null!==f.memoizedState){Ec(d);continue}}null!==p?(p.return=f,Za=p):Ec(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=d.stateNode,a=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",a))}catch(g){Il(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Il(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gc(t,e),yc(e),4&r&&mc(e);case 21:}}function yc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ac(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),uc(e,cc(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;lc(e,cc(e),o);break;default:throw Error(s(161))}}catch(a){Il(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wc(e,t,n){Za=e,bc(e,t,n)}function bc(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,c=null!==a&&null!==a.memoizedState||Ja;a=Ya;var l=Ja;if(Ya=o,(Ja=c)&&!l)for(Za=i;null!==Za;)c=(o=Za).child,22===o.tag&&null!==o.memoizedState?Sc(i):null!==c?(c.return=o,Za=c):Sc(i);for(;null!==s;)Za=s,bc(s,t,n),s=s.sibling;Za=i,Ya=a,Ja=l}_c(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):_c(e)}}function _c(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||ic(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&js(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}js(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&sc(t)}catch(f){Il(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Ec(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Sc(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ic(4,t)}catch(c){Il(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Il(t,i,c)}}var s=t.return;try{sc(t)}catch(c){Il(t,s,c)}break;case 5:var o=t.return;try{sc(t)}catch(c){Il(t,o,c)}}}catch(c){Il(t,t.return,c)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var xc,Ic=Math.ceil,kc=b.ReactCurrentDispatcher,Tc=b.ReactCurrentOwner,Cc=b.ReactCurrentBatchConfig,Nc=0,Ac=null,Pc=null,Rc=0,Oc=0,Dc=xi(0),Lc=0,Mc=null,Fc=0,jc=0,Uc=0,Vc=null,Bc=null,zc=0,qc=1/0,Wc=null,Kc=!1,Hc=null,Gc=null,Qc=!1,$c=null,Yc=0,Jc=0,Xc=null,Zc=-1,el=0;function tl(){return 0!==(6&Nc)?Je():-1!==Zc?Zc:Zc=Je()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Nc)&&0!==Rc?Rc&-Rc:null!==ms.transition?(0===el&&(el=mt()),el):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rl(e,t,n,r){if(50<Jc)throw Jc=0,Xc=null,Error(s(185));vt(e,n,r),0!==(2&Nc)&&e===Ac||(e===Ac&&(0===(2&Nc)&&(jc|=n),4===Lc&&cl(e,Rc)),il(e,r),1===n&&0===Nc&&0===(1&t.mode)&&(qc=Je()+500,Ui&&zi()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,c=i[o];-1===c?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Ac?Rc:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(ll.bind(null,e)):Bi(ll.bind(null,e)),oi((function(){0===(6&Nc)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Al(n,sl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sl(e,t){if(Zc=-1,el=0,0!==(6&Nc))throw Error(s(327));var n=e.callbackNode;if(Sl()&&e.callbackNode!==n)return null;var r=dt(e,e===Ac?Rc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vl(e,r);else{t=r;var i=Nc;Nc|=2;var o=ml();for(Ac===e&&Rc===t||(Wc=null,qc=Je()+500,fl(e,t));;)try{wl();break}catch(c){pl(e,c)}_s(),kc.current=o,Nc=i,null!==Pc?t=0:(Ac=null,Rc=0,t=Lc)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ol(e,i))),1===t)throw n=Mc,fl(e,0),cl(e,r),il(e,Je()),n;if(6===t)cl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vl(e,r))&&(0!==(o=pt(e))&&(r=o,t=ol(e,o))),1===t))throw n=Mc,fl(e,0),cl(e,r),il(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:El(e,Bc,Wc);break;case 3:if(cl(e,r),(130023424&r)===r&&10<(t=zc+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(El.bind(null,e,Bc,Wc),t);break}El(e,Bc,Wc);break;case 4:if(cl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ic(r/1960))-r)){e.timeoutHandle=ri(El.bind(null,e,Bc,Wc),r);break}El(e,Bc,Wc);break;default:throw Error(s(329))}}}return il(e,Je()),e.callbackNode===n?sl.bind(null,e):null}function ol(e,t){var n=Vc;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=vl(e,t))&&(t=Bc,Bc=n,null!==t&&al(t)),e}function al(e){null===Bc?Bc=e:Bc.push.apply(Bc,e)}function cl(e,t){for(t&=~Uc,t&=~jc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Nc))throw Error(s(327));Sl();var t=dt(e,0);if(0===(1&t))return il(e,Je()),null;var n=vl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Mc,fl(e,0),cl(e,t),il(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,El(e,Bc,Wc),il(e,Je()),null}function ul(e,t){var n=Nc;Nc|=1;try{return e(t)}finally{0===(Nc=n)&&(qc=Je()+500,Ui&&zi())}}function hl(e){null!==$c&&0===$c.tag&&0===(6&Nc)&&Sl();var t=Nc;Nc|=1;var n=Cc.transition,r=wt;try{if(Cc.transition=null,wt=1,e)return e()}finally{wt=r,Cc.transition=n,0===(6&(Nc=t))&&zi()}}function dl(){Oc=Dc.current,Ii(Dc)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pc)for(n=Pc.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ii(Ni),Ii(Ci),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ii(ao);break;case 10:Es(r.type._context);break;case 22:case 23:dl()}n=n.return}if(Ac=e,Pc=e=Dl(e.current,null),Rc=Oc=t,Lc=0,Mc=null,Uc=jc=Fc=0,Bc=Vc=null,null!==ks){for(t=0;t<ks.length;t++)if(null!==(r=(n=ks[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return e}function pl(e,t){for(;;){var n=Pc;try{if(_s(),ho.current=oa,yo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,vo=go=mo=null,wo=!1,bo=0,Tc.current=null,null===n||null===n.return){Lc=1,Mc=t,Pc=null;break}e:{var o=e,a=n.return,c=n,l=t;if(t=Rc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,c,0,t),1&p.mode&&ga(o,u,t),l=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){ga(o,u,t),gl();break e}l=Error(s(426))}else if(is&&1&c.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,c,0,t),ps(ua(l,c));break e}}o=l=ua(l,c),4!==Lc&&(Lc=2),null===Vc?Vc=[o]:Vc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,l,t));break e;case 1:c=l;var y=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Gc||!Gc.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,c,t));break e}}o=o.return}while(null!==o)}_l(n)}catch(b){t=b,Pc===n&&null!==n&&(Pc=n=n.return);continue}break}}function ml(){var e=kc.current;return kc.current=oa,null===e?oa:e}function gl(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Ac||0===(268435455&Fc)&&0===(268435455&jc)||cl(Ac,Rc)}function vl(e,t){var n=Nc;Nc|=2;var r=ml();for(Ac===e&&Rc===t||(Wc=null,fl(e,t));;)try{yl();break}catch(i){pl(e,i)}if(_s(),Nc=n,kc.current=r,null!==Pc)throw Error(s(261));return Ac=null,Rc=0,Lc}function yl(){for(;null!==Pc;)bl(Pc)}function wl(){for(;null!==Pc&&!$e();)bl(Pc)}function bl(e){var t=xc(e.alternate,e,Oc);e.memoizedProps=e.pendingProps,null===t?_l(e):Pc=t,Tc.current=null}function _l(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Oc)))return void(Pc=n)}else{if(null!==(n=$a(n,t)))return n.flags&=32767,void(Pc=n);if(null===e)return Lc=6,void(Pc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pc=t);Pc=t=e}while(null!==t);0===Lc&&(Lc=5)}function El(e,t,n){var r=wt,i=Cc.transition;try{Cc.transition=null,wt=1,function(e,t,n,r){do{Sl()}while(null!==$c);if(0!==(6&Nc))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Ac&&(Pc=Ac=null,Rc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qc||(Qc=!0,Al(tt,(function(){return Sl(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cc.transition,Cc.transition=null;var a=wt;wt=1;var c=Nc;Nc|=4,Tc.current=null,function(e,t){if(ei=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,c=-1,l=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(c=a+i),d!==o||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(c=a),f===o&&++h===r&&(l=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Il(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nc,nc=!1}(e,n),vc(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,wc(n,e,i),Ye(),Nc=c,wt=a,Cc.transition=o}else e.current=n;if(Qc&&(Qc=!1,$c=e,Yc=i),o=e.pendingLanes,0===o&&(Gc=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kc)throw Kc=!1,e=Hc,Hc=null,e;0!==(1&Yc)&&0!==e.tag&&Sl(),o=e.pendingLanes,0!==(1&o)?e===Xc?Jc++:(Jc=0,Xc=e):Jc=0,zi()}(e,t,n,r)}finally{Cc.transition=i,wt=r}return null}function Sl(){if(null!==$c){var e=bt(Yc),t=Cc.transition,n=wt;try{if(Cc.transition=null,wt=16>e?16:e,null===$c)var r=!1;else{if(e=$c,$c=null,Yc=0,0!==(6&Nc))throw Error(s(331));var i=Nc;for(Nc|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var c=o.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rc(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(oc(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rc(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Za=y;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(c=Za).flags))try{switch(c.tag){case 0:case 11:case 15:ic(9,c)}}catch(E){Il(c,c.return,E)}if(c===a){Za=null;break e}var _=c.sibling;if(null!==_){_.return=c.return,Za=_;break e}Za=c.return}}if(Nc=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{wt=n,Cc.transition=t}}return!1}function xl(e,t,n){e=Ds(e,t=pa(0,t=ua(n,t),1),1),t=tl(),null!==e&&(vt(e,1,t),il(e,t))}function Il(e,t,n){if(3===e.tag)xl(e,e,n);else for(;null!==t;){if(3===t.tag){xl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gc||!Gc.has(r))){t=Ds(t,e=ma(t,e=ua(n,e),1),1),e=tl(),null!==t&&(vt(t,1,e),il(t,e));break}}t=t.return}}function kl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Ac===e&&(Rc&n)===n&&(4===Lc||3===Lc&&(130023424&Rc)===Rc&&500>Je()-zc?fl(e,0):Uc|=n),il(e,t)}function Tl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tl();null!==(e=Ns(e,t))&&(vt(e,t,n),il(e,n))}function Cl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tl(e,n)}function Nl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tl(e,n)}function Al(e,t){return Ge(e,t)}function Pl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rl(e,t,n,r){return new Pl(e,t,n,r)}function Ol(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dl(e,t){var n=e.alternate;return null===n?((n=Rl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Ol(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Ml(n.children,i,o,t);case x:a=8,i|=8;break;case I:return(e=Rl(12,n,t,2|i)).elementType=I,e.lanes=o,e;case N:return(e=Rl(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Rl(19,n,t,i)).elementType=A,e.lanes=o,e;case O:return Fl(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case T:a=9;break e;case C:a=11;break e;case P:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rl(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ml(e,t,n,r){return(e=Rl(7,e,r,t)).lanes=n,e}function Fl(e,t,n,r){return(e=Rl(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function jl(e,t,n){return(e=Rl(6,e,null,t)).lanes=n,e}function Ul(e,t,n){return(t=Rl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bl(e,t,n,r,i,s,o,a,c){return e=new Vl(e,t,n,a,c),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rl(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ps(s),e}function zl(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function ql(e,t,n,r,i,s,o,a,c){return(e=Bl(n,r,!0,e,0,s,0,a,c)).context=zl(null),n=e.current,(s=Os(r=tl(),i=nl(n))).callback=void 0!==t&&null!==t?t:null,Ds(n,s,i),e.current.lanes=i,vt(e,i,r),il(e,r),e}function Wl(e,t,n,r){var i=t.current,s=tl(),o=nl(i);return n=zl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Os(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ds(i,t,o))&&(rl(e,i,o,s),Ls(e,i,o)),o}function Kl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gl(e,t){Hl(e,t),(e=e.alternate)&&Hl(e,t)}xc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:so(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(vs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ja(e,t,n):(ki(ao,1&ao.current),null!==(e=Ka(e,t,n))?e.sibling:null);ki(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ia(e,t,n)}return Ka(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);xs(t,n),i=xo(null,t,r,e,i,n);var o=Io();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ps(t),i.updater=Bs,t.stateNode=i,i._reactInternals=t,Ks(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ol(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Rs(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pa(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Pa(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=li(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ka(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&ls(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&ls(t),null;case 13:return ja(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ys(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(vs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Ka(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){a=o.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Os(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ss(o.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ss(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,xs(t,n),r=r(i=Is(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Sa(e,t,r,i=gs(r.type,i),n);case 15:return xa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Wa(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,xs(t,n),qs(t,r,i),Ks(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ia(e,t,n)}throw Error(s(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function $l(e){this._internalRoot=e}function Yl(e){this._internalRoot=e}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Kl(o);a.call(e)}}Wl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Kl(o);s.call(e)}}var o=ql(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),hl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Kl(c);a.call(e)}}var c=Bl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=c,e[pi]=c.current,zr(8===e.nodeType?e.parentNode:e),hl((function(){Wl(t,c,n,r)})),c}(n,t,e,i,r);return Kl(o)}Yl.prototype.render=$l.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wl(e,t,null,null)},Yl.prototype.unmount=$l.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hl((function(){Wl(null,e,null,null)})),t[pi]=null}},Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),il(t,Je()),0===(6&Nc)&&(qc=Je()+500,zi()))}break;case 13:hl((function(){var t=Ns(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),Gl(e,1)}},Et=function(e){if(13===e.tag){var t=Ns(e,134217728);if(null!==t)rl(t,e,134217728,tl());Gl(e,134217728)}},St=function(e){if(13===e.tag){var t=nl(e),n=Ns(e,t);if(null!==n)rl(n,e,t,tl());Gl(e,t)}},xt=function(){return wt},It=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));G(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=ul,Ne=hl;var tu={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,Te,ul]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jl(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jl(e))throw Error(s(299));var n=!1,r="",i=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new $l(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return hl(e)},t.hydrate=function(e,t,n){if(!Xl(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jl(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=ql(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yl(t)},t.render=function(e,t,n){if(!Xl(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(s(40));return!!e._reactRootContainer&&(hl((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ul,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xl(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},82:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case l:case d:case g:case m:case c:return e;default:return t}}case i:return t}}}function E(e){return _(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=c,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return E(e)||_(e)===u},t.isConcurrentMode=E,t.isContextConsumer=function(e){return _(e)===l},t.isContextProvider=function(e){return _(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===s},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===h||e===a||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===y||e.$$typeof===w||e.$$typeof===b||e.$$typeof===v)},t.typeOf=_},86:(e,t,n)=>{"use strict";e.exports=n(82)},104:(e,t,n)=>{"use strict";var r=n(579),i=n(43),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function o(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function a(e){var t=e.size,n=void 0===t?25:t,i=e.SVGstrokeColor,o=void 0===i?"currentColor":i,a=e.SVGstorkeWidth,c=void 0===a?0:a,l=e.SVGclassName,u=void 0===l?"star-svg":l,h=e.SVGstyle;return r.jsx("svg",s({className:u,style:h,stroke:o,fill:"currentColor",strokeWidth:c,viewBox:"0 0 24 24",width:n,height:n,xmlns:"http://www.w3.org/2000/svg"},{children:r.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}))}function c(e,t){switch(t.type){case"PointerMove":return s(s({},e),{hoverValue:t.payload,hoverIndex:t.index});case"PointerLeave":return s(s({},e),{ratingValue:e.ratingValue,hoverIndex:0,hoverValue:null});case"MouseClick":return s(s({},e),{valueIndex:e.hoverIndex,ratingValue:t.payload});default:return e}}function l(){return"undefined"!=typeof window&&window.matchMedia("(pointer: coarse)").matches||"ontouchstart"in window||"undefined"!=typeof navigator&&navigator.maxTouchPoints>0}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".style-module_starRatingWrap__q-lJC{display:inline-block;touch-action:none}.style-module_simpleStarRating__nWUxf{display:inline-block;overflow:hidden;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}.style-module_fillIcons__6---A{display:inline-block;overflow:hidden;position:absolute;top:0;white-space:nowrap}.style-module_emptyIcons__Bg-FZ{display:inline-block}.style-module_tooltip__tKc3i{background-color:#333;border-radius:5px;color:#fff;display:inline-block;padding:5px 15px;vertical-align:middle}"),t.G=function(e){var t,n,u=e.onClick,h=e.onPointerMove,d=e.onPointerEnter,f=e.onPointerLeave,p=e.initialValue,m=void 0===p?0:p,g=e.iconsCount,v=void 0===g?5:g,y=e.size,w=void 0===y?40:y,b=e.readonly,_=void 0!==b&&b,E=e.rtl,S=void 0!==E&&E,x=e.customIcons,I=void 0===x?[]:x,k=e.allowFraction,T=void 0!==k&&k,C=e.style,N=e.className,A=void 0===N?"react-simple-star-rating":N,P=e.transition,R=void 0!==P&&P,O=e.allowHover,D=void 0===O||O,L=e.disableFillHover,M=void 0!==L&&L,F=e.fillIcon,j=void 0===F?null:F,U=e.fillColor,V=void 0===U?"#ffbc0b":U,B=e.fillColorArray,z=void 0===B?[]:B,q=e.fillStyle,W=e.fillClassName,K=void 0===W?"filled-icons":W,H=e.emptyIcon,G=void 0===H?null:H,Q=e.emptyColor,$=void 0===Q?"#cccccc":Q,Y=e.emptyStyle,J=e.emptyClassName,X=void 0===J?"empty-icons":J,Z=e.allowTitleTag,ee=void 0===Z||Z,te=e.showTooltip,ne=void 0!==te&&te,re=e.tooltipDefaultText,ie=void 0===re?"Your Rate":re,se=e.tooltipArray,oe=void 0===se?[]:se,ae=e.tooltipStyle,ce=e.tooltipClassName,le=void 0===ce?"react-simple-star-rating-tooltip":ce,ue=e.SVGclassName,he=void 0===ue?"star-svg":ue,de=e.titleSeparator,fe=void 0===de?"out of":de,pe=e.SVGstyle,me=e.SVGstorkeWidth,ge=void 0===me?0:me,ve=e.SVGstrokeColor,ye=void 0===ve?"currentColor":ve,we=i.useReducer(c,{hoverIndex:0,valueIndex:0,ratingValue:m,hoverValue:null}),be=we[0],_e=be.ratingValue,Ee=be.hoverValue,Se=be.hoverIndex,xe=be.valueIndex,Ie=we[1];i.useEffect((function(){m&&Ie({type:"MouseClick",payload:0})}),[m]);var ke=i.useMemo((function(){return T?2*v:v}),[T,v]),Te=i.useMemo((function(){return m>ke?0:T||Math.floor(m)===m?Math.round(m/v*100):2*Math.ceil(m)*10}),[T,m,v,ke]),Ce=i.useMemo((function(){return(T?2*m-1:m-1)||0}),[T,m]),Ne=i.useCallback((function(e){return v%2!=0?e/2/10:e*v/100}),[v]),Ae=function(e){for(var t=e.clientX,n=e.currentTarget.children[0].getBoundingClientRect(),r=n.left,i=n.right,s=n.width,o=S?i-t:t-r,a=ke,c=Math.round(s/ke),l=0;l<=ke;l+=1)if(o<=c*l){a=0===l&&o<c?0:l;break}var u=a-1;a>0&&(Ie({type:"PointerMove",payload:100*a/ke,index:u}),h&&Ee&&h(Ne(Ee),u,e))},Pe=function(e){Ee&&(Ie({type:"MouseClick",payload:Ee}),u&&u(Ne(Ee),Se,e))},Re=i.useMemo((function(){if(D){if(M){var e=_e&&_e||Te;return Ee&&Ee>e?Ee:e}return Ee&&Ee||_e&&_e||Te}return _e&&_e||Te}),[D,M,Ee,_e,Te]);i.useEffect((function(){oe.length>ke&&console.error("tooltipArray Array length is bigger then Icons Count length.")}),[oe.length,ke]);var Oe=i.useCallback((function(e){return Ee&&e[Se]||_e&&e[xe]||m&&e[Ce]}),[Ee,Se,_e,xe,m,Ce]),De=i.useMemo((function(){return Ee&&Ne(Ee)||_e&&Ne(_e)||m&&Ne(Te)}),[Ee,Ne,_e,m,Te]);return r.jsxs("span",s({className:"style-module_starRatingWrap__q-lJC",style:{direction:"".concat(S?"rtl":"ltr")}},{children:[r.jsxs("span",s({className:"".concat("style-module_simpleStarRating__nWUxf"," ").concat(A),style:s({cursor:_?"":"pointer"},C),onPointerMove:_?void 0:Ae,onPointerEnter:_?void 0:function(e){d&&d(e),l()&&Ae(e)},onPointerLeave:_?void 0:function(e){l()&&Pe(),Ie({type:"PointerLeave"}),f&&f(e)},onClick:_?void 0:Pe,"aria-hidden":"true"},{children:[r.jsx("span",s({className:"".concat("style-module_emptyIcons__Bg-FZ"," ").concat(X),style:s({color:$},Y)},{children:o([],Array(v),!0).map((function(e,t){var n;return r.jsx(i.Fragment,{children:(null===(n=I[t])||void 0===n?void 0:n.icon)||G||r.jsx(a,{SVGclassName:he,SVGstyle:pe,SVGstorkeWidth:ge,SVGstrokeColor:ye,size:w})},t)}))})),r.jsx("span",s({className:"".concat("style-module_fillIcons__6---A"," ").concat(K),style:s((t={},t[S?"right":"left"]=0,t.color=Oe(z)||V,t.transition=R?"width .2s ease, color .2s ease":"",t.width="".concat(Re,"%"),t),q),title:ee?"".concat(De," ").concat(fe," ").concat(v):void 0},{children:o([],Array(v),!0).map((function(e,t){var n;return r.jsx(i.Fragment,{children:(null===(n=I[t])||void 0===n?void 0:n.icon)||j||r.jsx(a,{SVGclassName:he,SVGstyle:pe,SVGstorkeWidth:ge,SVGstrokeColor:ye,size:w})},t)}))}))]})),ne&&r.jsx("span",s({className:"".concat("style-module_tooltip__tKc3i"," ").concat(le),style:s((n={},n[S?"marginRight":"marginLeft"]=20,n),ae)},{children:(oe.length>0?Oe(oe):De)||ie}))]}))}},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,s={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!c.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=l,t.jsxs=l},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!x.hasOwnProperty(i)&&(s[i]=t[i]);var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===s[i]&&(s[i]=c[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return o=o(c=e),e=""===s?"."+C(c,0):s,_(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(c=0,s=""===s?".":s+":",_(e))for(var l=0;l<e.length;l++){var u=s+C(a=e[l],l);c+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=N(a=a.value,t,i,u=s+C(a,l++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)E.call(t,l)&&!x.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,c=e[a],l=a+1,u=e[l];if(0>s(c,n))l<i&&0>s(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[a]=n,r=a);else{if(!(l<i&&0>s(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(l))m=!0,O(E);else{var t=r(u);null!==t&&D(_,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,y(k),k=-1),p=!0;var s=f;try{for(b(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(l)&&i(l),b(n)}else i(l);d=r(l)}if(null!==d)var c=!0;else{var h=r(u);null!==h&&D(_,h.startTime-n),c=!1}return c}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,x=!1,I=null,k=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?S():(x=!1,I=null)}}else x=!1}if("function"===typeof w)S=function(){w(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,S=function(){R.postMessage(null)}}else S=function(){v(A,0)};function O(e){I=e,x||(x=!0,S())}function D(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(l)&&e===r(u)&&(g?(y(k),k=-1):g=!0,D(_,s-o))):(e.sortIndex=a,n(l,e),m||p||(m=!0,O(E))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),c=0;c<s.length;c++){var l=s[c];if(!a(l))return!1;var u=e[l],h=t[l];if(!1===(i=n?n.call(r,u,h,l):void 0)||void 0===i&&u!==h)return!1}return!0}},440:e=>{"use strict";var t=function(){};e.exports=t},139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/booksuggester/",n.nc=void 0,(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>Pr,SDK_VERSION:()=>Li,_DEFAULT_ENTRY_NAME:()=>Si,_addComponent:()=>Ti,_addOrOverwriteComponent:()=>Ci,_apps:()=>Ii,_clearComponents:()=>Ri,_components:()=>ki,_getProvider:()=>Ai,_registerComponent:()=>Ni,_removeServiceInstance:()=>Pi,deleteApp:()=>Ui,getApp:()=>Fi,getApps:()=>ji,initializeApp:()=>Mi,onLog:()=>Bi,registerVersion:()=>Vi,setLogLevel:()=>zi});var t=n(43),r=n(950);function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}var o=n(173),a=n.n(o);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function l(e){return"/"===e.charAt(0)}function u(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}const h=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],s=e&&l(e),o=t&&l(t),a=s||o;if(e&&l(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var c=i[i.length-1];n="."===c||".."===c||""===c}else n=!1;for(var h=0,d=i.length;d>=0;d--){var f=i[d];"."===f?u(i,d):".."===f?(u(i,d),h++):h&&(u(i,d),h--)}if(!a)for(;h--;h)i.unshift("..");!a||""===i[0]||i[0]&&l(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};var d=!0,f="Invariant failed";function p(e,t){if(!e){if(d)throw new Error(f);var n="function"===typeof t?t():t,r=n?"".concat(f,": ").concat(n):f;throw new Error(r)}}function m(e){return"/"===e.charAt(0)?e:"/"+e}function g(e){return"/"===e.charAt(0)?e.substr(1):e}function v(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function y(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function w(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function b(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var s=t.indexOf("?");return-1!==s&&(n=t.substr(s),t=t.substr(0,s)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=c({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=h(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function _(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var s="function"===typeof e?e(t,n):e;"string"===typeof s?"function"===typeof r?r(s,i):i(!0):i(!1!==s)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var E=!("undefined"===typeof window||!window.document||!window.document.createElement);function S(e,t){t(window.confirm(e))}var x="popstate",I="hashchange";function k(){try{return window.history.state||{}}catch(e){return{}}}function T(e){void 0===e&&(e={}),E||p(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,s=i.forceRefresh,o=void 0!==s&&s,a=i.getUserConfirmation,l=void 0===a?S:a,u=i.keyLength,h=void 0===u?6:u,d=e.basename?y(m(e.basename)):"";function f(e){var t=e||{},n=t.key,r=t.state,i=window.location,s=i.pathname+i.search+i.hash;return d&&(s=v(s,d)),b(s,r,n)}function g(){return Math.random().toString(36).substr(2,h)}var T=_();function C(e){c(V,e),V.length=t.length,T.notifyListeners(V.location,V.action)}function N(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||R(f(e.state))}function A(){R(f(k()))}var P=!1;function R(e){if(P)P=!1,C();else{T.confirmTransitionTo(e,"POP",l,(function(t){t?C({action:"POP",location:e}):function(e){var t=V.location,n=D.indexOf(t.key);-1===n&&(n=0);var r=D.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(P=!0,M(i))}(e)}))}}var O=f(k()),D=[O.key];function L(e){return d+w(e)}function M(e){t.go(e)}var F=0;function j(e){1===(F+=e)&&1===e?(window.addEventListener(x,N),r&&window.addEventListener(I,A)):0===F&&(window.removeEventListener(x,N),r&&window.removeEventListener(I,A))}var U=!1;var V={length:t.length,action:"POP",location:O,createHref:L,push:function(e,r){var i="PUSH",s=b(e,r,g(),V.location);T.confirmTransitionTo(s,i,l,(function(e){if(e){var r=L(s),a=s.key,c=s.state;if(n)if(t.pushState({key:a,state:c},null,r),o)window.location.href=r;else{var l=D.indexOf(V.location.key),u=D.slice(0,l+1);u.push(s.key),D=u,C({action:i,location:s})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",s=b(e,r,g(),V.location);T.confirmTransitionTo(s,i,l,(function(e){if(e){var r=L(s),a=s.key,c=s.state;if(n)if(t.replaceState({key:a,state:c},null,r),o)window.location.replace(r);else{var l=D.indexOf(V.location.key);-1!==l&&(D[l]=s.key),C({action:i,location:s})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=T.setPrompt(e);return U||(j(1),U=!0),function(){return U&&(U=!1,j(-1)),t()}},listen:function(e){var t=T.appendListener(e);return j(1),function(){j(-1),t()}}};return V}var C="hashchange",N={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+g(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:g,decodePath:m},slash:{encodePath:m,decodePath:m}};function A(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function P(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function R(e){window.location.replace(A(window.location.href)+"#"+e)}function O(e){void 0===e&&{},E||p(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?S:r,s=n.hashType,o=void 0===s?"slash":s,a=e.basename?y(m(e.basename)):"",l=N[o],u=l.encodePath,h=l.decodePath;function d(){var e=h(P());return a&&v(e,a),b(e)}var f=_();function g(e){c(V,e),V.length=t.length,f.notifyListeners(V.location,V.action)}var x=!1,I=null;function k(){var e=P(),t=u(e);if(e!==t)R(t);else{var n=d(),r=V.location;if(!x&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(I===w(n))return;null,function(e){if(x)!1,g();else{var t="POP";f.confirmTransitionTo(e,t,i,(function(n){n?g({action:t,location:e}):function(e){var t=V.location,n=L.lastIndexOf(w(t));-1===n&&0;var r=L.lastIndexOf(w(e));-1===r&&0;var i=n-r;i&&(!0,M(i))}(e)}))}}(n)}}var T=P(),O=u(T);T!==O&&R(O);var D=d(),L=[w(D)];function M(e){t.go(e)}var F=0;function j(e){1===(F+=e)&&1===e?window.addEventListener(C,k):0===F&&window.removeEventListener(C,k)}var U=!1;var V={length:t.length,action:"POP",location:D,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&A(window.location.href),n+"#"+u(a+w(e))},push:function(e,t){var n="PUSH",r=b(e,void 0,void 0,V.location);f.confirmTransitionTo(r,n,i,(function(e){if(e){var t=w(r),i=u(a+t);if(P()!==i){t,function(e){window.location.hash=e}(i);var s=L.lastIndexOf(w(V.location)),o=L.slice(0,s+1);o.push(t),o,g({action:n,location:r})}else g()}}))},replace:function(e,t){var n="REPLACE",r=b(e,void 0,void 0,V.location);f.confirmTransitionTo(r,n,i,(function(e){if(e){var t=w(r),i=u(a+t);P()!==i&&(t,R(i));var s=L.indexOf(w(V.location));-1!==s&&(L[s]=t),g({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&!1;var t=f.setPrompt(e);return U||(j(1),!0),function(){return U&&(!1,j(-1)),t()}},listen:function(e){var t=f.appendListener(e);return j(1),function(){j(-1),t()}}};return V}function D(e,t,n){return Math.min(Math.max(e,t),n)}var L=n(123),M=n.n(L);n(86);function F(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var j=n(219),U=n.n(j),V=1073741823,B="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var z=t.createContext||function(e,n){var r,i,o="__create-react-context-"+function(){var e="__global_unique_id__";return B[e]=(B[e]||0)+1}()+"__",c=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}s(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):V,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);c.childContextTypes=((r={})[o]=a().object.isRequired,r);var l=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}s(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?V:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?V:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return l.contextTypes=((i={})[o]=a().object,i),{Provider:c,Consumer:l}},q=function(e){var t=z();return t.displayName=e,t},W=q("Router-History"),K=q("Router"),H=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}s(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return t.createElement(K.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(W.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;t.Component;var G={},Q=1e4,$=0;function Y(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,s=void 0!==i&&i,o=n.strict,a=void 0!==o&&o,c=n.sensitive,l=void 0!==c&&c;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=G[n]||(G[n]={});if(r[e])return r[e];var i=[],s={regexp:M()(e,i,t),keys:i};return $<Q&&(r[e]=s,$++),s}(n,{end:s,strict:a,sensitive:l}),i=r.regexp,o=r.keys,c=i.exec(e);if(!c)return null;var u=c[0],h=c.slice(1),d=e===u;return s&&!d?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:d,params:o.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var J=function(e){function n(){return e.apply(this,arguments)||this}return s(n,e),n.prototype.render=function(){var e=this;return t.createElement(K.Consumer,null,(function(n){n||p(!1);var r=e.props.location||n.location,i=c({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?Y(r.pathname,e.props):n.match}),s=e.props,o=s.children,a=s.component,l=s.render;return Array.isArray(o)&&function(e){return 0===t.Children.count(e)}(o)&&(o=null),t.createElement(K.Provider,{value:i},i.match?o?"function"===typeof o?o(i):o:a?t.createElement(a,i):l?l(i):null:"function"===typeof o?o(i):null)}))},n}(t.Component);function X(e){return"/"===e.charAt(0)?e:"/"+e}function Z(e,t){if(!e)return t;var n=X(e);return 0!==t.pathname.indexOf(n)?t:c({},t,{pathname:t.pathname.substr(n.length)})}function ee(e){return"string"===typeof e?e:w(e)}function te(e){return function(){p(!1)}}function ne(){}t.Component;var re=function(e){function n(){return e.apply(this,arguments)||this}return s(n,e),n.prototype.render=function(){var e=this;return t.createElement(K.Consumer,null,(function(n){n||p(!1);var r,i,s=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var o=e.props.path||e.props.from;i=o?Y(s.pathname,c({},e.props,{path:o})):n.match}})),i?t.cloneElement(r,{location:s,computedMatch:i}):null}))},n}(t.Component);function ie(e){var n="withRouter("+(e.displayName||e.name)+")",r=function(n){var r=n.wrappedComponentRef,i=F(n,["wrappedComponentRef"]);return t.createElement(K.Consumer,null,(function(n){return n||p(!1),t.createElement(e,c({},i,n,{ref:r}))}))};return r.displayName=n,r.WrappedComponent=e,U()(r,e)}t.useContext;var se=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=T(t.props),t}return s(n,e),n.prototype.render=function(){return t.createElement(H,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var oe=function(e,t){return"function"===typeof e?e(t):e},ae=function(e,t){return"string"===typeof e?b(e,null,null,t):e},ce=function(e){return e},le=t.forwardRef;"undefined"===typeof le&&(le=ce);var ue=le((function(e,n){var r=e.innerRef,i=e.navigate,s=e.onClick,o=F(e,["innerRef","navigate","onClick"]),a=o.target,l=c({},o,{onClick:function(e){try{s&&s(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||a&&"_self"!==a||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return l.ref=ce!==le&&n||r,t.createElement("a",l)}));var he=le((function(e,n){var r=e.component,i=void 0===r?ue:r,s=e.replace,o=e.to,a=e.innerRef,l=F(e,["component","replace","to","innerRef"]);return t.createElement(K.Consumer,null,(function(e){e||p(!1);var r=e.history,u=ae(oe(o,e.location),e.location),h=u?r.createHref(u):"",d=c({},l,{href:h,navigate:function(){var t=oe(o,e.location),n=w(e.location)===w(ae(t));(s||n?r.replace:r.push)(t)}});return ce!==le?d.ref=n||a:d.innerRef=a,t.createElement(i,d)}))})),de=function(e){return e},fe=t.forwardRef;"undefined"===typeof fe&&(fe=de);var pe=fe((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,s=e.activeClassName,o=void 0===s?"active":s,a=e.activeStyle,l=e.className,u=e.exact,h=e.isActive,d=e.location,f=e.sensitive,m=e.strict,g=e.style,v=e.to,y=e.innerRef,w=F(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(K.Consumer,null,(function(e){e||p(!1);var r=d||e.location,s=ae(oe(v,r),r),b=s.pathname,_=b&&b.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),E=_?Y(r.pathname,{path:_,exact:u,sensitive:f,strict:m}):null,S=!!(h?h(E,r):E),x="function"===typeof l?l(S):l,I="function"===typeof g?g(S):g;S&&(x=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(x,o),I=c({},I,a));var k=c({"aria-current":S&&i||null,className:x,style:I,to:s},w);return de!==fe?k.ref=n||y:k.innerRef=y,t.createElement(he,k)}))}));function me(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ge=function(){return ge=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ge.apply(this,arguments)};Object.create;function ve(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var ye=n(324),we=n.n(ye),be="-ms-",_e="-moz-",Ee="-webkit-",Se="comm",xe="rule",Ie="decl",ke="@import",Te="@keyframes",Ce="@layer",Ne=Math.abs,Ae=String.fromCharCode,Pe=Object.assign;function Re(e){return e.trim()}function Oe(e,t){return(e=t.exec(e))?e[0]:e}function De(e,t,n){return e.replace(t,n)}function Le(e,t,n){return e.indexOf(t,n)}function Me(e,t){return 0|e.charCodeAt(t)}function Fe(e,t,n){return e.slice(t,n)}function je(e){return e.length}function Ue(e){return e.length}function Ve(e,t){return t.push(e),e}function Be(e,t){return e.filter((function(e){return!Oe(e,t)}))}var ze=1,qe=1,We=0,Ke=0,He=0,Ge="";function Qe(e,t,n,r,i,s,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:ze,column:qe,length:o,return:"",siblings:a}}function $e(e,t){return Pe(Qe("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function Ye(e){for(;e.root;)e=$e(e.root,{children:[e]});Ve(e,e.siblings)}function Je(){return He=Ke>0?Me(Ge,--Ke):0,qe--,10===He&&(qe=1,ze--),He}function Xe(){return He=Ke<We?Me(Ge,Ke++):0,qe++,10===He&&(qe=1,ze++),He}function Ze(){return Me(Ge,Ke)}function et(){return Ke}function tt(e,t){return Fe(Ge,e,t)}function nt(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function rt(e){return ze=qe=1,We=je(Ge=e),Ke=0,[]}function it(e){return Ge="",e}function st(e){return Re(tt(Ke-1,ct(91===e?e+2:40===e?e+1:e)))}function ot(e){for(;(He=Ze())&&He<33;)Xe();return nt(e)>2||nt(He)>3?"":" "}function at(e,t){for(;--t&&Xe()&&!(He<48||He>102||He>57&&He<65||He>70&&He<97););return tt(e,et()+(t<6&&32==Ze()&&32==Xe()))}function ct(e){for(;Xe();)switch(He){case e:return Ke;case 34:case 39:34!==e&&39!==e&&ct(He);break;case 40:41===e&&ct(e);break;case 92:Xe()}return Ke}function lt(e,t){for(;Xe()&&e+He!==57&&(e+He!==84||47!==Ze()););return"/*"+tt(t,Ke-1)+"*"+Ae(47===e?e:Xe())}function ut(e){for(;!nt(Ze());)Xe();return tt(e,Ke)}function ht(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function dt(e,t,n,r){switch(e.type){case Ce:if(e.children.length)break;case ke:case Ie:return e.return=e.return||e.value;case Se:return"";case Te:return e.return=e.value+"{"+ht(e.children,r)+"}";case xe:if(!je(e.value=e.props.join(",")))return""}return je(n=ht(e.children,r))?e.return=e.value+"{"+n+"}":""}function ft(e,t,n){switch(function(e,t){return 45^Me(e,0)?(((t<<2^Me(e,0))<<2^Me(e,1))<<2^Me(e,2))<<2^Me(e,3):0}(e,t)){case 5103:return Ee+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ee+e+e;case 4789:return _e+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ee+e+_e+e+be+e+e;case 5936:switch(Me(e,t+11)){case 114:return Ee+e+be+De(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ee+e+be+De(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ee+e+be+De(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Ee+e+be+e+e;case 6165:return Ee+e+be+"flex-"+e+e;case 5187:return Ee+e+De(e,/(\w+).+(:[^]+)/,Ee+"box-$1$2"+be+"flex-$1$2")+e;case 5443:return Ee+e+be+"flex-item-"+De(e,/flex-|-self/g,"")+(Oe(e,/flex-|baseline/)?"":be+"grid-row-"+De(e,/flex-|-self/g,""))+e;case 4675:return Ee+e+be+"flex-line-pack"+De(e,/align-content|flex-|-self/g,"")+e;case 5548:return Ee+e+be+De(e,"shrink","negative")+e;case 5292:return Ee+e+be+De(e,"basis","preferred-size")+e;case 6060:return Ee+"box-"+De(e,"-grow","")+Ee+e+be+De(e,"grow","positive")+e;case 4554:return Ee+De(e,/([^-])(transform)/g,"$1"+Ee+"$2")+e;case 6187:return De(De(De(e,/(zoom-|grab)/,Ee+"$1"),/(image-set)/,Ee+"$1"),e,"")+e;case 5495:case 3959:return De(e,/(image-set\([^]*)/,Ee+"$1$`$1");case 4968:return De(De(e,/(.+:)(flex-)?(.*)/,Ee+"box-pack:$3"+be+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ee+e+e;case 4200:if(!Oe(e,/flex-|baseline/))return be+"grid-column-align"+Fe(e,t)+e;break;case 2592:case 3360:return be+De(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,Oe(e.props,/grid-\w+-end/)}))?~Le(e+(n=n[t].value),"span",0)?e:be+De(e,"-start","")+e+be+"grid-row-span:"+(~Le(n,"span",0)?Oe(n,/\d+/):+Oe(n,/\d+/)-+Oe(e,/\d+/))+";":be+De(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return Oe(e.props,/grid-\w+-start/)}))?e:be+De(De(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return De(e,/(.+)-inline(.+)/,Ee+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(je(e)-1-t>6)switch(Me(e,t+1)){case 109:if(45!==Me(e,t+4))break;case 102:return De(e,/(.+:)(.+)-([^]+)/,"$1"+Ee+"$2-$3$1"+_e+(108==Me(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Le(e,"stretch",0)?ft(De(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return De(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,r,i,s,o,a){return be+n+":"+r+a+(i?be+n+"-span:"+(s?o:+o-+r)+a:"")+e}));case 4949:if(121===Me(e,t+6))return De(e,":",":"+Ee)+e;break;case 6444:switch(Me(e,45===Me(e,14)?18:11)){case 120:return De(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ee+(45===Me(e,14)?"inline-":"")+"box$3$1"+Ee+"$2$3$1"+be+"$2box$3")+e;case 100:return De(e,":",":"+be)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return De(e,"scroll-","scroll-snap-")+e}return e}function pt(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case Ie:return void(e.return=ft(e.value,e.length,n));case Te:return ht([$e(e,{value:De(e.value,"@","@"+Ee)})],r);case xe:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(Oe(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Ye($e(e,{props:[De(t,/:(read-\w+)/,":"+_e+"$1")]})),Ye($e(e,{props:[t]})),Pe(e,{props:Be(n,r)});break;case"::placeholder":Ye($e(e,{props:[De(t,/:(plac\w+)/,":"+Ee+"input-$1")]})),Ye($e(e,{props:[De(t,/:(plac\w+)/,":"+_e+"$1")]})),Ye($e(e,{props:[De(t,/:(plac\w+)/,be+"input-$1")]})),Ye($e(e,{props:[t]})),Pe(e,{props:Be(n,r)})}return""}))}}function mt(e){return it(gt("",null,null,null,[""],e=rt(e),0,[0],e))}function gt(e,t,n,r,i,s,o,a,c){for(var l=0,u=0,h=o,d=0,f=0,p=0,m=1,g=1,v=1,y=0,w="",b=i,_=s,E=r,S=w;g;)switch(p=y,y=Xe()){case 40:if(108!=p&&58==Me(S,h-1)){-1!=Le(S+=De(st(y),"&","&\f"),"&\f",Ne(l?a[l-1]:0))&&(v=-1);break}case 34:case 39:case 91:S+=st(y);break;case 9:case 10:case 13:case 32:S+=ot(p);break;case 92:S+=at(et()-1,7);continue;case 47:switch(Ze()){case 42:case 47:Ve(yt(lt(Xe(),et()),t,n,c),c);break;default:S+="/"}break;case 123*m:a[l++]=je(S)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+u:-1==v&&(S=De(S,/\f/g,"")),f>0&&je(S)-h&&Ve(f>32?wt(S+";",r,n,h-1,c):wt(De(S," ","")+";",r,n,h-2,c),c);break;case 59:S+=";";default:if(Ve(E=vt(S,t,n,l,u,i,a,w,b=[],_=[],h,s),s),123===y)if(0===u)gt(S,t,E,E,b,s,h,a,_);else switch(99===d&&110===Me(S,3)?100:d){case 100:case 108:case 109:case 115:gt(e,E,E,r&&Ve(vt(e,E,E,0,0,i,a,w,i,b=[],h,_),_),i,_,h,a,r?b:_);break;default:gt(S,E,E,E,[""],_,0,a,_)}}l=u=f=0,m=v=1,w=S="",h=o;break;case 58:h=1+je(S),f=p;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==Je())continue;switch(S+=Ae(y),y*m){case 38:v=u>0?1:(S+="\f",-1);break;case 44:a[l++]=(je(S)-1)*v,v=1;break;case 64:45===Ze()&&(S+=st(Xe())),d=Ze(),u=h=je(w=S+=ut(et())),y++;break;case 45:45===p&&2==je(S)&&(m=0)}}return s}function vt(e,t,n,r,i,s,o,a,c,l,u,h){for(var d=i-1,f=0===i?s:[""],p=Ue(f),m=0,g=0,v=0;m<r;++m)for(var y=0,w=Fe(e,d+1,d=Ne(g=o[m])),b=e;y<p;++y)(b=Re(g>0?f[y]+" "+w:De(w,/&\f/g,f[y])))&&(c[v++]=b);return Qe(e,t,n,0===i?xe:a,c,l,u,h)}function yt(e,t,n,r){return Qe(e,t,n,Se,Ae(He),Fe(e,2,-2),0,r)}function wt(e,t,n,r,i){return Qe(e,t,n,Ie,Fe(e,0,r),Fe(e,r+1,-1),r,i)}const bt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var _t="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",Et="active",St="data-styled-version",xt="6.1.8",It="/*!sc*/\n",kt="undefined"!=typeof window&&"HTMLElement"in window,Tt=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),Ct=(new Set,Object.freeze([])),Nt=Object.freeze({});function At(e,t,n){return void 0===n&&(n=Nt),e.theme!==n.theme&&e.theme||t||n.theme}var Pt=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Rt=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Ot=/(^-|-$)/g;function Dt(e){return e.replace(Rt,"-").replace(Ot,"")}var Lt=/(a)(d)/gi,Mt=52,Ft=function(e){return String.fromCharCode(e+(e>25?39:97))};function jt(e){var t,n="";for(t=Math.abs(e);t>Mt;t=t/Mt|0)n=Ft(t%Mt)+n;return(Ft(t%Mt)+n).replace(Lt,"$1-$2")}var Ut,Vt=5381,Bt=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},zt=function(e){return Bt(Vt,e)};function qt(e){return jt(zt(e)>>>0)}function Wt(e){return e.displayName||e.name||"Component"}function Kt(e){return"string"==typeof e&&!0}var Ht="function"==typeof Symbol&&Symbol.for,Gt=Ht?Symbol.for("react.memo"):60115,Qt=Ht?Symbol.for("react.forward_ref"):60112,$t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Yt={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Jt={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Xt=((Ut={})[Qt]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ut[Gt]=Jt,Ut);function Zt(e){return("type"in(t=e)&&t.type.$$typeof)===Gt?Jt:"$$typeof"in e?Xt[e.$$typeof]:$t;var t}var en=Object.defineProperty,tn=Object.getOwnPropertyNames,nn=Object.getOwnPropertySymbols,rn=Object.getOwnPropertyDescriptor,sn=Object.getPrototypeOf,on=Object.prototype;function an(e,t,n){if("string"!=typeof t){if(on){var r=sn(t);r&&r!==on&&an(e,r,n)}var i=tn(t);nn&&(i=i.concat(nn(t)));for(var s=Zt(e),o=Zt(t),a=0;a<i.length;++a){var c=i[a];if(!(c in Yt||n&&n[c]||o&&c in o||s&&c in s)){var l=rn(t,c);try{en(e,c,l)}catch(e){}}}}return e}function cn(e){return"function"==typeof e}function ln(e){return"object"==typeof e&&"styledComponentId"in e}function un(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function hn(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function dn(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function fn(e,t,n){if(void 0===n&&(n=!1),!n&&!dn(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=fn(e[r],t[r]);else if(dn(t))for(var r in t)e[r]=fn(e[r],t[r]);return e}function pn(e,t){Object.defineProperty(e,"toString",{value:t})}function mn(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var gn=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw mn(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var s=r;s<i;s++)this.groupSizes[s]=0}for(var o=this.indexOfGroup(e+1),a=(s=0,t.length);s<a;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,s=r;s<i;s++)t+="".concat(this.tag.getRule(s)).concat(It);return t},e}(),vn=new Map,yn=new Map,wn=1,bn=function(e){if(vn.has(e))return vn.get(e);for(;yn.has(wn);)wn++;var t=wn++;return vn.set(e,t),yn.set(t,e),t},_n=function(e,t){wn=t+1,vn.set(e,t),yn.set(t,e)},En="style[".concat(_t,"][").concat(St,'="').concat(xt,'"]'),Sn=new RegExp("^".concat(_t,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),xn=function(e,t,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&e.registerName(t,r)},In=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(It),i=[],s=0,o=r.length;s<o;s++){var a=r[s].trim();if(a){var c=a.match(Sn);if(c){var l=0|parseInt(c[1],10),u=c[2];0!==l&&(_n(u,l),xn(e,u,c[3]),e.getTag().insertRules(l,i)),i.length=0}else i.push(a)}}};function kn(){return n.nc}var Tn=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(_t,"]")));return t[t.length-1]}(n),s=void 0!==i?i.nextSibling:null;r.setAttribute(_t,Et),r.setAttribute(St,xt);var o=kn();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},Cn=function(){function e(e){this.element=Tn(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw mn(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),Nn=function(){function e(e){this.element=Tn(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),An=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Pn=kt,Rn={isServer:!kt,useCSSOMInjection:!Tt},On=function(){function e(e,t,n){void 0===e&&(e=Nt),void 0===t&&(t={});var r=this;this.options=ge(ge({},Rn),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&kt&&Pn&&(Pn=!1,function(e){for(var t=document.querySelectorAll(En),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(_t)!==Et&&(In(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this)),pn(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return yn.get(e)}(n);if(void 0===i)return"continue";var s=e.names.get(i),o=t.getGroup(n);if(void 0===s||0===o.length)return"continue";var a="".concat(_t,".g").concat(n,'[id="').concat(i,'"]'),c="";void 0!==s&&s.forEach((function(e){e.length>0&&(c+="".concat(e,","))})),r+="".concat(o).concat(a,'{content:"').concat(c,'"}').concat(It)},s=0;s<n;s++)i(s);return r}(r)}))}return e.registerId=function(e){return bn(e)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(ge(ge({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new An(n):t?new Cn(n):new Nn(n)}(this.options),new gn(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(bn(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(bn(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(bn(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),Dn=/&/g,Ln=/^\s*\/\/.*$/gm;function Mn(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=Mn(e.children,t)),e}))}function Fn(e){var t,n,r,i=void 0===e?Nt:e,s=i.options,o=void 0===s?Nt:s,a=i.plugins,c=void 0===a?Ct:a,l=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},u=c.slice();u.push((function(e){e.type===xe&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(Dn,n).replace(r,l))})),o.prefix&&u.push(pt),u.push(dt);var h=function(e,i,s,a){void 0===i&&(i=""),void 0===s&&(s=""),void 0===a&&(a="&"),t=a,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var c=e.replace(Ln,""),l=mt(s||i?"".concat(s," ").concat(i," { ").concat(c," }"):c);o.namespace&&(l=Mn(l,o.namespace));var h,d=[];return ht(l,function(e){var t=Ue(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}(u.concat((h=function(e){return d.push(e)},function(e){e.root||(e=e.return)&&h(e)})))),d};return h.hash=c.length?c.reduce((function(e,t){return t.name||mn(15),Bt(e,t.name)}),Vt).toString():"",h}var jn=new On,Un=Fn(),Vn=t.createContext({shouldForwardProp:void 0,styleSheet:jn,stylis:Un}),Bn=(Vn.Consumer,t.createContext(void 0));function zn(){return(0,t.useContext)(Vn)}function qn(e){var n=(0,t.useState)(e.stylisPlugins),r=n[0],i=n[1],s=zn().styleSheet,o=(0,t.useMemo)((function(){var t=s;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target,s]),a=(0,t.useMemo)((function(){return Fn({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:r})}),[e.enableVendorPrefixes,e.namespace,r]);(0,t.useEffect)((function(){we()(r,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]);var c=(0,t.useMemo)((function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:o,stylis:a}}),[e.shouldForwardProp,o,a]);return t.createElement(Vn.Provider,{value:c},t.createElement(Bn.Provider,{value:a},e.children))}var Wn=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=Un);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,pn(this,(function(){throw mn(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=Un),this.name+e.hash},e}(),Kn=function(e){return e>="A"&&e<="Z"};function Hn(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;Kn(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var Gn=function(e){return null==e||!1===e||""===e},Qn=function(e){var t,n,r=[];for(var i in e){var s=e[i];e.hasOwnProperty(i)&&!Gn(s)&&(Array.isArray(s)&&s.isCss||cn(s)?r.push("".concat(Hn(i),":"),s,";"):dn(s)?r.push.apply(r,ve(ve(["".concat(i," {")],Qn(s),!1),["}"],!1)):r.push("".concat(Hn(i),": ").concat((t=i,null==(n=s)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in bt||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function $n(e,t,n,r){return Gn(e)?[]:ln(e)?[".".concat(e.styledComponentId)]:cn(e)?!cn(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:$n(e(t),t,n,r):e instanceof Wn?n?(e.inject(n,r),[e.getName(r)]):[e]:dn(e)?Qn(e):Array.isArray(e)?Array.prototype.concat.apply(Ct,e.map((function(e){return $n(e,t,n,r)}))):[e.toString()];var i}function Yn(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(cn(n)&&!ln(n))return!1}return!0}var Jn=zt(xt),Xn=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Yn(e),this.componentId=t,this.baseHash=Bt(Jn,t),this.baseStyle=n,On.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=un(r,this.staticRulesId);else{var i=hn($n(this.rules,e,t,n)),s=jt(Bt(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,s)){var o=n(i,".".concat(s),void 0,this.componentId);t.insertRules(this.componentId,s,o)}r=un(r,s),this.staticRulesId=s}else{for(var a=Bt(this.baseHash,n.hash),c="",l=0;l<this.rules.length;l++){var u=this.rules[l];if("string"==typeof u)c+=u;else if(u){var h=hn($n(u,e,t,n));a=Bt(a,h+l),c+=h}}if(c){var d=jt(a>>>0);t.hasNameForId(this.componentId,d)||t.insertRules(this.componentId,d,n(c,".".concat(d),void 0,this.componentId)),r=un(r,d)}}return r},e}(),Zn=t.createContext(void 0);Zn.Consumer;var er={};new Set;function tr(e,n,r){var i=ln(e),s=e,o=!Kt(e),a=n.attrs,c=void 0===a?Ct:a,l=n.componentId,u=void 0===l?function(e,t){var n="string"!=typeof e?"sc":Dt(e);er[n]=(er[n]||0)+1;var r="".concat(n,"-").concat(qt(xt+n+er[n]));return t?"".concat(t,"-").concat(r):r}(n.displayName,n.parentComponentId):l,h=n.displayName,d=void 0===h?function(e){return Kt(e)?"styled.".concat(e):"Styled(".concat(Wt(e),")")}(e):h,f=n.displayName&&n.componentId?"".concat(Dt(n.displayName),"-").concat(n.componentId):n.componentId||u,p=i&&s.attrs?s.attrs.concat(c).filter(Boolean):c,m=n.shouldForwardProp;if(i&&s.shouldForwardProp){var g=s.shouldForwardProp;if(n.shouldForwardProp){var v=n.shouldForwardProp;m=function(e,t){return g(e,t)&&v(e,t)}}else m=g}var y=new Xn(r,f,i?s.componentStyle:void 0);function w(e,n){return function(e,n,r){var i=e.attrs,s=e.componentStyle,o=e.defaultProps,a=e.foldedComponentIds,c=e.styledComponentId,l=e.target,u=t.useContext(Zn),h=zn(),d=e.shouldForwardProp||h.shouldForwardProp,f=At(n,u,o)||Nt,p=function(e,t,n){for(var r,i=ge(ge({},t),{className:void 0,theme:n}),s=0;s<e.length;s+=1){var o=cn(r=e[s])?r(i):r;for(var a in o)i[a]="className"===a?un(i[a],o[a]):"style"===a?ge(ge({},i[a]),o[a]):o[a]}return t.className&&(i.className=un(i.className,t.className)),i}(i,n,f),m=p.as||l,g={};for(var v in p)void 0===p[v]||"$"===v[0]||"as"===v||"theme"===v&&p.theme===f||("forwardedAs"===v?g.as=p.forwardedAs:d&&!d(v,m)||(g[v]=p[v]));var y=function(e,t){var n=zn();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(s,p),w=un(a,c);return y&&(w+=" "+y),p.className&&(w+=" "+p.className),g[Kt(m)&&!Pt.has(m)?"class":"className"]=w,g.ref=r,(0,t.createElement)(m,g)}(b,e,n)}w.displayName=d;var b=t.forwardRef(w);return b.attrs=p,b.componentStyle=y,b.displayName=d,b.shouldForwardProp=m,b.foldedComponentIds=i?un(s.foldedComponentIds,s.styledComponentId):"",b.styledComponentId=f,b.target=i?s.target:e,Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)fn(e,i[r],!0);return e}({},s.defaultProps,e):e}}),pn(b,(function(){return".".concat(b.styledComponentId)})),o&&an(b,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),b}function nr(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var rr=function(e){return Object.assign(e,{isCss:!0})};function ir(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(cn(e)||dn(e))return rr($n(nr(Ct,ve([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?$n(r):rr($n(nr(r,t)))}function sr(e,t,n){if(void 0===n&&(n=Nt),!t)throw mn(1,t);var r=function(r){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return e(t,n,ir.apply(void 0,ve([r],i,!1)))};return r.attrs=function(r){return sr(e,t,ge(ge({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return sr(e,t,ge(ge({},n),r))},r}var or=function(e){return sr(tr,e)},ar=or;Pt.forEach((function(e){ar[e]=or(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Yn(e),On.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,r){var i=r(hn($n(this.rules,t,n,r)),""),s=this.componentId+e;n.insertRules(s,s,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&On.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();function cr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=hn(ir.apply(void 0,ve([e],t,!1))),i=qt(r);return new Wn(i,r)}(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString(),n=kn(),r=hn([n&&'nonce="'.concat(n,'"'),"".concat(_t,'="true"'),"".concat(St,'="').concat(xt,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw mn(2);return e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)throw mn(2);var r=((n={})[_t]="",n[St]=xt,n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),i=kn();return i&&(r.nonce=i),[t.createElement("style",ge({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new On({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw mn(2);return t.createElement(qn,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw mn(3)}})(),"__sc-".concat(_t,"__");var lr=n(579);const ur=function(e){return(0,lr.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:23.335,height:23.335,...e,children:(0,lr.jsxs)("g",{"data-name":"Group 99",fill:"#fff",children:[(0,lr.jsx)("path",{"data-name":"Rectangle 58",d:"M21.213 0l2.121 2.121L2.121 23.335 0 21.213z"}),(0,lr.jsx)("path",{"data-name":"Rectangle 59",d:"M23.334 21.213l-2.121 2.121L-.001 2.121 2.121 0z"})]})})};const hr=n.p+"static/media/booksuggester.cd4082c51925227c2953c8290d3e50dd.svg";const dr=function(e){return(0,lr.jsx)("img",{src:hr,alt:"",style:{height:"30px"}})},fr=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},pr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(fr(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new mr;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class mr extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gr=function(e){return function(e){const t=fr(e);return pr.encodeByteArray(t,!0)}(e).replace(/\./g,"")},vr=function(e){try{return pr.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function yr(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&wr(n)&&(e[n]=yr(e[n],t[n]));return e}function wr(e){return"__proto__"!==e}const br=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,_r=()=>{try{return br()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/booksuggester",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&vr(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Er=()=>{var e;return null===(e=_r())||void 0===e?void 0:e.config};class Sr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function xr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ir(){var e;const t=null===(e=_r())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function kr(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Tr(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Cr(){const e=xr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Nr(){return!Ir()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ar(){try{return"object"===typeof indexedDB}catch(e){return!1}}class Pr extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rr.prototype.create)}}class Rr{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Or,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Pr(n,s,t)}}const Or=/\{\$([^}]+)}/g;function Dr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Lr(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Mr(n)&&Mr(s)){if(!Lr(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Mr(e){return null!==e&&"object"===typeof e}function Fr(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function jr(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Ur(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Vr(e,t){const n=new Br(e,t);return n.subscribe.bind(n)}class Br{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=zr),void 0===r.error&&(r.error=zr),void 0===r.complete&&(r.complete=zr);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function zr(){}function qr(e){return e&&e._delegate?e._delegate:e}class Wr{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Kr="[DEFAULT]";class Hr{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Sr;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Kr})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Gr(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr;return this.component?this.component.multipleInstances?e:Kr:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function Gr(e){return e===Kr?void 0:e}class Qr{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Hr(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const $r=[];var Yr;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Yr||(Yr={}));const Jr={debug:Yr.DEBUG,verbose:Yr.VERBOSE,info:Yr.INFO,warn:Yr.WARN,error:Yr.ERROR,silent:Yr.SILENT},Xr=Yr.INFO,Zr={[Yr.DEBUG]:"log",[Yr.VERBOSE]:"log",[Yr.INFO]:"info",[Yr.WARN]:"warn",[Yr.ERROR]:"error"},ei=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Zr[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class ti{constructor(e){this.name=e,this._logLevel=Xr,this._logHandler=ei,this._userLogHandler=null,$r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Yr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Jr[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Yr.DEBUG,...t),this._logHandler(this,Yr.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Yr.VERBOSE,...t),this._logHandler(this,Yr.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Yr.INFO,...t),this._logHandler(this,Yr.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Yr.WARN,...t),this._logHandler(this,Yr.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Yr.ERROR,...t),this._logHandler(this,Yr.ERROR,...t)}}const ni=(e,t)=>t.some((t=>e instanceof t));let ri,ii;const si=new WeakMap,oi=new WeakMap,ai=new WeakMap,ci=new WeakMap,li=new WeakMap;let ui={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return oi.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ai.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fi(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function hi(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ii||(ii=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(pi(this),n),fi(si.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return fi(e.apply(pi(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(pi(this),t,...r);return ai.set(s,t.sort?t.sort():[t]),fi(s)}}function di(e){return"function"===typeof e?hi(e):(e instanceof IDBTransaction&&function(e){if(oi.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));oi.set(e,t)}(e),ni(e,ri||(ri=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ui):e)}function fi(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(fi(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&si.set(t,e)})).catch((()=>{})),li.set(t,e),t}(e);if(ci.has(e))return ci.get(e);const t=di(e);return t!==e&&(ci.set(e,t),li.set(t,e)),t}const pi=e=>li.get(e);const mi=["get","getKey","getAll","getAllKeys","count"],gi=["put","add","delete","clear"],vi=new Map;function yi(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(vi.get(t))return vi.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=gi.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!mi.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return vi.set(t,s),s}ui=(e=>({...e,get:(t,n,r)=>yi(t,n)||e.get(t,n,r),has:(t,n)=>!!yi(t,n)||e.has(t,n)}))(ui);class wi{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const bi="@firebase/app",_i="0.9.28",Ei=new ti("@firebase/app"),Si="[DEFAULT]",xi={[bi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ii=new Map,ki=new Map;function Ti(e,t){try{e.container.addComponent(t)}catch(n){Ei.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ci(e,t){e.container.addOrOverwriteComponent(t)}function Ni(e){const t=e.name;if(ki.has(t))return Ei.debug("There were multiple attempts to register component ".concat(t,".")),!1;ki.set(t,e);for(const n of Ii.values())Ti(n,e);return!0}function Ai(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Pi(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Si;Ai(e,t).clearInstance(n)}function Ri(){ki.clear()}const Oi=new Rr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Di{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Wr("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oi.create("app-deleted",{appName:this._name})}}const Li="10.8.1";function Mi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Si,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Oi.create("bad-app-name",{appName:String(i)});if(n||(n=Er()),!n)throw Oi.create("no-options");const s=Ii.get(i);if(s){if(Lr(n,s.options)&&Lr(r,s.config))return s;throw Oi.create("duplicate-app",{appName:i})}const o=new Qr(i);for(const c of ki.values())o.addComponent(c);const a=new Di(n,r,o);return Ii.set(i,a),a}function Fi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Si;const t=Ii.get(e);if(!t&&e===Si&&Er())return Mi();if(!t)throw Oi.create("no-app",{appName:e});return t}function ji(){return Array.from(Ii.values())}async function Ui(e){const t=e.name;Ii.has(t)&&(Ii.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Vi(e,t,n){var r;let i=null!==(r=xi[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ei.warn(e.join(" "))}Ni(new Wr("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Bi(e,t){if(null!==e&&"function"!==typeof e)throw Oi.create("invalid-log-argument");!function(e,t){for(const n of $r){let r=null;t&&t.level&&(r=Jr[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Yr[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function zi(e){var t;t=e,$r.forEach((e=>{e.setLogLevel(t)}))}const qi="firebase-heartbeat-database",Wi=1,Ki="firebase-heartbeat-store";let Hi=null;function Gi(){return Hi||(Hi=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=fi(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(fi(o.result),e.oldVersion,e.newVersion,fi(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(qi,Wi,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ki)}catch(n){console.warn(n)}}}).catch((e=>{throw Oi.create("idb-open",{originalErrorMessage:e.message})}))),Hi}async function Qi(e,t){try{const n=(await Gi()).transaction(Ki,"readwrite"),r=n.objectStore(Ki);await r.put(t,$i(e)),await n.done}catch(n){if(n instanceof Pr)Ei.warn(n.message);else{const e=Oi.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Ei.warn(e.message)}}}function $i(e){return"".concat(e.name,"!").concat(e.options.appId)}class Yi{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Xi(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ji();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ji(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Zi(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Zi(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=gr(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ji(){return(new Date).toISOString().substring(0,10)}class Xi{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ar()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Gi()).transaction(Ki),n=await t.objectStore(Ki).get($i(e));return await t.done,n}catch(t){if(t instanceof Pr)Ei.warn(t.message);else{const e=Oi.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Ei.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Qi(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Qi(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Zi(e){return gr(JSON.stringify({version:2,heartbeats:e})).length}var es;es="",Ni(new Wr("platform-logger",(e=>new wi(e)),"PRIVATE")),Ni(new Wr("heartbeat",(e=>new Yi(e)),"PRIVATE")),Vi(bi,_i,es),Vi(bi,_i,"esm2017"),Vi("fire-js","");class ts{constructor(e,t){this._delegate=e,this.firebase=t,Ti(e,new Wr("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Ui(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Si;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Si;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Ti(this._delegate,e)}_addOrOverwriteComponent(e){Ci(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ns=new Rr("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const rs=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Mi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Dr(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Vi,setLogLevel:zi,onLog:Bi,apps:null,SDK_VERSION:Li,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(Ni(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw ns.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&yr(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Dr(n,e=e||Si))throw ns.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(ts);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){yr(n,e)},createSubscribe:Vr,ErrorFactory:Rr,deepExtend:yr}),n}(),is=new ti("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){is.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&is.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ss=rs;!function(e){Vi("@firebase/app-compat","0.2.28",e)}();ss.registerVersion("firebase","10.8.1","app-compat");var os,as="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},cs={},ls=ls||{},us=as||self;function hs(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ds(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var fs="closure_uid_"+(1e9*Math.random()>>>0),ps=0;function ms(e,t,n){return e.call.apply(e.bind,arguments)}function gs(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function vs(e,t,n){return(vs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ms:gs).apply(null,arguments)}function ys(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ws(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function bs(){this.s=this.s,this.o=this.o}bs.prototype.s=!1,bs.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,fs)&&e[fs]||(e[fs]=++ps))},bs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const _s=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Es(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ss(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(hs(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function xs(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}xs.prototype.h=function(){this.defaultPrevented=!0};var Is=function(){if(!us.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};us.addEventListener("test",e,t),us.removeEventListener("test",e,t)}catch(n){}return e}();function ks(e){return/^[\s\xa0]*$/.test(e)}function Ts(){var e=us.navigator;return e&&(e=e.userAgent)?e:""}function Cs(e){return-1!=Ts().indexOf(e)}function Ns(e){return Ns[" "](e),e}Ns[" "]=function(){};var As,Ps,Rs=Cs("Opera"),Os=Cs("Trident")||Cs("MSIE"),Ds=Cs("Edge"),Ls=Ds||Os,Ms=Cs("Gecko")&&!(-1!=Ts().toLowerCase().indexOf("webkit")&&!Cs("Edge"))&&!(Cs("Trident")||Cs("MSIE"))&&!Cs("Edge"),Fs=-1!=Ts().toLowerCase().indexOf("webkit")&&!Cs("Edge");function js(){var e=us.document;return e?e.documentMode:void 0}e:{var Us="",Vs=function(){var e=Ts();return Ms?/rv:([^\);]+)(\)|;)/.exec(e):Ds?/Edge\/([\d\.]+)/.exec(e):Os?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Fs?/WebKit\/(\S+)/.exec(e):Rs?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Vs&&(Us=Vs?Vs[1]:""),Os){var Bs=js();if(null!=Bs&&Bs>parseFloat(Us)){As=String(Bs);break e}}As=Us}if(us.document&&Os){var zs=js();Ps=zs||(parseInt(As,10)||void 0)}else Ps=void 0;var qs=Ps;function Ws(e,t){if(xs.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ms){e:{try{Ns(t.nodeName);var i=!0;break e}catch(_t){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ks[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ws.$.h.call(this)}}ws(Ws,xs);var Ks={2:"touch",3:"pen",4:"mouse"};Ws.prototype.h=function(){Ws.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Hs="closure_listenable_"+(1e6*Math.random()|0),Gs=0;function Qs(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Gs,this.fa=this.ia=!1}function $s(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Ys(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Js(e){const t={};for(const n in e)t[n]=e[n];return t}const Xs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zs(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Xs.length;t++)n=Xs[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function eo(e){this.src=e,this.g={},this.h=0}function to(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=_s(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&($s(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function no(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}eo.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=no(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Qs(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var ro="closure_lm_"+(1e6*Math.random()|0),io={};function so(e,t,n,r,i){if(r&&r.once)return ao(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)so(e,t[s],n,r,i);return null}return n=mo(n),e&&e[Hs]?e.O(t,n,ds(r)?!!r.capture:!!r,i):oo(e,t,n,!1,r,i)}function oo(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=ds(i)?!!i.capture:!!i,a=fo(e);if(a||(e[ro]=a=new eo(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ho;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Is||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(uo(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ao(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ao(e,t[s],n,r,i);return null}return n=mo(n),e&&e[Hs]?e.P(t,n,ds(r)?!!r.capture:!!r,i):oo(e,t,n,!0,r,i)}function co(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)co(e,t[s],n,r,i);else r=ds(r)?!!r.capture:!!r,n=mo(n),e&&e[Hs]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=no(s=e.g[t],n,r,i))&&($s(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=fo(e))&&(t=e.g[t.toString()],e=-1,t&&(e=no(t,n,r,i)),(n=-1<e?t[e]:null)&&lo(n))}function lo(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Hs])to(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(uo(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=fo(t))?(to(n,e),0==n.h&&(n.src=null,t[ro]=null)):$s(e)}}}function uo(e){return e in io?io[e]:io[e]="on"+e}function ho(e,t){if(e.fa)e=!0;else{t=new Ws(t,this);var n=e.listener,r=e.la||e.src;e.ia&&lo(e),e=n.call(r,t)}return e}function fo(e){return(e=e[ro])instanceof eo?e:null}var po="__closure_events_fn_"+(1e9*Math.random()>>>0);function mo(e){return"function"===typeof e?e:(e[po]||(e[po]=function(t){return e.handleEvent(t)}),e[po])}function go(){bs.call(this),this.i=new eo(this),this.S=this,this.J=null}function vo(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new xs(t,e);else if(t instanceof xs)t.target=t.target||e;else{var i=t;Zs(t=new xs(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=yo(o,r,!0,t)&&i}if(i=yo(o=t.g=e,r,!0,t)&&i,i=yo(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=yo(o=t.g=n[s],r,!1,t)&&i}function yo(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&to(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}ws(go,bs),go.prototype[Hs]=!0,go.prototype.removeEventListener=function(e,t,n,r){co(this,e,t,n,r)},go.prototype.N=function(){if(go.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$s(n[r]);delete t.g[e],t.h--}}this.J=null},go.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},go.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var wo=us.JSON.stringify;function bo(){var e=To;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _o=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Eo),(e=>e.reset()));class Eo{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function So(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function xo(e){us.setTimeout((()=>{throw e}),0)}let Io,ko=!1,To=new class{constructor(){this.h=this.g=null}add(e,t){const n=_o.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Co=()=>{const e=us.Promise.resolve(void 0);Io=()=>{e.then(No)}};var No=()=>{for(var e;e=bo();){try{e.h.call(e.g)}catch(n){xo(n)}var t=_o;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ko=!1};function Ao(e,t){go.call(this),this.h=e||1,this.g=t||us,this.j=vs(this.qb,this),this.l=Date.now()}function Po(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Ro(e,t,n){if("function"===typeof e)n&&(e=vs(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=vs(e.handleEvent,e)}return 2147483647<Number(t)?-1:us.setTimeout(e,t||0)}function Oo(e){e.g=Ro((()=>{e.g=null,e.i&&(e.i=!1,Oo(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}ws(Ao,go),(os=Ao.prototype).ga=!1,os.T=null,os.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),vo(this,"tick"),this.ga&&(Po(this),this.start()))}},os.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},os.N=function(){Ao.$.N.call(this),Po(this),delete this.g};class Do extends bs{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Oo(this)}N(){super.N(),this.g&&(us.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lo(e){bs.call(this),this.h=e,this.g={}}ws(Lo,bs);var Mo=[];function Fo(e,t,n,r){Array.isArray(n)||(n&&(Mo[0]=n.toString()),n=Mo);for(var i=0;i<n.length;i++){var s=so(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function jo(e){Ys(e.g,(function(e,t){this.g.hasOwnProperty(t)&&lo(e)}),e),e.g={}}function Uo(){this.g=!0}function Vo(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return wo(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Lo.prototype.N=function(){Lo.$.N.call(this),jo(this)},Lo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Uo.prototype.Ea=function(){this.g=!1},Uo.prototype.info=function(){};var Bo={},zo=null;function qo(){return zo=zo||new go}function Wo(e){xs.call(this,Bo.Ta,e)}function Ko(e){const t=qo();vo(t,new Wo(t))}function Ho(e,t){xs.call(this,Bo.STAT_EVENT,e),this.stat=t}function Go(e){const t=qo();vo(t,new Ho(t,e))}function Qo(e,t){xs.call(this,Bo.Ua,e),this.size=t}function $o(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return us.setTimeout((function(){e()}),t)}Bo.Ta="serverreachability",ws(Wo,xs),Bo.STAT_EVENT="statevent",ws(Ho,xs),Bo.Ua="timingevent",ws(Qo,xs);var Yo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Jo={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Xo(){}function Zo(e){return e.h||(e.h=e.i())}function ea(){}Xo.prototype.h=null;var ta,na={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ra(){xs.call(this,"d")}function ia(){xs.call(this,"c")}function sa(){}function oa(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Lo(this),this.P=ca,e=Ls?125:void 0,this.V=new Ao(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new aa}function aa(){this.i=null,this.g="",this.h=!1}ws(ra,xs),ws(ia,xs),ws(sa,Xo),sa.prototype.g=function(){return new XMLHttpRequest},sa.prototype.i=function(){return{}},ta=new sa;var ca=45e3,la={},ua={};function ha(e,t,n){e.L=1,e.A=Aa(Ia(t)),e.u=n,e.S=!0,da(e,null)}function da(e,t){e.G=Date.now(),ga(e),e.B=Ia(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),qa(n.i,"t",r),e.o=0,n=e.l.J,e.h=new aa,e.g=Wc(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Do(vs(e.Pa,e,e.g),e.O)),Fo(e.U,e.g,"readystatechange",e.nb),t=e.I?Js(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Ko(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function fa(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function pa(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=ma(e,n),r==ua){4==t&&(e.s=4,Go(14),i=!1),Vo(e.j,e.m,null,"[Incomplete Response]");break}if(r==la){e.s=4,Go(15),Vo(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Vo(e.j,e.m,r,null),_a(e,r)}fa(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Go(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mc(t),t.M=!0,Go(11))):(Vo(e.j,e.m,n,"[Invalid Chunked Response]"),ba(e),wa(e))}function ma(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?ua:(n=Number(t.substring(n,r)),isNaN(n)?la:(r+=1)+n>t.length?ua:(t=t.slice(r,r+n),e.o=r+n,t))}function ga(e){e.Y=Date.now()+e.P,va(e,e.P)}function va(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=$o(vs(e.lb,e),t)}function ya(e){e.C&&(us.clearTimeout(e.C),e.C=null)}function wa(e){0==e.l.H||e.J||Uc(e.l,e)}function ba(e){ya(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Po(e.V),jo(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function _a(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Ya(n.i,e)))if(!e.K&&Ya(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(Et){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;jc(n),Cc(n)}Lc(n),Go(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=$o(vs(n.ib,n),6e3));if(1>=$a(n.i)&&n.oa){try{n.oa()}catch(Et){}n.oa=void 0}}else Bc(n,11)}else if((e.K||n.g==e)&&jc(n),!ks(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ja(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Na(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=qc(r,r.J?r.pa:null,r.Y),o.K){Xa(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(ya(a),ga(a)),r.g=o}else Dc(r);0<n.j.length&&Ac(n)}else"stop"!=l[0]&&"close"!=l[0]||Bc(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Bc(n,7):Tc(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Ko()}catch(Et){}}function Ea(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(hs(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(hs(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(hs(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(os=oa.prototype).setTimeout=function(e){this.P=e},os.nb=function(e){e=e.target;const t=this.M;t&&3==_c(e)?t.l():this.Pa(e)},os.Pa=function(e){try{if(e==this.g)e:{const u=_c(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Ls||this.g&&(this.h.h||this.g.ja()||Ec(this.g)))){this.J||4!=u||7==t||Ko(),ya(this);var n=this.g.da();this.ca=n;t:if(fa(this)){var r=Ec(this.g);e="";var i=r.length,s=4==_c(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ba(this),wa(this);var o="";break t}this.h.i=new us.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ks(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,Go(12),ba(this),wa(this);break e}Vo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_a(this,n)}this.S?(pa(this,u,o),Ls&&this.i&&3==u&&(Fo(this.U,this.V,"tick",this.mb),this.V.start())):(Vo(this.j,this.m,o,null),_a(this,o)),4==u&&ba(this),this.i&&!this.J&&(4==u?Uc(this.l,this):(this.i=!1,ga(this)))}else(function(e){const t={};e=(e.g&&2<=_c(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(ks(e[r]))continue;var n=So(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Go(12)):(this.s=0,Go(13)),ba(this),wa(this)}}}catch(u){}},os.mb=function(){if(this.g){var e=_c(this.g),t=this.g.ja();this.o<t.length&&(ya(this),pa(this,e,t),this.i&&4!=e&&ga(this))}},os.cancel=function(){this.J=!0,ba(this)},os.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Ko(),Go(17)),ba(this),this.s=2,wa(this)):va(this,this.Y-e)};var Sa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xa(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof xa){this.h=e.h,ka(this,e.j),this.s=e.s,this.g=e.g,Ta(this,e.m),this.l=e.l;var t=e.i,n=new Ua;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ca(this,n),this.o=e.o}else e&&(t=String(e).match(Sa))?(this.h=!1,ka(this,t[1]||"",!0),this.s=Pa(t[2]||""),this.g=Pa(t[3]||"",!0),Ta(this,t[4]),this.l=Pa(t[5]||"",!0),Ca(this,t[6]||"",!0),this.o=Pa(t[7]||"")):(this.h=!1,this.i=new Ua(null,this.h))}function Ia(e){return new xa(e)}function ka(e,t,n){e.j=n?Pa(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ta(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ca(e,t,n){t instanceof Ua?(e.i=t,function(e,t){t&&!e.j&&(Va(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ba(this,t),qa(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ra(t,Fa)),e.i=new Ua(t,e.h))}function Na(e,t,n){e.i.set(t,n)}function Aa(e){return Na(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Pa(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ra(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Oa),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Oa(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}xa.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ra(t,Da,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ra(t,Da,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ra(n,"/"==n.charAt(0)?Ma:La,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ra(n,ja)),e.join("")};var Da=/[#\/\?@]/g,La=/[#\?:]/g,Ma=/[#\?]/g,Fa=/[#\?@]/g,ja=/#/g;function Ua(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Va(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ba(e,t){Va(e),t=Wa(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function za(e,t){return Va(e),t=Wa(e,t),e.g.has(t)}function qa(e,t,n){Ba(e,t),0<n.length&&(e.i=null,e.g.set(Wa(e,t),Es(n)),e.h+=n.length)}function Wa(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(os=Ua.prototype).add=function(e,t){Va(this),this.i=null,e=Wa(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},os.forEach=function(e,t){Va(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},os.ta=function(){Va(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},os.Z=function(e){Va(this);let t=[];if("string"===typeof e)za(this,e)&&(t=t.concat(this.g.get(Wa(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},os.set=function(e,t){return Va(this),this.i=null,za(this,e=Wa(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},os.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},os.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Ka=class{constructor(e,t){this.g=e,this.map=t}};function Ha(e){this.l=e||Ga,us.PerformanceNavigationTiming?e=0<(e=us.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(us.g&&us.g.Ka&&us.g.Ka()&&us.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ga=10;function Qa(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $a(e){return e.h?1:e.g?e.g.size:0}function Ya(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ja(e,t){e.g?e.g.add(t):e.h=t}function Xa(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Za(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Es(e.i)}Ha.prototype.cancel=function(){if(this.i=Za(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ec,tc=class{stringify(e){return us.JSON.stringify(e,void 0)}parse(e){return us.JSON.parse(e,void 0)}};function nc(){this.g=new tc}function rc(e,t,n){const r=n||"";try{Ea(e,(function(e,n){let i=e;ds(e)&&(i=wo(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ic(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(_t){}}function sc(e){this.l=e.ec||null,this.j=e.ob||!1}function oc(e,t){go.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ac,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ws(sc,Xo),sc.prototype.g=function(){return new oc(this.l,this.j)},sc.prototype.i=(ec={},function(){return ec}),ws(oc,go);var ac=0;function cc(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function lc(e){e.readyState=4,e.l=null,e.j=null,e.A=null,uc(e)}function uc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(os=oc.prototype).open=function(e,t){if(this.readyState!=ac)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,uc(this)},os.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||us).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},os.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,lc(this)),this.readyState=ac},os.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,uc(this)),this.g&&(this.readyState=3,uc(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof us.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cc(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},os.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?lc(this):uc(this),3==this.readyState&&cc(this)}},os.Za=function(e){this.g&&(this.response=this.responseText=e,lc(this))},os.Ya=function(e){this.g&&(this.response=e,lc(this))},os.ka=function(){this.g&&lc(this)},os.setRequestHeader=function(e,t){this.v.append(e,t)},os.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},os.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(oc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var hc=us.JSON.parse;function dc(e){go.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=fc,this.L=this.M=!1}ws(dc,go);var fc="",pc=/^https?$/i,mc=["POST","PUT"];function gc(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,vc(e),wc(e)}function vc(e){e.F||(e.F=!0,vo(e,"complete"),vo(e,"error"))}function yc(e){if(e.h&&"undefined"!=typeof ls&&(!e.C[1]||4!=_c(e)||2!=e.da()))if(e.v&&4==_c(e))Ro(e.La,0,e);else if(vo(e,"readystatechange"),4==_c(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Sa)[1]||null;!i&&us.self&&us.self.location&&(i=us.self.location.protocol.slice(0,-1)),r=!pc.test(i?i.toLowerCase():"")}n=r}if(n)vo(e,"complete"),vo(e,"success");else{e.m=6;try{var s=2<_c(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",vc(e)}}finally{wc(e)}}}function wc(e,t){if(e.g){bc(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||vo(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function bc(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(us.clearTimeout(e.A),e.A=null)}function _c(e){return e.g?e.g.readyState:0}function Ec(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case fc:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Sc(e){let t="";return Ys(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function xc(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Sc(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Na(e,t,n))}function Ic(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function kc(e){this.Ga=0,this.j=[],this.l=new Uo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ic("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ic("baseRetryDelayMs",5e3,e),this.hb=Ic("retryDelaySeedMs",1e4,e),this.eb=Ic("forwardChannelMaxRetries",2,e),this.xa=Ic("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Ha(e&&e.concurrentRequestLimit),this.Ja=new nc,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Tc(e){if(Nc(e),3==e.H){var t=e.W++,n=Ia(e.I);if(Na(n,"SID",e.K),Na(n,"RID",t),Na(n,"TYPE","terminate"),Rc(e,n),(t=new oa(e,e.l,t)).L=2,t.A=Aa(Ia(n)),n=!1,us.navigator&&us.navigator.sendBeacon)try{n=us.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&us.Image&&((new Image).src=t.A,n=!0),n||(t.g=Wc(t.l,null),t.g.ha(t.A)),t.G=Date.now(),ga(t)}zc(e)}function Cc(e){e.g&&(Mc(e),e.g.cancel(),e.g=null)}function Nc(e){Cc(e),e.u&&(us.clearTimeout(e.u),e.u=null),jc(e),e.i.cancel(),e.m&&("number"===typeof e.m&&us.clearTimeout(e.m),e.m=null)}function Ac(e){if(!Qa(e.i)&&!e.m){e.m=!0;var t=e.Na;Io||Co(),ko||(Io(),ko=!0),To.add(t,e),e.C=0}}function Pc(e,t){var n;n=t?t.m:e.W++;const r=Ia(e.I);Na(r,"SID",e.K),Na(r,"RID",n),Na(r,"AID",e.V),Rc(e,r),e.o&&e.s&&xc(r,e.o,e.s),n=new oa(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Oc(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ja(e.i,n),ha(n,r,t)}function Rc(e,t){e.na&&Ys(e.na,(function(e,n){Na(t,n,e)})),e.h&&Ea({},(function(e,n){Na(t,n,e)}))}function Oc(e,t,n){n=Math.min(e.j.length,n);var r=e.h?vs(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{rc(a,e,"req"+n+"_")}catch(Kt){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Dc(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Io||Co(),ko||(Io(),ko=!0),To.add(t,e),e.A=0}}function Lc(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=$o(vs(e.Ma,e),Vc(e,e.A)),e.A++,!0)}function Mc(e){null!=e.B&&(us.clearTimeout(e.B),e.B=null)}function Fc(e){e.g=new oa(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ia(e.wa);Na(t,"RID","rpc"),Na(t,"SID",e.K),Na(t,"AID",e.V),Na(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Na(t,"TO",e.qa),Na(t,"TYPE","xmlhttp"),Rc(e,t),e.o&&e.s&&xc(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Aa(Ia(t)),n.u=null,n.S=!0,da(n,e)}function jc(e){null!=e.v&&(us.clearTimeout(e.v),e.v=null)}function Uc(e,t){var n=null;if(e.g==t){jc(e),Mc(e),e.g=null;var r=2}else{if(!Ya(e.i,t))return;n=t.F,Xa(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;vo(r=qo(),new Qo(r,n)),Ac(e)}else Dc(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!($a(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=$o(vs(e.Na,e,t),Vc(e,e.C)),e.C++,!0))}(e,t)||2==r&&Lc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Bc(e,5);break;case 4:Bc(e,10);break;case 3:Bc(e,6);break;default:Bc(e,2)}}function Vc(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Bc(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=vs(e.pb,e);n||(n=new xa("//www.google.com/images/cleardot.gif"),us.location&&"http"==us.location.protocol||ka(n,"https"),Aa(n)),function(e,t){const n=new Uo;if(us.Image){const r=new Image;r.onload=ys(ic,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ys(ic,n,r,"TestLoadImage: error",!1,t),r.onabort=ys(ic,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ys(ic,n,r,"TestLoadImage: timeout",!1,t),us.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Go(2);e.H=0,e.h&&e.h.za(t),zc(e),Nc(e)}function zc(e){if(e.H=0,e.ma=[],e.h){const t=Za(e.i);0==t.length&&0==e.j.length||(Ss(e.ma,t),Ss(e.ma,e.j),e.i.i.length=0,Es(e.j),e.j.length=0),e.h.ya()}}function qc(e,t,n){var r=n instanceof xa?Ia(n):new xa(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Ta(r,r.m);else{var i=us.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new xa(null);r&&ka(s,r),t&&(s.g=t),i&&Ta(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Na(r,n,t),Na(r,"VER",e.ra),Rc(e,r),r}function Wc(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new dc(new sc({ob:n})):new dc(e.va)).Oa(e.J),t}function Kc(){}function Hc(){if(Os&&!(10<=Number(qs)))throw Error("Environmental error: no available transport.")}function Gc(e,t){go.call(this),this.g=new kc(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ks(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ks(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Yc(this)}function Qc(e){ra.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function $c(){ia.call(this),this.status=1}function Yc(e){this.g=e}function Jc(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Xc(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Zc(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(os=dc.prototype).Oa=function(e){this.M=e},os.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ta.g(),this.C=this.u?Zo(this.u):Zo(ta),this.g.onreadystatechange=vs(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(_t){return void gc(this,_t)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=us.FormData&&e instanceof us.FormData,!(0<=_s(mc,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{bc(this),0<this.B&&((this.L=function(e){return Os&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vs(this.ua,this)):this.A=Ro(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(_t){gc(this,_t)}},os.ua=function(){"undefined"!=typeof ls&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vo(this,"timeout"),this.abort(8))},os.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,vo(this,"complete"),vo(this,"abort"),wc(this))},os.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wc(this,!0)),dc.$.N.call(this)},os.La=function(){this.s||(this.G||this.v||this.l?yc(this):this.kb())},os.kb=function(){yc(this)},os.isActive=function(){return!!this.g},os.da=function(){try{return 2<_c(this)?this.g.status:-1}catch(ec){return-1}},os.ja=function(){try{return this.g?this.g.responseText:""}catch(ec){return""}},os.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),hc(t)}},os.Ia=function(){return this.m},os.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(os=kc.prototype).ra=8,os.H=1,os.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new oa(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Js(s),Zs(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Oc(this,i,t),Na(n=Ia(this.I),"RID",e),Na(n,"CVER",22),this.F&&Na(n,"X-HTTP-Session-Id",this.F),Rc(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Sc(s)))+"&"+t:this.o&&xc(n,this.o,s)),Ja(this.i,i),this.bb&&Na(n,"TYPE","init"),this.P?(Na(n,"$req",t),Na(n,"SID","null"),i.aa=!0,ha(i,n,null)):ha(i,n,t),this.H=2}}else 3==this.H&&(e?Pc(this,e):0==this.j.length||Qa(this.i)||Pc(this))},os.Ma=function(){if(this.u=null,Fc(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=$o(vs(this.jb,this),e)}},os.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Go(10),Cc(this),Fc(this))},os.ib=function(){null!=this.v&&(this.v=null,Cc(this),Lc(this),Go(19))},os.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Go(2)):(this.l.info("Failed to ping google.com"),Go(1))},os.isActive=function(){return!!this.h&&this.h.isActive(this)},(os=Kc.prototype).Ba=function(){},os.Aa=function(){},os.za=function(){},os.ya=function(){},os.isActive=function(){return!0},os.Va=function(){},Hc.prototype.g=function(e,t){return new Gc(e,t)},ws(Gc,go),Gc.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Go(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=qc(e,null,e.Y),Ac(e)},Gc.prototype.close=function(){Tc(this.g)},Gc.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=wo(e),e=n);t.j.push(new Ka(t.fb++,e)),3==t.H&&Ac(t)},Gc.prototype.N=function(){this.g.h=null,delete this.j,Tc(this.g),delete this.g,Gc.$.N.call(this)},ws(Qc,ra),ws($c,ia),ws(Yc,Kc),Yc.prototype.Ba=function(){vo(this.g,"a")},Yc.prototype.Aa=function(e){vo(this.g,new Qc(e))},Yc.prototype.za=function(e){vo(this.g,new $c)},Yc.prototype.ya=function(){vo(this.g,"b")},ws(Jc,(function(){this.blockSize=-1})),Jc.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Jc.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Xc(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Xc(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Xc(this,r),i=0;break}}this.h=i,this.i+=t},Jc.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var el={};function tl(e){return-128<=e&&128>e?function(e,t){var n=el;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Zc([0|e],0>e?-1:0)})):new Zc([0|e],0>e?-1:0)}function nl(e){if(isNaN(e)||!isFinite(e))return il;if(0>e)return ll(nl(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=rl;return new Zc(t,0)}var rl=4294967296,il=tl(0),sl=tl(1),ol=tl(16777216);function al(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function cl(e){return-1==e.h}function ll(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Zc(n,~e.h).add(sl)}function ul(e,t){return e.add(ll(t))}function hl(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function dl(e,t){this.g=e,this.h=t}function fl(e,t){if(al(t))throw Error("division by zero");if(al(e))return new dl(il,il);if(cl(e))return t=fl(ll(e),t),new dl(ll(t.g),ll(t.h));if(cl(t))return t=fl(e,ll(t)),new dl(ll(t.g),t.h);if(30<e.g.length){if(cl(e)||cl(t))throw Error("slowDivide_ only works with positive integers.");for(var n=sl,r=t;0>=r.X(e);)n=pl(n),r=pl(r);var i=ml(n,1),s=ml(r,1);for(r=ml(r,2),n=ml(n,2);!al(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=ml(r,1),n=ml(n,1)}return t=ul(e,i.R(t)),new dl(i,t)}for(i=il;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=nl(n)).R(t);cl(o)||0<o.X(e);)o=(s=nl(n-=r)).R(t);al(s)&&(s=sl),i=i.add(s),e=ul(e,o)}return new dl(i,e)}function pl(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Zc(n,e.h)}function ml(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Zc(i,e.h)}(os=Zc.prototype).ea=function(){if(cl(this))return-ll(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:rl+r)*t,t*=rl}return e},os.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(al(this))return"0";if(cl(this))return"-"+ll(this).toString(e);for(var t=nl(Math.pow(e,6)),n=this,r="";;){var i=fl(n,t).g,s=((0<(n=ul(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(al(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},os.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},os.X=function(e){return cl(e=ul(this,e))?-1:al(e)?0:1},os.abs=function(){return cl(this)?ll(this):this},os.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Zc(n,-2147483648&n[n.length-1]?-1:0)},os.R=function(e){if(al(this)||al(e))return il;if(cl(this))return cl(e)?ll(this).R(ll(e)):ll(ll(this).R(e));if(cl(e))return ll(this.R(ll(e)));if(0>this.X(ol)&&0>e.X(ol))return nl(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,hl(n,2*r+2*i),n[2*r+2*i+1]+=s*c,hl(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,hl(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,hl(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Zc(n,0)},os.gb=function(e){return fl(this,e).h},os.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Zc(n,this.h&e.h)},os.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Zc(n,this.h|e.h)},os.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Zc(n,this.h^e.h)},Hc.prototype.createWebChannel=Hc.prototype.g,Gc.prototype.send=Gc.prototype.u,Gc.prototype.open=Gc.prototype.m,Gc.prototype.close=Gc.prototype.close,Yo.NO_ERROR=0,Yo.TIMEOUT=8,Yo.HTTP_ERROR=6,Jo.COMPLETE="complete",ea.EventType=na,na.OPEN="a",na.CLOSE="b",na.ERROR="c",na.MESSAGE="d",go.prototype.listen=go.prototype.O,dc.prototype.listenOnce=dc.prototype.P,dc.prototype.getLastError=dc.prototype.Sa,dc.prototype.getLastErrorCode=dc.prototype.Ia,dc.prototype.getStatus=dc.prototype.da,dc.prototype.getResponseJson=dc.prototype.Wa,dc.prototype.getResponseText=dc.prototype.ja,dc.prototype.send=dc.prototype.ha,dc.prototype.setWithCredentials=dc.prototype.Oa,Jc.prototype.digest=Jc.prototype.l,Jc.prototype.reset=Jc.prototype.reset,Jc.prototype.update=Jc.prototype.j,Zc.prototype.add=Zc.prototype.add,Zc.prototype.multiply=Zc.prototype.R,Zc.prototype.modulo=Zc.prototype.gb,Zc.prototype.compare=Zc.prototype.X,Zc.prototype.toNumber=Zc.prototype.ea,Zc.prototype.toString=Zc.prototype.toString,Zc.prototype.getBits=Zc.prototype.D,Zc.fromNumber=nl,Zc.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ll(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=nl(Math.pow(n,8)),i=il,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=nl(Math.pow(n,o)),i=i.R(o).add(nl(a))):i=(i=i.R(r)).add(nl(a))}return i};var gl=cs.createWebChannelTransport=function(){return new Hc},vl=cs.getStatEventTarget=function(){return qo()},yl=cs.ErrorCode=Yo,wl=cs.EventType=Jo,bl=cs.Event=Bo,_l=cs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},El=(cs.FetchXmlHttpFactory=sc,cs.WebChannel=ea),Sl=cs.XhrIo=dc,xl=cs.Md5=Jc,Il=cs.Integer=Zc;const kl="@firebase/firestore";class Tl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tl.UNAUTHENTICATED=new Tl(null),Tl.GOOGLE_CREDENTIALS=new Tl("google-credentials-uid"),Tl.FIRST_PARTY=new Tl("first-party-uid"),Tl.MOCK_USER=new Tl("mock-user");let Cl="10.8.1";const Nl=new ti("@firebase/firestore");function Al(){return Nl.logLevel}function Pl(e){if(Nl.logLevel<=Yr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Dl);Nl.debug("Firestore (".concat(Cl,"): ").concat(e),...i)}}function Rl(e){if(Nl.logLevel<=Yr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Dl);Nl.error("Firestore (".concat(Cl,"): ").concat(e),...i)}}function Ol(e){if(Nl.logLevel<=Yr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Dl);Nl.warn("Firestore (".concat(Cl,"): ").concat(e),...i)}}function Dl(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Cl,") INTERNAL ASSERTION FAILED: ")+e;throw Rl(t),new Error(t)}function Ml(e,t){e||Ll()}function Fl(e,t){return e}const jl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ul extends Pr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Vl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Bl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class zl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Tl.UNAUTHENTICATED)))}shutdown(){}}class ql{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Wl{constructor(e){this.t=e,this.currentUser=Tl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Vl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Vl,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Pl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Pl("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Vl)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Pl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ml("string"==typeof t.accessToken),new Bl(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ml(null===e||"string"==typeof e),new Tl(e)}}class Kl{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Tl.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Hl{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Kl(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Tl.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Gl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ql{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Pl("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Pl("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Pl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Pl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ml("string"==typeof e.token),this.R=e.token,new Gl(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function $l(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Yl{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=$l(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Jl(e,t){return e<t?-1:e>t?1:0}function Xl(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Zl(e){return e+"\0"}class eu{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ul(jl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ul(jl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ul(jl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ul(jl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return eu.fromMillis(Date.now())}static fromDate(e){return eu.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new eu(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Jl(this.nanoseconds,e.nanoseconds):Jl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class tu{constructor(e){this.timestamp=e}static fromTimestamp(e){return new tu(e)}static min(){return new tu(new eu(0,0))}static max(){return new tu(new eu(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class nu{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ll(),void 0===n?n=e.length-t:n>e.length-t&&Ll(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===nu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nu?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ru extends nu{construct(e,t,n){return new ru(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ul(jl.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new ru(e)}static emptyPath(){return new ru([])}}const iu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class su extends nu{construct(e,t,n){return new su(e,t,n)}static isValidIdentifier(e){return iu.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),su.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new su(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ul(jl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ul(jl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ul(jl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Ul(jl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new su(t)}static emptyPath(){return new su([])}}class ou{constructor(e){this.path=e}static fromPath(e){return new ou(ru.fromString(e))}static fromName(e){return new ou(ru.fromString(e).popFirst(5))}static empty(){return new ou(ru.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ru.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ru.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ou(new ru(e.slice()))}}class au{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function cu(e){return e.fields.find((e=>2===e.kind))}function lu(e){return e.fields.filter((e=>2!==e.kind))}au.UNKNOWN_ID=-1;class uu{constructor(e,t){this.fieldPath=e,this.kind=t}}class hu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new hu(0,pu.min())}}function du(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=tu.fromTimestamp(1e9===r?new eu(n+1,0):new eu(n,r));return new pu(i,ou.empty(),t)}function fu(e){return new pu(e.readTime,e.key,-1)}class pu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new pu(tu.min(),ou.empty(),-1)}static max(){return new pu(tu.max(),ou.empty(),-1)}}function mu(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ou.comparator(e.documentKey,t.documentKey),0!==n?n:Jl(e.largestBatchId,t.largestBatchId))}const gu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function yu(e){if(e.code!==jl.FAILED_PRECONDITION||e.message!==gu)throw e;Pl("LocalStore","Unexpectedly lost primary lease")}class wu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ll(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new wu(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof wu?t:wu.resolve(t)}catch(e){return wu.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):wu.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):wu.reject(t)}static resolve(e){return new wu(((t,n)=>{t(e)}))}static reject(e){return new wu(((t,n)=>{n(e)}))}static waitFor(e){return new wu(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=wu.resolve(!1);for(const n of e)t=t.next((e=>e?wu.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new wu(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new wu(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class bu{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Vl,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Su(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Cu(t.target.error);this.V.reject(new Su(e,n))}}static open(e,t,n,r){try{return new bu(t,e.transaction(r,n))}catch(e){throw new Su(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Pl("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Iu(t)}}class _u{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===_u.S(xr())&&Rl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pl("SimpleDb","Removing database:",e),ku(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ar())return!1;if(_u.C())return!0;const e=xr(),t=_u.S(e),n=0<t&&t<10,r=_u.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Pl("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Su(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Ul(jl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Ul(jl.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Su(e,r))},r.onupgradeneeded=e=>{Pl("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Pl("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=bu.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),wu.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Pl("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Eu{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ku(this.k.delete())}}class Su extends Ul{constructor(e,t){super(jl.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function xu(e){return"IndexedDbTransactionError"===e.name}class Iu{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Pl("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Pl("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ku(n)}add(e){return Pl("SimpleDb","ADD",this.store.name,e,e),ku(this.store.add(e))}get(e){return ku(this.store.get(e)).next((t=>(void 0===t&&(t=null),Pl("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Pl("SimpleDb","DELETE",this.store.name,e),ku(this.store.delete(e))}count(){return Pl("SimpleDb","COUNT",this.store.name),ku(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new wu(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new wu(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Pl("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new wu(((n,r)=>{t.onerror=e=>{const t=Cu(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new wu(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Eu(i),o=t(i.primaryKey,i.value,s);if(o instanceof wu){const e=o.catch((e=>(s.done(),wu.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>wu.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ku(e){return new wu(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Cu(e.target.error);n(t)}}))}let Tu=!1;function Cu(e){const t=_u.S(xr());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Ul("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Tu||(Tu=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Nu{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Pl("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Pl("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){xu(e)?Pl("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await yu(e)}await this.ee(6e4)}))}}class Au{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return wu.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Pl("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Pl("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=fu(t);mu(r,n)>0&&(n=r)})),new pu(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Pu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Ru(e){return null==e}function Ou(e){return 0===e&&1/e==-1/0}function Du(e){return"number"==typeof e&&Number.isInteger(e)&&!Ou(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Lu(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Fu(t)),t=Mu(e.get(n),t);return Fu(t)}function Mu(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Fu(e){return e+"\x01\x01"}function ju(e){const t=e.length;if(Ml(t>=2),2===t)return Ml("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ru.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Ll(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Ll()}s=t+2}return new ru(r)}Pu._e=-1;const Uu=["userId","batchId"];function Vu(e,t){return[e,Lu(t)]}function Bu(e,t,n){return[e,Lu(t),n]}const zu={},qu=["prefixPath","collectionGroup","readTime","documentId"],Wu=["prefixPath","collectionGroup","documentId"],Ku=["collectionGroup","readTime","prefixPath","documentId"],Hu=["canonicalId","targetId"],Gu=["targetId","path"],Qu=["path","targetId"],$u=["collectionId","parent"],Yu=["indexId","uid"],Ju=["uid","sequenceNumber"],Xu=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Zu=["indexId","uid","orderedDocumentKey"],eh=["userId","collectionPath","documentId"],th=["userId","collectionPath","largestBatchId"],nh=["userId","collectionGroup","largestBatchId"],rh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ih=[...rh,"documentOverlays"],sh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],oh=sh,ah=[...oh,"indexConfiguration","indexState","indexEntries"];class ch extends vu{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function lh(e,t){const n=Fl(e);return _u.M(n.ae,t)}function uh(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function hh(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function dh(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class fh{constructor(e,t){this.comparator=e,this.root=t||mh.EMPTY}insert(e,t){return new fh(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mh.BLACK,null,null))}remove(e){return new fh(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mh.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ph(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ph(this.root,e,this.comparator,!1)}getReverseIterator(){return new ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ph(this.root,e,this.comparator,!0)}}class ph{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mh{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:mh.RED,this.left=null!=r?r:mh.EMPTY,this.right=null!=i?i:mh.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new mh(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return mh.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return mh.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mh.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ll();if(this.right.isRed())throw Ll();const e=this.left.check();if(e!==this.right.check())throw Ll();return e+(this.isRed()?0:1)}}mh.EMPTY=null,mh.RED=!0,mh.BLACK=!1,mh.EMPTY=new class{constructor(){this.size=0}get key(){throw Ll()}get value(){throw Ll()}get color(){throw Ll()}get left(){throw Ll()}get right(){throw Ll()}copy(e,t,n,r,i){return this}insert(e,t,n){return new mh(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gh{constructor(e){this.comparator=e,this.data=new fh(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vh(this.data.getIterator())}getIteratorFrom(e){return new vh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof gh))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gh(this.comparator);return t.data=e,t}}class vh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yh(e){return e.hasNext()?e.getNext():void 0}class wh{constructor(e){this.fields=e,e.sort(su.comparator)}static empty(){return new wh([])}unionWith(e){let t=new gh(su.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new wh(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xl(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class bh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _h{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new bh("Invalid base64 string: "+e):e}}(e);return new _h(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new _h(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_h.EMPTY_BYTE_STRING=new _h("");const Eh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sh(e){if(Ml(!!e),"string"==typeof e){let t=0;const n=Eh.exec(e);if(Ml(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:xh(e.seconds),nanos:xh(e.nanos)}}function xh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ih(e){return"string"==typeof e?_h.fromBase64String(e):_h.fromUint8Array(e)}function kh(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Th(e){const t=e.mapValue.fields.__previous_value__;return kh(t)?Th(t):t}function Ch(e){const t=Sh(e.mapValue.fields.__local_write_time__.timestampValue);return new eu(t.seconds,t.nanos)}class Nh{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Ah{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ah("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ah&&e.projectId===this.projectId&&e.database===this.database}}const Ph={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Rh={nullValue:"NULL_VALUE"};function Oh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?kh(e)?4:Gh(e)?9007199254740991:10:Ll()}function Dh(e,t){if(e===t)return!0;const n=Oh(e);if(n!==Oh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ch(e).isEqual(Ch(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Sh(e.timestampValue),r=Sh(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ih(e.bytesValue).isEqual(Ih(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return xh(e.geoPointValue.latitude)===xh(t.geoPointValue.latitude)&&xh(e.geoPointValue.longitude)===xh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return xh(e.integerValue)===xh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=xh(e.doubleValue),r=xh(t.doubleValue);return n===r?Ou(n)===Ou(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Xl(e.arrayValue.values||[],t.arrayValue.values||[],Dh);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(uh(n)!==uh(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Dh(n[i],r[i])))return!1;return!0}(e,t);default:return Ll()}}function Lh(e,t){return void 0!==(e.values||[]).find((e=>Dh(e,t)))}function Mh(e,t){if(e===t)return 0;const n=Oh(e),r=Oh(t);if(n!==r)return Jl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Jl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=xh(e.integerValue||e.doubleValue),r=xh(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Fh(e.timestampValue,t.timestampValue);case 4:return Fh(Ch(e),Ch(t));case 5:return Jl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ih(e),r=Ih(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Jl(n[i],r[i]);if(0!==e)return e}return Jl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Jl(xh(e.latitude),xh(t.latitude));return 0!==n?n:Jl(xh(e.longitude),xh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Mh(n[i],r[i]);if(e)return e}return Jl(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ph.mapValue&&t===Ph.mapValue)return 0;if(e===Ph.mapValue)return 1;if(t===Ph.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Jl(r[o],s[o]);if(0!==e)return e;const t=Mh(n[r[o]],i[s[o]]);if(0!==t)return t}return Jl(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ll()}}function Fh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Jl(e,t);const n=Sh(e),r=Sh(t),i=Jl(n.seconds,r.seconds);return 0!==i?i:Jl(n.nanos,r.nanos)}function jh(e){return Uh(e)}function Uh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Sh(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ih(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ou.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Uh(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Uh(e.fields[i]));return n+"}"}(e.mapValue):Ll()}function Vh(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Bh(e){return!!e&&"integerValue"in e}function zh(e){return!!e&&"arrayValue"in e}function qh(e){return!!e&&"nullValue"in e}function Wh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Kh(e){return!!e&&"mapValue"in e}function Hh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return hh(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Hh(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Hh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Gh(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Qh(e){return"nullValue"in e?Rh:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Vh(Ah.empty(),ou.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ll()}function $h(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Vh(Ah.empty(),ou.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ph:Ll()}function Yh(e,t){const n=Mh(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Jh(e,t){const n=Mh(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Xh{constructor(e){this.value=e}static empty(){return new Xh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Kh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hh(t)}setAll(e){let t=su.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Hh(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Kh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dh(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Kh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){hh(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Xh(Hh(this.value))}}function Zh(e){const t=[];return hh(e.fields,((e,n)=>{const r=new su([e]);if(Kh(n)){const e=Zh(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new wh(t)}class ed{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ed(e,0,tu.min(),tu.min(),tu.min(),Xh.empty(),0)}static newFoundDocument(e,t,n,r){return new ed(e,1,t,tu.min(),n,r,0)}static newNoDocument(e,t){return new ed(e,2,t,tu.min(),tu.min(),Xh.empty(),0)}static newUnknownDocument(e,t){return new ed(e,3,t,tu.min(),tu.min(),Xh.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(tu.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tu.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ed&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ed(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class td{constructor(e,t){this.position=e,this.inclusive=t}}function nd(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ou.comparator(ou.fromName(o.referenceValue),n.key):Mh(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function rd(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Dh(e.position[n],t.position[n]))return!1;return!0}class id{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function sd(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class od{}class ad extends od{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new vd(e,t,n):"array-contains"===t?new _d(e,n):"in"===t?new Ed(e,n):"not-in"===t?new Sd(e,n):"array-contains-any"===t?new xd(e,n):new ad(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new yd(e,n):new wd(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Mh(t,this.value)):null!==t&&Oh(this.value)===Oh(t)&&this.matchesComparison(Mh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ll()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cd extends od{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new cd(e,t)}matches(e){return ld(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function ld(e){return"and"===e.op}function ud(e){return"or"===e.op}function hd(e){return dd(e)&&ld(e)}function dd(e){for(const t of e.filters)if(t instanceof cd)return!1;return!0}function fd(e){if(e instanceof ad)return e.field.canonicalString()+e.op.toString()+jh(e.value);if(hd(e))return e.filters.map((e=>fd(e))).join(",");{const t=e.filters.map((e=>fd(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function pd(e,t){return e instanceof ad?function(e,t){return t instanceof ad&&e.op===t.op&&e.field.isEqual(t.field)&&Dh(e.value,t.value)}(e,t):e instanceof cd?function(e,t){return t instanceof cd&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&pd(n,t.filters[r])),!0)}(e,t):void Ll()}function md(e,t){const n=e.filters.concat(t);return cd.create(n,e.op)}function gd(e){return e instanceof ad?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(jh(e.value))}(e):e instanceof cd?function(e){return e.op.toString()+" {"+e.getFilters().map(gd).join(" ,")+"}"}(e):"Filter"}class vd extends ad{constructor(e,t,n){super(e,t,n),this.key=ou.fromName(n.referenceValue)}matches(e){const t=ou.comparator(e.key,this.key);return this.matchesComparison(t)}}class yd extends ad{constructor(e,t){super(e,"in",t),this.keys=bd("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class wd extends ad{constructor(e,t){super(e,"not-in",t),this.keys=bd("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function bd(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>ou.fromName(e.referenceValue)))}class _d extends ad{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zh(t)&&Lh(t.arrayValue,this.value)}}class Ed extends ad{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Lh(this.value.arrayValue,t)}}class Sd extends ad{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Lh(this.value.arrayValue,t)}}class xd extends ad{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Lh(this.value.arrayValue,e)))}}class Id{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function kd(e){return new Id(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Td(e){const t=Fl(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>fd(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ru(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>jh(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>jh(e))).join(",")),t.ce=e}return t.ce}function Cd(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!sd(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!pd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!rd(e.startAt,t.startAt)&&rd(e.endAt,t.endAt)}function Nd(e){return ou.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Ad(e,t){return e.filters.filter((e=>e instanceof ad&&e.field.isEqual(t)))}function Pd(e,t,n){let r=Rh,i=!0;for(const s of Ad(e,t)){let e=Rh,t=!0;switch(s.op){case"<":case"<=":e=Qh(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Rh}Yh({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Yh({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Rd(e,t,n){let r=Ph,i=!0;for(const s of Ad(e,t)){let e=Ph,t=!0;switch(s.op){case">=":case">":e=$h(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Ph}Jh({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Jh({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Od{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Dd(e,t,n,r,i,s,o,a){return new Od(e,t,n,r,i,s,o,a)}function Ld(e){return new Od(e)}function Md(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Fd(e){return null!==e.collectionGroup}function jd(e){const t=Fl(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new gh(su.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new id(r,n))})),e.has(su.keyField().canonicalString())||t.le.push(new id(su.keyField(),n))}return t.le}function Ud(e){const t=Fl(e);return t.he||(t.he=Vd(t,jd(e))),t.he}function Vd(e,t){if("F"===e.limitType)return kd(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new id(e.field,t)}));const n=e.endAt?new td(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new td(e.startAt.position,e.startAt.inclusive):null;return kd(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Bd(e,t){const n=e.filters.concat([t]);return new Od(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function zd(e,t,n){return new Od(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function qd(e,t){return Cd(Ud(e),Ud(t))&&e.limitType===t.limitType}function Wd(e){return"".concat(Td(Ud(e)),"|lt:").concat(e.limitType)}function Kd(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>gd(e))).join(", "),"]")),Ru(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>jh(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>jh(e))).join(",")),"Target(".concat(t,")")}(Ud(e)),"; limitType=").concat(e.limitType,")")}function Hd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ou.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of jd(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=nd(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,jd(e),t))&&!(e.endAt&&!function(e,t,n){const r=nd(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,jd(e),t))}(e,t)}function Gd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Qd(e){return(t,n)=>{let r=!1;for(const i of jd(e)){const e=$d(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function $d(e,t,n){const r=e.field.isKeyField()?ou.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Mh(r,i):Ll()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ll()}}class Yd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){hh(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return dh(this.inner)}size(){return this.innerSize}}const Jd=new fh(ou.comparator);function Xd(){return Jd}const Zd=new fh(ou.comparator);function ef(){let e=Zd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function tf(e){let t=Zd;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function nf(){return sf()}function rf(){return sf()}function sf(){return new Yd((e=>e.toString()),((e,t)=>e.isEqual(t)))}const of=new fh(ou.comparator),af=new gh(ou.comparator);function cf(){let e=af;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const lf=new gh(Jl);function uf(){return lf}function hf(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ou(t)?"-0":t}}function df(e){return{integerValue:""+e}}function ff(e,t){return Du(t)?df(t):hf(e,t)}class pf{constructor(){this._=void 0}}function mf(e,t,n){return e instanceof yf?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&kh(t)&&(t=Th(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof wf?bf(e,t):e instanceof _f?Ef(e,t):function(e,t){const n=vf(e,t),r=xf(n)+xf(e.Ie);return Bh(n)&&Bh(e.Ie)?df(r):hf(e.serializer,r)}(e,t)}function gf(e,t,n){return e instanceof wf?bf(e,t):e instanceof _f?Ef(e,t):n}function vf(e,t){return e instanceof Sf?function(e){return Bh(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class yf extends pf{}class wf extends pf{constructor(e){super(),this.elements=e}}function bf(e,t){const n=If(t);for(const r of e.elements)n.some((e=>Dh(e,r)))||n.push(r);return{arrayValue:{values:n}}}class _f extends pf{constructor(e){super(),this.elements=e}}function Ef(e,t){let n=If(t);for(const r of e.elements)n=n.filter((e=>!Dh(e,r)));return{arrayValue:{values:n}}}class Sf extends pf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function xf(e){return xh(e.integerValue||e.doubleValue)}function If(e){return zh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class kf{constructor(e,t){this.field=e,this.transform=t}}class Tf{constructor(e,t){this.version=e,this.transformResults=t}}class Cf{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cf}static exists(e){return new Cf(void 0,e)}static updateTime(e){return new Cf(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Af{}function Pf(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Bf(e.key,Cf.none()):new Mf(e.key,e.data,Cf.none());{const n=e.data,r=Xh.empty();let i=new gh(su.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Ff(e.key,r,new wh(i.toArray()),Cf.none())}}function Rf(e,t,n){e instanceof Mf?function(e,t,n){const r=e.value.clone(),i=Uf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ff?function(e,t,n){if(!Nf(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Uf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(jf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Of(e,t,n,r){return e instanceof Mf?function(e,t,n,r){if(!Nf(e.precondition,t))return n;const i=e.value.clone(),s=Vf(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ff?function(e,t,n,r){if(!Nf(e.precondition,t))return n;const i=Vf(e.fieldTransforms,r,t),s=t.data;return s.setAll(jf(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Nf(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Df(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=vf(r.transform,e||null);null!=i&&(null===n&&(n=Xh.empty()),n.set(r.field,i))}return n||null}function Lf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Xl(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof wf&&t instanceof wf||e instanceof _f&&t instanceof _f?Xl(e.elements,t.elements,Dh):e instanceof Sf&&t instanceof Sf?Dh(e.Ie,t.Ie):e instanceof yf&&t instanceof yf}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Mf extends Af{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ff extends Af{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function jf(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Uf(e,t,n){const r=new Map;Ml(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,gf(o,a,n[i]))}return r}function Vf(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,mf(e,s,t))}return r}class Bf extends Af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zf extends Af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qf{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Rf(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Of(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Of(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=rf();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Pf(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(tu.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),cf())}isEqual(e){return this.batchId===e.batchId&&Xl(this.mutations,e.mutations,((e,t)=>Lf(e,t)))&&Xl(this.baseMutations,e.baseMutations,((e,t)=>Lf(e,t)))}}class Wf{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ml(e.mutations.length===n.length);let r=of;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Wf(e,t,n,r)}}class Kf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Hf{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gf,Qf;function $f(e){switch(e){default:return Ll();case jl.CANCELLED:case jl.UNKNOWN:case jl.DEADLINE_EXCEEDED:case jl.RESOURCE_EXHAUSTED:case jl.INTERNAL:case jl.UNAVAILABLE:case jl.UNAUTHENTICATED:return!1;case jl.INVALID_ARGUMENT:case jl.NOT_FOUND:case jl.ALREADY_EXISTS:case jl.PERMISSION_DENIED:case jl.FAILED_PRECONDITION:case jl.ABORTED:case jl.OUT_OF_RANGE:case jl.UNIMPLEMENTED:case jl.DATA_LOSS:return!0}}function Yf(e){if(void 0===e)return Rl("GRPC error has no .code"),jl.UNKNOWN;switch(e){case Gf.OK:return jl.OK;case Gf.CANCELLED:return jl.CANCELLED;case Gf.UNKNOWN:return jl.UNKNOWN;case Gf.DEADLINE_EXCEEDED:return jl.DEADLINE_EXCEEDED;case Gf.RESOURCE_EXHAUSTED:return jl.RESOURCE_EXHAUSTED;case Gf.INTERNAL:return jl.INTERNAL;case Gf.UNAVAILABLE:return jl.UNAVAILABLE;case Gf.UNAUTHENTICATED:return jl.UNAUTHENTICATED;case Gf.INVALID_ARGUMENT:return jl.INVALID_ARGUMENT;case Gf.NOT_FOUND:return jl.NOT_FOUND;case Gf.ALREADY_EXISTS:return jl.ALREADY_EXISTS;case Gf.PERMISSION_DENIED:return jl.PERMISSION_DENIED;case Gf.FAILED_PRECONDITION:return jl.FAILED_PRECONDITION;case Gf.ABORTED:return jl.ABORTED;case Gf.OUT_OF_RANGE:return jl.OUT_OF_RANGE;case Gf.UNIMPLEMENTED:return jl.UNIMPLEMENTED;case Gf.DATA_LOSS:return jl.DATA_LOSS;default:return Ll()}}(Qf=Gf||(Gf={}))[Qf.OK=0]="OK",Qf[Qf.CANCELLED=1]="CANCELLED",Qf[Qf.UNKNOWN=2]="UNKNOWN",Qf[Qf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qf[Qf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qf[Qf.NOT_FOUND=5]="NOT_FOUND",Qf[Qf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qf[Qf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qf[Qf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qf[Qf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qf[Qf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qf[Qf.ABORTED=10]="ABORTED",Qf[Qf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qf[Qf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qf[Qf.INTERNAL=13]="INTERNAL",Qf[Qf.UNAVAILABLE=14]="UNAVAILABLE",Qf[Qf.DATA_LOSS=15]="DATA_LOSS";let Jf=null;function Xf(){return new TextEncoder}const Zf=new Il([4294967295,4294967295],0);function ep(e){const t=Xf().encode(e),n=new xl;return n.update(t),new Uint8Array(n.digest())}function tp(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Il([n,r],0),new Il([i,s],0)]}class np{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new rp("Invalid padding: ".concat(t));if(n<0)throw new rp("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new rp("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new rp("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Il.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Il.fromNumber(n)));return 1===r.compare(Zf)&&(r=new Il([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=ep(e),[n,r]=tp(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new np(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=ep(e),[n,r]=tp(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class rp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ip{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,sp.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ip(tu.min(),r,new fh(Jl),Xd(),cf())}}class sp{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new sp(n,t,cf(),cf(),cf())}}class op{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class ap{constructor(e,t){this.targetId=e,this.fe=t}}class cp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_h.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class lp{constructor(){this.ge=0,this.pe=dp(),this.ye=_h.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=cf(),t=cf(),n=cf();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ll()}})),new sp(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=dp()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ml(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class up{constructor(e){this.Le=e,this.ke=new Map,this.qe=Xd(),this.Qe=hp(),this.Ke=new fh(Jl)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Ll()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Nd(i))if(0===n){const e=new ou(i.path);this.We(t,e,ed.newNoDocument(e,tu.min()))}else Ml(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Jf||Jf.tt(function(e,t,n,r,i){var s,o,a,c,l,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(c=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==c?c:0,padding:null!==(u=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Ih(n).toUint8Array()}catch(e){if(e instanceof bh)return Ol("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new np(s,r,i)}catch(e){return Ol(e instanceof rp?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Nd(i.target)){const t=new ou(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,ed.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=cf();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new ip(e,t,this.Ke,this.qe,n);return this.qe=Xd(),this.Qe=hp(),this.Ke=new fh(Jl),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new lp,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new gh(Jl),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Pl("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new lp),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function hp(){return new fh(ou.comparator)}function dp(){return new fh(ou.comparator)}const fp={asc:"ASCENDING",desc:"DESCENDING"},pp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mp={and:"AND",or:"OR"};class gp{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vp(e,t){return e.useProto3Json||Ru(t)?t:{value:t}}function yp(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function wp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function bp(e,t){return yp(e,t.toTimestamp())}function _p(e){return Ml(!!e),tu.fromTimestamp(function(e){const t=Sh(e);return new eu(t.seconds,t.nanos)}(e))}function Ep(e,t){return Sp(e,t).canonicalString()}function Sp(e,t){const n=function(e){return new ru(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function xp(e){const t=ru.fromString(e);return Ml(Hp(t)),t}function Ip(e,t){return Ep(e.databaseId,t.path)}function kp(e,t){const n=xp(t);if(n.get(1)!==e.databaseId.projectId)throw new Ul(jl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ul(jl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ou(Ap(n))}function Tp(e,t){return Ep(e.databaseId,t)}function Cp(e){const t=xp(e);return 4===t.length?ru.emptyPath():Ap(t)}function Np(e){return new ru(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ap(e){return Ml(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Pp(e,t,n){return{name:Ip(e,t),fields:n.value.mapValue.fields}}function Rp(e,t,n){const r=kp(e,t.name),i=_p(t.updateTime),s=t.createTime?_p(t.createTime):tu.min(),o=new Xh({mapValue:{fields:t.fields}}),a=ed.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Op(e,t){let n;if(t instanceof Mf)n={update:Pp(e,t.key,t.value)};else if(t instanceof Bf)n={delete:Ip(e,t.key)};else if(t instanceof Ff)n={update:Pp(e,t.key,t.data),updateMask:Kp(t.fieldMask)};else{if(!(t instanceof zf))return Ll();n={verify:Ip(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof yf)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof wf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _f)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Sf)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Ll()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:bp(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ll()}(e,t.precondition)),n}function Dp(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Cf.updateTime(_p(e.updateTime)):void 0!==e.exists?Cf.exists(e.exists):Cf.none()}(t.currentDocument):Cf.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Ml("REQUEST_TIME"===t.setToServerValue),n=new yf;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new wf(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new _f(e)}else"increment"in t?n=new Sf(e,t.increment):Ll();const r=su.fromServerFormat(t.fieldPath);return new kf(r,n)}(e,t))):[];if(t.update){t.update.name;const i=kp(e,t.update.name),s=new Xh({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new wh(t.map((e=>su.fromServerFormat(e))))}(t.updateMask);return new Ff(i,s,e,n,r)}return new Mf(i,s,n,r)}if(t.delete){const r=kp(e,t.delete);return new Bf(r,n)}if(t.verify){const r=kp(e,t.verify);return new zf(r,n)}return Ll()}function Lp(e,t){return{documents:[Tp(e,t.path)]}}function Mp(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Tp(e,i);const s=function(e){if(0!==e.length)return Wp(cd.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:zp(e.field),direction:Up(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=vp(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function Fp(e){let t=Cp(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ml(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=jp(e);return t instanceof cd&&hd(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new id(qp(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ru(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new td(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new td(n,t)}(n.endAt)),Dd(t,i,o,s,a,"F",c,l)}function jp(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=qp(e.unaryFilter.field);return ad.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=qp(e.unaryFilter.field);return ad.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=qp(e.unaryFilter.field);return ad.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=qp(e.unaryFilter.field);return ad.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ll()}}(e):void 0!==e.fieldFilter?function(e){return ad.create(qp(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ll()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return cd.create(e.compositeFilter.filters.map((e=>jp(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ll()}}(e.compositeFilter.op))}(e):Ll()}function Up(e){return fp[e]}function Vp(e){return pp[e]}function Bp(e){return mp[e]}function zp(e){return{fieldPath:e.canonicalString()}}function qp(e){return su.fromServerFormat(e.fieldPath)}function Wp(e){return e instanceof ad?function(e){if("=="===e.op){if(Wh(e.value))return{unaryFilter:{field:zp(e.field),op:"IS_NAN"}};if(qh(e.value))return{unaryFilter:{field:zp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Wh(e.value))return{unaryFilter:{field:zp(e.field),op:"IS_NOT_NAN"}};if(qh(e.value))return{unaryFilter:{field:zp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zp(e.field),op:Vp(e.op),value:e.value}}}(e):e instanceof cd?function(e){const t=e.getFilters().map((e=>Wp(e)));return 1===t.length?t[0]:{compositeFilter:{op:Bp(e.op),filters:t}}}(e):Ll()}function Kp(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Hp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Gp{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:tu.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:tu.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:_h.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Gp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Gp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Qp{constructor(e){this.ct=e}}function $p(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Yp(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Ip(e,t.key),fields:t.data.value.mapValue.fields,updateTime:yp(e,t.version.toTimestamp()),createTime:yp(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Jp(t.version)};else{if(!t.isUnknownDocument())return Ll();r.unknownDocument={path:n.path.toArray(),version:Jp(t.version)}}return r}function Yp(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Jp(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Xp(e){const t=new eu(e.seconds,e.nanoseconds);return tu.fromTimestamp(t)}function Zp(e,t){const n=(t.baseMutations||[]).map((t=>Dp(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Dp(e.ct,t))),i=eu.fromMillis(t.localWriteTimeMs);return new qf(t.batchId,i,n,r)}function em(e){const t=Xp(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Xp(e.lastLimboFreeSnapshotVersion):tu.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Ml(1===e.documents.length),Ud(Ld(Cp(e.documents[0])))}(e.query):function(e){return Ud(Fp(e))}(e.query),new Gp(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,_h.fromBase64String(e.resumeToken))}function tm(e,t){const n=Jp(t.snapshotVersion),r=Jp(t.lastLimboFreeSnapshotVersion);let i;i=Nd(t.target)?Lp(e.ct,t.target):Mp(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Td(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function nm(e){const t=Fp({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?zd(t,t.limit,"L"):t}function rm(e,t){return new Kf(t.largestBatchId,Dp(e.ct,t.overlayMutation))}function im(e,t){const n=t.path.lastSegment();return[e,Lu(t.path.popLast()),n]}function sm(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Jp(r.readTime),documentKey:Lu(r.documentKey.path),largestBatchId:r.largestBatchId}}class om{getBundleMetadata(e,t){return am(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Xp(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return am(e).put(function(e){return{bundleId:e.id,createTime:Jp(_p(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return cm(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:nm(e.bundledQuery),readTime:Xp(e.readTime)}}(e)}))}saveNamedQuery(e,t){return cm(e).put(function(e){return{name:e.name,readTime:Jp(_p(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function am(e){return lh(e,"bundles")}function cm(e){return lh(e,"namedQueries")}class lm{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new lm(e,n)}getOverlay(e,t){return um(e).get(im(this.userId,t)).next((e=>e?rm(this.serializer,e):null))}getOverlays(e,t){const n=nf();return wu.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Kf(t,i);r.push(this.ht(e,s))})),wu.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Lu(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(um(e).H("collectionPathOverlayIndex",r))})),wu.waitFor(i)}getOverlaysForCollection(e,t,n){const r=nf(),i=Lu(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return um(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=rm(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=nf();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return um(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=rm(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return um(e).put(function(e,t,n){const[r,i,s]=im(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Op(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function um(e){return lh(e,"documentOverlays")}class hm{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(xh(e.integerValue));else if("doubleValue"in e){const n=xh(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Ou(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Ih(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?Gh(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Ll()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),ou.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function dm(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function fm(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=dm(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}hm.bt=new hm;class pm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Bt(e){const t=this.Lt(e),n=fm(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Lt(e),n=fm(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class mm{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class gm{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class vm{constructor(){this.Gt=new pm,this.zt=new mm(this.Gt),this.jt=new gm(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class ym{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new ym(this.indexId,this.documentKey,this.arrayValue,n)}}function wm(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=bm(e.arrayValue,t.arrayValue),0!==n?n:(n=bm(e.directionalValue,t.directionalValue),0!==n?n:ou.comparator(e.documentKey,t.documentKey)))}function bm(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class _m{constructor(e){this.Yt=new gh(((e,t)=>su.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Ml(e.collectionGroup===this.collectionId),this.en)return!1;const t=cu(e);if(void 0!==t&&!this.nn(t))return!1;const n=lu(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new gh(su.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new uu(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new uu(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new uu(n.field,"asc"===n.dir?0:1)));return new au(au.UNKNOWN_ID,this.collectionId,t,hu.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Em(e){var t,n;if(Ml(e instanceof ad||e instanceof cd),e instanceof ad){if(e instanceof Ed){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>ad.create(e.field,"==",t))))||[];return cd.create(r,"or")}return e}const r=e.filters.map((e=>Em(e)));return cd.create(r,e.op)}function Sm(e){if(0===e.getFilters().length)return[];const t=Tm(Em(e));return Ml(km(t)),xm(t)||Im(t)?[t]:t.getFilters()}function xm(e){return e instanceof ad}function Im(e){return e instanceof cd&&hd(e)}function km(e){return xm(e)||Im(e)||function(e){if(e instanceof cd&&ud(e)){for(const t of e.getFilters())if(!xm(t)&&!Im(t))return!1;return!0}return!1}(e)}function Tm(e){if(Ml(e instanceof ad||e instanceof cd),e instanceof ad)return e;if(1===e.filters.length)return Tm(e.filters[0]);const t=e.filters.map((e=>Tm(e)));let n=cd.create(t,e.op);return n=Am(n),km(n)?n:(Ml(n instanceof cd),Ml(ld(n)),Ml(n.filters.length>1),n.filters.reduce(((e,t)=>Cm(e,t))))}function Cm(e,t){let n;return Ml(e instanceof ad||e instanceof cd),Ml(t instanceof ad||t instanceof cd),n=e instanceof ad?t instanceof ad?function(e,t){return cd.create([e,t],"and")}(e,t):Nm(e,t):t instanceof ad?Nm(t,e):function(e,t){if(Ml(e.filters.length>0&&t.filters.length>0),ld(e)&&ld(t))return md(e,t.getFilters());const n=ud(e)?e:t,r=ud(e)?t:e,i=n.filters.map((e=>Cm(e,r)));return cd.create(i,"or")}(e,t),Am(n)}function Nm(e,t){if(ld(t))return md(t,e.getFilters());{const n=t.filters.map((t=>Cm(e,t)));return cd.create(n,"or")}}function Am(e){if(Ml(e instanceof ad||e instanceof cd),e instanceof ad)return e;const t=e.getFilters();if(1===t.length)return Am(t[0]);if(dd(e))return e;const n=t.map((e=>Am(e))),r=[];return n.forEach((t=>{t instanceof ad?r.push(t):t instanceof cd&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:cd.create(r,e.op)}class Pm{constructor(){this._n=new Rm}addToCollectionParentIndex(e,t){return this._n.add(t),wu.resolve()}getCollectionParents(e,t){return wu.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return wu.resolve()}deleteFieldIndex(e,t){return wu.resolve()}deleteAllFieldIndexes(e){return wu.resolve()}createTargetIndexes(e,t){return wu.resolve()}getDocumentsMatchingTarget(e,t){return wu.resolve(null)}getIndexType(e,t){return wu.resolve(0)}getFieldIndexes(e,t){return wu.resolve([])}getNextCollectionGroupToUpdate(e){return wu.resolve(null)}getMinOffset(e,t){return wu.resolve(pu.min())}getMinOffsetFromCollectionGroup(e,t){return wu.resolve(pu.min())}updateCollectionGroup(e,t,n){return wu.resolve()}updateIndexEntries(e,t){return wu.resolve()}}class Rm{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new gh(ru.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new gh(ru.comparator)).toArray()}}const Om=new Uint8Array(0);class Dm{constructor(e,t){this.databaseId=t,this.an=new Rm,this.un=new Yd((e=>Td(e)),((e,t)=>Cd(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Lu(r)};return Lm(e).put(i)}return wu.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Zl(t),""],!1,!0);return Lm(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(ju(r.parent))}return n}))}addFieldIndex(e,t){const n=Fm(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=jm(e);return i.next((e=>{n.put(sm(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Fm(e),r=jm(e),i=Mm(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Fm(e),n=Mm(e),r=jm(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return wu.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new _m(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Mm(e);let r=!0;const i=new Map;return wu.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=cf();const r=[];return wu.forEach(i,((i,s)=>{Pl("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Td(t)));const o=function(e,t){const n=cu(t);if(void 0===n)return null;for(const r of Ad(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of lu(t))for(const t of Ad(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of lu(t)){const t=0===i.kind?Pd(e,i.fieldPath,e.startAt):Rd(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new td(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of lu(t)){const t=0===i.kind?Rd(e,i.fieldPath,e.endAt):Pd(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new td(n,r)}(s,i),u=this.hn(i,s,c),h=this.hn(i,s,l),d=this.Pn(i,s,a),f=this.In(i.indexId,o,u,c.inclusive,h,l.inclusive,d);return wu.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=ou.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return wu.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Sm(cd.create(e.filters,"and")).map((t=>kd(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/c]):Om,h=this.En(e,a,n[u%c],r),d=this.dn(e,a,i[u%c],s),f=o.map((t=>this.En(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}En(e,t,n,r){const i=new ym(e,ou.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new ym(e,ou.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new _m(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return wu.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new gh(su.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new vm;for(const r of lu(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);hm.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new vm;return hm.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new vm;return hm.bt.Pt(Vh(this.databaseId,t),n.Ht(function(e){const t=lu(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new vm);let i=0;for(const s of lu(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&zh(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);hm.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new vm;n.seed(e.Wt()),hm.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof ad&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Fm(e),r=jm(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return wu.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new hu(t.sequenceNumber,new pu(Xp(t.readTime),new ou(ju(t.documentKey)),t.largestBatchId)):hu.empty(),r=e.fields.map((e=>{let[t,n]=e;return new uu(su.fromServerFormat(t),n)}));return new au(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Jl(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Fm(e),i=jm(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>wu.forEach(t,(t=>i.put(sm(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return wu.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?wu.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),wu.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?wu.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return Mm(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return Mm(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=Mm(e);let i=new gh(wm);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new ym(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new gh(wm);const r=this.An(t,e);if(null==r)return n;const i=cu(t);if(null!=i){const s=e.data.field(i.fieldPath);if(zh(s))for(const i of s.arrayValue.values||[])n=n.add(new ym(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new ym(t.indexId,e.key,Om,r));return n}wn(e,t,n,r,i){Pl("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=yh(s),c=yh(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=yh(o)):t?(i(a),a=yh(s)):(a=yh(s),c=yh(o))}}(r,i,wm,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),wu.waitFor(s)}gn(e){let t=1;return jm(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>wm(e,t))).filter(((e,t,n)=>!t||0!==wm(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=wm(s,e),i=wm(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Om,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Om,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return wm(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Um)}getMinOffset(e,t){return wu.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||Ll())))).next(Um)}}function Lm(e){return lh(e,"collectionParents")}function Mm(e){return lh(e,"indexEntries")}function Fm(e){return lh(e,"indexConfiguration")}function jm(e){return lh(e,"indexState")}function Um(e){Ml(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;mu(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new pu(t.readTime,t.documentKey,n)}const Vm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bm{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Bm(e,Bm.DEFAULT_COLLECTION_PERCENTILE,Bm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function zm(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(c.next((()=>{Ml(1===a)})));const l=[];for(const u of n.mutations){const e=Bu(t,u.key.path,n.batchId);s.push(i.delete(e)),l.push(u.key)}return wu.waitFor(s).next((()=>l))}function qm(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ll();t=e.noDocument}return JSON.stringify(t).length}Bm.DEFAULT_COLLECTION_PERCENTILE=10,Bm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bm.DEFAULT=new Bm(41943040,Bm.DEFAULT_COLLECTION_PERCENTILE,Bm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bm.DISABLED=new Bm(-1,0,0);class Wm{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){Ml(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Wm(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hm(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Gm(e),s=Hm(e);return s.add({}).next((o=>{Ml("number"==typeof o);const a=new qf(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>Op(e.ct,t))),i=n.mutations.map((t=>Op(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let u=new gh(((e,t)=>Jl(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Bu(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(s.put(c)),l.push(i.put(t,zu))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),wu.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return Hm(e).get(t).next((e=>e?(Ml(e.userId===this.userId),Zp(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?wu.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Hm(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Ml(t.batchId>=n),i=Zp(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Hm(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hm(e).W("userMutationsIndex",t).next((e=>e.map((e=>Zp(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Vu(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Gm(e).Y({range:r},((n,r,s)=>{const[o,a,c]=n,l=ju(a);if(o===this.userId&&t.path.isEqual(l))return Hm(e).get(c).next((e=>{if(!e)throw Ll();Ml(e.userId===this.userId),i.push(Zp(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new gh(Jl);const r=[];return t.forEach((t=>{const i=Vu(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Gm(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,c=ju(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),wu.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Vu(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new gh(Jl);return Gm(e).Y({range:s},((e,t,i)=>{const[s,a,c]=e,l=ju(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Hm(e).get(t).next((e=>{if(null===e)throw Ll();Ml(e.userId===this.userId),n.push(Zp(this.serializer,e))})))})),wu.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return zm(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),wu.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return wu.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Gm(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=ju(e[1]);r.push(t)}else n.done()})).next((()=>{Ml(0===r.length)}))}))}containsKey(e,t){return Km(e,this.userId,t)}xn(e){return Qm(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Km(e,t,n){const r=Vu(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Gm(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Hm(e){return lh(e,"mutations")}function Gm(e){return lh(e,"documentMutations")}function Qm(e){return lh(e,"mutationQueues")}class $m{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new $m(0)}static Bn(){return new $m(-1)}}class Ym{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new $m(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>tu.fromTimestamp(new eu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Jm(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(Ml(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Jm(e).Y(((s,o)=>{const a=em(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>wu.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Jm(e).Y(((e,n)=>{const r=em(n);t(r)}))}Ln(e){return Xm(e).get("targetGlobalKey").next((e=>(Ml(null!==e),e)))}kn(e,t){return Xm(e).put("targetGlobalKey",t)}qn(e,t){return Jm(e).put(tm(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Td(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Jm(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=em(n);Cd(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Zm(e);return t.forEach((t=>{const s=Lu(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),wu.waitFor(r)}removeMatchingKeys(e,t,n){const r=Zm(e);return wu.forEach(t,(t=>{const i=Lu(t.path);return wu.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Zm(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Zm(e);let i=cf();return r.Y({range:n,J:!0},((e,t,n)=>{const r=ju(e[1]),s=new ou(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Lu(t.path),r=IDBKeyRange.bound([n],[Zl(n)],!1,!0);let i=0;return Zm(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return Jm(e).get(t).next((e=>e?em(e):null))}}function Jm(e){return lh(e,"targets")}function Xm(e){return lh(e,"targetGlobal")}function Zm(e){return lh(e,"targetDocuments")}function eg(e,t){let[n,r]=e,[i,s]=t;const o=Jl(n,i);return 0===o?Jl(r,s):o}class tg{constructor(e){this.Kn=e,this.buffer=new gh(eg),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();eg(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ng{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Pl("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){xu(e)?Pl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await yu(e)}await this.zn(3e5)}))}}class rg{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return wu.resolve(Pu._e);const n=new tg(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pl("LruGarbageCollector","Garbage collection skipped; disabled"),wu.resolve(Vm)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Pl("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Vm):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Pl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Al()<=Yr.DEBUG&&Pl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),wu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function ig(e,t){return new rg(e,t)}class sg{constructor(e,t){this.db=e,this.garbageCollector=ig(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return og(e,n)}removeReference(e,t,n){return og(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return og(e,t)}er(e,t){return function(e,t){let n=!1;return Qm(e).Z((r=>Km(e,r,t).next((e=>(e&&(n=!0),wu.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,tu.min()),Zm(e).delete(function(e){return[0,Lu(e.path)]}(s)))))}));r.push(t)}})).next((()=>wu.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return og(e,t)}Xn(e,t){const n=Zm(e);let r,i=Pu._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:c}=n;0===s?(i!==Pu._e&&t(new ou(ju(r)),i),i=c,r=a):i=Pu._e})).next((()=>{i!==Pu._e&&t(new ou(ju(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function og(e,t){return Zm(e).put(function(e,t){return{targetId:0,path:Lu(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class ag{constructor(){this.changes=new Yd((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ed.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?wu.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cg{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return dg(e).put(n)}removeEntry(e,t,n){return dg(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Yp(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=ed.newInvalidDocument(t);return dg(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(fg(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:ed.newInvalidDocument(t)};return dg(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(fg(t))},((e,r)=>{n={document:this.nr(t,r),size:qm(r)}})).next((()=>n))}getEntries(e,t){let n=Xd();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=Xd(),r=new fh(ou.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,qm(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return wu.resolve();let r=new gh(mg);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(fg(r.first()),fg(r.last())),s=r.getIterator();let o=s.getNext();return dg(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=ou.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&mg(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(fg(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Yp(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return dg(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Xd();for(const i of e){const e=this.nr(ou.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Hd(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Xd();const s=pg(t,n),o=pg(t,pu.max());return dg(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(ou.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new ug(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return hg(e).get("remoteDocumentGlobalKey").next((e=>(Ml(!!e),e)))}tr(e,t){return hg(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Rp(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=ou.fromSegments(t.noDocument.path),r=Xp(t.noDocument.readTime);n=ed.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ll();{const e=ou.fromSegments(t.unknownDocument.path),r=Xp(t.unknownDocument.version);n=ed.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new eu(e[0],e[1]);return tu.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(tu.min()))return e}return ed.newInvalidDocument(e)}}function lg(e){return new cg(e)}class ug extends ag{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Yd((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new gh(((e,t)=>Jl(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=$p(this.ar.serializer,s);r=r.add(i.path.popLast());const c=qm(a);n+=c-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=$p(this.ar.serializer,s.convertToNoDocument(tu.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),wu.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function hg(e){return lh(e,"remoteDocumentGlobal")}function dg(e){return lh(e,"remoteDocumentsV14")}function fg(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function pg(e,t){const n=t.documentKey.path.toArray();return[e,Yp(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function mg(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Jl(n[s],r[s]),i)return i;return i=Jl(n.length,r.length),i||(i=Jl(n[n.length-2],r[r.length-2]),i||Jl(n[n.length-1],r[r.length-1]))}class gg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class vg{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Of(n.mutation,e,wh.empty(),eu.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,cf()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cf();const r=nf();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=ef();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=nf();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,cf())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Xd();const s=sf(),o=sf();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Ff)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Of(o.mutation,t,o.mutation.getFieldMask(),eu.now())):s.set(t.key,wh.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new gg(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=sf();let r=new fh(((e,t)=>e-t)),i=cf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||wh.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||cf()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=rf();c.forEach((e=>{if(!i.has(e)){const r=Pf(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return wu.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ou.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):wu.resolve(nf());let o=-1,a=i;return s.next((t=>wu.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?wu.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,cf()))).next((e=>({batchId:o,changes:tf(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ou(t)).next((e=>{let t=ef();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=ef();return this.indexManager.getCollectionParents(e,i).next((o=>wu.forEach(o,(o=>{const a=function(e,t){return new Od(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ed.newInvalidDocument(r)))}));let n=ef();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Of(s.mutation,r,wh.empty(),eu.now()),Hd(t,r)&&(n=n.insert(e,r))})),n}))}}class yg{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return wu.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:_p(e.createTime)}}(t)),wu.resolve()}getNamedQuery(e,t){return wu.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:nm(e.bundledQuery),readTime:_p(e.readTime)}}(t)),wu.resolve()}}class wg{constructor(){this.overlays=new fh(ou.comparator),this.hr=new Map}getOverlay(e,t){return wu.resolve(this.overlays.get(t))}getOverlays(e,t){const n=nf();return wu.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),wu.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),wu.resolve()}getOverlaysForCollection(e,t,n){const r=nf(),i=t.length+1,s=new ou(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return wu.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new fh(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=nf(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=nf(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return wu.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Kf(t,n));let i=this.hr.get(t);void 0===i&&(i=cf(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class bg{constructor(){this.Pr=new gh(_g.Ir),this.Tr=new gh(_g.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new _g(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new _g(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new ou(new ru([])),n=new _g(t,e),r=new _g(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new ou(new ru([])),n=new _g(t,e),r=new _g(t,e+1);let i=cf();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new _g(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class _g{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return ou.comparator(e.key,t.key)||Jl(e.pr,t.pr)}static Er(e,t){return Jl(e.pr,t.pr)||ou.comparator(e.key,t.key)}}class Eg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new gh(_g.Ir)}checkEmpty(e){return wu.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new qf(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new _g(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return wu.resolve(s)}lookupMutationBatch(e,t){return wu.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return wu.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return wu.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return wu.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new _g(t,0),r=new _g(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),wu.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new gh(Jl);return t.forEach((e=>{const t=new _g(e,0),r=new _g(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),wu.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ou.isDocumentKey(i)||(i=i.child(""));const s=new _g(new ou(i),0);let o=new gh(Jl);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),wu.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ml(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return wu.forEach(t.mutations,(r=>{const i=new _g(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new _g(t,0),r=this.wr.firstAfterOrEqual(n);return wu.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,wu.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Sg{constructor(e){this.vr=e,this.docs=new fh(ou.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return wu.resolve(n?n.document.mutableCopy():ed.newInvalidDocument(t))}getEntries(e,t){let n=Xd();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ed.newInvalidDocument(e))})),wu.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Xd();const s=t.path,o=new ou(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||mu(fu(o),n)<=0||(r.has(o.key)||Hd(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return wu.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ll()}Fr(e,t){return wu.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new xg(this)}getSize(e){return wu.resolve(this.size)}}class xg extends ag{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),wu.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Ig{constructor(e){this.persistence=e,this.Mr=new Yd((e=>Td(e)),Cd),this.lastRemoteSnapshotVersion=tu.min(),this.highestTargetId=0,this.Or=0,this.Nr=new bg,this.targetCount=0,this.Br=$m.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),wu.resolve()}getLastRemoteSnapshotVersion(e){return wu.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return wu.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),wu.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),wu.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new $m(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,wu.resolve()}updateTargetData(e,t){return this.qn(t),wu.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,wu.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),wu.waitFor(i).next((()=>r))}getTargetCount(e){return wu.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return wu.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),wu.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),wu.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),wu.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return wu.resolve(n)}containsKey(e,t){return wu.resolve(this.Nr.containsKey(t))}}class kg{constructor(e,t){this.Lr={},this.overlays={},this.kr=new Pu(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Ig(this),this.indexManager=new Pm,this.remoteDocumentCache=function(e){return new Sg(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Qp(t),this.$r=new yg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new Eg(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Pl("MemoryPersistence","Starting transaction:",e);const r=new Tg(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return wu.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class Tg extends vu{constructor(e){super(),this.currentSequenceNumber=e}}class Cg{constructor(e){this.persistence=e,this.zr=new bg,this.jr=null}static Hr(e){return new Cg(e)}get Jr(){if(this.jr)return this.jr;throw Ll()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),wu.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),wu.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),wu.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wu.forEach(this.Jr,(n=>{const r=ou.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,tu.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return wu.or([()=>wu.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Ng{constructor(e){this.serializer=e}N(e,t,n,r){const i=new bu("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Uu,{unique:!0}),e.createObjectStore("documentMutations")}(e),Ag(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=wu.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Ag(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:tu.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Uu,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return wu.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:eh});t.createIndex("collectionPathOverlayIndex",th,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",nh,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:qu});t.createIndex("documentKeyIndex",Wu),t.createIndex("collectionGroupIndex",Ku)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Yu}).createIndex("sequenceNumberIndex",Ju,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Xu}).createIndex("documentKeyIndex",Zu,{unique:!1})}(e)))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=qm(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>wu.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>wu.forEach(n,(n=>{Ml(n.userId===t.userId);const r=Zp(this.serializer,n);return zm(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new ru(n),o=function(e){return[0,Lu(e)]}(s);r.push(t.get(o).next((n=>n?wu.resolve():(n=>t.put({targetId:0,path:Lu(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>wu.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:$u});const n=t.store("collectionParents"),r=new Rm,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Lu(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new ru(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=ju(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=em(n),i=tm(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new ou(ru.fromString(e.document.name).popFirst(5)):e.noDocument?ou.fromSegments(e.noDocument.path):e.unknownDocument?ou.fromSegments(e.unknownDocument.path):Ll()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>wu.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=lg(this.serializer),i=new kg(Cg.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:cf();Zp(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),wu.forEach(n,((e,n)=>{const s=new Tl(n),o=lm.lt(this.serializer,s),a=i.getIndexManager(s),c=Wm.lt(s,this.serializer,a,i.referenceDelegate);return new vg(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new ch(t,Pu._e),e).next()}))}))}}function Ag(e){e.createObjectStore("targetDocuments",{keyPath:Gu}).createIndex("documentTargetsIndex",Qu,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Hu,{unique:!0}),e.createObjectStore("targetGlobal")}const Pg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Rg{constructor(e,t,n,r,i,s,o,a,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=c,this.ai=l,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Rg.D())throw new Ul(jl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sg(this,r),this.Ti=t+"main",this.serializer=new Qp(a),this.Ei=new _u(this.Ti,this.ui,new Ng(this.serializer)),this.Qr=new Ym(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lg(this.serializer),this.$r=new om,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===l&&Rl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ul(jl.FAILED_PRECONDITION,Pg);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Pu(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Dg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(xu(e))return Pl("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Og(e).get("owner").next((e=>wu.resolve(this.Si(e))))}bi(e){return Dg(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=lh(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return wu.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?wu.resolve(!0):Og(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Ul(jl.FAILED_PRECONDITION,Pg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Dg(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Pl("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new ch(e,Pu._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Bi()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>Dg(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return Wm.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Dm(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return lm.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){Pl("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?ah:14===e?oh:13===e?sh:12===e?ih:11===e?rh:void Ll()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new ch(r,this.kr?this.kr.next():Pu._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw Rl("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new Ul(jl.FAILED_PRECONDITION,gu);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return Og(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ul(jl.FAILED_PRECONDITION,Pg)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Og(e).put("owner",t)}static D(){return _u.D()}yi(e){const t=Og(e);return t.get("owner").next((e=>this.Si(e)?(Pl("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):wu.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Rl("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;Nr()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Pl("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Rl("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Rl("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Og(e){return lh(e,"owner")}function Dg(e){return lh(e,"clientMetadata")}function Lg(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Mg{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=cf(),r=cf();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Mg(e,t.fromCache,n,r)}}class Fg{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class jg{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Nr()?8:_u.v(xr())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Fg;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Al()<=Yr.DEBUG&&Pl("QueryEngine","SDK will not create cache indexes for query:",Kd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),wu.resolve()):(Al()<=Yr.DEBUG&&Pl("QueryEngine","Query:",Kd(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Al()<=Yr.DEBUG&&Pl("QueryEngine","The SDK decides to create cache indexes for query:",Kd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ud(t))):wu.resolve())}ji(e,t){if(Md(t))return wu.resolve(null);let n=Ud(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=zd(t,null,"F"),n=Ud(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=cf(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,zd(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Md(t)||r.isEqual(tu.min())?wu.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?wu.resolve(null):(Al()<=Yr.DEBUG&&Pl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Kd(t)),this.es(e,s,t,du(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new gh(Qd(e));return t.forEach(((t,r)=>{Hd(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Al()<=Yr.DEBUG&&Pl("QueryEngine","Using full collection scan to execute query:",Kd(t)),this.zi.getDocumentsMatchingQuery(e,t,pu.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Ug{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new fh(Jl),this.rs=new Yd((e=>Td(e)),Cd),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vg(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Vg(e,t,n,r){return new Ug(e,t,n,r)}async function Bg(e,t){const n=Fl(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=cf();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function zg(e){const t=Fl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function qg(e,t,n){let r=cf(),i=cf();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Xd();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(tu.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Pl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function Wg(e,t){const n=Fl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Kg(e,t){const n=Fl(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,wu.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Gp(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Hg(e,t,n){const r=Fl(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!xu(e))throw e;Pl("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Gg(e,t,n){const r=Fl(e);let i=tu.min(),s=cf();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Fl(e),i=r.rs.get(n);return void 0!==i?wu.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Ud(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:tu.min(),n?s:cf()))).next((e=>(Yg(r,Gd(t),e),{documents:e,hs:s})))))}function Qg(e,t){const n=Fl(e),r=Fl(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function $g(e,t){const n=Fl(e),r=n.ss.get(t)||tu.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,du(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Yg(n,t,e),e)))}function Yg(e,t,n){let r=e.ss.get(t)||tu.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Jg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cf();const r=await Kg(e,Ud(nm(t.bundledQuery))),i=Fl(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=_p(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(_h.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function Xg(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Zg(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function ev(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class tv{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ul(r.error.code,r.error.message))),s?new tv(e,t,r.state,i):(Rl("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nv{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Ul(n.error.code,n.error.message))),i?new nv(e,n.state,r):(Rl("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=uf();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Du(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new rv(e,i):(Rl("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class iv{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new iv(t.clientId,t.onlineState):(Rl("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class sv{constructor(){this.activeTargetIds=uf()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ov{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new fh(Jl),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=Xg(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new sv),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(Xg(this.persistenceKey,n));if(e){const t=rv.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,n){this.Bs(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(ev(this.persistenceKey,e));if(n){const r=nv.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ev(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pl("SharedClientState","READ",e,t),t}setItem(e,t){Pl("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pl("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(Pl("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Rl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Pu._e;if(null!=e)try{const n=JSON.parse(e);Ml("number"==typeof n),t=n}catch(e){Rl("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Pu._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,n){const r=new tv(this.currentUser,e,t,n),i=Zg(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Ls(e){const t=Zg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=ev(this.persistenceKey,e),i=new nv(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return rv.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return tv.Es(new Tl(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return nv.Es(r,t)}xs(e){return iv.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Pl("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=uf();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class av{constructor(){this.no=new sv,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new sv,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cv{io(e){}shutdown(){}}class lv{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Pl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Pl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let uv=null;function hv(){return null===uv?uv=268435456+Math.round(2147483648*Math.random()):uv++,"0x"+uv.toString(16)}const dv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fv{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const pv="WebChannelConnection";class mv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=hv(),o=this.bo(e,t.toUriEncodedString());Pl("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(Pl("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Ol("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Cl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=dv[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=hv();return new Promise(((s,o)=>{const a=new Sl;a.setWithCredentials(!0),a.listenOnce(wl.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case yl.NO_ERROR:const t=a.getResponseJson();Pl(pv,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case yl.TIMEOUT:Pl(pv,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Ul(jl.DEADLINE_EXCEEDED,"Request time out"));break;case yl.HTTP_ERROR:const n=a.getStatus();if(Pl(pv,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(jl).indexOf(t)>=0?t:jl.UNKNOWN}(t.status);o(new Ul(e,t.message))}else o(new Ul(jl.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ul(jl.UNAVAILABLE,"Connection failed."));break;default:Ll()}}finally{Pl(pv,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);Pl(pv,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)}))}Fo(e,t,n){const r=hv(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=gl(),o=vl(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");Pl(pv,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new fv({lo:t=>{d?Pl(pv,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Pl(pv,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Pl(pv,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,El.EventType.OPEN,(()=>{d||Pl(pv,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,El.EventType.CLOSE,(()=>{d||(d=!0,Pl(pv,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(u,El.EventType.ERROR,(t=>{d||(d=!0,Ol(pv,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new Ul(jl.UNAVAILABLE,"The operation could not be completed")))})),p(u,El.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Ml(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Pl(pv,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Gf[e];if(void 0!==t)return Yf(t)}(t),i=o.message;void 0===n&&(n=jl.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new Ul(n,i)),u.close()}else Pl(pv,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,bl.STAT_EVENT,(t=>{t.stat===_l.PROXY?Pl(pv,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===_l.NOPROXY&&Pl(pv,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function gv(){return"undefined"!=typeof window?window:null}function vv(){return"undefined"!=typeof document?document:null}function yv(e){return new gp(e,!0)}class wv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&Pl("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class bv{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new wv(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===jl.RESOURCE_EXHAUSTED?(Rl(t.toString()),Rl("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===jl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new Ul(jl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Pl("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Pl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _v extends bv{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ll()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ml(void 0===t||"string"==typeof t),_h.fromBase64String(t||"")):(Ml(void 0===t||t instanceof Uint8Array),_h.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?jl.UNKNOWN:Yf(e.code);return new Ul(t,e.message||"")}(o);n=new cp(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=kp(e,r.document.name),s=_p(r.document.updateTime),o=r.document.createTime?_p(r.document.createTime):tu.min(),a=new Xh({mapValue:{fields:r.document.fields}}),c=ed.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new op(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=kp(e,r.document),s=r.readTime?_p(r.readTime):tu.min(),o=ed.newNoDocument(i,s),a=r.removedTargetIds||[];n=new op([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=kp(e,r.document),s=r.removedTargetIds||[];n=new op([],s,i,null)}else{if(!("filter"in t))return Ll();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Hf(r,i),o=e.targetId;n=new ap(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return tu.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?tu.min():t.readTime?_p(t.readTime):tu.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=Np(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Nd(r)?{documents:Lp(e,r)}:{query:Mp(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=wp(e,t.resumeToken);const r=vp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(tu.min())>0){n.readTime=yp(e,t.snapshotVersion.toTimestamp());const r=vp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ll()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=Np(this.serializer),t.removeTarget=e,this.t_(t)}}class Ev extends bv{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Ml(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Ml(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?_p(e.updateTime):_p(t);return n.isEqual(tu.min())&&(n=_p(t)),new Tf(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=_p(e.commitTime);return this.listener.T_(n,t)}return Ml(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Np(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Op(this.serializer,e)))};this.t_(t)}}class Sv extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new Ul(jl.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,Sp(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===jl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ul(jl.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,Sp(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===jl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ul(jl.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class xv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Rl(t),this.g_=!1):Pl("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Iv{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{Dv(this)&&(Pl("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Fl(e);t.v_.add(4),await Tv(t),t.x_.set("Unknown"),t.v_.delete(4),await kv(t)}(this))}))})),this.x_=new xv(n,r)}}async function kv(e){if(Dv(e))for(const t of e.F_)await t(!0)}async function Tv(e){for(const t of e.F_)await t(!1)}function Cv(e,t){const n=Fl(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Ov(n)?Rv(n):Xv(n).Jo()&&Av(n,t))}function Nv(e,t){const n=Fl(e),r=Xv(n);n.C_.delete(t),r.Jo()&&Pv(n,t),0===n.C_.size&&(r.Jo()?r.Xo():Dv(n)&&n.x_.set("Unknown"))}function Av(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(tu.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Xv(e).c_(t)}function Pv(e,t){e.O_.Oe(t),Xv(e).l_(t)}function Rv(e){e.O_=new up({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Xv(e).start(),e.x_.p_()}function Ov(e){return Dv(e)&&!Xv(e).Ho()&&e.C_.size>0}function Dv(e){return 0===Fl(e).v_.size}function Lv(e){e.O_=void 0}async function Mv(e){e.C_.forEach(((t,n)=>{Av(e,t)}))}async function Fv(e,t){Lv(e),Ov(e)?(e.x_.S_(t),Rv(e)):e.x_.set("Unknown")}async function jv(e,t,n){if(e.x_.set("Online"),t instanceof cp&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){Pl("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Uv(e,n)}else if(t instanceof op?e.O_.$e(t):t instanceof ap?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(tu.min()))try{const t=await zg(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(_h.EMPTY_BYTE_STRING,r.snapshotVersion)),Pv(e,t);const i=new Gp(r.target,t,n,r.sequenceNumber);Av(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Pl("RemoteStore","Failed to raise snapshot:",t),await Uv(e,t)}}async function Uv(e,t,n){if(!xu(t))throw t;e.v_.add(1),await Tv(e),e.x_.set("Offline"),n||(n=()=>zg(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Pl("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await kv(e)}))}function Vv(e,t){return t().catch((n=>Uv(e,n,t)))}async function Bv(e){const t=Fl(e),n=Zv(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;zv(t);)try{const e=await Wg(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,qv(t,e)}catch(e){await Uv(t,e)}Wv(t)&&Kv(t)}function zv(e){return Dv(e)&&e.D_.length<10}function qv(e,t){e.D_.push(t);const n=Zv(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Wv(e){return Dv(e)&&!Zv(e).Ho()&&e.D_.length>0}function Kv(e){Zv(e).start()}async function Hv(e){Zv(e).d_()}async function Gv(e){const t=Zv(e);for(const n of e.D_)t.I_(n.mutations)}async function Qv(e,t,n){const r=e.D_.shift(),i=Wf.from(r,t,n);await Vv(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Bv(e)}async function $v(e,t){t&&Zv(e).P_&&await async function(e,t){if(function(e){return $f(e)&&e!==jl.ABORTED}(t.code)){const n=e.D_.shift();Zv(e).Zo(),await Vv(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Bv(e)}}(e,t),Wv(e)&&Kv(e)}async function Yv(e,t){const n=Fl(e);n.asyncQueue.verifyOperationInProgress(),Pl("RemoteStore","RemoteStore received new credentials");const r=Dv(n);n.v_.add(3),await Tv(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await kv(n)}async function Jv(e,t){const n=Fl(e);t?(n.v_.delete(2),await kv(n)):t||(n.v_.add(2),await Tv(n),n.x_.set("Unknown"))}function Xv(e){return e.N_||(e.N_=function(e,t,n){const r=Fl(e);return r.R_(),new _v(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Mv.bind(null,e),To:Fv.bind(null,e),u_:jv.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),Ov(e)?Rv(e):e.x_.set("Unknown")):(await e.N_.stop(),Lv(e))}))),e.N_}function Zv(e){return e.B_||(e.B_=function(e,t,n){const r=Fl(e);return r.R_(),new Ev(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Hv.bind(null,e),To:$v.bind(null,e),E_:Gv.bind(null,e),T_:Qv.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await Bv(e)):(await e.B_.stop(),e.D_.length>0&&(Pl("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.B_}class ey{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Vl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new ey(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ul(jl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ty(e,t){if(Rl("AsyncQueue","".concat(t,": ").concat(e)),xu(e))return new Ul(jl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class ny{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ou.comparator(t.key,n.key):(e,t)=>ou.comparator(e.key,t.key),this.keyedMap=ef(),this.sortedSet=new fh(this.comparator)}static emptySet(e){return new ny(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ny))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ny;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ry{constructor(){this.L_=new fh(ou.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):Ll():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class iy{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new iy(e,t,ny.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class sy{constructor(){this.q_=void 0,this.Q_=[]}}class oy{constructor(){this.queries=new Yd((e=>Wd(e)),qd),this.onlineState="Unknown",this.K_=new Set}}async function ay(e,t){const n=Fl(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new sy),i)try{s.q_=await n.onListen(r)}catch(e){const n=ty(e,"Initialization of query '".concat(Kd(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.Q_.push(t),t.U_(n.onlineState),s.q_&&t.W_(s.q_)&&hy(n)}async function cy(e,t){const n=Fl(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function ly(e,t){const n=Fl(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.W_(i)&&(r=!0);t.q_=i}}r&&hy(n)}function uy(e,t,n){const r=Fl(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function hy(e){e.K_.forEach((e=>{e.next()}))}class dy{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new iy(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=iy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class fy{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class py{constructor(e){this.serializer=e}Ps(e){return kp(this.serializer,e)}Is(e){return e.metadata.exists?Rp(this.serializer,e.document,!1):ed.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return _p(e)}}class my{constructor(e,t,n){this.ta=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gy(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const n=ru.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,n=new py(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||cf()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Fl(e);let s=cf(),o=Xd();for(const l of n){const e=t.Ps(l.metadata.name);l.document&&(s=s.add(e));const n=t.Is(l);n.setReadTime(t.Ts(l.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=await Kg(i,function(e){return Ud(Ld(ru.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>qg(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.Qr.addMatchingKeys(e,s,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new py(this.serializer),this.documents,this.ta.id),t=this.ra(this.documents);for(const n of this.queries)await Jg(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function gy(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class vy{constructor(e){this.key=e}}class yy{constructor(e){this.key=e}}class wy{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=cf(),this.mutatedKeys=cf(),this.ua=Qd(e),this.ca=new ny(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new ry,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=Hd(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ia(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ua(u,a)>0||c&&this.ua(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:s,Pa:n,Xi:o,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ll()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const o=t&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,c=a!==this._a;return this._a=a,0!==s.length||c?{snapshot:new iy(this.query,e.ca,i,s,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new ry,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=cf(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new yy(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new vy(n))})),t}Ra(e){this.oa=e.hs,this.aa=cf();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return iy.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class by{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class _y{constructor(e){this.key=e,this.ma=!1}}class Ey{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Yd((e=>Wd(e)),qd),this.pa=new Map,this.ya=new Set,this.wa=new fh(ou.comparator),this.Sa=new Map,this.ba=new bg,this.Da={},this.Ca=new Map,this.va=$m.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function Sy(e,t){const n=$y(e);let r,i;const s=n.ga.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const e=await Kg(n.localStore,Ud(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await xy(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&Cv(n.remoteStore,e)}return i}async function xy(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await Gg(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ha(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Ly(e,t.targetId,a.da),a.snapshot}(e,t,n,r);const s=await Gg(e.localStore,t,!0),o=new wy(t,s.hs),a=o.ha(s.documents),c=sp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,c);Ly(e,n,l.da);const u=new by(t,n,o);return e.ga.set(t,u),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),l.snapshot}async function Iy(e,t){const n=Fl(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!qd(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Hg(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Nv(n.remoteStore,r.targetId),Oy(n,r.targetId)})).catch(yu)):(Oy(n,r.targetId),await Hg(n.localStore,r.targetId,!0))}async function ky(e,t){const n=Fl(e);try{const e=await function(e,t){const n=Fl(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(_h.EMPTY_BYTE_STRING,tu.min()).withLastLimboFreeSnapshotVersion(tu.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Qr.updateTargetData(e,l))}));let a=Xd(),c=cf();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(qg(e,s,t.documentUpdates).next((e=>{a=e.cs,c=e.ls}))),!r.isEqual(tu.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return wu.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(Ml(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?Ml(r.ma):e.removedDocuments.size>0&&(Ml(r.ma),r.ma=!1))})),await jy(n,e,t)}catch(e){await yu(e)}}function Ty(e,t,n){const r=Fl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Fl(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&hy(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Cy(e,t,n){const r=Fl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),s=i&&i.key;if(s){let e=new fh(ou.comparator);e=e.insert(s,ed.newNoDocument(s,tu.min()));const n=cf().add(s),i=new ip(tu.min(),new Map,new fh(Jl),e,n);await ky(r,i),r.wa=r.wa.remove(s),r.Sa.delete(t),Fy(r)}else await Hg(r.localStore,t,!1).then((()=>Oy(r,t,n))).catch(yu)}async function Ny(e,t){const n=Fl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Fl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=wu.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Ml(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=cf();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Ry(n,r,null),Py(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await jy(n,e)}catch(e){await yu(e)}}async function Ay(e,t,n){const r=Fl(e);try{const e=await function(e,t){const n=Fl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ml(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Ry(r,t,n),Py(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await jy(r,e)}catch(n){await yu(n)}}function Py(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function Ry(e,t,n){const r=Fl(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function Oy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||Dy(e,t)}))}function Dy(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(Nv(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Fy(e))}function Ly(e,t,n){for(const r of n)r instanceof vy?(e.ba.addReference(r.key,t),My(e,r)):r instanceof yy?(Pl("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||Dy(e,r.key)):Ll()}function My(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(Pl("SyncEngine","New document in limbo: "+n),e.ya.add(r),Fy(e))}function Fy(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new ou(ru.fromString(t)),r=e.va.next();e.Sa.set(r,new _y(n)),e.wa=e.wa.insert(n,r),Cv(e.remoteStore,new Gp(Ud(Ld(n.path)),r,"TargetPurposeLimboResolution",Pu._e))}}async function jy(e,t,n){const r=Fl(e),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach(((e,a)=>{o.push(r.Ma(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Mg.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.fa.u_(i),await async function(e,t){const n=Fl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>wu.forEach(t,(t=>wu.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>wu.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!xu(e))throw e;Pl("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function Uy(e,t){const n=Fl(e);if(!n.currentUser.isEqual(t)){Pl("SyncEngine","User change. New user:",t.toKey());const e=await Bg(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new Ul(jl.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await jy(n,e.us)}}function Vy(e,t){const n=Fl(e),r=n.Sa.get(t);if(r&&r.ma)return cf().add(r.key);{let e=cf();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}async function By(e,t){const n=Fl(e),r=await Gg(n.localStore,t.query,!0),i=t.view.Ra(r);return n.isPrimaryClient&&Ly(n,t.targetId,i.da),i}async function zy(e,t){const n=Fl(e);return $g(n.localStore,t).then((e=>jy(n,e)))}async function qy(e,t,n,r){const i=Fl(e),s=await function(e,t){const n=Fl(e),r=Fl(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):wu.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Bv(i.remoteStore):"acknowledged"===n||"rejected"===n?(Ry(i,t,r||null),Py(i,t),function(e,t){Fl(Fl(e).mutationQueue).Mn(t)}(i.localStore,t)):Ll(),await jy(i,s)):Pl("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Wy(e,t,n){const r=Fl(e),i=[],s=[];for(const o of t){let e;const t=r.pa.get(o);if(t&&0!==t.length){e=await Kg(r.localStore,Ud(t[0]));for(const e of t){const t=r.ga.get(e),n=await By(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Qg(r.localStore,o);e=await Kg(r.localStore,t),await xy(r,Ky(t),o,!1,e.resumeToken)}i.push(e)}return r.fa.u_(s),i}function Ky(e){return Dd(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Hy(e){return function(e){return Fl(Fl(e).persistence).Li()}(Fl(e).localStore)}async function Gy(e,t,n,r){const i=Fl(e);if(i.Fa)return void Pl("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await $g(i.localStore,Gd(s[0])),r=ip.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,_h.EMPTY_BYTE_STRING);await jy(i,e,r);break}case"rejected":await Hg(i.localStore,t,!0),Oy(i,t,r);break;default:Ll()}}async function Qy(e,t,n){const r=$y(e);if(r.Fa){for(const e of t){if(r.pa.has(e)){Pl("SyncEngine","Adding an already active target "+e);continue}const t=await Qg(r.localStore,e),n=await Kg(r.localStore,t);await xy(r,Ky(t),n.targetId,!1,n.resumeToken),Cv(r.remoteStore,n)}for(const e of n)r.pa.has(e)&&await Hg(r.localStore,e,!1).then((()=>{Nv(r.remoteStore,e),Oy(r,e)})).catch(yu)}}function $y(e){const t=Fl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ky.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Cy.bind(null,t),t.fa.u_=ly.bind(null,t.eventManager),t.fa.xa=uy.bind(null,t.eventManager),t}function Yy(e){const t=Fl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ny.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ay.bind(null,t),t}class Jy{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=yv(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Vg(this.persistence,new jg,e.initialUser,this.serializer)}createPersistence(e){return new kg(Cg.Hr,this.serializer)}createSharedClientState(e){return new av}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Xy extends Jy{constructor(e,t,n){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await Yy(this.Na.syncEngine),await Bv(this.Na.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Vg(this.persistence,new jg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new ng(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Au(t,this.persistence);return new Nu(e.asyncQueue,n)}createPersistence(e){const t=Lg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Bm.withCacheSize(this.cacheSizeBytes):Bm.DEFAULT;return new Rg(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,gv(),vv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new av}}class Zy extends Xy{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Na.syncEngine;this.sharedClientState instanceof ov&&(this.sharedClientState.syncEngine={Zs:qy.bind(null,t),Xs:Gy.bind(null,t),eo:Qy.bind(null,t),Li:Hy.bind(null,t),Ys:zy.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Fl(e);if($y(n),Yy(n),!0===t&&!0!==n.Fa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Wy(n,e.toArray());n.Fa=!0,await Jv(n.remoteStore,!0);for(const r of t)Cv(n.remoteStore,r)}else if(!1===t&&!1!==n.Fa){const e=[];let t=Promise.resolve();n.pa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Oy(n,i),Hg(n.localStore,i,!0)))),Nv(n.remoteStore,i)})),await t,await Wy(n,e),function(e){const t=Fl(e);t.Sa.forEach(((e,n)=>{Nv(t.remoteStore,n)})),t.ba.mr(),t.Sa=new Map,t.wa=new fh(ou.comparator)}(n),n.Fa=!1,await Jv(n.remoteStore,!1)}}(this.Na.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=gv();if(!ov.D(t))throw new Ul(jl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Lg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ov(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class ew{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ty(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Uy.bind(null,this.syncEngine),await Jv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new oy}createDatastore(e){const t=yv(e.databaseInfo.databaseId),n=function(e){return new mv(e)}(e.databaseInfo);return function(e,t,n,r){return new Sv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Iv(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Ty(this.syncEngine,e,0)),lv.D()?new lv:new cv)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Ey(e,t,n,r,i,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Fl(e);Pl("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await Tv(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function tw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class nw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Rl("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class rw{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new Vl,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((e=>{e&&e.ea()?this.metadata.resolve(e.X_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(e=>this.metadata.reject(e)))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(null===e)return null;const t=this.qa.decode(e),n=Number(t);isNaN(n)&&this.$a("length string (".concat(t,") is not valid number"));const r=await this.Ua(n);return new fy(JSON.parse(r),e.length+n)}Wa(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(0===this.buffer.length)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const t=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}$a(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ga(){const e=await this.ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class iw{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ul(jl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Fl(e),r={documents:t.map((e=>Ip(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,ru.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Ml(!!t.found),t.found.name,t.found.updateTime;const n=kp(e,t.found.name),r=_p(t.found.updateTime),i=t.found.createTime?_p(t.found.createTime):tu.min(),s=new Xh({mapValue:{fields:t.found.fields}});return ed.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Ml(!!t.missing),Ml(!!t.readTime);const n=kp(e,t.missing),r=_p(t.readTime);return ed.newNoDocument(n,r)}(e,t):Ll()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());Ml(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Bf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=ou.fromPath(t);this.mutations.push(new zf(n,this.precondition(n)))})),await async function(e,t){const n=Fl(e),r={writes:t.map((e=>Op(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,ru.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ll();t=tu.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ul(jl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(tu.min())?Cf.exists(!1):Cf.updateTime(t):Cf.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(tu.min()))throw new Ul(jl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cf.updateTime(t)}return Cf.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class sw{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.za=n.maxAttempts,this.jo=new wv(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo((async()=>{const e=new iw(this.datastore),t=this.Ja(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Ya(e)}))))})).catch((e=>{this.Ya(e)}))}))}Ja(e){try{const t=this.updateFunction(e);return!Ru(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ha(),Promise.resolve())))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!$f(t)}return!1}}class ow{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Tl.UNAUTHENTICATED,this.clientId=Yl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Pl("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Pl("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ul(jl.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ty(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function aw(e,t){e.asyncQueue.verifyOperationInProgress(),Pl("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Bg(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function cw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await uw(e);Pl("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Yv(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Yv(t.remoteStore,n))),e._onlineComponents=t}function lw(e){return"FirebaseError"===e.name?e.code===jl.FAILED_PRECONDITION||e.code===jl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function uw(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Pl("FirestoreClient","Using user provided OfflineComponentProvider");try{await aw(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!lw(n))throw n;Ol("Error using user provided cache. Falling back to memory cache: "+n),await aw(e,new Jy)}}else Pl("FirestoreClient","Using default OfflineComponentProvider"),await aw(e,new Jy);return e._offlineComponents}async function hw(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Pl("FirestoreClient","Using user provided OnlineComponentProvider"),await cw(e,e._uninitializedComponentsProvider._online)):(Pl("FirestoreClient","Using default OnlineComponentProvider"),await cw(e,new ew))),e._onlineComponents}function dw(e){return uw(e).then((e=>e.persistence))}function fw(e){return uw(e).then((e=>e.localStore))}function pw(e){return hw(e).then((e=>e.remoteStore))}function mw(e){return hw(e).then((e=>e.syncEngine))}function gw(e){return hw(e).then((e=>e.datastore))}async function vw(e){const t=await hw(e),n=t.eventManager;return n.onListen=Sy.bind(null,t.syncEngine),n.onUnlisten=Iy.bind(null,t.syncEngine),n}function yw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Vl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new nw({next:s=>{t.enqueueAndForget((()=>cy(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Ul(jl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Ul(jl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new dy(Ld(n.path),s,{includeMetadataChanges:!0,Z_:!0});return ay(e,o)}(await vw(e),e.asyncQueue,t,n,r))),r.promise}function ww(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Vl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new nw({next:n=>{t.enqueueAndForget((()=>cy(e,o))),n.fromCache&&"server"===r.source?i.reject(new Ul(jl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new dy(n,s,{includeMetadataChanges:!0,Z_:!0});return ay(e,o)}(await vw(e),e.asyncQueue,t,n,r))),r.promise}function bw(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Xf().encode(e):e,function(e,t){return new rw(e,t)}(function(e,t){if(e instanceof Uint8Array)return tw(e,t);if(e instanceof ArrayBuffer)return tw(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,yv(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Fl(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Fl(e),r=_p(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(gy(r));const i=new my(r,e.localStore,t.serializer);let s=await t.Oa();for(;s;){const e=await i.na(s);e&&n._updateProgress(e),s=await t.Oa()}const o=await i.complete();return await jy(e,o.sa,void 0),await function(e,t){const n=Fl(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ia)}catch(e){return Ol("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await mw(e),i,r)}))}function _w(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Ew=new Map;function Sw(e,t,n){if(!n)throw new Ul(jl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function xw(e,t,n,r){if(!0===t&&!0===r)throw new Ul(jl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Iw(e){if(!ou.isDocumentKey(e))throw new Ul(jl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function kw(e){if(ou.isDocumentKey(e))throw new Ul(jl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Tw(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ll()}function Cw(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ul(jl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tw(e);throw new Ul(jl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Nw(e,t){if(t<=0)throw new Ul(jl.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Aw{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ul(jl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ul(jl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_w(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ul(jl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Ul(jl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Ul(jl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pw{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Aw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ul(jl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ul(jl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Aw(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new zl;switch(e.type){case"firstParty":return new Hl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ul(jl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ew.get(e);t&&(Pl("ComponentProvider","Removing Datastore"),Ew.delete(e),t.terminate())}(this),Promise.resolve()}}function Rw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Cw(e,Pw))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ol("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Tl.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[gr(JSON.stringify({alg:"none",type:"JWT"})),gr(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ul(jl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Tl(s)}e._authCredentials=new ql(new Bl(t,n))}}class Ow{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ow(this.firestore,e,this._query)}}class Dw{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lw(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dw(this.firestore,e,this._key)}}class Lw extends Ow{constructor(e,t,n){super(e,t,Ld(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dw(this.firestore,null,new ou(e))}withConverter(e){return new Lw(this.firestore,e,this._path)}}function Mw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=qr(e),Sw("collection","path",t),e instanceof Pw){const n=ru.fromString(t,...r);return kw(n),new Lw(e,null,n)}{if(!(e instanceof Dw||e instanceof Lw))throw new Ul(jl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ru.fromString(t,...r));return kw(n),new Lw(e.firestore,null,n)}}function Fw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=qr(e),1===arguments.length&&(t=Yl.newId()),Sw("doc","path",t),e instanceof Pw){const n=ru.fromString(t,...r);return Iw(n),new Dw(e,null,new ou(n))}{if(!(e instanceof Dw||e instanceof Lw))throw new Ul(jl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ru.fromString(t,...r));return Iw(n),new Dw(e.firestore,e instanceof Lw?e.converter:null,new ou(n))}}function jw(e,t){return e=qr(e),t=qr(t),(e instanceof Dw||e instanceof Lw)&&(t instanceof Dw||t instanceof Lw)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Uw(e,t){return e=qr(e),t=qr(t),e instanceof Ow&&t instanceof Ow&&e.firestore===t.firestore&&qd(e._query,t._query)&&e.converter===t.converter}class Vw{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new wv(this,"async_queue_retry"),this._u=()=>{const e=vv();e&&Pl("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=vv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=vv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new Vl;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!xu(e))throw e;Pl("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Rl("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=ey.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&Ll()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function Bw(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class zw{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vl,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class qw extends Pw{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Vw,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Kw(this),this._firestoreClient.terminate()}}function Ww(e){return e._firestoreClient||Kw(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Kw(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Nh(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,_w(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new ow(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Hw(e,t,n){const r=new Vl;return e.asyncQueue.enqueue((async()=>{try{await aw(e,n),await cw(e,t),r.resolve()}catch(e){const n=e;if(!lw(n))throw n;Ol("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Gw(e){return function(e){const t=new Vl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Fl(e);Dv(n.remoteStore)||Pl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Fl(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ca.get(e)||[];r.push(t),n.Ca.set(e,r)}catch(e){const n=ty(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await mw(e),t))),t.promise}(Ww(e=Cw(e,qw)))}function Qw(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await dw(e),n=await pw(e);return t.setNetworkEnabled(!0),function(e){const t=Fl(e);return t.v_.delete(0),kv(t)}(n)}))}(Ww(e=Cw(e,qw)))}function $w(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await dw(e),n=await pw(e);return t.setNetworkEnabled(!1),async function(e){const t=Fl(e);t.v_.add(0),await Tv(t),t.x_.set("Offline")}(n)}))}(Ww(e=Cw(e,qw)))}function Yw(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Fl(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await fw(e),t)))}(Ww(e=Cw(e,qw)),t).then((t=>t?new Ow(e,null,t.query):null))}function Jw(e){if(e._initialized||e._terminated)throw new Ul(jl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Xw{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xw(_h.fromBase64String(e))}catch(e){throw new Ul(jl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Xw(_h.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Zw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ul(jl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new su(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class eb{constructor(e){this._methodName=e}}class tb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ul(jl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ul(jl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jl(this._lat,e._lat)||Jl(this._long,e._long)}}const nb=/^__.*__$/;class rb{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Ff(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mf(e,this.data,t,this.fieldTransforms)}}class ib{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ff(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ll()}}class ob{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new ob(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return kb(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(sb(this.du)&&nb.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class ab{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||yv(e)}Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ob({du:e,methodName:t,wu:n,path:su.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cb(e){const t=e._freezeSettings(),n=yv(e._databaseId);return new ab(e._databaseId,!!t.ignoreUndefinedProperties,n)}function lb(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Su(s.merge||s.mergeFields?2:0,t,n,i);Eb("Data must be an object, but it was:",o,r);const a=bb(r,o);let c,l;if(s.merge)c=new wh(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Sb(t,r,n);if(!o.contains(i))throw new Ul(jl.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Tb(e,i)||e.push(i)}c=new wh(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new rb(new Xh(a),c,l)}class ub extends eb{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ub}}function hb(e,t,n){return new ob({du:3,wu:t.settings.wu,methodName:e._methodName,Vu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class db extends eb{_toFieldTransform(e){return new kf(e.path,new yf)}isEqual(e){return e instanceof db}}class fb extends eb{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=hb(this,e,!0),n=this.bu.map((e=>wb(e,t))),r=new wf(n);return new kf(e.path,r)}isEqual(e){return e instanceof fb&&Lr(this.bu,e.bu)}}class pb extends eb{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=hb(this,e,!0),n=this.bu.map((e=>wb(e,t))),r=new _f(n);return new kf(e.path,r)}isEqual(e){return e instanceof pb&&Lr(this.bu,e.bu)}}class mb extends eb{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new Sf(e.serializer,ff(e.serializer,this.Du));return new kf(e.path,t)}isEqual(e){return e instanceof mb&&this.Du===e.Du}}function gb(e,t,n,r){const i=e.Su(1,t,n);Eb("Data must be an object, but it was:",i,r);const s=[],o=Xh.empty();hh(r,((e,r)=>{const a=Ib(t,e,n);r=qr(r);const c=i.fu(a);if(r instanceof ub)s.push(a);else{const e=wb(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new wh(s);return new ib(o,a,i.fieldTransforms)}function vb(e,t,n,r,i,s){const o=e.Su(1,t,n),a=[Sb(t,r,n)],c=[i];if(s.length%2!=0)throw new Ul(jl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(Sb(t,s[d])),c.push(s[d+1]);const l=[],u=Xh.empty();for(let d=a.length-1;d>=0;--d)if(!Tb(l,a[d])){const e=a[d];let t=c[d];t=qr(t);const n=o.fu(e);if(t instanceof ub)l.push(e);else{const r=wb(t,n);null!=r&&(l.push(e),u.set(e,r))}}const h=new wh(l);return new ib(u,h,o.fieldTransforms)}function yb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return wb(n,e.Su(r?4:3,t))}function wb(e,t){if(_b(e=qr(e)))return Eb("Unsupported field value:",t,e),bb(e,t);if(e instanceof eb)return function(e,t){if(!sb(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=wb(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=qr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ff(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=eu.fromDate(e);return{timestampValue:yp(t.serializer,n)}}if(e instanceof eu){const n=new eu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:yp(t.serializer,n)}}if(e instanceof tb)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Xw)return{bytesValue:wp(t.serializer,e._byteString)};if(e instanceof Dw){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Ep(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(Tw(e)))}(e,t)}function bb(e,t){const n={};return dh(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hh(e,((e,r)=>{const i=wb(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function _b(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof eu||e instanceof tb||e instanceof Xw||e instanceof Dw||e instanceof eb)}function Eb(e,t,n){if(!_b(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Tw(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function Sb(e,t,n){if((t=qr(t))instanceof Zw)return t._internalPath;if("string"==typeof t)return Ib(e,t);throw kb("Field path arguments must be of type string or ",e,!1,void 0,n)}const xb=new RegExp("[~\\*/\\[\\]]");function Ib(e,t,n){if(t.search(xb)>=0)throw kb("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Zw(...t.split("."))._internalPath}catch(ws){throw kb("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function kb(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field ".concat(r)),o&&(c+=" in document ".concat(i)),c+=")"),new Ul(jl.INVALID_ARGUMENT,a+e+c)}function Tb(e,t){return e.some((e=>e.isEqual(t)))}class Cb{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Dw(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Nb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ab("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Nb extends Cb{data(){return super.data()}}function Ab(e,t){return"string"==typeof t?Ib(e,t):t instanceof Zw?t._internalPath:t._delegate._internalPath}function Pb(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ul(jl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rb{}class Ob extends Rb{}function Db(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Rb&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Mb)).length,n=e.filter((e=>e instanceof Lb)).length;if(t>1||t>0&&n>0)throw new Ul(jl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Lb extends Ob{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Lb(e,t,n)}_apply(e){const t=this._parse(e);return Wb(e._query,t),new Ow(e.firestore,e.converter,Bd(e._query,t))}_parse(e){const t=cb(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ul(jl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){qb(o,s);const t=[];for(const n of o)t.push(zb(r,e,n));a={arrayValue:{values:t}}}else a=zb(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||qb(o,s),a=yb(n,t,o,"in"===s||"not-in"===s);return ad.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Mb extends Rb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Mb(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:cd.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Wb(n,i),n=Bd(n,i)}(e._query,t),new Ow(e.firestore,e.converter,Bd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Fb extends Ob{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Fb(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Ul(jl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ul(jl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new id(t,n)}(e._query,this._field,this._direction);return new Ow(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Od(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class jb extends Ob{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new jb(e,t,n)}_apply(e){return new Ow(e.firestore,e.converter,zd(e._query,this._limit,this._limitType))}}class Ub extends Ob{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Ub(e,t,n)}_apply(e){const t=Bb(e,this.type,this._docOrFields,this._inclusive);return new Ow(e.firestore,e.converter,function(e,t){return new Od(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Vb extends Ob{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Vb(e,t,n)}_apply(e){const t=Bb(e,this.type,this._docOrFields,this._inclusive);return new Ow(e.firestore,e.converter,function(e,t){return new Od(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Bb(e,t,n,r){if(n[0]=qr(n[0]),n[0]instanceof Cb)return function(e,t,n,r,i){if(!r)throw new Ul(jl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of jd(e))if(o.field.isKeyField())s.push(Vh(t,r.key));else{const e=r.data.field(o.field);if(kh(e))throw new Ul(jl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Ul(jl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new td(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=cb(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Ul(jl.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new Ul(jl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Fd(e)&&-1!==s.indexOf("/"))throw new Ul(jl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(ru.fromString(s));if(!ou.isDocumentKey(n))throw new Ul(jl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new ou(n);a.push(Vh(t,i))}else{const e=yb(n,r,s);a.push(e)}}return new td(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function zb(e,t,n){if("string"==typeof(n=qr(n))){if(""===n)throw new Ul(jl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fd(t)&&-1!==n.indexOf("/"))throw new Ul(jl.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ru.fromString(n));if(!ou.isDocumentKey(r))throw new Ul(jl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Vh(e,new ou(r))}if(n instanceof Dw)return Vh(e,n._key);throw new Ul(jl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Tw(n),"."))}function qb(e,t){if(!Array.isArray(e)||0===e.length)throw new Ul(jl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Wb(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ul(jl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ul(jl.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Kb{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Oh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ih(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ll()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return hh(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new tb(xh(e.latitude),xh(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Th(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ch(e));default:return null}}convertTimestamp(e){const t=Sh(e);return new eu(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ru.fromString(e);Ml(Hp(n));const r=new Ah(n.get(1),n.get(3)),i=new ou(n.popFirst(5));return r.isEqual(t)||Rl("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Hb(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Gb extends Kb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xw(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dw(this.firestore,null,t)}}class Qb{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $b extends Cb{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Yb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Ab("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Yb extends $b{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Jb{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Qb(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Yb(this._firestore,this._userDataWriter,n.key,n,new Qb(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ul(jl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Yb(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Qb(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Yb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Qb(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Xb(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Xb(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ll()}}function Zb(e,t){return e instanceof $b&&t instanceof $b?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Jb&&t instanceof Jb&&e._firestore===t._firestore&&Uw(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class e_ extends Kb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xw(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dw(this.firestore,null,t)}}function t_(e){e=Cw(e,Dw);const t=Cw(e.firestore,qw),n=Ww(t),r=new e_(t);return function(e,t){const n=new Vl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Fl(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Ul(jl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=ty(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await fw(e),t,n))),n.promise}(n,e._key).then((n=>new $b(t,r,e._key,n,new Qb(null!==n&&n.hasLocalMutations,!0),e.converter)))}function n_(e){e=Cw(e,Ow);const t=Cw(e.firestore,qw),n=Ww(t),r=new e_(t);return function(e,t){const n=new Vl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Gg(e,t,!0),i=new wy(t,r.hs),s=i.ha(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=ty(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await fw(e),t,n))),n.promise}(n,e._query).then((n=>new Jb(t,r,e,n)))}function r_(e,t,n){e=Cw(e,Dw);const r=Cw(e.firestore,qw),i=Hb(e.converter,t,n);return a_(r,[lb(cb(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Cf.none())])}function i_(e,t,n){e=Cw(e,Dw);const r=Cw(e.firestore,qw),i=cb(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(t=qr(t))||t instanceof Zw?vb(i,"updateDoc",e._key,t,n,a):gb(i,"updateDoc",e._key,t),a_(r,[s.toMutation(e._key,Cf.exists(!0))])}function s_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=qr(e);let a={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||Bw(n[c])||(a=n[c],c++);const l={includeMetadataChanges:a.includeMetadataChanges};if(Bw(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[c+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof Dw)h=Cw(e.firestore,qw),d=Ld(e._key.path),u={next:t=>{n[c]&&n[c](c_(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=Cw(e,Ow);h=Cw(t.firestore,qw),d=t._query;const r=new e_(h);u={next:e=>{n[c]&&n[c](new Jb(h,r,t,e))},error:n[c+1],complete:n[c+2]},Pb(e._query)}return function(e,t,n,r){const i=new nw(r),s=new dy(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>ay(await vw(e),s))),()=>{i.La(),e.asyncQueue.enqueueAndForget((async()=>cy(await vw(e),s)))}}(Ww(h),d,l,u)}function o_(e,t){return function(e,t){const n=new nw(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Fl(e).K_.add(t),t.next()}(await vw(e),n))),()=>{n.La(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Fl(e).K_.delete(t)}(await vw(e),n)))}}(Ww(e=Cw(e,qw)),Bw(t)?t:{next:t})}function a_(e,t){return function(e,t){const n=new Vl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Yy(e);try{const e=await function(e,t){const n=Fl(e),r=eu.now(),i=t.reduce(((e,t)=>e.add(t.key)),cf());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Xd(),c=cf();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Df(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Ff(e.key,t,Zh(t.value.mapValue),Cf.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:tf(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new fh(Jl)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await jy(r,e.changes),await Bv(r.remoteStore)}catch(e){const t=ty(e,"Failed to persist write");n.reject(t)}}(await mw(e),t,n))),n.promise}(Ww(e),t)}function c_(e,t,n){const r=n.docs.get(t._key),i=new e_(e);return new $b(e,i,t._key,r,new Qb(n.hasPendingWrites,n.fromCache),t.converter)}const l_={maxAttempts:5};class u_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cb(e)}set(e,t,n){this._verifyNotCommitted();const r=h_(e,this._firestore),i=Hb(r.converter,t,n),s=lb(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Cf.none())),this}update(e,t,n){this._verifyNotCommitted();const r=h_(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=qr(t))||t instanceof Zw?vb(this._dataReader,"WriteBatch.update",r._key,t,n,o):gb(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Cf.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=h_(e,this._firestore);return this._mutations=this._mutations.concat(new Bf(t._key,Cf.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ul(jl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function h_(e,t){if((e=qr(e)).firestore!==t)throw new Ul(jl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class d_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=cb(e)}get(e){const t=h_(e,this._firestore),n=new Gb(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Ll();const r=e[0];if(r.isFoundDocument())return new Cb(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Cb(this._firestore,n,t._key,null,t.converter);throw Ll()}))}set(e,t,n){const r=h_(e,this._firestore),i=Hb(r.converter,t,n),s=lb(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=h_(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=qr(t))||t instanceof Zw?vb(this._dataReader,"Transaction.update",r._key,t,n,o):gb(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=h_(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=h_(e,this._firestore),n=new e_(this._firestore);return super.get(e).then((e=>new $b(this._firestore,n,t._key,e._document,new Qb(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Cl=e}(Li),Ni(new Wr("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new qw(new Wl(e.getProvider("auth-internal")),new Ql(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ul(jl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ah(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Vi(kl,"4.4.3",e),Vi(kl,"4.4.3","esm2017")}();function f_(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ul("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function p_(){if("undefined"===typeof Uint8Array)throw new Ul("unimplemented","Uint8Arrays are not available in this environment.")}function m_(){if("undefined"==typeof atob)throw new Ul("unimplemented","Blobs are unavailable in Firestore in this environment.")}class g_{constructor(e){this._delegate=e}static fromBase64String(e){return m_(),new g_(Xw.fromBase64String(e))}static fromUint8Array(e){return p_(),new g_(Xw.fromUint8Array(e))}toBase64(){return m_(),this._delegate.toBase64()}toUint8Array(){return p_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function v_(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class y_{enableIndexedDbPersistence(e,t){return function(e,t){Jw(e=Cw(e,qw));const n=Ww(e);if(n._uninitializedComponentsProvider)throw new Ul(jl.FAILED_PRECONDITION,"SDK cache is already specified.");Ol("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new ew;return Hw(n,i,new Xy(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Jw(e=Cw(e,qw));const t=Ww(e);if(t._uninitializedComponentsProvider)throw new Ul(jl.FAILED_PRECONDITION,"SDK cache is already specified.");Ol("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new ew;return Hw(t,r,new Zy(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Ul(jl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Vl;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!_u.D())return Promise.resolve();const t=e+"main";await _u.delete(t)}(Lg(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class w_{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ah||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Ol("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Rw(this._delegate,e,t,n)}enableNetwork(){return Qw(this._delegate)}disableNetwork(){return $w(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,xw("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Gw(this._delegate)}onSnapshotsInSync(e){return o_(this._delegate,e)}get app(){if(!this._appCompat)throw new Ul("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new O_(this,Mw(this._delegate,e))}catch(t){throw I_(t,"collection()","Firestore.collection()")}}doc(e){try{return new x_(this,Fw(this._delegate,e))}catch(t){throw I_(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new A_(this,function(e,t){if(e=Cw(e,Pw),Sw("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ul(jl.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Ow(e,null,function(e){return new Od(ru.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw I_(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Cw(e,qw);const r=Object.assign(Object.assign({},l_),n);return function(e){if(e.maxAttempts<1)throw new Ul(jl.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Vl;return e.asyncQueue.enqueueAndForget((async()=>{const i=await gw(e);new sw(e.asyncQueue,i,n,t,r).ja()})),r.promise}(Ww(e),(n=>t(new d_(e,n))),r)}(this._delegate,(t=>e(new __(this,t))))}batch(){return Ww(this._delegate),new E_(new u_(this._delegate,(e=>a_(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Ww(e=Cw(e,qw)),r=new zw;return bw(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Yw(this._delegate,e).then((e=>e?new A_(this,e):null))}}class b_ extends Kb{constructor(e){super(),this.firestore=e}convertBytes(e){return new g_(new Xw(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return x_.forKey(t,this.firestore,null)}}class __{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new b_(e)}get(e){const t=D_(e);return this._delegate.get(t).then((e=>new C_(this._firestore,new $b(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=D_(e);return n?(f_("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=D_(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=D_(e);return this._delegate.delete(t),this}}class E_{constructor(e){this._delegate=e}set(e,t,n){const r=D_(e);return n?(f_("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=D_(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=D_(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class S_{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Yb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new N_(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=S_.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new S_(e,new b_(e),t),r.set(t,i)),i}}S_.INSTANCES=new WeakMap;class x_{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new b_(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Ul("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new x_(t,new Dw(t._delegate,n,new ou(e)))}static forKey(e,t,n){return new x_(t,new Dw(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new O_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new O_(this.firestore,Mw(this._delegate,e))}catch(t){throw I_(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=qr(e))instanceof Dw&&jw(this._delegate,e)}set(e,t){t=f_("DocumentReference.set",t);try{return t?r_(this._delegate,e,t):r_(this._delegate,e)}catch(n){throw I_(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?i_(this._delegate,e):i_(this._delegate,e,t,...r)}catch(s){throw I_(s,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return a_(Cw(e.firestore,qw),[new Bf(e._key,Cf.none())])}(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=k_(t),i=T_(t,(e=>new C_(this.firestore,new $b(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return s_(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?t_(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Cw(e,Dw);const t=Cw(e.firestore,qw);return yw(Ww(t),e._key,{source:"server"}).then((n=>c_(t,e,n)))}(this._delegate):function(e){e=Cw(e,Dw);const t=Cw(e.firestore,qw);return yw(Ww(t),e._key).then((n=>c_(t,e,n)))}(this._delegate),t.then((e=>new C_(this.firestore,new $b(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new x_(this.firestore,e?this._delegate.withConverter(S_.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function I_(e,t,n){return e.message=e.message.replace(t,n),e}function k_(e){for(const t of e)if("object"===typeof t&&!v_(t))return t;return{}}function T_(e,t){var n,r;let i;return i=v_(e[0])?e[0]:v_(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class C_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new x_(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Zb(this._delegate,e._delegate)}}class N_ extends C_{data(e){const t=this._delegate.data(e);return this._delegate._converter||function(e,t){e||Ll()}(void 0!==t),t}}class A_{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new b_(e)}where(e,t,n){try{return new A_(this.firestore,Db(this._delegate,function(e,t,n){const r=t,i=Ab("where",e);return Lb._create(i,r,n)}(e,t,n)))}catch(r){throw I_(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new A_(this.firestore,Db(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Ab("orderBy",e);return Fb._create(n,t)}(e,t)))}catch(n){throw I_(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new A_(this.firestore,Db(this._delegate,function(e){return Nw("limit",e),jb._create("limit",e,"F")}(e)))}catch(t){throw I_(t,"limit()","Query.limit()")}}limitToLast(e){try{return new A_(this.firestore,Db(this._delegate,function(e){return Nw("limitToLast",e),jb._create("limitToLast",e,"L")}(e)))}catch(t){throw I_(t,"limitToLast()","Query.limitToLast()")}}startAt(){try{return new A_(this.firestore,Db(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ub._create("startAt",t,!0)}(...arguments)))}catch(e){throw I_(e,"startAt()","Query.startAt()")}}startAfter(){try{return new A_(this.firestore,Db(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ub._create("startAfter",t,!1)}(...arguments)))}catch(e){throw I_(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new A_(this.firestore,Db(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Vb._create("endBefore",t,!1)}(...arguments)))}catch(e){throw I_(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new A_(this.firestore,Db(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Vb._create("endAt",t,!0)}(...arguments)))}catch(e){throw I_(e,"endAt()","Query.endAt()")}}isEqual(e){return Uw(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?n_(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Cw(e,Ow);const t=Cw(e.firestore,qw),n=Ww(t),r=new e_(t);return ww(n,e._query,{source:"server"}).then((n=>new Jb(t,r,e,n)))}(this._delegate):function(e){e=Cw(e,Ow);const t=Cw(e.firestore,qw),n=Ww(t),r=new e_(t);return Pb(e._query),ww(n,e._query).then((n=>new Jb(t,r,e,n)))}(this._delegate),t.then((e=>new R_(this.firestore,new Jb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=k_(t),i=T_(t,(e=>new R_(this.firestore,new Jb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return s_(this._delegate,r,i)}withConverter(e){return new A_(this.firestore,e?this._delegate.withConverter(S_.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class P_{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new N_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class R_{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new A_(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new N_(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new P_(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new N_(this._firestore,n))}))}isEqual(e){return Zb(this._delegate,e._delegate)}}class O_ extends A_{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new x_(this.firestore,e):null}doc(e){try{return new x_(this.firestore,void 0===e?Fw(this._delegate):Fw(this._delegate,e))}catch(t){throw I_(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Cw(e.firestore,qw),r=Fw(e),i=Hb(e.converter,t);return a_(n,[lb(cb(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Cf.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new x_(this.firestore,e)))}isEqual(e){return jw(this._delegate,e._delegate)}withConverter(e){return new O_(this.firestore,e?this._delegate.withConverter(S_.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function D_(e){return Cw(e,Dw)}class L_{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new Zw(...t)}static documentId(){return new L_(su.keyField().canonicalString())}isEqual(e){return(e=qr(e))instanceof Zw&&this._delegate._internalPath.isEqual(e._internalPath)}}class M_{constructor(e){this._delegate=e}static serverTimestamp(){const e=new db("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new M_(e)}static delete(){const e=new ub("deleteField");return e._methodName="FieldValue.delete",new M_(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fb("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new M_(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new pb("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new M_(e)}static increment(e){const t=function(e){return new mb("increment",e)}(e);return t._methodName="FieldValue.increment",new M_(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const F_={Firestore:w_,GeoPoint:tb,Timestamp:eu,Blob:g_,Transaction:__,WriteBatch:E_,DocumentReference:x_,DocumentSnapshot:C_,Query:A_,QueryDocumentSnapshot:N_,QuerySnapshot:R_,CollectionReference:O_,FieldPath:L_,FieldValue:M_,setLogLevel:function(e){!function(e){Nl.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};var j_;(function(e,t){e.INTERNAL.registerComponent(new Wr("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},F_)))})(j_=ss,((e,t)=>new w_(e,t,new y_))),j_.registerVersion("@firebase/firestore-compat","0.3.26");function U_(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const V_={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},B_="EMAIL_SIGNIN",z_="PASSWORD_RESET",q_="RECOVER_EMAIL",W_="REVERT_SECOND_FACTOR_ADDITION",K_="VERIFY_AND_CHANGE_EMAIL",H_="VERIFY_EMAIL";function G_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q_=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},$_=G_,Y_=new Rr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),J_=new ti("@firebase/auth");function X_(e){if(J_.logLevel<=Yr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];J_.error("Auth (".concat(Li,"): ").concat(e),...n)}}function Z_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw rE(e,...n)}function eE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return rE(e,...n)}function tE(e,t,n){const r=Object.assign(Object.assign({},$_()),{[t]:n});return new Rr("auth","Firebase",r).create(t,{appName:e.name})}function nE(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Z_(e,"argument-error"),tE(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function rE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Y_.create(e,...n)}function iE(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw rE(t,...r)}}function sE(e){const t="INTERNAL ASSERTION FAILED: "+e;throw X_(t),new Error(t)}function oE(e,t){e||sE(t)}function aE(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function cE(){return"http:"===lE()||"https:"===lE()}function lE(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class uE{constructor(e,t){this.shortDelay=e,this.longDelay=t,oE(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xr())||Tr()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(cE()||kr()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function hE(e,t){oE(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class dE{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void sE("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void sE("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void sE("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},pE=new uE(3e4,6e4);function mE(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function gE(e,t,n,r){return vE(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Fr(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),dE.fetch()(wE(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function vE(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},fE),t);try{const t=new _E(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw EE(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw EE(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw EE(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw EE(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw tE(e,a,o);Z_(e,a)}}catch(i){if(i instanceof Pr)throw i;Z_(e,"network-request-failed",{message:String(i)})}}async function yE(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await gE(e,t,n,r,i);return"mfaPendingCredential"in s&&Z_(e,"multi-factor-auth-required",{_serverResponse:s}),s}function wE(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?hE(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function bE(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _E{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(eE(this.auth,"network-request-failed"))),pE.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function EE(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=eE(e,t,r);return i.customData._tokenResponse=n,i}function SE(e){return void 0!==e&&void 0!==e.getResponse}function xE(e){return void 0!==e&&void 0!==e.enterprise}class IE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return bE(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function kE(e,t){return gE(e,"GET","/v2/recaptchaConfig",mE(e,t))}function TE(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function CE(e){return 1e3*Number(e)}function NE(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return X_("JWT malformed, contained fewer than 3 sections"),null;try{const e=vr(n);return e?JSON.parse(e):(X_("Failed to decode base64 JWT payload"),null)}catch(i){return X_("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function AE(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof Pr&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class PE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class RE{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=TE(this.lastLoginAt),this.creationTime=TE(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function OE(e){var t;const n=e.auth,r=await e.getIdToken(),i=await AE(e,async function(e,t){return gE(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));iE(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=U_(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new RE(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class DE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){iE(e.idToken,"internal-error"),iE("undefined"!==typeof e.idToken,"internal-error"),iE("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=NE(e);return iE(t,"internal-error"),iE("undefined"!==typeof t.exp,"internal-error"),iE("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return iE(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await vE(e,{},(async()=>{const n=Fr({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=wE(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",dE.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new DE;return n&&(iE("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(iE("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(iE("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new DE,this.toJSON())}_performRefresh(){return sE("not implemented")}}function LE(e,t){iE("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ME{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=U_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new RE(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await AE(this,this.stsTokenManager.getToken(this.auth,e));return iE(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=qr(e),r=await n.getIdToken(t),i=NE(r);iE(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:TE(CE(i.auth_time)),issuedAtTime:TE(CE(i.iat)),expirationTime:TE(CE(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=qr(e);await OE(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(iE(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ME(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){iE(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await OE(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await AE(this,async function(e,t){return gE(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;iE(y&&E,e,"internal-error");const S=DE.fromJSON(this.name,E);iE("string"===typeof y,e,"internal-error"),LE(u,e.name),LE(h,e.name),iE("boolean"===typeof w,e,"internal-error"),iE("boolean"===typeof b,e,"internal-error"),LE(d,e.name),LE(f,e.name),LE(p,e.name),LE(m,e.name),LE(g,e.name),LE(v,e.name);const x=new ME({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(x.providerData=_.map((e=>Object.assign({},e)))),m&&(x._redirectEventId=m),x}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new DE;r.updateFromServerResponse(t);const i=new ME({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await OE(i),i}}const FE=new Map;function jE(e){oE(e instanceof Function,"Expected a class definition");let t=FE.get(e);return t?(oE(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,FE.set(e,t),t)}class UE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}UE.type="NONE";const VE=UE;function BE(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class zE{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=BE(this.userKey,r.apiKey,i),this.fullPersistenceKey=BE("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ME._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new zE(jE(VE),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||jE(VE);const s=BE(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=ME._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(c){}}))),new zE(i,e,n)):new zE(i,e,n)}}function qE(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(GE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(WE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if($E(t))return"Blackberry";if(YE(t))return"Webos";if(KE(t))return"Safari";if((t.includes("chrome/")||HE(t))&&!t.includes("edge/"))return"Chrome";if(QE(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function WE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr();return/firefox\//i.test(e)}function KE(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr();return/crios\//i.test(e)}function GE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr();return/iemobile/i.test(e)}function QE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr();return/android/i.test(e)}function $E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr();return/blackberry/i.test(e)}function YE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr();return/webos/i.test(e)}function JE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function XE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr();return JE(e)||QE(e)||YE(e)||$E(e)||/windows phone/i.test(e)||GE(e)}function ZE(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=qE(xr());break;case"Worker":t="".concat(qE(xr()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Li,"/").concat(r)}class eS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(Ct){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class tS{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class nS{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iS(this),this.idTokenSubscription=new iS(this),this.beforeStateQueue=new eS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Y_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=jE(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await zE.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return iE(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await OE(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?qr(e):null;return t&&iE(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&iE(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(jE(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return gE(e,"GET","/v2/passwordPolicy",mE(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new tS(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Rr("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return gE(e,"POST","/v2/accounts:revokeToken",mE(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&jE(e)||this._popupRedirectResolver;iE(t,this,"argument-error"),this.redirectPersistenceManager=await zE.create(this,[jE(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(iE(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return iE(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(J_.logLevel<=Yr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];J_.warn("Auth (".concat(Li,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function rS(e){return qr(e)}class iS{constructor(e){this.auth=e,this.observer=null,this.addObserver=Vr((e=>this.observer=e))}get next(){return iE(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let sS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oS(e){return sS.loadJS(e)}function aS(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class cS{constructor(e){this.type="recaptcha-enterprise",this.auth=rS(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;xE(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{kE(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new IE(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&xE(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=sS.recaptchaEnterpriseScript;0!==t.length&&(t+=i),oS(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function lS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new cS(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function uS(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await lS(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await lS(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function hS(e,t,n){const r=rS(e);iE(r._canInitEmulator,r,"emulator-config-failed"),iE(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=dS(t),{host:o,port:a}=function(e){const t=dS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:fS(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:fS(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function dS(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function fS(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class pS{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return sE("not implemented")}_getIdTokenResponse(e){return sE("not implemented")}_linkToIdToken(e,t){return sE("not implemented")}_getReauthenticationResolver(e){return sE("not implemented")}}async function mS(e,t){return gE(e,"POST","/v1/accounts:resetPassword",mE(e,t))}async function gS(e,t){return gE(e,"POST","/v1/accounts:signUp",t)}async function vS(e,t){return yE(e,"POST","/v1/accounts:signInWithPassword",mE(e,t))}async function yS(e,t){return gE(e,"POST","/v1/accounts:sendOobCode",mE(e,t))}async function wS(e,t){return yS(e,t)}async function bS(e,t){return yS(e,t)}class _S extends pS{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new _S(e,t,"password")}static _fromEmailAndCode(e,t){return new _S(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return uS(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",vS);case"emailLink":return async function(e,t){return yE(e,"POST","/v1/accounts:signInWithEmailLink",mE(e,t))}(e,{email:this._email,oobCode:this._password});default:Z_(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return uS(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gS);case"emailLink":return async function(e,t){return yE(e,"POST","/v1/accounts:signInWithEmailLink",mE(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Z_(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ES(e,t){return yE(e,"POST","/v1/accounts:signInWithIdp",mE(e,t))}class SS extends pS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new SS(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Z_("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=U_(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new SS(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return ES(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ES(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ES(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fr(t)}return e}}const xS={USER_NOT_FOUND:"user-not-found"};class IS extends pS{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new IS({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new IS({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return yE(e,"POST","/v1/accounts:signInWithPhoneNumber",mE(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await yE(e,"POST","/v1/accounts:signInWithPhoneNumber",mE(e,t));if(n.temporaryProof)throw EE(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return yE(e,"POST","/v1/accounts:signInWithPhoneNumber",mE(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),xS)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new IS({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class kS{constructor(e){var t,n,r,i,s,o;const a=jr(Ur(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);iE(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=jr(Ur(e)).link,n=t?jr(Ur(t)).deep_link_id:null,r=jr(Ur(e)).deep_link_id;return(r?jr(Ur(r)).link:null)||r||n||t||e}(e);try{return new kS(t)}catch(n){return null}}}class TS{constructor(){this.providerId=TS.PROVIDER_ID}static credential(e,t){return _S._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=kS.parseLink(t);return iE(n,"argument-error"),_S._fromEmailAndCode(e,n.code,n.tenantId)}}TS.PROVIDER_ID="password",TS.EMAIL_PASSWORD_SIGN_IN_METHOD="password",TS.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class CS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class NS extends CS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class AS extends NS{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return iE("providerId"in t&&"signInMethod"in t,"argument-error"),SS._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return iE(e.idToken||e.accessToken,"argument-error"),SS._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return AS.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return AS.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new AS(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(c){return null}}}class PS extends NS{constructor(){super("facebook.com")}static credential(e){return SS._fromParams({providerId:PS.PROVIDER_ID,signInMethod:PS.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return PS.credentialFromTaggedObject(e)}static credentialFromError(e){return PS.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return PS.credential(t.oauthAccessToken)}catch(n){return null}}}PS.FACEBOOK_SIGN_IN_METHOD="facebook.com",PS.PROVIDER_ID="facebook.com";class RS extends NS{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return SS._fromParams({providerId:RS.PROVIDER_ID,signInMethod:RS.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return RS.credentialFromTaggedObject(e)}static credentialFromError(e){return RS.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return RS.credential(n,r)}catch(i){return null}}}RS.GOOGLE_SIGN_IN_METHOD="google.com",RS.PROVIDER_ID="google.com";class OS extends NS{constructor(){super("github.com")}static credential(e){return SS._fromParams({providerId:OS.PROVIDER_ID,signInMethod:OS.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return OS.credentialFromTaggedObject(e)}static credentialFromError(e){return OS.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return OS.credential(t.oauthAccessToken)}catch(n){return null}}}OS.GITHUB_SIGN_IN_METHOD="github.com",OS.PROVIDER_ID="github.com";class DS extends pS{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return ES(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ES(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ES(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new DS(n,i):null}static _create(e,t){return new DS(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class LS extends CS{constructor(e){iE(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return LS.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return LS.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=DS.fromJSON(e);return iE(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return DS._create(r,n)}catch(i){return null}}}class MS extends NS{constructor(){super("twitter.com")}static credential(e,t){return SS._fromParams({providerId:MS.PROVIDER_ID,signInMethod:MS.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return MS.credentialFromTaggedObject(e)}static credentialFromError(e){return MS.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return MS.credential(n,r)}catch(i){return null}}}async function FS(e,t){return yE(e,"POST","/v1/accounts:signUp",mE(e,t))}MS.TWITTER_SIGN_IN_METHOD="twitter.com",MS.PROVIDER_ID="twitter.com";class jS{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await ME._fromIdTokenResponse(e,n,r),s=US(n);return new jS({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=US(n);return new jS({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function US(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class VS extends Pr{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,VS.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new VS(e,t,n,r)}}function BS(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw VS._fromErrorAndOperation(e,n,t,r);throw n}))}function zS(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function qS(e,t){const n=qr(e);await KS(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return gE(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=zS(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function WS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await AE(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return jS._forOperation(e,"link",r)}async function KS(e,t,n){await OE(t);const r=!1===e?"provider-already-linked":"no-such-provider";iE(zS(t.providerData).has(n)===e,t.auth,r)}async function HS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await AE(e,BS(r,i,t,e),n);iE(s.idToken,r,"internal-error");const o=NE(s.idToken);iE(o,r,"internal-error");const{sub:a}=o;return iE(e.uid===a,r,"user-mismatch"),jS._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Z_(r,"user-mismatch"),s}}async function GS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await BS(e,r,t),s=await jS._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function QS(e,t){return GS(rS(e),t)}async function $S(e,t){const n=qr(e);return await KS(!1,n,t.providerId),WS(n,t)}async function YS(e,t){return HS(qr(e),t)}async function JS(e,t){const n=rS(e),r=await async function(e,t){return yE(e,"POST","/v1/accounts:signInWithCustomToken",mE(e,t))}(n,{token:t,returnSecureToken:!0}),i=await jS._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class XS{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?ZS._fromServerResponse(e,t):"totpInfo"in t?ex._fromServerResponse(e,t):Z_(e,"internal-error")}}class ZS extends XS{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new ZS(t)}}class ex extends XS{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new ex(t)}}function tx(e,t,n){var r;iE((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),iE("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(iE(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(iE(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function nx(e){const t=rS(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function rx(e,t){await async function(e,t){return gE(e,"POST","/v1/accounts:update",mE(e,t))}(qr(e),{oobCode:t})}async function ix(e,t){const n=qr(e),r=await mS(n,{oobCode:t}),i=r.requestType;switch(iE(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":iE(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":iE(r.mfaInfo,n,"internal-error");default:iE(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=XS._fromServerResponse(rS(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function sx(e,t){const n={identifier:t,continueUri:cE()?aE():"http://localhost"},{signinMethods:r}=await async function(e,t){return gE(e,"POST","/v1/accounts:createAuthUri",mE(e,t))}(qr(e),n);return r||[]}async function ox(e,t){const n=qr(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&tx(n.auth,r,t);const{email:i}=await async function(e,t){return yS(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function ax(e,t,n){const r=qr(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&tx(r.auth,i,n);const{email:s}=await async function(e,t){return yS(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function cx(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=qr(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await AE(i,async function(e,t){return gE(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function lx(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await AE(e,async function(e,t){return gE(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class ux{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class hx extends ux{constructor(e,t,n,r){super(e,t,n),this.username=r}}class dx extends ux{constructor(e,t){super(e,"facebook.com",t)}}class fx extends hx{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class px extends ux{constructor(e,t){super(e,"google.com",t)}}class mx extends hx{constructor(e,t,n){super(e,"twitter.com",t,n)}}function gx(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=NE(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new ux(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new dx(s,i);case"github.com":return new fx(s,i);case"google.com":return new px(s,i);case"twitter.com":return new mx(s,i,e.screenName||null);case"custom":case"anonymous":return new ux(s,null);default:return new ux(s,r,i)}}(n)}class vx{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new vx("enroll",e,t)}static _fromMfaPendingCredential(e){return new vx("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return vx._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return vx._fromIdtoken(e.multiFactorSession.idToken)}return null}}class yx{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=rS(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>XS._fromServerResponse(n,e)));iE(r.mfaPendingCredential,n,"internal-error");const s=vx._fromMfaPendingCredential(r.mfaPendingCredential);return new yx(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await jS._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return iE(t.user,n,"internal-error"),jS._forOperation(t.user,t.operationType,o);default:Z_(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class wx{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>XS._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new wx(e)}async getSession(){return vx._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await AE(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await AE(this.user,function(e,t){return gE(e,"POST","/v2/accounts/mfaEnrollment:withdraw",mE(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(r){throw r}}}const bx=new WeakMap;const _x="__sak";class Ex{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_x,"1"),this.storage.removeItem(_x),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Sx extends Ex{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=xr();return KE(e)||JE(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=XE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Cr()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Sx.type="LOCAL";const xx=Sx;class Ix extends Ex{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ix.type="SESSION";const kx=Ix;class Tx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Tx(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Cx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Tx.receivers=[];class Nx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=Cx("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Ax(){return window}function Px(){return"undefined"!==typeof Ax().WorkerGlobalScope&&"function"===typeof Ax().importScripts}const Rx="firebaseLocalStorageDb",Ox="firebaseLocalStorage",Dx="fbase_key";class Lx{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Mx(e,t){return e.transaction([Ox],t?"readwrite":"readonly").objectStore(Ox)}function Fx(){const e=indexedDB.open(Rx,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Ox,{keyPath:Dx})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Ox)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Rx);return new Lx(e).toPromise()}(),t(await Fx()))}))}))}async function jx(e,t,n){const r=Mx(e,!0).put({[Dx]:t,value:n});return new Lx(r).toPromise()}function Ux(e,t){const n=Mx(e,!0).delete(t);return new Lx(n).toPromise()}class Vx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Fx()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Px()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tx._getInstance(Px()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Nx(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fx();return await jx(e,_x,"1"),await Ux(e,_x),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>jx(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Mx(e,!1).get(t),r=await new Lx(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Ux(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Mx(e,!1).getAll();return new Lx(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Vx.type="LOCAL";const Bx=Vx;const zx=1e12;class qx{constructor(e){this.auth=e,this.counter=zx,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Wx(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||zx;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||zx;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||zx;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Wx{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;iE(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Kx=aS("rcb"),Hx=new uE(3e4,6e4);class Gx{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Ax().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return iE(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&SE(Ax().grecaptcha)?Promise.resolve(Ax().grecaptcha):new Promise(((n,r)=>{const i=Ax().setTimeout((()=>{r(eE(e,"network-request-failed"))}),Hx.get());Ax()[Kx]=()=>{Ax().clearTimeout(i),delete Ax()[Kx];const s=Ax().grecaptcha;if(!s||!SE(s))return void r(eE(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};oS("".concat(sS.recaptchaV2Script,"?").concat(Fr({onload:Kx,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(eE(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Ax().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Qx{async load(e){return new qx(e)}clearedOneInstance(){}}const $x="recaptcha",Yx={theme:"light",type:"image"};class Jx{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Yx);this.parameters=n,this.type=$x,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=rS(e),this.isInvisible="invisible"===this.parameters.size,iE("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;iE(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Qx:new Gx,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){iE(!this.parameters.sitekey,this.auth,"argument-error"),iE(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),iE("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Ax()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){iE(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){iE(cE()&&!Px(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await gE(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);iE(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return iE(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Xx{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=IS._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Zx(e,t,n){var r;const i=await n.verify();try{let s;if(iE("string"===typeof i,e,"argument-error"),iE(n.type===$x,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){iE("enroll"===t.type,e,"internal-error");const n=await function(e,t){return gE(e,"POST","/v2/accounts/mfaEnrollment:start",mE(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{iE("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;iE(n,e,"missing-multi-factor-info");const o=await function(e,t){return gE(e,"POST","/v2/accounts/mfaSignIn:start",mE(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return gE(e,"POST","/v1/accounts:sendVerificationCode",mE(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class eI{constructor(e){this.providerId=eI.PROVIDER_ID,this.auth=rS(e)}verifyPhoneNumber(e,t){return Zx(this.auth,e,qr(t))}static credential(e,t){return IS._fromVerification(e,t)}static credentialFromResult(e){const t=e;return eI.credentialFromTaggedObject(t)}static credentialFromError(e){return eI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?IS._fromTokenResponse(n,r):null}}function tI(e,t){return t?jE(t):(iE(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}eI.PROVIDER_ID="phone",eI.PHONE_SIGN_IN_METHOD="phone";class nI extends pS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ES(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ES(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ES(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rI(e){return GS(e.auth,new nI(e),e.bypassAuthState)}function iI(e){const{auth:t,user:n}=e;return iE(n,t,"internal-error"),HS(n,new nI(e),e.bypassAuthState)}async function sI(e){const{auth:t,user:n}=e;return iE(n,t,"internal-error"),WS(n,new nI(e),e.bypassAuthState)}class oI{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rI;case"linkViaPopup":case"linkViaRedirect":return sI;case"reauthViaPopup":case"reauthViaRedirect":return iI;default:Z_(this.auth,"internal-error")}}resolve(e){oE(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oE(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const aI=new uE(2e3,1e4);class cI extends oI{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,cI.currentPopupAction&&cI.currentPopupAction.cancel(),cI.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return iE(e,this.auth,"internal-error"),e}async onExecution(){oE(1===this.filter.length,"Popup operations only handle one event");const e=Cx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(eE(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(eE(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cI.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(eE(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,aI.get())};e()}}cI.currentPopupAction=null;const lI="pendingRedirect",uI=new Map;class hI extends oI{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=uI.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=mI(t),r=pI(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}uI.set(this.auth._key(),e)}return this.bypassAuthState||uI.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function dI(e,t){return pI(e)._set(mI(t),"true")}function fI(e,t){uI.set(e._key(),t)}function pI(e){return jE(e._redirectPersistence)}function mI(e){return BE(lI,e.config.apiKey,e.name)}function gI(e,t,n){return async function(e,t,n){const r=rS(e);nE(e,t,CS),await r._initializationPromise;const i=tI(r,n);return await dI(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function vI(e,t,n){return async function(e,t,n){const r=qr(e);nE(r.auth,t,CS),await r.auth._initializationPromise;const i=tI(r.auth,n);await dI(i,r.auth);const s=await bI(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function yI(e,t,n){return async function(e,t,n){const r=qr(e);nE(r.auth,t,CS),await r.auth._initializationPromise;const i=tI(r.auth,n);await KS(!1,r,t.providerId),await dI(i,r.auth);const s=await bI(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function wI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=rS(e),i=tI(r,t),s=new hI(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function bI(e){const t=Cx("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class _I{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SI(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!SI(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(eE(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(EI(e))}saveEventToCache(e){this.cachedEventUids.add(EI(e)),this.lastProcessedEventTime=Date.now()}}function EI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function SI(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function xI(e){return gE(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const II=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kI=/^https?/;function TI(e){const t=aE(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!kI.test(n))return!1;if(II.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const CI=new uE(3e4,6e4);function NI(){const e=Ax().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function AI(e){return new Promise(((t,n)=>{var r,i,s;function o(){NI(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{NI(),n(eE(e,"network-request-failed"))},timeout:CI.get()})}if(null===(i=null===(r=Ax().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Ax().gapi)||void 0===s?void 0:s.load)){const t=aS("iframefcb");return Ax()[t]=()=>{gapi.load?o():n(eE(e,"network-request-failed"))},oS("".concat(sS.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw PI=null,e}))}let PI=null;const RI=new uE(5e3,15e3),OI="__/auth/iframe",DI="emulator/auth/iframe",LI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FI(e){const t=e.config;iE(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?hE(t,DI):"https://".concat(e.config.authDomain,"/").concat(OI),r={apiKey:t.apiKey,appName:e.name,v:Li},i=MI.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Fr(r).slice(1))}async function jI(e){const t=await function(e){return PI=PI||AI(e),PI}(e),n=Ax().gapi;return iE(n,e,"internal-error"),t.open({where:document.body,url:FI(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LI,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=eE(e,"network-request-failed"),s=Ax().setTimeout((()=>{r(i)}),RI.get());function o(){Ax().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const UI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class VI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function BI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},UI),{width:r.toString(),height:i.toString(),top:s,left:o}),l=xr().toLowerCase();n&&(a=HE(l)?"_blank":n),WE(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return JE(arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new VI(null);const h=window.open(t||"",a,u);iE(h,e,"popup-blocked");try{h.focus()}catch(d){}return new VI(h)}const zI="__/auth/handler",qI="emulator/auth/handler",WI=encodeURIComponent("fac");async function KI(e,t,n,r,i,s){iE(e.config.authDomain,e,"auth-domain-config-required"),iE(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Li,eventId:i};if(t instanceof CS){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof NS){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=await e._getAppCheckToken(),l=c?"#".concat(WI,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(zI);return hE(t,qI)}(e),"?").concat(Fr(a).slice(1)).concat(l)}const HI="webStorageSupport";const GI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kx,this._completeRedirectFn=wI,this._overrideRedirectResult=fI}async _openPopup(e,t,n,r){var i;oE(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return BI(e,await KI(e,t,n,aE(),r),Cx())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Ax().location.href=e}(await KI(e,t,n,aE(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(oE(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await jI(e),n=new _I(e);return t.register("authEvent",(t=>{iE(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(HI,{type:HI},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[HI];void 0!==i&&t(!!i),Z_(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await xI(e);for(const r of t)try{if(TI(r))return}catch(n){}Z_(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return XE()||KE()||JE()}};class QI{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return sE("unexpected MultiFactorSessionType")}}}class $I extends QI{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new $I(e)}_finalizeEnroll(e,t,n){return function(e,t){return gE(e,"POST","/v2/accounts/mfaEnrollment:finalize",mE(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return gE(e,"POST","/v2/accounts/mfaSignIn:finalize",mE(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class YI{constructor(){}static assertion(e){return $I._fromCredential(e)}}YI.FACTOR_ID="phone";var JI="@firebase/auth",XI="1.6.1";class ZI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){iE(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=_r())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var ek;function tk(){return window}!function(e){sS=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=eE("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),ek="Browser",Ni(new Wr("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;iE(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:ek,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZE(ek)},l=new nS(r,i,s,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jE);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ni(new Wr("auth-internal",(e=>(e=>new ZI(e))(rS(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Vi(JI,XI,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ek)),Vi(JI,XI,"esm2017");async function nk(e,t,n){var r;const{BuildInfo:i}=tk();oE(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(oE(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return JE()?o.ibi=i.packageName:QE()?o.apn=i.packageName:Z_(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,KI(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function rk(e){const{cordova:t}=tk();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const ik=20;class sk extends _I{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function ok(e){const t=await lk()._get(uk(e));return t&&await lk()._remove(uk(e)),t}function ak(e,t){var n,r;const i=function(e){const t=hk(e),n=t.link?decodeURIComponent(t.link):void 0,r=hk(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return hk(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=hk(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?eE(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function ck(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<ik;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function lk(){return jE(xx)}function uk(e){return BE("authEvent",e.config.apiKey,e.name)}function hk(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return jr(n.join("?"))}const dk=class{constructor(){this._redirectPersistence=kx,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=wI,this._overrideRedirectResult=fI}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new sk(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Z_(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,c,l,u;const h=tk();iE("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),iE("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),iE("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),iE("function"===typeof(null===(c=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),iE("function"===typeof(null===(u=null===(l=null===h||void 0===h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),uI.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:ck(),postBody:null,tenantId:e.tenantId,error:eE(e,"no-auth-event")}}(e,n,r);await function(e,t){return lk()._set(uk(e),t)}(e,s);const o=await nk(e,s,t);return async function(e,t,n){const{cordova:r}=tk();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{o(eE(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),QE()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await rk(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=tk(),n={};JE()?n.iosBundleId=t.packageName:QE()?n.androidPackageName=t.packageName:Z_(e,"operation-not-supported-in-this-environment"),await xI(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=tk(),s=setTimeout((async()=>{await ok(e),t.onEvent(fk())}),500),o=async n=>{clearTimeout(s);const r=await ok(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=ak(r,n.url)),t.onEvent(i||fk())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,c="".concat(i.packageName.toLowerCase(),"://");tk().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&o({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function fk(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:eE("no-auth-event")}}function pk(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function mk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr();return!("file:"!==pk()&&"ionic:"!==pk()&&"capacitor:"!==pk()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function gk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr();return Cr()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr();return/Edge\/\d+/.test(e)}(e)}function vk(){try{const e=self.localStorage,t=Cx();if(e)return e.setItem(t,"1"),e.removeItem(t),!gk()||Ar()}catch(e){return yk()&&Ar()}return!1}function yk(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function wk(){return("http:"===pk()||"https:"===pk()||kr()||mk())&&!(Tr()||Ir())&&vk()&&!yk()}function bk(){return mk()&&"undefined"!==typeof document}const _k={LOCAL:"local",NONE:"none",SESSION:"session"},Ek=iE,Sk="persistence";async function xk(e){await e._initializationPromise;const t=Ik(),n=BE(Sk,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function Ik(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const kk=iE;class Tk{constructor(){this.browserResolver=jE(GI),this.cordovaResolver=jE(dk),this.underlyingResolver=null,this._redirectPersistence=kx,this._completeRedirectFn=wI,this._overrideRedirectResult=fI}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return bk()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return kk(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!bk()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function Ck(e){return e.unwrap()}function Nk(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new Ok(e,function(e,t){var n;const r=qr(e),i=t;return iE(t.customData.operationType,r,"argument-error"),iE(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),yx._fromError(r,i)}(e,t))}else if(r){const e=Ak(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Ak(e){const{_tokenResponse:t}=e instanceof Pr?e.customData:e;if(!t)return null;if(!(e instanceof Pr)&&"temporaryProof"in t&&"phoneNumber"in t)return eI.credentialFromResult(e);const n=t.providerId;if(!n||n===V_.PASSWORD)return null;let r;switch(n){case V_.GOOGLE:r=RS;break;case V_.FACEBOOK:r=PS;break;case V_.GITHUB:r=OS;break;case V_.TWITTER:r=MS;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?DS._create(n,o):SS._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new AS(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Pr?r.credentialFromError(e):r.credentialFromResult(e)}function Pk(e,t){return t.catch((t=>{throw t instanceof Pr&&Nk(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,Ak(r)),additionalUserInfo:gx(e),user:Dk.getOrCreate(n)};var r}))}async function Rk(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>Pk(e,n.confirm(t))}}class Ok{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Pk(Ck(this.auth),this.resolver.resolveSignIn(e))}}class Dk{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=qr(e);return bx.has(t)||bx.set(t,wx._fromUser(t)),bx.get(t)}(e)}static getOrCreate(e){return Dk.USER_MAP.has(e)||Dk.USER_MAP.set(e,new Dk(e)),Dk.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Pk(this.auth,$S(this._delegate,e))}async linkWithPhoneNumber(e,t){return Rk(this.auth,async function(e,t,n){const r=qr(e);await KS(!1,r,"phone");const i=await Zx(r.auth,t,qr(n));return new Xx(i,(e=>$S(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return Pk(this.auth,async function(e,t,n){const r=qr(e);nE(r.auth,t,CS);const i=tI(r.auth,n);return new cI(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Tk))}async linkWithRedirect(e){return await xk(rS(this.auth)),yI(this._delegate,e,Tk)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Pk(this.auth,YS(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Rk(this.auth,async function(e,t,n){const r=qr(e),i=await Zx(r.auth,t,qr(n));return new Xx(i,(e=>YS(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return Pk(this.auth,async function(e,t,n){const r=qr(e);nE(r.auth,t,CS);const i=tI(r.auth,n);return new cI(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Tk))}async reauthenticateWithRedirect(e){return await xk(rS(this.auth)),vI(this._delegate,e,Tk)}sendEmailVerification(e){return ox(this._delegate,e)}async unlink(e){return await qS(this._delegate,e),this}updateEmail(e){return function(e,t){return lx(qr(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return lx(qr(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await WS(qr(e),t)}(this._delegate,e)}updateProfile(e){return cx(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return ax(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Dk.USER_MAP=new WeakMap;const Lk=iE;class Mk{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Lk(n,"invalid-api-key",{appName:e.name}),Lk(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?Tk:void 0;this._delegate=t.initialize({options:{persistence:jk(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Q_),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Dk.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){hS(this._delegate,e,t)}applyActionCode(e){return rx(this._delegate,e)}checkActionCode(e){return ix(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await mS(qr(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&nx(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Pk(this._delegate,async function(e,t,n){const r=rS(e),i=uS(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FS),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&nx(e),t})),o=await jS._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return sx(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=kS.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){Lk(wk(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await rS(e)._initializationPromise,wI(e,t,!1)}(this._delegate,Tk);return e?Pk(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){rS(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=Fk(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=Fk(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=rS(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){iE(t.handleCodeInApp,r,"argument-error"),t&&tx(r,e,t)}(i,n),await uS(r,i,"getOobCode",bS)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=rS(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&tx(r,i,n),await uS(r,i,"getOobCode",wS)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){Ek(Object.values(_k).includes(t),e,"invalid-persistence-type"),Tr()?Ek(t!==_k.SESSION,e,"unsupported-persistence-type"):Ir()?Ek(t===_k.NONE,e,"unsupported-persistence-type"):yk()?Ek(t===_k.NONE||t===_k.LOCAL&&Ar(),e,"unsupported-persistence-type"):Ek(t===_k.NONE||vk(),e,"unsupported-persistence-type")}(this._delegate,e),e){case _k.SESSION:t=kx;break;case _k.LOCAL:t=await jE(Bx)._isAvailable()?Bx:xx;break;case _k.NONE:t=VE;break;default:return Z_("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Pk(this._delegate,async function(e){var t;const n=rS(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new jS({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await FS(n,{returnSecureToken:!0}),i=await jS._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return Pk(this._delegate,QS(this._delegate,e))}signInWithCustomToken(e){return Pk(this._delegate,JS(this._delegate,e))}signInWithEmailAndPassword(e,t){return Pk(this._delegate,function(e,t,n){return QS(qr(e),TS.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&nx(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Pk(this._delegate,async function(e,t,n){const r=qr(e),i=TS.credentialWithLink(t,n||aE());return iE(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),QS(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Rk(this._delegate,async function(e,t,n){const r=rS(e),i=await Zx(r,t,qr(n));return new Xx(i,(e=>QS(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return Lk(wk(),this._delegate,"operation-not-supported-in-this-environment"),Pk(this._delegate,async function(e,t,n){const r=rS(e);nE(e,t,CS);const i=tI(r,n);return new cI(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,Tk))}async signInWithRedirect(e){return Lk(wk(),this._delegate,"operation-not-supported-in-this-environment"),await xk(this._delegate),gI(this._delegate,e,Tk)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await ix(qr(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Fk(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Dk.getOrCreate(e)),error:t,complete:n}}function jk(e,t){const n=function(e,t){const n=Ik();if(!n)return[];const r=BE(Sk,e,t);switch(n.getItem(r)){case _k.NONE:return[VE];case _k.LOCAL:return[Bx,kx];case _k.SESSION:return[kx];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Bx)||n.push(Bx),"undefined"!==typeof window)for(const r of[xx,kx])n.includes(r)||n.push(r);return n.includes(VE)||n.push(VE),n}Mk.Persistence=_k;class Uk{constructor(){this.providerId="phone",this._delegate=new eI(Ck(ss.auth()))}static credential(e,t){return eI.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Uk.PHONE_SIGN_IN_METHOD=eI.PHONE_SIGN_IN_METHOD,Uk.PROVIDER_ID=eI.PROVIDER_ID;const Vk=iE;class Bk{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ss.app();var r;Vk(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Jx(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new Wr("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Mk(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:B_,PASSWORD_RESET:z_,RECOVER_EMAIL:q_,REVERT_SECOND_FACTOR_ADDITION:W_,VERIFY_AND_CHANGE_EMAIL:K_,VERIFY_EMAIL:H_}},EmailAuthProvider:TS,FacebookAuthProvider:PS,GithubAuthProvider:OS,GoogleAuthProvider:RS,OAuthProvider:AS,SAMLAuthProvider:LS,PhoneAuthProvider:Uk,PhoneMultiFactorGenerator:YI,RecaptchaVerifier:Bk,TwitterAuthProvider:MS,Auth:Mk,AuthCredential:pS,Error:Pr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.5.3")}(ss);const zk=async(e,t)=>{if(!e)return;const n=Wk.doc("users/".concat(e.uid));if(!(await n.get()).exists){const{displayName:i,email:s}=e,o=new Date;try{await n.set({displayName:i,email:s,createAt:o,...t})}catch(r){console.log("error creating user: ",r.message)}}return n};ss.initializeApp({apiKey:"AIzaSyAWo9SvxOW4qvYf-iyFg8Tq1ZYNzhmJ5GM",authDomain:"booksuggester-94bd1.firebaseapp.com",projectId:"booksuggester-94bd1",storageBucket:"booksuggester-94bd1.appspot.com",messagingSenderId:"1083435225479",appId:"1:1083435225479:web:2b08b2b9011a5be26cc322",measurementId:"G-G9Q0SQZYFS"});const qk=ss.auth(),Wk=ss.firestore(),Kk=new ss.auth.GoogleAuthProvider;Kk.setCustomParameters({prompt:"select_account"});var Hk,Gk,Qk,$k;function Yk(e){let{sidebaropen:t,toggleSidebar:n,currentUser:r}=e;return(0,lr.jsxs)(Jk,{className:"animate darkBg",sidebaropen:t,children:[(0,lr.jsxs)(Xk,{className:"flexSpaceCenter",children:[(0,lr.jsxs)("div",{className:"flexNullCenter",children:[(0,lr.jsx)(dr,{}),(0,lr.jsx)("h1",{className:"whiteColor font20",style:{marginLeft:"15px"},children:"BookSuggester"})]}),(0,lr.jsx)(Zk,{onClick:()=>n(!t),className:"animate pointer",children:(0,lr.jsx)(ur,{})})]}),(0,lr.jsxs)(eT,{className:"flexNullCenter flexColumn",children:[(0,lr.jsx)("li",{className:"semiBold font15 pointer",children:(0,lr.jsx)(he,{onClick:()=>n(!t),className:"whiteColor",style:{padding:"10px 15px"},to:"/",children:"Home"})}),(0,lr.jsx)("li",{className:"semiBold font15 pointer",children:(0,lr.jsx)(he,{onClick:()=>n(!t),className:"whiteColor",style:{padding:"10px 15px"},to:"/discover",children:"Discover"})}),(0,lr.jsx)("li",{className:"semiBold font15 pointer",children:(0,lr.jsx)(he,{onClick:()=>n(!t),className:"whiteColor",style:{padding:"10px 15px"},to:"/bookshelf",children:"Bookshelf"})}),(0,lr.jsx)("li",{className:"semiBold font15 pointer",children:r?(0,lr.jsx)(he,{onClick:()=>{qk.signOut(),n(!1)},className:"whiteColor",style:{padding:"10px 15px"},to:"/login",children:"Logout"}):(0,lr.jsx)(he,{onClick:()=>n(!t),className:"whiteColor",style:{padding:"10px 15px"},to:"/login",children:"Login"})})]})]})}const Jk=ar.nav(Hk||(Hk=me(["\n  width: 400px;\n  height: 100vh;\n  position: fixed;\n  top: 0;\n  padding: 0 30px;\n  right: ",";\n  z-index: 9999;\n  @media (max-width: 400px) {\n    width: 100%;\n  }\n"])),(e=>"true"===e.sidebaropen?"0px":"-400px")),Xk=ar.div(Gk||(Gk=me(["\n  padding: 20px 0;\n"]))),Zk=ar.button(Qk||(Qk=me(["\n  border: 0px;\n  outline: none;\n  background-color: transparent;\n  padding: 10px;\n"]))),eT=ar.ul($k||($k=me(["\n  padding: 40px;\n  li {\n    margin: 20px 0;\n  }\n"])));var tT;function nT(e){let{toggleSidebar:t}=e;return(0,lr.jsx)(rT,{className:"darkBg",onClick:()=>t(!1)})}const rT=ar.div(tT||(tT=me(["\n  width: 100%;\n  height: 100vh;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 99;\n  opacity: 0.8;\n"])));const iT=function(e){return(0,lr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:28,height:22,viewBox:"0 0 28 22",...e,children:[(0,lr.jsx)("path",{"data-name":"Line 5",fill:"none",stroke:"#0b093b",strokeLinecap:"round",strokeWidth:2,d:"M1 1h26"}),(0,lr.jsx)("path",{"data-name":"Line 6",fill:"none",stroke:"#0b093b",strokeLinecap:"round",strokeWidth:2,d:"M1 11h26"}),(0,lr.jsx)("path",{"data-name":"Line 7",fill:"none",stroke:"#0b093b",strokeLinecap:"round",strokeWidth:2,d:"M1 21h26"})]})};var sT,oT,aT,cT,lT,uT;function hT(e){const{currentUser:n}=e,[r,i]=(0,t.useState)(window.scrollY),[s,o]=(0,t.useState)(!1);return(0,t.useEffect)((()=>(window.addEventListener("scroll",(()=>i(window.scrollY))),()=>{window.removeEventListener("scroll",(()=>i(window.scrollY)))})),[r]),(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)(Yk,{sidebaropen:s.toString(),toggleSidebar:o,currentUser:n}),s&&(0,lr.jsx)(nT,{toggleSidebar:o}),(0,lr.jsx)(dT,{style:{height:r>100?"60px":"80px"},children:(0,lr.jsxs)(fT,{children:[(0,lr.jsxs)(pT,{to:"/",className:"flexNullCenter pointer",activeClassName:"inactive",children:[(0,lr.jsx)(dr,{}),(0,lr.jsx)("h5",{style:{marginLeft:"5px",marginTop:"5px"},children:"BookSuggester"})]}),(0,lr.jsx)(mT,{onClick:()=>o(!s),children:(0,lr.jsx)(iT,{})}),(0,lr.jsxs)(gT,{children:[(0,lr.jsx)("li",{children:(0,lr.jsx)(vT,{exact:!0,to:"/",className:"/"===window.location.pathname?"active":"",children:"Home"})}),(0,lr.jsx)("li",{children:(0,lr.jsx)(vT,{to:"/discover",className:"/discover"===window.location.pathname?"active":"",children:"Discover"})}),(0,lr.jsx)("li",{children:(0,lr.jsx)(vT,{to:"/bookshelf",className:"/bookshelf"===window.location.pathname?"active":"",children:"Bookshelf"})}),n?(0,lr.jsx)("li",{children:(0,lr.jsx)(vT,{to:"/login",className:"/login"===window.location.pathname?"active":"",onClick:()=>qk.signOut(),children:"Logout"})}):(0,lr.jsx)("li",{children:(0,lr.jsx)(vT,{to:"/login",className:"/login"===window.location.pathname?"active":"",children:"Login"})})]})]})})]})}const dT=ar.nav(sT||(sT=me(["\n  width: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 999;\n  background-color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.2);\n"]))),fT=ar.div(oT||(oT=me(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  max-width: 1200px;\n  padding: 0 20px;\n  height: 100%;\n"]))),pT=ar(pe)(aT||(aT=me(["\n  display: flex;\n  align-items: center;\n  text-decoration: none;\n  color: black;\n  font-weight: bold;\n  font-size: 1.5rem;\n  cursor: pointer;\n"]))),mT=ar.button(cT||(cT=me(["\n  display: none;\n  background: none;\n  border: none;\n  cursor: pointer;\n  @media (max-width: 760px) {\n    display: block;\n  }\n"]))),gT=ar.ul(lT||(lT=me(["\n  display: flex;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  @media (max-width: 760px) {\n    display: none;\n  }\n"]))),vT=ar(pe)(uT||(uT=me(["\n  text-decoration: none;\n  color: black;\n  font-weight: bold;\n  font-size: 1rem;\n  padding: 10px 15px;\n  cursor: pointer;\n  &.active {\n    border-bottom: 2px solid blue; /* You can adjust the active link styling */\n  }\n"])));var yT;const wT=ar.div(yT||(yT=me(["\n  display: flex;\n  flex-direction: column;\n  border: 1.5px solid light-gray;\n  border-left: 1px solid black;\n  border-radius: 8px;\n  padding: 25px;\n  cursor: pointer;\n  width: 260px;\n  font-family: Garamond, serif;\n  height: 380px;\n  align-items: center;\n  justify-content: space-around;\n  box-shadow: 0 8px 16px 0 rgba(0,0,0,0.5);\n  transition: all 0.5s ease;\n\n  &:hover {\n    transform: scale(1.01);\n    transition: transform 1.5s ease-out;\n    border-left: 0px;\n    border-right: 1px solid black;\n  }\n\n  @media only screen and (max-width: 600px) {\n    width: 220px;\n    min-height: 330px;\n    padding: 10px;\n  }\n"])));var bT,_T,ET,ST,xT,IT,kT;class TT extends t.Component{constructor(e){super(e),this.toggleHoverState=()=>{this.setState((e=>({showInfo:!e.showInfo})))},this.state={showInfo:!1}}render(){const{title:e,background:t,authors:n,subject:r,genre:i}=this.props,{showInfo:s}=this.state;return(0,lr.jsx)(wT,{style:{backgroundColor:t},onMouseEnter:this.toggleHoverState,onMouseLeave:this.toggleHoverState,showinfo:s?"true":"false",children:(0,lr.jsx)(NT,{children:s?(0,lr.jsx)(RT,{className:"font12",children:[{label:"Title",value:e},{label:"Authors",value:n},{label:"Subject",value:r},{label:"Category",value:i}].map(((e,t)=>e.value&&(0,lr.jsxs)("span",{children:[(0,lr.jsxs)(OT,{children:[e.label,":"]}),(0,lr.jsx)(DT,{children:e.value.length>120?e.value.substring(0,120)+"...":e.value})]},t)))}):(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)(AT,{children:e.length>120?e.substring(0,120)+"...":e}),(0,lr.jsx)(PT,{children:n.length>120?e.substring(0,120)+"...":n})]})})})}}const CT=cr(bT||(bT=me(["\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n"]))),NT=ar.div(_T||(_T=me([""]))),AT=ar.h6(ET||(ET=me(["\n  margin: 0;\n  text-overflow: ellipsis;\n  animation: "," 1s ease;\n"])),CT),PT=ar.span(ST||(ST=me(["\n  font-size: 12px;\n  color: #555;\n  animation: "," 1s ease;\n"])),CT),RT=ar.div(xT||(xT=me(["\n  margin-top: 10px;\n  display: flex;\n  flex-direction: column;\n"]))),OT=ar.span(IT||(IT=me(["\n  font-weight: bold;\n  animation: "," 1s ease;\n"])),CT),DT=ar.span(kT||(kT=me(["\n  margin-left: 5px;\n  animation: "," 1s ease;\n"])),CT);const LT=n.p+"static/media/dice-solid.f86902b205c6a8d89d7ac2f60436a0fb.svg";const MT=function(e){return(0,lr.jsx)("img",{src:LT,alt:"",style:{height:"38px"}})};const FT=n.p+"static/media/floppy-disk-solid.c87e40eb52d0d26128b3ef3c4528fc06.svg";const jT=function(e){return(0,lr.jsx)("img",{src:FT,alt:"",style:{height:"30px"}})};const UT=n.p+"static/media/gear-solid.37ee32abde6a49398c42354170f37562.svg";const VT=function(e){return(0,lr.jsx)("img",{src:UT,alt:"",style:{height:"30px"}})};function BT(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function zT(){const e=(0,t.useRef)(!0),n=(0,t.useRef)((()=>e.current));return(0,t.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),n.current}function qT(e){const n=function(e){const n=(0,t.useRef)(e);return n.current=e,n}(e);(0,t.useEffect)((()=>()=>n.current()),[])}const WT=2**31-1;function KT(e,t,n){const r=n-Date.now();e.current=r<=WT?setTimeout(t,r):setTimeout((()=>KT(e,t,n)),WT)}function HT(){const e=zT(),n=(0,t.useRef)();return qT((()=>clearTimeout(n.current))),(0,t.useMemo)((()=>{const t=()=>clearTimeout(n.current);return{set:function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e()&&(t(),i<=WT?n.current=setTimeout(r,i):KT(n,r,Date.now()+i))},clear:t,handleRef:n}}),[])}var GT=n(440),QT=n.n(GT);n(740);function $T(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function YT(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function JT(e,n,r){var i=(0,t.useRef)(void 0!==e),s=(0,t.useState)(n),o=s[0],a=s[1],c=void 0!==e,l=i.current;return i.current=c,!c&&l&&o!==n&&a(n),[c?e:o,(0,t.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),a(e)}),[r])]}function XT(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function ZT(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function eC(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}XT.__suppressDeprecationWarning=!0,ZT.__suppressDeprecationWarning=!0,eC.__suppressDeprecationWarning=!0;const tC=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const nC=function(e,n){return(0,t.useMemo)((()=>function(e,t){const n=tC(e),r=tC(t);return e=>{n&&n(e),r&&r(e)}}(e,n)),[e,n])};var rC=n(139),iC=n.n(rC);function sC(){return(0,t.useState)(null)}var oC=Object.prototype.hasOwnProperty;function aC(e,t,n){for(n of e.keys())if(cC(n,t))return n}function cC(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&cC(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e){if((i=r)&&"object"===typeof i&&!(i=aC(t,i)))return!1;if(!t.has(i))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e){if((i=r[0])&&"object"===typeof i&&!(i=aC(t,i)))return!1;if(!cC(r[1],t.get(i)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"===typeof e){for(n in r=0,e){if(oC.call(e,n)&&++r&&!oC.call(t,n))return!1;if(!(n in t)||!cC(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!==e&&t!==t}const lC=function(e){const n=zT();return[e[0],(0,t.useCallback)((t=>{if(n())return e[1](t)}),[n,e[1]])]};function uC(e){return e.split("-")[0]}function hC(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function dC(e){return e instanceof hC(e).Element||e instanceof Element}function fC(e){return e instanceof hC(e).HTMLElement||e instanceof HTMLElement}function pC(e){return"undefined"!==typeof ShadowRoot&&(e instanceof hC(e).ShadowRoot||e instanceof ShadowRoot)}var mC=Math.max,gC=Math.min,vC=Math.round;function yC(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function wC(){return!/^((?!chrome|android).)*safari/i.test(yC())}function bC(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,s=1;t&&fC(e)&&(i=e.offsetWidth>0&&vC(r.width)/e.offsetWidth||1,s=e.offsetHeight>0&&vC(r.height)/e.offsetHeight||1);var o=(dC(e)?hC(e):window).visualViewport,a=!wC()&&n,c=(r.left+(a&&o?o.offsetLeft:0))/i,l=(r.top+(a&&o?o.offsetTop:0))/s,u=r.width/i,h=r.height/s;return{width:u,height:h,top:l,right:c+u,bottom:l+h,left:c,x:c,y:l}}function _C(e){var t=bC(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function EC(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&pC(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function SC(e){return e?(e.nodeName||"").toLowerCase():null}function xC(e){return hC(e).getComputedStyle(e)}function IC(e){return["table","td","th"].indexOf(SC(e))>=0}function kC(e){return((dC(e)?e.ownerDocument:e.document)||window.document).documentElement}function TC(e){return"html"===SC(e)?e:e.assignedSlot||e.parentNode||(pC(e)?e.host:null)||kC(e)}function CC(e){return fC(e)&&"fixed"!==xC(e).position?e.offsetParent:null}function NC(e){for(var t=hC(e),n=CC(e);n&&IC(n)&&"static"===xC(n).position;)n=CC(n);return n&&("html"===SC(n)||"body"===SC(n)&&"static"===xC(n).position)?t:n||function(e){var t=/firefox/i.test(yC());if(/Trident/i.test(yC())&&fC(e)&&"fixed"===xC(e).position)return null;var n=TC(e);for(pC(n)&&(n=n.host);fC(n)&&["html","body"].indexOf(SC(n))<0;){var r=xC(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function AC(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function PC(e,t,n){return mC(e,gC(t,n))}function RC(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function OC(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}var DC="top",LC="bottom",MC="right",FC="left",jC="auto",UC=[DC,LC,MC,FC],VC="start",BC="end",zC="clippingParents",qC="viewport",WC="popper",KC="reference",HC=UC.reduce((function(e,t){return e.concat([t+"-"+VC,t+"-"+BC])}),[]),GC=[].concat(UC,[jC]).reduce((function(e,t){return e.concat([t,t+"-"+VC,t+"-"+BC])}),[]),QC=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];const $C={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=uC(n.placement),c=AC(a),l=[FC,MC].indexOf(a)>=0?"height":"width";if(s&&o){var u=function(e,t){return RC("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:OC(e,UC))}(i.padding,n),h=_C(s),d="y"===c?DC:FC,f="y"===c?LC:MC,p=n.rects.reference[l]+n.rects.reference[c]-o[c]-n.rects.popper[l],m=o[c]-n.rects.reference[c],g=NC(s),v=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,y=p/2-m/2,w=u[d],b=v-h[l]-u[f],_=v/2-h[l]/2+y,E=PC(w,_,b),S=c;n.modifiersData[r]=((t={})[S]=E,t.centerOffset=E-_,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&EC(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function YC(e){return e.split("-")[1]}var JC={top:"auto",right:"auto",bottom:"auto",left:"auto"};function XC(e){var t,n=e.popper,r=e.popperRect,i=e.placement,s=e.variation,o=e.offsets,a=e.position,c=e.gpuAcceleration,l=e.adaptive,u=e.roundOffsets,h=e.isFixed,d=o.x,f=void 0===d?0:d,p=o.y,m=void 0===p?0:p,g="function"===typeof u?u({x:f,y:m}):{x:f,y:m};f=g.x,m=g.y;var v=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),w=FC,b=DC,_=window;if(l){var E=NC(n),S="clientHeight",x="clientWidth";if(E===hC(n)&&"static"!==xC(E=kC(n)).position&&"absolute"===a&&(S="scrollHeight",x="scrollWidth"),i===DC||(i===FC||i===MC)&&s===BC)b=LC,m-=(h&&E===_&&_.visualViewport?_.visualViewport.height:E[S])-r.height,m*=c?1:-1;if(i===FC||(i===DC||i===LC)&&s===BC)w=MC,f-=(h&&E===_&&_.visualViewport?_.visualViewport.width:E[x])-r.width,f*=c?1:-1}var I,k=Object.assign({position:a},l&&JC),T=!0===u?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:vC(n*i)/i||0,y:vC(r*i)/i||0}}({x:f,y:m},hC(n)):{x:f,y:m};return f=T.x,m=T.y,c?Object.assign({},k,((I={})[b]=y?"0":"",I[w]=v?"0":"",I.transform=(_.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",I)):Object.assign({},k,((t={})[b]=y?m+"px":"",t[w]=v?f+"px":"",t.transform="",t))}const ZC={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,c=void 0===a||a,l={placement:uC(t.placement),variation:YC(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,XC(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,XC(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var eN={passive:!0};const tN={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,s=void 0===i||i,o=r.resize,a=void 0===o||o,c=hC(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&l.forEach((function(e){e.addEventListener("scroll",n.update,eN)})),a&&c.addEventListener("resize",n.update,eN),function(){s&&l.forEach((function(e){e.removeEventListener("scroll",n.update,eN)})),a&&c.removeEventListener("resize",n.update,eN)}},data:{}};var nN={left:"right",right:"left",bottom:"top",top:"bottom"};function rN(e){return e.replace(/left|right|bottom|top/g,(function(e){return nN[e]}))}var iN={start:"end",end:"start"};function sN(e){return e.replace(/start|end/g,(function(e){return iN[e]}))}function oN(e){var t=hC(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function aN(e){return bC(kC(e)).left+oN(e).scrollLeft}function cN(e){var t=xC(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function lN(e){return["html","body","#document"].indexOf(SC(e))>=0?e.ownerDocument.body:fC(e)&&cN(e)?e:lN(TC(e))}function uN(e,t){var n;void 0===t&&(t=[]);var r=lN(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),s=hC(r),o=i?[s].concat(s.visualViewport||[],cN(r)?r:[]):r,a=t.concat(o);return i?a:a.concat(uN(TC(o)))}function hN(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function dN(e,t,n){return t===qC?hN(function(e,t){var n=hC(e),r=kC(e),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;var l=wC();(l||!l&&"fixed"===t)&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a+aN(e),y:c}}(e,n)):dC(t)?function(e,t){var n=bC(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):hN(function(e){var t,n=kC(e),r=oN(e),i=null==(t=e.ownerDocument)?void 0:t.body,s=mC(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=mC(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+aN(e),c=-r.scrollTop;return"rtl"===xC(i||n).direction&&(a+=mC(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:c}}(kC(e)))}function fN(e,t,n,r){var i="clippingParents"===t?function(e){var t=uN(TC(e)),n=["absolute","fixed"].indexOf(xC(e).position)>=0&&fC(e)?NC(e):e;return dC(n)?t.filter((function(e){return dC(e)&&EC(e,n)&&"body"!==SC(e)})):[]}(e):[].concat(t),s=[].concat(i,[n]),o=s[0],a=s.reduce((function(t,n){var i=dN(e,n,r);return t.top=mC(i.top,t.top),t.right=gC(i.right,t.right),t.bottom=gC(i.bottom,t.bottom),t.left=mC(i.left,t.left),t}),dN(e,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function pN(e){var t,n=e.reference,r=e.element,i=e.placement,s=i?uC(i):null,o=i?YC(i):null,a=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(s){case DC:t={x:a,y:n.y-r.height};break;case LC:t={x:a,y:n.y+n.height};break;case MC:t={x:n.x+n.width,y:c};break;case FC:t={x:n.x-r.width,y:c};break;default:t={x:n.x,y:n.y}}var l=s?AC(s):null;if(null!=l){var u="y"===l?"height":"width";switch(o){case VC:t[l]=t[l]-(n[u]/2-r[u]/2);break;case BC:t[l]=t[l]+(n[u]/2-r[u]/2)}}return t}function mN(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,s=n.strategy,o=void 0===s?e.strategy:s,a=n.boundary,c=void 0===a?zC:a,l=n.rootBoundary,u=void 0===l?qC:l,h=n.elementContext,d=void 0===h?WC:h,f=n.altBoundary,p=void 0!==f&&f,m=n.padding,g=void 0===m?0:m,v=RC("number"!==typeof g?g:OC(g,UC)),y=d===WC?KC:WC,w=e.rects.popper,b=e.elements[p?y:d],_=fN(dC(b)?b:b.contextElement||kC(e.elements.popper),c,u,o),E=bC(e.elements.reference),S=pN({reference:E,element:w,strategy:"absolute",placement:i}),x=hN(Object.assign({},w,S)),I=d===WC?x:E,k={top:_.top-I.top+v.top,bottom:I.bottom-_.bottom+v.bottom,left:_.left-I.left+v.left,right:I.right-_.right+v.right},T=e.modifiersData.offset;if(d===WC&&T){var C=T[i];Object.keys(k).forEach((function(e){var t=[MC,LC].indexOf(e)>=0?1:-1,n=[DC,LC].indexOf(e)>=0?"y":"x";k[e]+=C[n]*t}))}return k}const gN={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,s=void 0===i||i,o=n.altAxis,a=void 0===o||o,c=n.fallbackPlacements,l=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,p=void 0===f||f,m=n.allowedAutoPlacements,g=t.options.placement,v=uC(g),y=c||(v===g||!p?[rN(g)]:function(e){if(uC(e)===jC)return[];var t=rN(e);return[sN(e),t,sN(t)]}(g)),w=[g].concat(y).reduce((function(e,n){return e.concat(uC(n)===jC?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?GC:c,u=YC(r),h=u?a?HC:HC.filter((function(e){return YC(e)===u})):UC,d=h.filter((function(e){return l.indexOf(e)>=0}));0===d.length&&(d=h);var f=d.reduce((function(t,n){return t[n]=mN(e,{placement:n,boundary:i,rootBoundary:s,padding:o})[uC(n)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}(t,{placement:n,boundary:u,rootBoundary:h,padding:l,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),b=t.rects.reference,_=t.rects.popper,E=new Map,S=!0,x=w[0],I=0;I<w.length;I++){var k=w[I],T=uC(k),C=YC(k)===VC,N=[DC,LC].indexOf(T)>=0,A=N?"width":"height",P=mN(t,{placement:k,boundary:u,rootBoundary:h,altBoundary:d,padding:l}),R=N?C?MC:FC:C?LC:DC;b[A]>_[A]&&(R=rN(R));var O=rN(R),D=[];if(s&&D.push(P[T]<=0),a&&D.push(P[R]<=0,P[O]<=0),D.every((function(e){return e}))){x=k,S=!1;break}E.set(k,D)}if(S)for(var L=function(e){var t=w.find((function(t){var n=E.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return x=t,"break"},M=p?3:1;M>0;M--){if("break"===L(M))break}t.placement!==x&&(t.modifiersData[r]._skip=!0,t.placement=x,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function vN(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function yN(e){return[DC,MC,LC,FC].some((function(t){return e[t]>=0}))}const wN={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,s=void 0===i?[0,0]:i,o=GC.reduce((function(e,n){return e[n]=function(e,t,n){var r=uC(e),i=[FC,DC].indexOf(r)>=0?-1:1,s="function"===typeof n?n(Object.assign({},t,{placement:e})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[FC,MC].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}(n,t.rects,s),e}),{}),a=o[t.placement],c=a.x,l=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=o}};const bN={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,s=void 0===i||i,o=n.altAxis,a=void 0!==o&&o,c=n.boundary,l=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,f=void 0===d||d,p=n.tetherOffset,m=void 0===p?0:p,g=mN(t,{boundary:c,rootBoundary:l,padding:h,altBoundary:u}),v=uC(t.placement),y=YC(t.placement),w=!y,b=AC(v),_="x"===b?"y":"x",E=t.modifiersData.popperOffsets,S=t.rects.reference,x=t.rects.popper,I="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,k="number"===typeof I?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,C={x:0,y:0};if(E){if(s){var N,A="y"===b?DC:FC,P="y"===b?LC:MC,R="y"===b?"height":"width",O=E[b],D=O+g[A],L=O-g[P],M=f?-x[R]/2:0,F=y===VC?S[R]:x[R],j=y===VC?-x[R]:-S[R],U=t.elements.arrow,V=f&&U?_C(U):{width:0,height:0},B=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},z=B[A],q=B[P],W=PC(0,S[R],V[R]),K=w?S[R]/2-M-W-z-k.mainAxis:F-W-z-k.mainAxis,H=w?-S[R]/2+M+W+q+k.mainAxis:j+W+q+k.mainAxis,G=t.elements.arrow&&NC(t.elements.arrow),Q=G?"y"===b?G.clientTop||0:G.clientLeft||0:0,$=null!=(N=null==T?void 0:T[b])?N:0,Y=O+H-$,J=PC(f?gC(D,O+K-$-Q):D,O,f?mC(L,Y):L);E[b]=J,C[b]=J-O}if(a){var X,Z="x"===b?DC:FC,ee="x"===b?LC:MC,te=E[_],ne="y"===_?"height":"width",re=te+g[Z],ie=te-g[ee],se=-1!==[DC,FC].indexOf(v),oe=null!=(X=null==T?void 0:T[_])?X:0,ae=se?re:te-S[ne]-x[ne]-oe+k.altAxis,ce=se?te+S[ne]+x[ne]-oe-k.altAxis:ie,le=f&&se?function(e,t,n){var r=PC(e,t,n);return r>n?n:r}(ae,te,ce):PC(f?ae:re,te,f?ce:ie);E[_]=le,C[_]=le-te}t.modifiersData[r]=C}},requiresIfExists:["offset"]};function _N(e,t,n){void 0===n&&(n=!1);var r=fC(t),i=fC(t)&&function(e){var t=e.getBoundingClientRect(),n=vC(t.width)/e.offsetWidth||1,r=vC(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),s=kC(t),o=bC(e,i,n),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!n)&&(("body"!==SC(t)||cN(s))&&(a=function(e){return e!==hC(e)&&fC(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:oN(e);var t}(t)),fC(t)?((c=bC(t,!0)).x+=t.clientLeft,c.y+=t.clientTop):s&&(c.x=aN(s))),{x:o.left+a.scrollLeft-c.x,y:o.top+a.scrollTop-c.y,width:o.width,height:o.height}}function EN(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function SN(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var xN={placement:"bottom",modifiers:[],strategy:"absolute"};function IN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function kN(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,s=void 0===i?xN:i;return function(e,t,n){void 0===n&&(n=s);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},xN,s),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],a=!1,c={state:i,setOptions:function(n){var a="function"===typeof n?n(i.options):n;l(),i.options=Object.assign({},s,i.options,a),i.scrollParents={reference:dC(e)?uN(e):e.contextElement?uN(e.contextElement):[],popper:uN(t)};var u=function(e){var t=EN(e);return QC.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=u.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,s=e.effect;if("function"===typeof s){var a=s({state:i,name:t,instance:c,options:r}),l=function(){};o.push(a||l)}})),c.update()},forceUpdate:function(){if(!a){var e=i.elements,t=e.reference,n=e.popper;if(IN(t,n)){i.rects={reference:_N(t,NC(n),"fixed"===i.options.strategy),popper:_C(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var s=i.orderedModifiers[r],o=s.fn,l=s.options,u=void 0===l?{}:l,h=s.name;"function"===typeof o&&(i=o({state:i,options:u,name:h,instance:c})||i)}else i.reset=!1,r=-1}}},update:SN((function(){return new Promise((function(e){c.forceUpdate(),e(i)}))})),destroy:function(){l(),a=!0}};if(!IN(e,t))return c;function l(){o.forEach((function(e){return e()})),o=[]}return c.setOptions(n).then((function(e){!a&&n.onFirstUpdate&&n.onFirstUpdate(e)})),c}}const TN=kN({defaultModifiers:[{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,o=mN(t,{elementContext:"reference"}),a=mN(t,{altBoundary:!0}),c=vN(o,r),l=vN(a,i,s),u=yN(c),h=yN(l);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=pN({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},ZC,tN,wN,gN,bN,$C]}),CN=["enabled","placement","strategy","modifiers"];const NN={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},AN={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:e=>{let{state:t}=e;return()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const t=(e.getAttribute("aria-describedby")||"").split(",").filter((e=>e.trim()!==n.id));t.length?e.setAttribute("aria-describedby",t.join(",")):e.removeAttribute("aria-describedby")}}},fn:e=>{let{state:t}=e;var n;const{popper:r,reference:i}=t.elements,s=null==(n=r.getAttribute("role"))?void 0:n.toLowerCase();if(r.id&&"tooltip"===s&&"setAttribute"in i){const e=i.getAttribute("aria-describedby");if(e&&-1!==e.split(",").indexOf(r.id))return;i.setAttribute("aria-describedby",e?"".concat(e,",").concat(r.id):r.id)}}},PN=[];const RN=function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{enabled:i=!0,placement:s="bottom",strategy:o="absolute",modifiers:a=PN}=r,c=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(r,CN);const l=(0,t.useRef)(a),u=(0,t.useRef)(),h=(0,t.useCallback)((()=>{var e;null==(e=u.current)||e.update()}),[]),d=(0,t.useCallback)((()=>{var e;null==(e=u.current)||e.forceUpdate()}),[]),[f,p]=lC((0,t.useState)({placement:s,update:h,forceUpdate:d,attributes:{},styles:{popper:{},arrow:{}}})),m=(0,t.useMemo)((()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:e=>{let{state:t}=e;const n={},r={};Object.keys(t.elements).forEach((e=>{n[e]=t.styles[e],r[e]=t.attributes[e]})),p({state:t,styles:n,attributes:r,update:h,forceUpdate:d,placement:t.placement})}})),[h,d,p]),g=(0,t.useMemo)((()=>(cC(l.current,a)||(l.current=a),l.current)),[a]);return(0,t.useEffect)((()=>{u.current&&i&&u.current.setOptions({placement:s,strategy:o,modifiers:[...g,m,NN]})}),[o,s,m,i,g]),(0,t.useEffect)((()=>{if(i&&null!=e&&null!=n)return u.current=TN(e,n,Object.assign({},c,{placement:s,strategy:o,modifiers:[...g,AN,m]})),()=>{null!=u.current&&(u.current.destroy(),u.current=void 0,p((e=>Object.assign({},e,{attributes:{},styles:{popper:{}}}))))}}),[i,e,n]),f},ON=!("undefined"===typeof window||!window.document||!window.document.createElement);var DN=!1,LN=!1;try{var MN={get passive(){return DN=!0},get once(){return LN=DN=!0}};ON&&(window.addEventListener("test",MN,MN),window.removeEventListener("test",MN,!0))}catch(BM){}const FN=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!LN){var i=r.once,s=r.capture,o=n;!LN&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,s),n.call(this,r)},n.__once=o),e.addEventListener(t,o,DN?r:s)}e.addEventListener(t,n,r)};const jN=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};const UN=function(e,t,n,r){return FN(e,t,n,r),function(){jN(e,t,n,r)}};function VN(e){return e&&e.ownerDocument||document}const BN=function(e){const n=(0,t.useRef)(e);return(0,t.useEffect)((()=>{n.current=e}),[e]),n};function zN(e){const n=BN(e);return(0,t.useCallback)((function(){return n.current&&n.current(...arguments)}),[n])}const qN=()=>{};const WN=e=>e&&("current"in e?e.current:e),KN={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};const HN=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qN,{disabled:r,clickTrigger:i="click"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(0,t.useRef)(!1),o=(0,t.useRef)(!1),a=(0,t.useCallback)((t=>{const n=WN(e);var r;QT()(!!n,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),s.current=!n||!!((r=t).metaKey||r.altKey||r.ctrlKey||r.shiftKey)||!function(e){return 0===e.button}(t)||!!BT(n,t.target)||o.current,o.current=!1}),[e]),c=zN((t=>{const n=WN(e);n&&BT(n,t.target)&&(o.current=!0)})),l=zN((e=>{s.current||n(e)}));(0,t.useEffect)((()=>{var t,n;if(r||null==e)return;const s=VN(WN(e)),o=s.defaultView||window;let u=null!=(t=o.event)?t:null==(n=o.parent)?void 0:n.event,h=null;KN[i]&&(h=UN(s,KN[i],c,!0));const d=UN(s,i,a,!0),f=UN(s,i,(e=>{e!==u?l(e):u=void 0}));let p=[];return"ontouchstart"in s.documentElement&&(p=[].slice.call(s.body.children).map((e=>UN(e,"mousemove",qN)))),()=>{null==h||h(),d(),f(),p.forEach((e=>e()))}}),[e,r,i,a,c,l])};function GN(e){return"Escape"===e.code||27===e.keyCode}const QN=()=>{};const $N=function(e,n){let{disabled:r,clickTrigger:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=n||QN;HN(e,s,{disabled:r,clickTrigger:i});const o=zN((e=>{GN(e)&&s(e)}));(0,t.useEffect)((()=>{if(r||null==e)return;const t=VN(WN(e));let n=(t.defaultView||window).event;const i=UN(t,"keyup",(e=>{e!==n?o(e):n=void 0}));return()=>{i()}}),[e,r,o])},YN=(0,t.createContext)(ON?window:void 0);YN.Provider;function JN(){return(0,t.useContext)(YN)}const XN=(e,t)=>ON?null==e?(t||VN()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function ZN(e,n){const r=JN(),[i,s]=(0,t.useState)((()=>XN(e,null==r?void 0:r.document)));if(!i){const t=XN(e);t&&s(t)}return(0,t.useEffect)((()=>{n&&i&&n(i)}),[n,i]),(0,t.useEffect)((()=>{const t=XN(e);t!==i&&s(t)}),[e,i]),i}function eA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(e)?e:Object.keys(e).map((t=>(e[t].name=t,e[t])))}function tA(e){let{enabled:t,enableEvents:n,placement:r,flip:i,offset:s,fixed:o,containerPadding:a,arrowElement:c,popperConfig:l={}}=e;var u,h,d,f,p;const m=function(e){const t={};return Array.isArray(e)?(null==e||e.forEach((e=>{t[e.name]=e})),t):e||t}(l.modifiers);return Object.assign({},l,{placement:r,enabled:t,strategy:o?"fixed":l.strategy,modifiers:eA(Object.assign({},m,{eventListeners:{enabled:n,options:null==(u=m.eventListeners)?void 0:u.options},preventOverflow:Object.assign({},m.preventOverflow,{options:a?Object.assign({padding:a},null==(h=m.preventOverflow)?void 0:h.options):null==(d=m.preventOverflow)?void 0:d.options}),offset:{options:Object.assign({offset:s},null==(f=m.offset)?void 0:f.options)},arrow:Object.assign({},m.arrow,{enabled:!!c,options:Object.assign({},null==(p=m.arrow)?void 0:p.options,{element:c})}),flip:Object.assign({enabled:!!i},m.flip)}))})}const nA="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,rA="undefined"!==typeof document||nA?t.useLayoutEffect:t.useEffect;const iA=function(e){let{children:n,in:r,onExited:i,mountOnEnter:s,unmountOnExit:o}=e;const a=(0,t.useRef)(null),c=(0,t.useRef)(r),l=zN(i);(0,t.useEffect)((()=>{r?c.current=!0:l(a.current)}),[r,l]);const u=nC(a,n.ref),h=(0,t.cloneElement)(n,{ref:u});return r?h:o||!c.current&&s?null:h};function sA(e){let{children:n,in:r,onExited:i,onEntered:s,transition:o}=e;const[a,c]=(0,t.useState)(!r);r&&a&&c(!1);const l=function(e){let{in:n,onTransition:r}=e;const i=(0,t.useRef)(null),s=(0,t.useRef)(!0),o=zN(r);return rA((()=>{if(!i.current)return;let e=!1;return o({in:n,element:i.current,initial:s.current,isStale:()=>e}),()=>{e=!0}}),[n,o]),rA((()=>(s.current=!1,()=>{s.current=!0})),[]),i}({in:!!r,onTransition:e=>{Promise.resolve(o(e)).then((()=>{e.isStale()||(e.in?null==s||s(e.element,e.initial):(c(!0),null==i||i(e.element)))}),(t=>{throw e.in||c(!0),t}))}}),u=nC(l,n.ref);return a&&!r?null:(0,t.cloneElement)(n,{ref:u})}function oA(e,t,n){return e?(0,lr.jsx)(e,Object.assign({},n)):t?(0,lr.jsx)(sA,Object.assign({},n,{transition:t})):(0,lr.jsx)(iA,Object.assign({},n))}const aA=t.forwardRef(((e,n)=>{const{flip:i,offset:s,placement:o,containerPadding:a,popperConfig:c={},transition:l,runTransition:u}=e,[h,d]=sC(),[f,p]=sC(),m=nC(d,n),g=ZN(e.container),v=ZN(e.target),[y,w]=(0,t.useState)(!e.show),b=RN(v,h,tA({placement:o,enableEvents:!!e.show,containerPadding:a||5,flip:i,offset:s,arrowElement:f,popperConfig:c}));e.show&&y&&w(!1);const _=e.show||!y;if($N(h,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!_)return null;const{onExit:E,onExiting:S,onEnter:x,onEntering:I,onEntered:k}=e;let T=e.children(Object.assign({},b.attributes.popper,{style:b.styles.popper,ref:m}),{popper:b,placement:o,show:!!e.show,arrowProps:Object.assign({},b.attributes.arrow,{style:b.styles.arrow,ref:p})});return T=oA(l,u,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:T,onExit:E,onExiting:S,onExited:function(){w(!0),e.onExited&&e.onExited(...arguments)},onEnter:x,onEntering:I,onEntered:k}),g?r.createPortal(T,g):null}));aA.displayName="Overlay";const cA=aA;function lA(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}const uA=["xxl","xl","lg","md","sm","xs"],hA="xs",dA=t.createContext({prefixes:{},breakpoints:uA,minBreakpoint:hA}),{Consumer:fA,Provider:pA}=dA;function mA(e,n){const{prefixes:r}=(0,t.useContext)(dA);return e||r[n]||n}function gA(){const{dir:e}=(0,t.useContext)(dA);return"rtl"===e}const vA=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=mA(r,"popover-header"),(0,lr.jsx)(i,{ref:t,className:iC()(n,r),...s})}));vA.displayName="PopoverHeader";const yA=vA,wA=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=mA(r,"popover-body"),(0,lr.jsx)(i,{ref:t,className:iC()(n,r),...s})}));wA.displayName="PopoverBody";const bA=wA;t.Component;function _A(e,t){let n=e;return"left"===e?n=t?"end":"start":"right"===e&&(n=t?"start":"end"),n}function EA(){return{position:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"absolute",top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const SA=t.forwardRef(((e,t)=>{let{bsPrefix:n,placement:r="right",className:i,style:s,children:o,body:a,arrowProps:c,hasDoneInitialMeasure:l,popper:u,show:h,...d}=e;const f=mA(n,"popover"),p=gA(),[m]=(null==r?void 0:r.split("-"))||[],g=_A(m,p);let v=s;return h&&!l&&(v={...s,...EA(null==u?void 0:u.strategy)}),(0,lr.jsxs)("div",{ref:t,role:"tooltip",style:v,"x-placement":m,className:iC()(i,f,m&&"bs-popover-".concat(g)),...d,children:[(0,lr.jsx)("div",{className:"popover-arrow",...c}),a?(0,lr.jsx)(bA,{children:o}):o]})})),xA=Object.assign(SA,{Header:yA,Body:bA,POPPER_OFFSET:[0,8]}),IA=t.forwardRef(((e,t)=>{let{bsPrefix:n,placement:r="right",className:i,style:s,children:o,arrowProps:a,hasDoneInitialMeasure:c,popper:l,show:u,...h}=e;n=mA(n,"tooltip");const d=gA(),[f]=(null==r?void 0:r.split("-"))||[],p=_A(f,d);let m=s;return u&&!c&&(m={...s,...EA(null==l?void 0:l.strategy)}),(0,lr.jsxs)("div",{ref:t,style:m,role:"tooltip","x-placement":f,className:iC()(i,n,"bs-tooltip-".concat(p)),...h,children:[(0,lr.jsx)("div",{className:"tooltip-arrow",...a}),(0,lr.jsx)("div",{className:"".concat(n,"-inner"),children:o})]})}));IA.displayName="Tooltip";const kA=Object.assign(IA,{TOOLTIP_OFFSET:[0,6]});const TA=!1,CA=t.createContext(null);var NA="unmounted",AA="exited",PA="entering",RA="entered",OA="exiting",DA=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var i,s=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?s?(i=AA,r.appearStatus=PA):i=RA:i=t.unmountOnExit||t.mountOnEnter?NA:AA,r.state={status:i},r.nextCallback=null,r}s(n,e),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===NA?{status:AA}:null};var i=n.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==PA&&n!==RA&&(t=PA):n!==PA&&n!==RA||(t=OA)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},i.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===PA){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===AA&&this.setState({status:NA})},i.performEnter=function(e){var t=this,n=this.props.enter,i=this.context?this.context.isMounting:e,s=this.props.nodeRef?[i]:[r.findDOMNode(this),i],o=s[0],a=s[1],c=this.getTimeouts(),l=i?c.appear:c.enter;!e&&!n||TA?this.safeSetState({status:RA},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:PA},(function(){t.props.onEntering(o,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:RA},(function(){t.props.onEntered(o,a)}))}))})))},i.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:r.findDOMNode(this);t&&!TA?(this.props.onExit(i),this.safeSetState({status:OA},(function(){e.props.onExiting(i),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:AA},(function(){e.props.onExited(i)}))}))}))):this.safeSetState({status:AA},(function(){e.props.onExited(i)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},i.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this),i=null==e&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var s=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=s[0],a=s[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===NA)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,F(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(CA.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},n}(t.Component);function LA(){}DA.contextType=CA,DA.propTypes={},DA.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:LA,onEntering:LA,onEntered:LA,onExit:LA,onExiting:LA,onExited:LA},DA.UNMOUNTED=NA,DA.EXITED=AA,DA.ENTERING=PA,DA.ENTERED=RA,DA.EXITING=OA;const MA=DA;function FA(e,t){return function(e){var t=VN(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var jA=/([A-Z])/g;var UA=/^ms-/;function VA(e){return function(e){return e.replace(jA,"-$1").toLowerCase()}(e).replace(UA,"-ms-")}var BA=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const zA=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(VA(t))||FA(e).getPropertyValue(VA(t));Object.keys(t).forEach((function(i){var s=t[i];s||0===s?!function(e){return!(!e||!BA.test(e))}(i)?n+=VA(i)+": "+s+";":r+=i+"("+s+") ":e.style.removeProperty(VA(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};function qA(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),s=UN(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),s()}}function WA(e,t,n,r){null==n&&(n=function(e){var t=zA(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=qA(e,n,r),s=UN(e,"transitionend",t);return function(){i(),s()}}function KA(e,t){const n=zA(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function HA(e,t){const n=KA(e,"transitionDuration"),r=KA(e,"transitionDelay"),i=WA(e,(n=>{n.target===e&&(i(),t(n))}),n+r)}function GA(e){return e&&"setState"in e?r.findDOMNode(e):null!=e?e:null}const QA=t.forwardRef(((e,n)=>{let{onEnter:r,onEntering:i,onEntered:s,onExit:o,onExiting:a,onExited:c,addEndListener:l,children:u,childRef:h,...d}=e;const f=(0,t.useRef)(null),p=nC(f,h),m=e=>{p(GA(e))},g=e=>t=>{e&&f.current&&e(f.current,t)},v=(0,t.useCallback)(g(r),[r]),y=(0,t.useCallback)(g(i),[i]),w=(0,t.useCallback)(g(s),[s]),b=(0,t.useCallback)(g(o),[o]),_=(0,t.useCallback)(g(a),[a]),E=(0,t.useCallback)(g(c),[c]),S=(0,t.useCallback)(g(l),[l]);return(0,lr.jsx)(MA,{ref:n,...d,onEnter:v,onEntered:w,onEntering:y,onExit:b,onExited:E,onExiting:_,addEndListener:S,nodeRef:f,children:"function"===typeof u?(e,t)=>u(e,{...t,ref:m}):t.cloneElement(u,{ref:m})})})),$A=QA,YA={[PA]:"show",[RA]:"show"},JA=t.forwardRef(((e,n)=>{let{className:r,children:i,transitionClasses:s={},onEnter:o,...a}=e;const c={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},l=(0,t.useCallback)(((e,t)=>{!function(e){e.offsetHeight}(e),null==o||o(e,t)}),[o]);return(0,lr.jsx)($A,{ref:n,addEndListener:HA,...c,onEnter:l,childRef:i.ref,children:(e,n)=>t.cloneElement(i,{...n,className:iC()("fade",r,i.props.className,YA[e],s[e])})})}));JA.displayName="Fade";const XA=JA;const ZA=t.forwardRef(((e,n)=>{let{children:r,transition:i=XA,popperConfig:s={},rootClose:o=!1,placement:a="top",show:c=!1,...l}=e;const u=(0,t.useRef)({}),[h,d]=(0,t.useState)(null),[f,p]=function(e){const n=(0,t.useRef)(null),r=mA(void 0,"popover"),i=mA(void 0,"tooltip"),s=(0,t.useMemo)((()=>({name:"offset",options:{offset:()=>{if(e)return e;if(n.current){if(lA(n.current,r))return xA.POPPER_OFFSET;if(lA(n.current,i))return kA.TOOLTIP_OFFSET}return[0,0]}}})),[e,r,i]);return[n,[s]]}(l.offset),m=nC(n,f),g=!0===i?XA:i||void 0,v=zN((e=>{d(e),null==s||null==s.onFirstUpdate||s.onFirstUpdate(e)}));return rA((()=>{h&&l.target&&(null==u.current.scheduleUpdate||u.current.scheduleUpdate())}),[h,l.target]),(0,t.useEffect)((()=>{c||d(null)}),[c]),(0,lr.jsx)(cA,{...l,ref:m,popperConfig:{...s,modifiers:p.concat(s.modifiers||[]),onFirstUpdate:v},transition:g,rootClose:o,placement:a,show:c,children:(e,n)=>{let{arrowProps:o,popper:a,show:c}=n;var l,d;!function(e,t){const{ref:n}=e,{ref:r}=t;e.ref=n.__wrapped||(n.__wrapped=e=>n(GA(e))),t.ref=r.__wrapped||(r.__wrapped=e=>r(GA(e)))}(e,o);const f=null==a?void 0:a.placement,p=Object.assign(u.current,{state:null==a?void 0:a.state,scheduleUpdate:null==a?void 0:a.update,placement:f,outOfBoundaries:(null==a||null==(l=a.state)||null==(d=l.modifiersData.hide)?void 0:d.isReferenceHidden)||!1,strategy:s.strategy}),m=!!h;return"function"===typeof r?r({...e,placement:f,show:c,...!i&&c&&{className:"show"},popper:p,arrowProps:o,hasDoneInitialMeasure:m}):t.cloneElement(r,{...e,placement:f,arrowProps:o,popper:p,hasDoneInitialMeasure:m,className:iC()(r.props.className,!i&&c&&"show"),style:{...r.props.style,...e.style}})}})}));ZA.displayName="Overlay";const eP=ZA;function tP(e,t,n){const[r]=t,i=r.currentTarget,s=r.relatedTarget||r.nativeEvent[n];s&&s===i||BT(i,s)||e(...t)}a().oneOf(["click","hover","focus"]);const nP=e=>{let{trigger:n=["hover","focus"],overlay:r,children:i,popperConfig:s={},show:o,defaultShow:a=!1,onToggle:c,delay:l,placement:u,flip:h=u&&-1!==u.indexOf("auto"),...d}=e;const f=(0,t.useRef)(null),p=nC(f,i.ref),m=HT(),g=(0,t.useRef)(""),[v,y]=JT(o,a,c),w=function(e){return e&&"object"===typeof e?e:{show:e,hide:e}}(l),{onFocus:b,onBlur:_,onClick:E}="function"!==typeof i?t.Children.only(i).props:{},S=(0,t.useCallback)((()=>{m.clear(),g.current="show",w.show?m.set((()=>{"show"===g.current&&y(!0)}),w.show):y(!0)}),[w.show,y,m]),x=(0,t.useCallback)((()=>{m.clear(),g.current="hide",w.hide?m.set((()=>{"hide"===g.current&&y(!1)}),w.hide):y(!1)}),[w.hide,y,m]),I=(0,t.useCallback)((function(){S(),null==b||b(...arguments)}),[S,b]),k=(0,t.useCallback)((function(){x(),null==_||_(...arguments)}),[x,_]),T=(0,t.useCallback)((function(){y(!v),null==E||E(...arguments)}),[E,y,v]),C=(0,t.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];tP(S,t,"fromElement")}),[S]),N=(0,t.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];tP(x,t,"toElement")}),[x]),A=null==n?[]:[].concat(n),P={ref:e=>{p(GA(e))}};return-1!==A.indexOf("click")&&(P.onClick=T),-1!==A.indexOf("focus")&&(P.onFocus=I,P.onBlur=k),-1!==A.indexOf("hover")&&(P.onMouseOver=C,P.onMouseOut=N),(0,lr.jsxs)(lr.Fragment,{children:["function"===typeof i?i(P):(0,t.cloneElement)(i,P),(0,lr.jsx)(eP,{...d,show:v,onHide:x,flip:h,placement:u,popperConfig:s,target:f.current,children:r})]})},rP=t.forwardRef(((e,t)=>{let{bsPrefix:n,variant:r,animation:i="border",size:s,as:o="div",className:a,...c}=e;n=mA(n,"spinner");const l="".concat(n,"-").concat(i);return(0,lr.jsx)(o,{ref:t,...c,className:iC()(a,l,s&&"".concat(l,"-").concat(s),r&&"text-".concat(r))})}));rP.displayName="Spinner";const iP=rP,sP={[PA]:"showing",[OA]:"showing show"},oP=t.forwardRef(((e,t)=>(0,lr.jsx)(XA,{...e,ref:t,transitionClasses:sP})));oP.displayName="ToastFade";const aP=oP,cP={"aria-label":a().string,onClick:a().func,variant:a().oneOf(["white"])},lP=t.forwardRef(((e,t)=>{let{className:n,variant:r,"aria-label":i="Close",...s}=e;return(0,lr.jsx)("button",{ref:t,type:"button",className:iC()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":i,...s})}));lP.displayName="CloseButton",lP.propTypes=cP;const uP=lP,hP=t.createContext({onClose(){}}),dP=t.forwardRef(((e,n)=>{let{bsPrefix:r,closeLabel:i="Close",closeVariant:s,closeButton:o=!0,className:a,children:c,...l}=e;r=mA(r,"toast-header");const u=(0,t.useContext)(hP),h=zN((e=>{null==u||null==u.onClose||u.onClose(e)}));return(0,lr.jsxs)("div",{ref:n,...l,className:iC()(r,a),children:[c,o&&(0,lr.jsx)(uP,{"aria-label":i,variant:s,onClick:h,"data-dismiss":"toast"})]})}));dP.displayName="ToastHeader";const fP=dP,pP=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=mA(r,"toast-body"),(0,lr.jsx)(i,{ref:t,className:iC()(n,r),...s})}));pP.displayName="ToastBody";const mP=pP,gP=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:i,transition:s=aP,show:o=!0,animation:a=!0,delay:c=5e3,autohide:l=!1,onClose:u,onEntered:h,onExit:d,onExiting:f,onEnter:p,onEntering:m,onExited:g,bg:v,...y}=e;r=mA(r,"toast");const w=(0,t.useRef)(c),b=(0,t.useRef)(u);(0,t.useEffect)((()=>{w.current=c,b.current=u}),[c,u]);const _=HT(),E=!(!l||!o),S=(0,t.useCallback)((()=>{E&&(null==b.current||b.current())}),[E]);(0,t.useEffect)((()=>{_.set(S,w.current)}),[_,S]);const x=(0,t.useMemo)((()=>({onClose:u})),[u]),I=!(!s||!a),k=(0,lr.jsx)("div",{...y,ref:n,className:iC()(r,i,v&&"bg-".concat(v),!I&&(o?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return(0,lr.jsx)(hP.Provider,{value:x,children:I&&s?(0,lr.jsx)(s,{in:o,onEnter:p,onEntering:m,onEntered:h,onExit:d,onExiting:f,onExited:g,unmountOnExit:!0,children:k}):k})}));gP.displayName="Toast";const vP=Object.assign(gP,{Body:mP,Header:fP}),yP={baseUrl:"https://gutendex.com/books/"};function wP(e){let t="";return e.forEach((function(n,r){r<2&&(n=n.replace(/--/g,""),r+1===e.length||r+1===2?t+=n:t=t+n+"; ")})),t}function bP(e){let t="";return t=e.map((function(n,r){const i=(n.name.match(/,/g)||[]).length;if(n.name.includes("(")||n.name.includes(")")||1!==i)t=n.name;else{let i=n.name.split(", ");t=r+1===e.length?i[1]+" "+i[0]:i[1]+" "+i[0]+", "}return t})),t}function _P(){const e=Math.floor(100*Math.random())+155,t=Math.floor(100*Math.random())+155,n=Math.floor(100*Math.random())+155;return"rgb(".concat(e,",").concat(t,",").concat(n,")")}var EP;const SP=ar.button(EP||(EP=me(['\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    width: 50px;\n    height: 50px;\n    border: none;\n    border-radius: 100%;\n    padding: 10px;\n    margin: 20px 15px;\n    box-shadow: 0 12px 16px rgba(0,0,0,0.4);\n    background-color: #ffffff;\n    color: #222222;\n    cursor: pointer;\n    transition: all 0.3s ease 0s;\n    position: relative; /*To properly place ripple for button feedback on active state*/\n\n    /*Styles when button is hovered*/\n    &:hover{\n       box-shadow: 0 3px 8px rgba(0,0,0,0.2);\n       background-color: #f2f2f2;\n    }\n\n    /*Styles when button is focused*/\n    &:focus{\n        outline: none;\n    }\n\n    /*Styles when button is active*/\n    &:active::after{\n        content: "";\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0,0,0,0.1);\n        border-radius: 100%;\n        transform: translate(-50%, -50%) scale(0); /*Starts scale from middle of button*/\n        animation: ripple 0.6s linear; /*Ripple effect when button is clicked/active state*/\n    }\n\n    /*Ripple effect animation*/\n    @keyframes ripple {\n     to {\n       transform: translate(-50%, -50%) scale(2); /*Ends scale covering button*/\n       opacity: 0;\n     }\n    }\n'])));var xP;function IP(e){if((!xP&&0!==xP||e)&&ON){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),xP=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return xP}function kP(e){void 0===e&&(e=VN());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(BM){return e.body}}function TP(e){const n=(0,t.useRef)(null);return(0,t.useEffect)((()=>{n.current=e})),n.current}const CP="data-rr-ui-";function NP(e){return"".concat(CP).concat(e)}const AP=NP("modal-open");const PP=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]="".concat(parseInt(zA(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(AP,""),zA(r,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(AP),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},RP=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let OP;function DP(e){const n=JN(),r=e||function(e){return OP||(OP=new PP({ownerDocument:null==e?void 0:e.document})),OP}(n),i=(0,t.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>r.add(i.current),remove:()=>r.remove(i.current),isTopModal:()=>r.isTopModal(i.current),setDialogRef:(0,t.useCallback)((e=>{i.current.dialog=e}),[]),setBackdropRef:(0,t.useCallback)((e=>{i.current.backdrop=e}),[])})}const LP=(0,t.forwardRef)(((e,n)=>{let{show:i=!1,role:s="dialog",className:o,style:a,children:c,backdrop:l=!0,keyboard:u=!0,onBackdropClick:h,onEscapeKeyDown:d,transition:f,runTransition:p,backdropTransition:m,runBackdropTransition:g,autoFocus:v=!0,enforceFocus:y=!0,restoreFocus:w=!0,restoreFocusOptions:b,renderDialog:_,renderBackdrop:E=(e=>(0,lr.jsx)("div",Object.assign({},e))),manager:S,container:x,onShow:I,onHide:k=(()=>{}),onExit:T,onExited:C,onExiting:N,onEnter:A,onEntering:P,onEntered:R}=e,O=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,RP);const D=JN(),L=ZN(x),M=DP(S),F=zT(),j=TP(i),[U,V]=(0,t.useState)(!i),B=(0,t.useRef)(null);(0,t.useImperativeHandle)(n,(()=>M),[M]),ON&&!j&&i&&(B.current=kP(null==D?void 0:D.document)),i&&U&&V(!1);const z=zN((()=>{if(M.add(),Q.current=UN(document,"keydown",H),G.current=UN(document,"focus",(()=>setTimeout(W)),!0),I&&I(),v){var e,t;const n=kP(null!=(e=null==(t=M.dialog)?void 0:t.ownerDocument)?e:null==D?void 0:D.document);M.dialog&&n&&!BT(M.dialog,n)&&(B.current=n,M.dialog.focus())}})),q=zN((()=>{var e;(M.remove(),null==Q.current||Q.current(),null==G.current||G.current(),w)&&(null==(e=B.current)||null==e.focus||e.focus(b),B.current=null)}));(0,t.useEffect)((()=>{i&&L&&z()}),[i,L,z]),(0,t.useEffect)((()=>{U&&q()}),[U,q]),qT((()=>{q()}));const W=zN((()=>{if(!y||!F()||!M.isTopModal())return;const e=kP(null==D?void 0:D.document);M.dialog&&e&&!BT(M.dialog,e)&&M.dialog.focus()})),K=zN((e=>{e.target===e.currentTarget&&(null==h||h(e),!0===l&&k())})),H=zN((e=>{u&&GN(e)&&M.isTopModal()&&(null==d||d(e),e.defaultPrevented||k())})),G=(0,t.useRef)(),Q=(0,t.useRef)();if(!L)return null;const $=Object.assign({role:s,ref:M.setDialogRef,"aria-modal":"dialog"===s||void 0},O,{style:a,className:o,tabIndex:-1});let Y=_?_($):(0,lr.jsx)("div",Object.assign({},$,{children:t.cloneElement(c,{role:"document"})}));Y=oA(f,p,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!i,onExit:T,onExiting:N,onExited:function(){V(!0),null==C||C(...arguments)},onEnter:A,onEntering:P,onEntered:R,children:Y});let J=null;return l&&(J=E({ref:M.setBackdropRef,onClick:K}),J=oA(m,g,{in:!!i,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:J})),(0,lr.jsx)(lr.Fragment,{children:r.createPortal((0,lr.jsxs)(lr.Fragment,{children:[J,Y]}),L)})}));LP.displayName="Modal";const MP=Object.assign(LP,{Manager:PP});var FP=Function.prototype.bind.call(Function.prototype.call,[].slice);function jP(e,t){return FP(e.querySelectorAll(t))}function UP(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const VP=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",BP=".sticky-top",zP=".navbar-toggler";class qP extends PP{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,zA(t,{[e]:"".concat(parseFloat(zA(t,e))+n,"px")})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],zA(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,r;if(r="modal-open",(n=t).classList?n.classList.add(r):lA(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";jP(t,VP).forEach((t=>this.adjustAndStore(i,t,e.scrollBarWidth))),jP(t,BP).forEach((t=>this.adjustAndStore(s,t,-e.scrollBarWidth))),jP(t,zP).forEach((t=>this.adjustAndStore(s,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,r;r="modal-open",(n=t).classList?n.classList.remove(r):"string"===typeof n.className?n.className=UP(n.className,r):n.setAttribute("class",UP(n.className&&n.className.baseVal||"",r));const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";jP(t,VP).forEach((e=>this.restore(i,e))),jP(t,BP).forEach((e=>this.restore(s,e))),jP(t,zP).forEach((e=>this.restore(s,e)))}}let WP;const KP=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=mA(r,"modal-body"),(0,lr.jsx)(i,{ref:t,className:iC()(n,r),...s})}));KP.displayName="ModalBody";const HP=KP,GP=t.createContext({onHide(){}}),QP=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,contentClassName:i,centered:s,size:o,fullscreen:a,children:c,scrollable:l,...u}=e;n=mA(n,"modal");const h="".concat(n,"-dialog"),d="string"===typeof a?"".concat(n,"-fullscreen-").concat(a):"".concat(n,"-fullscreen");return(0,lr.jsx)("div",{...u,ref:t,className:iC()(h,r,o&&"".concat(n,"-").concat(o),s&&"".concat(h,"-centered"),l&&"".concat(h,"-scrollable"),a&&d),children:(0,lr.jsx)("div",{className:iC()("".concat(n,"-content"),i),children:c})})}));QP.displayName="ModalDialog";const $P=QP,YP=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=mA(r,"modal-footer"),(0,lr.jsx)(i,{ref:t,className:iC()(n,r),...s})}));YP.displayName="ModalFooter";const JP=YP,XP=t.forwardRef(((e,n)=>{let{closeLabel:r="Close",closeVariant:i,closeButton:s=!1,onHide:o,children:a,...c}=e;const l=(0,t.useContext)(GP),u=zN((()=>{null==l||l.onHide(),null==o||o()}));return(0,lr.jsxs)("div",{ref:n,...c,children:[a,s&&(0,lr.jsx)(uP,{"aria-label":r,variant:i,onClick:u})]})})),ZP=XP,eR=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:s=!1,...o}=e;return n=mA(n,"modal-header"),(0,lr.jsx)(ZP,{ref:t,...o,className:iC()(r,n),closeLabel:i,closeButton:s})}));eR.displayName="ModalHeader";const tR=eR,nR=(rR="h4",t.forwardRef(((e,t)=>(0,lr.jsx)("div",{...e,ref:t,className:iC()(e.className,rR)}))));var rR;const iR=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=nR,...s}=e;return r=mA(r,"modal-title"),(0,lr.jsx)(i,{ref:t,className:iC()(n,r),...s})}));iR.displayName="ModalTitle";const sR=iR;function oR(e){return(0,lr.jsx)(XA,{...e,timeout:null})}function aR(e){return(0,lr.jsx)(XA,{...e,timeout:null})}const cR=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:i,style:s,dialogClassName:o,contentClassName:a,children:c,dialogAs:l=$P,"data-bs-theme":u,"aria-labelledby":h,"aria-describedby":d,"aria-label":f,show:p=!1,animation:m=!0,backdrop:g=!0,keyboard:v=!0,onEscapeKeyDown:y,onShow:w,onHide:b,container:_,autoFocus:E=!0,enforceFocus:S=!0,restoreFocus:x=!0,restoreFocusOptions:I,onEntered:k,onExit:T,onExiting:C,onEnter:N,onEntering:A,onExited:P,backdropClassName:R,manager:O,...D}=e;const[L,M]=(0,t.useState)({}),[F,j]=(0,t.useState)(!1),U=(0,t.useRef)(!1),V=(0,t.useRef)(!1),B=(0,t.useRef)(null),[z,q]=sC(),W=nC(n,q),K=zN(b),H=gA();r=mA(r,"modal");const G=(0,t.useMemo)((()=>({onHide:K})),[K]);function Q(){return O||function(e){return WP||(WP=new qP(e)),WP}({isRTL:H})}function $(e){if(!ON)return;const t=Q().getScrollbarWidth()>0,n=e.scrollHeight>VN(e).documentElement.clientHeight;M({paddingRight:t&&!n?IP():void 0,paddingLeft:!t&&n?IP():void 0})}const Y=zN((()=>{z&&$(z.dialog)}));qT((()=>{jN(window,"resize",Y),null==B.current||B.current()}));const J=()=>{U.current=!0},X=e=>{U.current&&z&&e.target===z.dialog&&(V.current=!0),U.current=!1},Z=()=>{j(!0),B.current=WA(z.dialog,(()=>{j(!1)}))},ee=e=>{"static"!==g?V.current||e.target!==e.currentTarget?V.current=!1:null==b||b():(e=>{e.target===e.currentTarget&&Z()})(e)},te=(0,t.useCallback)((e=>(0,lr.jsx)("div",{...e,className:iC()("".concat(r,"-backdrop"),R,!m&&"show")})),[m,R,r]),ne={...s,...L};ne.display="block";return(0,lr.jsx)(GP.Provider,{value:G,children:(0,lr.jsx)(MP,{show:p,ref:W,backdrop:g,container:_,keyboard:!0,autoFocus:E,enforceFocus:S,restoreFocus:x,restoreFocusOptions:I,onEscapeKeyDown:e=>{v?null==y||y(e):(e.preventDefault(),"static"===g&&Z())},onShow:w,onHide:b,onEnter:(e,t)=>{e&&$(e),null==N||N(e,t)},onEntering:(e,t)=>{null==A||A(e,t),FN(window,"resize",Y)},onEntered:k,onExit:e=>{null==B.current||B.current(),null==T||T(e)},onExiting:C,onExited:e=>{e&&(e.style.display=""),null==P||P(e),jN(window,"resize",Y)},manager:Q(),transition:m?oR:void 0,backdropTransition:m?aR:void 0,renderBackdrop:te,renderDialog:e=>(0,lr.jsx)("div",{role:"dialog",...e,style:ne,className:iC()(i,r,F&&"".concat(r,"-static"),!m&&"show"),onClick:g?ee:void 0,onMouseUp:X,"data-bs-theme":u,"aria-label":f,"aria-labelledby":h,"aria-describedby":d,children:(0,lr.jsx)(l,{...D,onMouseDown:J,className:o,contentClassName:a,children:c})})})})}));cR.displayName="Modal";const lR=Object.assign(cR,{Body:HP,Header:tR,Title:sR,Footer:JP,Dialog:$P,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});function uR(e,n,r){const i=(0,t.useRef)(void 0!==e),[s,o]=(0,t.useState)(n),a=void 0!==e,c=i.current;return i.current=a,!a&&c&&s!==n&&o(n),[a?e:s,(0,t.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[i,...s]=t;let a=null==r?void 0:r(i,...s);return o(i),a}),[r])]}const hR=t.createContext(null),dR=["children"];const fR=()=>{};function pR(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,t.useContext)(hR),[r,i]=sC(),s=(0,t.useRef)(!1),{flip:o,offset:a,rootCloseEvent:c,fixed:l=!1,placement:u,popperConfig:h={},enableEventListeners:d=!0,usePopper:f=!!n}=e,p=null==(null==n?void 0:n.show)?!!e.show:n.show;p&&!s.current&&(s.current=!0);const{placement:m,setMenu:g,menuElement:v,toggleElement:y}=n||{},w=RN(y,v,tA({placement:u||m||"bottom-start",enabled:f,enableEvents:null==d?p:d,offset:a,flip:o,fixed:l,arrowElement:r,popperConfig:h})),b=Object.assign({ref:g||fR,"aria-labelledby":null==y?void 0:y.id},w.attributes.popper,{style:w.styles.popper}),_={show:p,placement:m,hasShown:s.current,toggle:null==n?void 0:n.toggle,popper:f?w:null,arrowProps:f?Object.assign({ref:i},w.attributes.arrow,{style:w.styles.arrow}):{}};return HN(v,(e=>{null==n||n.toggle(!1,e)}),{clickTrigger:c,disabled:!p}),[b,_]}function mR(e){let{children:t}=e,n=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,dR);const[r,i]=pR(n);return(0,lr.jsx)(lr.Fragment,{children:t(r,i)})}mR.displayName="DropdownMenu",mR.defaultProps={usePopper:!0};const gR=mR,vR={prefix:String(Math.round(1e10*Math.random())),current:0},yR=t.createContext(vR),wR=t.createContext(!1);let bR=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement),_R=new WeakMap;function ER(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,t.useContext)(yR),r=(0,t.useRef)(null);if(null===r.current&&!e){var i,s;let e=null===(s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===s||null===(i=s.ReactCurrentOwner)||void 0===i?void 0:i.current;if(e){let t=_R.get(e);null==t?_R.set(e,{id:n.current,state:e.memoizedState}):e.memoizedState!==t.state&&(n.current=t.id,_R.delete(e))}r.current=++n.current}return r.current}const SR="function"===typeof t.useId?function(e){let n=t.useId(),[r]=(0,t.useState)("function"===typeof t.useSyncExternalStore?t.useSyncExternalStore(kR,xR,IR):(0,t.useContext)(wR)),i=r?"react-aria":"react-aria".concat(vR.prefix);return e||"".concat(i,"-").concat(n)}:function(e){let n=(0,t.useContext)(yR);n!==vR||bR||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let r=ER(!!e),i="react-aria".concat(n.prefix);return e||"".concat(i,"-").concat(r)};function xR(){return!1}function IR(){return!0}function kR(e){return()=>{}}const TR=e=>{var t;return"menu"===(null==(t=e.getAttribute("role"))?void 0:t.toLowerCase())},CR=()=>{};function NR(){const e=SR(),{show:n=!1,toggle:r=CR,setToggle:i,menuElement:s}=(0,t.useContext)(hR)||{},o=(0,t.useCallback)((e=>{r(!n,e)}),[n,r]),a={id:e,ref:i||CR,onClick:o,"aria-expanded":!!n};return s&&TR(s)&&(a["aria-haspopup"]=!0),[a,{show:n,toggle:r}]}function AR(e){let{children:t}=e;const[n,r]=NR();return(0,lr.jsx)(lr.Fragment,{children:t(n,r)})}AR.displayName="DropdownToggle";const PR=AR,RR=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},OR=t.createContext(null),DR=t.createContext(null);DR.displayName="NavContext";const LR=DR,MR=["as","disabled"];function FR(e){let{tagName:t,disabled:n,href:r,target:i,rel:s,role:o,onClick:a,tabIndex:c=0,type:l}=e;t||(t=null!=r||null!=i||null!=s?"a":"button");const u={tagName:t};if("button"===t)return[{type:l||"button",disabled:n},u];const h=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==a||a(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:c,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?s:void 0,onClick:h,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),h(e))}},u]}const jR=t.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,MR);const[s,{tagName:o}]=FR(Object.assign({tagName:n,disabled:r},i));return(0,lr.jsx)(o,Object.assign({},i,s,{ref:t}))}));jR.displayName="Button";const UR=jR,VR=["eventKey","disabled","onClick","active","as"];function BR(e){let{key:n,href:r,active:i,disabled:s,onClick:o}=e;const a=(0,t.useContext)(OR),c=(0,t.useContext)(LR),{activeKey:l}=c||{},u=RR(n,r),h=null==i&&null!=n?RR(l)===u:i;return[{onClick:zN((e=>{s||(null==o||o(e),a&&!e.isPropagationStopped()&&a(u,e))})),"aria-disabled":s||void 0,"aria-selected":h,[NP("dropdown-item")]:""},{isActive:h}]}const zR=t.forwardRef(((e,t)=>{let{eventKey:n,disabled:r,onClick:i,active:s,as:o=UR}=e,a=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,VR);const[c]=BR({key:n,href:a.href,disabled:r,onClick:i,active:s});return(0,lr.jsx)(o,Object.assign({},a,{ref:t},c))}));zR.displayName="DropdownItem";const qR=zR;function WR(){const e=function(){const[,e]=(0,t.useReducer)((e=>!e),!1);return e}(),n=(0,t.useRef)(null),r=(0,t.useCallback)((t=>{n.current=t,e()}),[e]);return[n,r]}function KR(e){let{defaultShow:n,show:r,onSelect:i,onToggle:s,itemSelector:o="* [".concat(NP("dropdown-item"),"]"),focusFirstItemOnShow:a,placement:c="bottom-start",children:l}=e;const u=JN(),[h,d]=uR(r,n,s),[f,p]=WR(),m=f.current,[g,v]=WR(),y=g.current,w=TP(h),b=(0,t.useRef)(null),_=(0,t.useRef)(!1),E=(0,t.useContext)(OR),S=(0,t.useCallback)((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?void 0:t.type;d(e,{originalEvent:t,source:n})}),[d]),x=zN(((e,t)=>{null==i||i(e,t),S(!1,t,"select"),t.isPropagationStopped()||null==E||E(e,t)})),I=(0,t.useMemo)((()=>({toggle:S,placement:c,show:h,menuElement:m,toggleElement:y,setMenu:p,setToggle:v})),[S,c,h,m,y,p,v]);m&&w&&!h&&(_.current=m.contains(m.ownerDocument.activeElement));const k=zN((()=>{y&&y.focus&&y.focus()})),T=zN((()=>{const e=b.current;let t=a;if(null==t&&(t=!(!f.current||!TR(f.current))&&"keyboard"),!1===t||"keyboard"===t&&!/^key.+$/.test(e))return;const n=jP(f.current,o)[0];n&&n.focus&&n.focus()}));(0,t.useEffect)((()=>{h?T():_.current&&(_.current=!1,k())}),[h,_,k,T]),(0,t.useEffect)((()=>{b.current=null}));const C=(e,t)=>{if(!f.current)return null;const n=jP(f.current,o);let r=n.indexOf(e)+t;return r=Math.max(0,Math.min(r,n.length)),n[r]};return function(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=zN(r);(0,t.useEffect)((()=>{const t="function"===typeof e?e():e;return t.addEventListener(n,s,i),()=>t.removeEventListener(n,s,i)}),[e])}((0,t.useCallback)((()=>u.document),[u]),"keydown",(e=>{var t,n;const{key:r}=e,i=e.target,s=null==(t=f.current)?void 0:t.contains(i),o=null==(n=g.current)?void 0:n.contains(i);if(/input|textarea/i.test(i.tagName)&&(" "===r||"Escape"!==r&&s||"Escape"===r&&"search"===i.type))return;if(!s&&!o)return;if("Tab"===r&&(!f.current||!h))return;b.current=e.type;const a={originalEvent:e,source:e.type};switch(r){case"ArrowUp":{const t=C(i,-1);return t&&t.focus&&t.focus(),void e.preventDefault()}case"ArrowDown":if(e.preventDefault(),h){const e=C(i,1);e&&e.focus&&e.focus()}else d(!0,a);return;case"Tab":FN(i.ownerDocument,"keyup",(e=>{var t;("Tab"!==e.key||e.target)&&null!=(t=f.current)&&t.contains(e.target)||d(!1,a)}),{once:!0});break;case"Escape":"Escape"===r&&(e.preventDefault(),e.stopPropagation()),d(!1,a)}})),(0,lr.jsx)(OR.Provider,{value:x,children:(0,lr.jsx)(hR.Provider,{value:I,children:l})})}KR.displayName="Dropdown",KR.Menu=gR,KR.Toggle=PR,KR.Item=qR;const HR=KR,GR=t.createContext({});GR.displayName="DropdownContext";const QR=GR,$R=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="hr",role:s="separator",...o}=e;return r=mA(r,"dropdown-divider"),(0,lr.jsx)(i,{ref:t,className:iC()(n,r),role:s,...o})}));$R.displayName="DropdownDivider";const YR=$R,JR=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",role:s="heading",...o}=e;return r=mA(r,"dropdown-header"),(0,lr.jsx)(i,{ref:t,className:iC()(n,r),role:s,...o})}));JR.displayName="DropdownHeader";const XR=JR;new WeakMap;const ZR=["onKeyDown"];const eO=t.forwardRef(((e,t)=>{let{onKeyDown:n}=e,r=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,ZR);const[i]=FR(Object.assign({tagName:"a"},r)),s=zN((e=>{i.onKeyDown(e),null==n||n(e)}));return(o=r.href)&&"#"!==o.trim()&&"button"!==r.role?(0,lr.jsx)("a",Object.assign({ref:t},r,{onKeyDown:n})):(0,lr.jsx)("a",Object.assign({ref:t},r,i,{onKeyDown:s}));var o}));eO.displayName="Anchor";const tO=eO,nO=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,eventKey:i,disabled:s=!1,onClick:o,active:a,as:c=tO,...l}=e;const u=mA(n,"dropdown-item"),[h,d]=BR({key:i,href:l.href,disabled:s,onClick:o,active:a});return(0,lr.jsx)(c,{...l,...h,ref:t,className:iC()(r,u,d.isActive&&"active",s&&"disabled")})}));nO.displayName="DropdownItem";const rO=nO,iO=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="span",...s}=e;return r=mA(r,"dropdown-item-text"),(0,lr.jsx)(i,{ref:t,className:iC()(n,r),...s})}));iO.displayName="DropdownItemText";const sO=iO,oO=t.createContext(null);oO.displayName="InputGroupContext";const aO=oO,cO=t.createContext(null);cO.displayName="NavbarContext";const lO=cO;function uO(e,t){return e}function hO(e,t,n){let r=e?n?"bottom-start":"bottom-end":n?"bottom-end":"bottom-start";return"up"===t?r=e?n?"top-start":"top-end":n?"top-end":"top-start":"end"===t?r=e?n?"left-end":"right-end":n?"left-start":"right-start":"start"===t?r=e?n?"right-end":"left-end":n?"right-start":"left-start":"down-centered"===t?r="bottom":"up-centered"===t&&(r="top"),r}const dO=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:i,align:s,rootCloseEvent:o,flip:a=!0,show:c,renderOnMount:l,as:u="div",popperConfig:h,variant:d,...f}=e,p=!1;const m=(0,t.useContext)(lO),g=mA(r,"dropdown-menu"),{align:v,drop:y,isRTL:w}=(0,t.useContext)(QR);s=s||v;const b=(0,t.useContext)(aO),_=[];if(s)if("object"===typeof s){const e=Object.keys(s);if(e.length){const t=e[0],n=s[t];p="start"===n,_.push("".concat(g,"-").concat(t,"-").concat(n))}}else"end"===s&&(p=!0);const E=hO(p,y,w),[S,{hasShown:x,popper:I,show:k,toggle:T}]=pR({flip:a,rootCloseEvent:o,show:c,usePopper:!m&&0===_.length,offset:[0,2],popperConfig:h,placement:E});if(S.ref=nC(uO(n),S.ref),rA((()=>{k&&(null==I||I.update())}),[k]),!x&&!l&&!b)return null;"string"!==typeof u&&(S.show=k,S.close=()=>null==T?void 0:T(!1),S.align=s);let C=f.style;return null!=I&&I.placement&&(C={...f.style,...S.style},f["x-placement"]=I.placement),(0,lr.jsx)(u,{...f,...S,style:C,...(_.length||m)&&{"data-bs-popper":"static"},className:iC()(i,g,k&&"show",p&&"".concat(g,"-end"),d&&"".concat(g,"-").concat(d),..._)})}));dO.displayName="DropdownMenu";const fO=dO,pO=t.forwardRef(((e,t)=>{let{as:n,bsPrefix:r,variant:i="primary",size:s,active:o=!1,disabled:a=!1,className:c,...l}=e;const u=mA(r,"btn"),[h,{tagName:d}]=FR({tagName:n,disabled:a,...l}),f=d;return(0,lr.jsx)(f,{...h,...l,ref:t,disabled:a,className:iC()(c,u,o&&"active",i&&"".concat(u,"-").concat(i),s&&"".concat(u,"-").concat(s),l.href&&a&&"disabled")})}));pO.displayName="Button";const mO=pO,gO=t.forwardRef(((e,n)=>{let{bsPrefix:r,split:i,className:s,childBsPrefix:o,as:a=mO,...c}=e;const l=mA(r,"dropdown-toggle"),u=(0,t.useContext)(hR);void 0!==o&&(c.bsPrefix=o);const[h]=NR();return h.ref=nC(h.ref,uO(n)),(0,lr.jsx)(a,{className:iC()(s,l,i&&"".concat(l,"-split"),(null==u?void 0:u.show)&&"show"),...h,...c})}));gO.displayName="DropdownToggle";const vO=gO,yO=t.forwardRef(((e,n)=>{const{bsPrefix:r,drop:i="down",show:s,className:o,align:a="start",onSelect:l,onToggle:u,focusFirstItemOnShow:h,as:d="div",navbar:f,autoClose:p=!0,...m}=function(e,t){return Object.keys(t).reduce((function(n,r){var i,s=n,o=s[$T(r)],a=s[r],l=F(s,[$T(r),r].map(YT)),u=t[r],h=JT(a,o,e[u]),d=h[0],f=h[1];return c({},l,((i={})[r]=d,i[u]=f,i))}),e)}(e,{show:"onToggle"}),g=(0,t.useContext)(aO),v=mA(r,"dropdown"),y=gA(),w=zN(((e,t)=>{var n,r;var i;(null==(n=t.originalEvent)||null==(r=n.target)?void 0:r.classList.contains("dropdown-toggle"))&&"mousedown"===t.source||(t.originalEvent.currentTarget!==document||"keydown"===t.source&&"Escape"!==t.originalEvent.key||(t.source="rootClose"),i=t.source,(!1===p?"click"===i:"inside"===p?"rootClose"!==i:"outside"!==p||"select"!==i)&&(null==u||u(e,t)))})),b=hO("end"===a,i,y),_=(0,t.useMemo)((()=>({align:a,drop:i,isRTL:y})),[a,i,y]),E={down:v,"down-centered":"".concat(v,"-center"),up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return(0,lr.jsx)(QR.Provider,{value:_,children:(0,lr.jsx)(HR,{placement:b,show:s,onSelect:l,onToggle:w,focusFirstItemOnShow:h,itemSelector:".".concat(v,"-item:not(.disabled):not(:disabled)"),children:g?m.children:(0,lr.jsx)(d,{...m,ref:n,className:iC()(o,s&&"show",E[i])})})})}));yO.displayName="Dropdown";const wO=Object.assign(yO,{Toggle:vO,Menu:fO,Item:rO,ItemText:sO,Divider:YR,Header:XR});var bO;const _O=ar.button(bO||(bO=me(["        \n    display: inline-block;\n    outline: none;\n    cursor: pointer;\n    font-size: 16px;\n    line-height: 20px;\n    font-weight: 600;\n    border-radius: 8px;\n    padding: 13px 23px;\n    border: 1px solid #222222;\n    transition: box-shadow 0.2s ease 0s, -ms-transform 0.1s ease 0s, -webkit-transform 0.1s ease 0s, transform 0.1s ease 0s;\n    color: #222222;\n    :hover {\n        border-color: #000000;\n        background: #f7f7f7;\n    }\n"])));var EO,SO,xO,IO;const kO=ar.form(EO||(EO=me(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-around;\n  height: 150px;\n"]))),TO=ar.div(SO||(SO=me(["\n  display: flex;\n  justify-content: flex-end;\n"]))),CO=ar.div(xO||(xO=me(["\n  display: flex;\n  align-items: center; \n  justify-content: space-between;\n  flex: 1;\n  width: 90%;\n"]))),NO=ar.label(IO||(IO=me(["\n  flex: 1;\n"]))),AO=e=>{let{showModal:t,authorYearStart:n,authorYearEnd:r,topics:i,handleDropdownPeriods:s,handleDropdownTopics:o,submitForm:a}=e;return(0,lr.jsx)(lR,{style:{marginTop:"200px"},show:t,children:(0,lr.jsxs)(lR.Body,{children:[(0,lr.jsxs)(kO,{children:[(0,lr.jsxs)(CO,{children:[(0,lr.jsx)(NO,{className:"col-form-label-sm",style:{marginRight:"20px"},children:"Literary Periods: "}),(0,lr.jsxs)(wO,{variant:"btn-sm",children:[(0,lr.jsxs)(wO.Toggle,{variant:"secondary btn-sm",id:"dropdown-periods",style:{width:"200px"},children:[n," - ",r]}),(0,lr.jsxs)(wO.Menu,{className:"font12",children:[(0,lr.jsx)(wO.Item,{className:"font12",onClick:()=>s(500,1500),children:"Medieval (500 - 1500)"}),(0,lr.jsx)(wO.Item,{className:"font12",onClick:()=>s(1500,1700),children:"Renaissance (1500 - 1700)"}),(0,lr.jsx)(wO.Item,{className:"font12",onClick:()=>s(1700,1800),children:"Enlightenment (1700 - 1800)"}),(0,lr.jsx)(wO.Item,{className:"font12",onClick:()=>s(1800,1870),children:"Romantic Period (1800 - 1870)"}),(0,lr.jsx)(wO.Item,{className:"font12",onClick:()=>s(1900,1965),children:"Modernism (1900 - 1965)"})]})]})]}),(0,lr.jsxs)(CO,{children:[(0,lr.jsx)(NO,{className:"col-form-label-sm",style:{marginRight:"20px"},children:"Topics: "}),(0,lr.jsxs)(wO,{variant:"btn-sm",children:[(0,lr.jsx)(wO.Toggle,{variant:"secondary btn-sm",id:"dropdown-topic",style:{width:"200px"},children:i}),(0,lr.jsxs)(wO.Menu,{className:"font12",children:[(0,lr.jsx)(wO.Item,{onClick:()=>o("All"),className:"font12",children:"All"}),(0,lr.jsx)(wO.Item,{onClick:()=>o("History"),className:"font12",children:"History"}),(0,lr.jsx)(wO.Item,{onClick:()=>o("Science"),className:"font12",children:"Science"}),(0,lr.jsx)(wO.Item,{onClick:()=>o("Religion"),className:"font12",children:"Religion"}),(0,lr.jsx)(wO.Item,{onClick:()=>o("Philosophy"),className:"font12",children:"Philosophy"}),(0,lr.jsx)(wO.Item,{onClick:()=>o("Fiction"),className:"font12",children:"Fiction"})]})]})]})]}),(0,lr.jsx)(TO,{children:(0,lr.jsx)(_O,{onClick:a,children:"Submit"})})]})})};var PO,RO,OO,DO;class LO extends t.Component{constructor(e){super(e),this.handleDropdownPeriods=(e,t)=>{this.setState({author_year_start:e,author_year_end:t})},this.handleDropdownTopics=e=>{this.setState({topics:e})},this.submitForm=async e=>{e.preventDefault(),this.setState({book:[],books:[]},(async()=>{await this.callAPI(),this.setState({showModal:!1})}))},this.callAPI=async()=>{this.setState({isLoading:!0}),this.state.books&&this.state.books.length>0?this.selectRandomBook():await this.fetchRandomPage()},this.fetchRandomPage=async()=>{const e="All"===this.state.topics?"":"topic=".concat(this.state.topics,"&"),t="All"===this.state.topics?Math.floor(15*Math.random()):1,n="".concat(yP.baseUrl,"?")+"author_year_start=".concat(this.state.author_year_start,"&")+"author_year_end=".concat(this.state.author_year_end,"&")+e+"page=".concat(t);fetch(n,{signal:this.abortController.signal}).then((e=>e.json())).then((e=>{e&&e.results&&e.results.length>0?this.setState({books:e.results},this.selectRandomBook):this.fetchRandomPage()}),(e=>{this.setState({isLoaded:!0,error:e})}))},this._isMounted=!1,this.state={showToast:!1,book:[],books:[],authors:"",title:"",subject:"",genre:"",background:"",isLoading:!1,showModal:!1,author_year_start:1700,author_year_end:1800,topics:"All"},this.submitForm=this.submitForm.bind(this)}componentDidMount(){this._isMounted=!0,this.abortController=new AbortController,this.callAPI()}componentWillUnmount(){this._isMounted=!1,this.abortController.abort()}handleClickNext(){this.callAPI()}handleClickSave(){if(this.props.currentUser)try{(async()=>{this._isMounted&&Wk.collection("users").doc(this.props.currentUser.id).collection("books").add({title:this.state.title,authors:this.state.authors,subject:this.state.subject,genre:this.state.genre,background:this.state.background,hasRated:!1,createAt:Date()})})(),this.handleClickNext()}catch(e){console.log(e)}else this.setState({showToast:!0})}selectRandomBook(){if(this.state.books.length>0){const t=Math.floor(Math.random()*this.state.books.length),n=this.state.books[t],r=this.state.books.filter(((e,n)=>n!==t));this.setState({book:n,title:(e=n.title,e||""),authors:bP(n.authors),subject:wP(n.subjects),genre:wP(n.bookshelves),background:_P(),books:r,isLoading:!1},(()=>{0===this.state.books.length&&this.setState({topics:"All"},(async()=>{await this.callAPI()}))}))}var e}render(){return(0,lr.jsxs)(MO,{children:[this.state.isLoading?(0,lr.jsx)(wT,{children:(0,lr.jsx)(UO,{})}):(0,lr.jsx)(TT,{title:this.state.title,authors:this.state.authors,subject:this.state.subject,genre:this.state.genre,background:this.state.background,isLoading:this.isLoading}),(0,lr.jsxs)(FO,{children:[(0,lr.jsx)(nP,{placement:"top",overlay:(0,lr.jsx)(kA,{children:"Settings"}),children:(0,lr.jsx)(SP,{onClick:()=>this.setState({showModal:!0}),children:this.state.isLoading?(0,lr.jsx)(iP,{}):(0,lr.jsxs)("div",{className:"font13",children:[" ",(0,lr.jsx)(VT,{})," "]})})}),(0,lr.jsx)(nP,{placement:"top",overlay:(0,lr.jsx)(kA,{children:"Save"}),children:(0,lr.jsx)(SP,{id:"btnBookMark",onClick:()=>this.handleClickSave(),children:this.state.isLoading?(0,lr.jsx)(iP,{}):(0,lr.jsxs)("div",{className:"font13",children:[" ",(0,lr.jsx)(jT,{})," "]})})}),(0,lr.jsx)(nP,{placement:"top",overlay:(0,lr.jsx)(kA,{children:"Next"}),children:(0,lr.jsx)(SP,{id:"btnNext",onClick:()=>this.handleClickNext(),disabled:this.state.isLoading,children:this.state.isLoading?(0,lr.jsx)(iP,{}):(0,lr.jsxs)("div",{className:"font13",children:[" ",(0,lr.jsx)(MT,{})," "]})})})]}),(0,lr.jsxs)(vP,{show:this.state.showToast,onClose:()=>this.setState({showToast:!1}),style:{position:"absolute",top:120,right:20},children:[(0,lr.jsx)(vP.Header,{className:"d-flex justify-content-between font12",children:(0,lr.jsx)("strong",{className:"mr-auto",children:"Sign in Reminder"})}),(0,lr.jsx)(vP.Body,{className:"font12",children:"Please sign in to save the book in the bookshelf."})]}),(0,lr.jsx)(AO,{showModal:this.state.showModal,authorYearStart:this.state.author_year_start,authorYearEnd:this.state.author_year_end,topics:this.state.topics,handleDropdownPeriods:this.handleDropdownPeriods,handleDropdownTopics:this.handleDropdownTopics,submitForm:this.submitForm})]})}}const MO=ar.div(PO||(PO=me(["\n  display: flex;\n  height: 100vh;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]))),FO=ar.div(RO||(RO=me(["\n  display: flex;\n  justify-content: flex-end;\n"]))),jO=cr(OO||(OO=me(["\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n"]))),UO=ar.div(DO||(DO=me(["\n  border: 4px solid rgba(0, 0, 0, 0.1);\n  border-top: 4px solid #333;\n  border-radius: 50%;\n  width: 30px;\n  height: 30px;\n  animation: "," 1s linear infinite;\n"])),jO),VO=LO;const BO=n.p+"static/media/empty.d8b54aebec93fdf83b956c93284bfcb7.svg";const zO=function(e){return(0,lr.jsx)("img",{src:BO,alt:"",style:{height:"80px"}})};var qO=n(104);const WO={type:a().string,tooltip:a().bool,as:a().elementType},KO=t.forwardRef(((e,t)=>{let{as:n="div",className:r,type:i="valid",tooltip:s=!1,...o}=e;return(0,lr.jsx)(n,{...o,ref:t,className:iC()(r,"".concat(i,"-").concat(s?"tooltip":"feedback"))})}));KO.displayName="Feedback",KO.propTypes=WO;const HO=KO,GO=t.createContext({}),QO=t.forwardRef(((e,n)=>{let{id:r,bsPrefix:i,className:s,type:o="checkbox",isValid:a=!1,isInvalid:c=!1,as:l="input",...u}=e;const{controlId:h}=(0,t.useContext)(GO);return i=mA(i,"form-check-input"),(0,lr.jsx)(l,{...u,ref:n,type:o,id:r||h,className:iC()(s,i,a&&"is-valid",c&&"is-invalid")})}));QO.displayName="FormCheckInput";const $O=QO,YO=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:i,htmlFor:s,...o}=e;const{controlId:a}=(0,t.useContext)(GO);return r=mA(r,"form-check-label"),(0,lr.jsx)("label",{...o,ref:n,htmlFor:s||a,className:iC()(i,r)})}));YO.displayName="FormCheckLabel";const JO=YO;const XO=t.forwardRef(((e,n)=>{let{id:r,bsPrefix:i,bsSwitchPrefix:s,inline:o=!1,reverse:a=!1,disabled:c=!1,isValid:l=!1,isInvalid:u=!1,feedbackTooltip:h=!1,feedback:d,feedbackType:f,className:p,style:m,title:g="",type:v="checkbox",label:y,children:w,as:b="input",..._}=e;i=mA(i,"form-check"),s=mA(s,"form-switch");const{controlId:E}=(0,t.useContext)(GO),S=(0,t.useMemo)((()=>({controlId:r||E})),[E,r]),x=!w&&null!=y&&!1!==y||function(e,n){return t.Children.toArray(e).some((e=>t.isValidElement(e)&&e.type===n))}(w,JO),I=(0,lr.jsx)($O,{..._,type:"switch"===v?"checkbox":v,ref:n,isValid:l,isInvalid:u,disabled:c,as:b});return(0,lr.jsx)(GO.Provider,{value:S,children:(0,lr.jsx)("div",{style:m,className:iC()(p,x&&i,o&&"".concat(i,"-inline"),a&&"".concat(i,"-reverse"),"switch"===v&&s),children:w||(0,lr.jsxs)(lr.Fragment,{children:[I,x&&(0,lr.jsx)(JO,{title:g,children:y}),d&&(0,lr.jsx)(HO,{type:f,tooltip:h,children:d})]})})})}));XO.displayName="FormCheck";const ZO=Object.assign(XO,{Input:$O,Label:JO}),eD=t.forwardRef(((e,n)=>{let{bsPrefix:r,type:i,size:s,htmlSize:o,id:a,className:c,isValid:l=!1,isInvalid:u=!1,plaintext:h,readOnly:d,as:f="input",...p}=e;const{controlId:m}=(0,t.useContext)(GO);return r=mA(r,"form-control"),(0,lr.jsx)(f,{...p,type:i,size:o,ref:n,readOnly:d,id:a||m,className:iC()(c,h?"".concat(r,"-plaintext"):r,s&&"".concat(r,"-").concat(s),"color"===i&&"".concat(r,"-color"),l&&"is-valid",u&&"is-invalid")})}));eD.displayName="FormControl";const tD=Object.assign(eD,{Feedback:HO}),nD=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...s}=e;return r=mA(r,"form-floating"),(0,lr.jsx)(i,{ref:t,className:iC()(n,r),...s})}));nD.displayName="FormFloating";const rD=nD,iD=t.forwardRef(((e,n)=>{let{controlId:r,as:i="div",...s}=e;const o=(0,t.useMemo)((()=>({controlId:r})),[r]);return(0,lr.jsx)(GO.Provider,{value:o,children:(0,lr.jsx)(i,{...s,ref:n})})}));iD.displayName="FormGroup";const sD=iD;function oD(e){let{as:n,bsPrefix:r,className:i,...s}=e;r=mA(r,"col");const o=function(){const{breakpoints:e}=(0,t.useContext)(dA);return e}(),a=function(){const{minBreakpoint:e}=(0,t.useContext)(dA);return e}(),c=[],l=[];return o.forEach((e=>{const t=s[e];let n,i,o;delete s[e],"object"===typeof t&&null!=t?({span:n,offset:i,order:o}=t):n=t;const u=e!==a?"-".concat(e):"";n&&c.push(!0===n?"".concat(r).concat(u):"".concat(r).concat(u,"-").concat(n)),null!=o&&l.push("order".concat(u,"-").concat(o)),null!=i&&l.push("offset".concat(u,"-").concat(i))})),[{...s,className:iC()(i,...c,...l)},{as:n,bsPrefix:r,spans:c}]}const aD=t.forwardRef(((e,t)=>{const[{className:n,...r},{as:i="div",bsPrefix:s,spans:o}]=oD(e);return(0,lr.jsx)(i,{...r,ref:t,className:iC()(n,!o.length&&s)})}));aD.displayName="Col";const cD=aD,lD=t.forwardRef(((e,n)=>{let{as:r="label",bsPrefix:i,column:s=!1,visuallyHidden:o=!1,className:a,htmlFor:c,...l}=e;const{controlId:u}=(0,t.useContext)(GO);i=mA(i,"form-label");let h="col-form-label";"string"===typeof s&&(h="".concat(h," ").concat(h,"-").concat(s));const d=iC()(a,i,o&&"visually-hidden",s&&h);return c=c||u,s?(0,lr.jsx)(cD,{ref:n,as:"label",className:d,htmlFor:c,...l}):(0,lr.jsx)(r,{ref:n,className:d,htmlFor:c,...l})}));lD.displayName="FormLabel";const uD=lD,hD=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:i,id:s,...o}=e;const{controlId:a}=(0,t.useContext)(GO);return r=mA(r,"form-range"),(0,lr.jsx)("input",{...o,type:"range",ref:n,className:iC()(i,r),id:s||a})}));hD.displayName="FormRange";const dD=hD,fD=t.forwardRef(((e,n)=>{let{bsPrefix:r,size:i,htmlSize:s,className:o,isValid:a=!1,isInvalid:c=!1,id:l,...u}=e;const{controlId:h}=(0,t.useContext)(GO);return r=mA(r,"form-select"),(0,lr.jsx)("select",{...u,size:s,ref:n,className:iC()(o,r,i&&"".concat(r,"-").concat(i),a&&"is-valid",c&&"is-invalid"),id:l||h})}));fD.displayName="FormSelect";const pD=fD,mD=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i="small",muted:s,...o}=e;return n=mA(n,"form-text"),(0,lr.jsx)(i,{...o,ref:t,className:iC()(r,n,s&&"text-muted")})}));mD.displayName="FormText";const gD=mD,vD=t.forwardRef(((e,t)=>(0,lr.jsx)(ZO,{...e,ref:t,type:"switch"})));vD.displayName="Switch";const yD=Object.assign(vD,{Input:ZO.Input,Label:ZO.Label}),wD=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:i,controlId:s,label:o,...a}=e;return n=mA(n,"form-floating"),(0,lr.jsxs)(sD,{ref:t,className:iC()(r,n),controlId:s,...a,children:[i,(0,lr.jsx)("label",{htmlFor:s,children:o})]})}));wD.displayName="FloatingLabel";const bD=wD,_D={_ref:a().any,validated:a().bool,as:a().elementType},ED=t.forwardRef(((e,t)=>{let{className:n,validated:r,as:i="form",...s}=e;return(0,lr.jsx)(i,{...s,ref:t,className:iC()(n,r&&"was-validated")})}));ED.displayName="Form",ED.propTypes=_D;const SD=Object.assign(ED,{Group:sD,Control:tD,Floating:rD,Check:ZO,Switch:yD,Label:uD,Text:gD,Range:dD,Select:pD,FloatingLabel:bD});function xD(e){return Array.isArray?Array.isArray(e):"[object Array]"===OD(e)}const ID=1/0;function kD(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-ID?"-0":t}(e)}function TD(e){return"string"===typeof e}function CD(e){return"number"===typeof e}function ND(e){return!0===e||!1===e||function(e){return AD(e)&&null!==e}(e)&&"[object Boolean]"==OD(e)}function AD(e){return"object"===typeof e}function PD(e){return void 0!==e&&null!==e}function RD(e){return!e.trim().length}function OD(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const DD=e=>"Missing ".concat(e," property in key"),LD=e=>"Property 'weight' in key '".concat(e,"' must be a positive integer"),MD=Object.prototype.hasOwnProperty;class FD{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let n=jD(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function jD(e){let t=null,n=null,r=null,i=1,s=null;if(TD(e)||xD(e))r=e,t=UD(e),n=VD(e);else{if(!MD.call(e,"name"))throw new Error(DD("name"));const o=e.name;if(r=o,MD.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(LD(o));t=UD(o),n=VD(o),s=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:s}}function UD(e){return xD(e)?e:e.split(".")}function VD(e){return xD(e)?e.join("."):e}var BD={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(e,t){let n=[],r=!1;const i=(e,t,s)=>{if(PD(e))if(t[s]){const o=e[t[s]];if(!PD(o))return;if(s===t.length-1&&(TD(o)||CD(o)||ND(o)))n.push(kD(o));else if(xD(o)){r=!0;for(let e=0,n=o.length;e<n;e+=1)i(o[e],t,s+1)}else t.length&&i(o,t,s+1)}else n.push(e)};return i(e,TD(t)?t.split("."):t,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const zD=/[^ ]+/g;class qD{constructor(){let{getFn:e=BD.getFn,fieldNormWeight:t=BD.fieldNormWeight}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.norm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const n=new Map,r=Math.pow(10,t);return{get(t){const i=t.match(zD).length;if(n.has(i))return n.get(i);const s=1/Math.pow(i,.5*e),o=parseFloat(Math.round(s*r)/r);return n.set(i,o),o},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=e}setIndexRecords(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=e}setKeys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,TD(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();TD(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!PD(e)||RD(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach(((t,r)=>{let i=t.getFn?t.getFn(e):this.getFn(e,t.path);if(PD(i))if(xD(i)){let e=[];const t=[{nestedArrIndex:-1,value:i}];for(;t.length;){const{nestedArrIndex:n,value:r}=t.pop();if(PD(r))if(TD(r)&&!RD(r)){let t={v:r,i:n,n:this.norm.get(r)};e.push(t)}else xD(r)&&r.forEach(((e,n)=>{t.push({nestedArrIndex:n,value:e})}))}n.$[r]=e}else if(TD(i)&&!RD(i)){let e={v:i,n:this.norm.get(i)};n.$[r]=e}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function WD(e,t){let{getFn:n=BD.getFn,fieldNormWeight:r=BD.fieldNormWeight}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new qD({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(jD)),i.setSources(t),i.create(),i}function KD(e){let{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=BD.distance,ignoreLocation:s=BD.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=t/e.length;if(s)return o;const a=Math.abs(r-n);return i?o+a/i:a?1:o}const HD=32;function GD(e,t,n){let{location:r=BD.location,distance:i=BD.distance,threshold:s=BD.threshold,findAllMatches:o=BD.findAllMatches,minMatchCharLength:a=BD.minMatchCharLength,includeMatches:c=BD.includeMatches,ignoreLocation:l=BD.ignoreLocation}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t.length>HD)throw new Error("Pattern length exceeds max of ".concat(HD,"."));const u=t.length,h=e.length,d=Math.max(0,Math.min(r,h));let f=s,p=d;const m=a>1||c,g=m?Array(h):[];let v;for(;(v=e.indexOf(t,p))>-1;){let e=KD(t,{currentLocation:v,expectedLocation:d,distance:i,ignoreLocation:l});if(f=Math.min(e,f),p=v+u,m){let e=0;for(;e<u;)g[v+e]=1,e+=1}}p=-1;let y=[],w=1,b=u+h;const _=1<<u-1;for(let S=0;S<u;S+=1){let r=0,s=b;for(;r<s;){KD(t,{errors:S,currentLocation:d+s,expectedLocation:d,distance:i,ignoreLocation:l})<=f?r=s:b=s,s=Math.floor((b-r)/2+r)}b=s;let a=Math.max(1,d-s+1),c=o?h:Math.min(d+s,h)+u,v=Array(c+2);v[c+1]=(1<<S)-1;for(let o=c;o>=a;o-=1){let r=o-1,s=n[e.charAt(r)];if(m&&(g[r]=+!!s),v[o]=(v[o+1]<<1|1)&s,S&&(v[o]|=(y[o+1]|y[o])<<1|1|y[o+1]),v[o]&_&&(w=KD(t,{errors:S,currentLocation:r,expectedLocation:d,distance:i,ignoreLocation:l}),w<=f)){if(f=w,p=r,p<=d)break;a=Math.max(1,2*d-p)}}if(KD(t,{errors:S+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:l})>f)break;y=v}const E={isMatch:p>=0,score:Math.max(.001,w)};if(m){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BD.minMatchCharLength,n=[],r=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let o=e[s];o&&-1===r?r=s:o||-1===r||(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}(g,a);e.length?c&&(E.indices=e):E.isMatch=!1}return E}function QD(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}class $D{constructor(e){let{location:t=BD.location,threshold:n=BD.threshold,distance:r=BD.distance,includeMatches:i=BD.includeMatches,findAllMatches:s=BD.findAllMatches,minMatchCharLength:o=BD.minMatchCharLength,isCaseSensitive:a=BD.isCaseSensitive,ignoreLocation:c=BD.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options={location:t,threshold:n,distance:r,includeMatches:i,findAllMatches:s,minMatchCharLength:o,isCaseSensitive:a,ignoreLocation:c},this.pattern=a?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const l=(e,t)=>{this.chunks.push({pattern:e,alphabet:QD(e),startIndex:t})},u=this.pattern.length;if(u>HD){let e=0;const t=u%HD,n=u-t;for(;e<n;)l(this.pattern.substr(e,HD),e),e+=HD;if(t){const e=u-HD;l(this.pattern.substr(e),e)}}else l(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:r,distance:i,threshold:s,findAllMatches:o,minMatchCharLength:a,ignoreLocation:c}=this.options;let l=[],u=0,h=!1;this.chunks.forEach((t=>{let{pattern:d,alphabet:f,startIndex:p}=t;const{isMatch:m,score:g,indices:v}=GD(e,d,f,{location:r+p,distance:i,threshold:s,findAllMatches:o,minMatchCharLength:a,includeMatches:n,ignoreLocation:c});m&&(h=!0),u+=g,m&&v&&(l=[...l,...v])}));let d={isMatch:h,score:h?u/this.chunks.length:1};return h&&n&&(d.indices=l),d}}class YD{constructor(e){this.pattern=e}static isMultiMatch(e){return JD(e,this.multiRegex)}static isSingleMatch(e){return JD(e,this.singleRegex)}search(){}}function JD(e,t){const n=e.match(t);return n?n[1]:null}class XD extends YD{constructor(e){let{location:t=BD.location,threshold:n=BD.threshold,distance:r=BD.distance,includeMatches:i=BD.includeMatches,findAllMatches:s=BD.findAllMatches,minMatchCharLength:o=BD.minMatchCharLength,isCaseSensitive:a=BD.isCaseSensitive,ignoreLocation:c=BD.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this._bitapSearch=new $D(e,{location:t,threshold:n,distance:r,includeMatches:i,findAllMatches:s,minMatchCharLength:o,isCaseSensitive:a,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class ZD extends YD{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const r=[],i=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+i,r.push([t,n-1]);const s=!!r.length;return{isMatch:s,score:s?0:1,indices:r}}}const eL=[class extends YD{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},ZD,class extends YD{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends YD{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends YD{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends YD{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends YD{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},XD],tL=eL.length,nL=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const rL=new Set([XD.type,ZD.type]);class iL{constructor(e){let{isCaseSensitive:t=BD.isCaseSensitive,includeMatches:n=BD.includeMatches,minMatchCharLength:r=BD.minMatchCharLength,ignoreLocation:i=BD.ignoreLocation,findAllMatches:s=BD.findAllMatches,location:o=BD.location,threshold:a=BD.threshold,distance:c=BD.distance}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:r,findAllMatches:s,ignoreLocation:i,location:o,threshold:a,distance:c},this.pattern=t?e:e.toLowerCase(),this.query=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.split("|").map((e=>{let n=e.trim().split(nL).filter((e=>e&&!!e.trim())),r=[];for(let i=0,s=n.length;i<s;i+=1){const e=n[i];let s=!1,o=-1;for(;!s&&++o<tL;){const n=eL[o];let i=n.isMultiMatch(e);i&&(r.push(new n(i,t)),s=!0)}if(!s)for(o=-1;++o<tL;){const n=eL[o];let i=n.isSingleMatch(e);if(i){r.push(new n(i,t));break}}}return r}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let i=0,s=[],o=0;for(let a=0,c=t.length;a<c;a+=1){const r=t[a];s.length=0,i=0;for(let t=0,a=r.length;t<a;t+=1){const a=r[t],{isMatch:c,indices:l,score:u}=a.search(e);if(!c){o=0,i=0,s.length=0;break}if(i+=1,o+=u,n){const e=a.constructor.type;rL.has(e)?s=[...s,...l]:s.push(l)}}if(i){let e={isMatch:!0,score:o/i};return n&&(e.indices=s),e}}return{isMatch:!1,score:1}}}const sL=[];function oL(e,t){for(let n=0,r=sL.length;n<r;n+=1){let r=sL[n];if(r.condition(e,t))return new r(e,t)}return new $D(e,t)}const aL="$and",cL="$or",lL="$path",uL="$val",hL=e=>!(!e[aL]&&!e[cL]),dL=e=>({[aL]:Object.keys(e).map((t=>({[t]:e[t]})))});function fL(e,t){let{auto:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e=>{let i=Object.keys(e);const s=(e=>!!e[lL])(e);if(!s&&i.length>1&&!hL(e))return r(dL(e));if((e=>!xD(e)&&AD(e)&&!hL(e))(e)){const r=s?e[lL]:i[0],o=s?e[uL]:e[r];if(!TD(o))throw new Error((e=>"Invalid value for key ".concat(e))(r));const a={keyId:VD(r),pattern:o};return n&&(a.searcher=oL(o,t)),a}let o={children:[],operator:i[0]};return i.forEach((t=>{const n=e[t];xD(n)&&n.forEach((e=>{o.children.push(r(e))}))})),o};return hL(e)||(e=dL(e)),r(e)}function pL(e,t){const n=e.matches;t.matches=[],PD(n)&&n.forEach((e=>{if(!PD(e.indices)||!e.indices.length)return;const{indices:n,value:r}=e;let i={indices:n,value:r};e.key&&(i.key=e.key.src),e.idx>-1&&(i.refIndex=e.idx),t.matches.push(i)}))}function mL(e,t){t.score=e.score}class gL{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.options={...BD,...t},this.options.useExtendedSearch,this._keyStore=new FD(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof qD))throw new Error("Incorrect 'index' type");this._myIndex=t||WD(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){PD(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!1;const t=[];for(let n=0,r=this._docs.length;n<r;n+=1){const i=this._docs[n];e(i,n)&&(this.removeAt(n),n-=1,r-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e){let{limit:t=-1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{includeMatches:n,includeScore:r,shouldSort:i,sortFn:s,ignoreFieldNorm:o}=this.options;let a=TD(e)?TD(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,t){let{ignoreFieldNorm:n=BD.ignoreFieldNorm}=t;e.forEach((e=>{let t=1;e.matches.forEach((e=>{let{key:r,norm:i,score:s}=e;const o=r?r.weight:null;t*=Math.pow(0===s&&o?Number.EPSILON:s,(o||1)*(n?1:i))})),e.score=t}))}(a,{ignoreFieldNorm:o}),i&&a.sort(s),CD(t)&&t>-1&&(a=a.slice(0,t)),function(e,t){let{includeMatches:n=BD.includeMatches,includeScore:r=BD.includeScore}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=[];return n&&i.push(pL),r&&i.push(mL),e.map((e=>{const{idx:n}=e,r={item:t[n],refIndex:n};return i.length&&i.forEach((t=>{t(e,r)})),r}))}(a,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(e){const t=oL(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach((e=>{let{v:n,i:i,n:s}=e;if(!PD(n))return;const{isMatch:o,score:a,indices:c}=t.searchIn(n);o&&r.push({item:n,idx:i,matches:[{score:a,value:n,norm:s,indices:c}]})})),r}_searchLogical(e){const t=fL(e,this.options),n=(e,t,r)=>{if(!e.children){const{keyId:n,searcher:i}=e,s=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:i});return s&&s.length?[{idx:r,item:t,matches:s}]:[]}const i=[];for(let s=0,o=e.children.length;s<o;s+=1){const o=e.children[s],a=n(o,t,r);if(a.length)i.push(...a);else if(e.operator===aL)return[]}return i},r=this._myIndex.records,i={},s=[];return r.forEach((e=>{let{$:r,i:o}=e;if(PD(r)){let e=n(t,r,o);e.length&&(i[o]||(i[o]={idx:o,item:r,matches:[]},s.push(i[o])),e.forEach((e=>{let{matches:t}=e;i[o].matches.push(...t)})))}})),s}_searchObjectList(e){const t=oL(e,this.options),{keys:n,records:r}=this._myIndex,i=[];return r.forEach((e=>{let{$:r,i:s}=e;if(!PD(r))return;let o=[];n.forEach(((e,n)=>{o.push(...this._findMatches({key:e,value:r[n],searcher:t}))})),o.length&&i.push({idx:s,item:r,matches:o})})),i}_findMatches(e){let{key:t,value:n,searcher:r}=e;if(!PD(n))return[];let i=[];if(xD(n))n.forEach((e=>{let{v:n,i:s,n:o}=e;if(!PD(n))return;const{isMatch:a,score:c,indices:l}=r.searchIn(n);a&&i.push({score:c,key:t,value:n,idx:s,norm:o,indices:l})}));else{const{v:e,n:s}=n,{isMatch:o,score:a,indices:c}=r.searchIn(e);o&&i.push({score:a,key:t,value:e,norm:s,indices:c})}return i}}gL.version="7.0.0",gL.createIndex=WD,gL.parseIndex=function(e){let{getFn:t=BD.getFn,fieldNormWeight:n=BD.fieldNormWeight}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{keys:r,records:i}=e,s=new qD({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s},gL.config=BD,gL.parseQuery=fL,function(){sL.push(...arguments)}(iL);const vL=function(e){return(0,lr.jsx)("img",{src:LT,alt:"",style:{height:"15px"}})};const yL=n.p+"static/media/trash-solid.16207fda462567fa761c8bb0c7319486.svg";const wL=function(e){return(0,lr.jsx)("img",{src:yL,alt:"",style:{height:"23px"}})};const bL=n.p+"static/media/sort.82008bd9d6bc443b229ac2828c981bbe.svg";const _L=function(e){return(0,lr.jsx)("img",{src:bL,alt:"",style:{height:"15px"}})};const EL=n.p+"static/media/alph.2a383477cd13ceee31a72d3ab505e1d8.svg";const SL=function(e){return(0,lr.jsx)("img",{src:EL,alt:"",style:{height:"20px"}})};const xL=n.p+"static/media/star.9ea9493b0c1d86df818921e47962d5c5.svg";const IL=function(e){return(0,lr.jsx)("img",{src:xL,alt:"",style:{height:"15px"}})};const kL=n.p+"static/media/created.5ab96586075ca6b32e7d36d735874394.svg";const TL=function(e){return(0,lr.jsx)("img",{src:kL,alt:"",style:{height:"15px"}})};var CL,NL,AL,PL,RL,OL,DL,LL,ML;class FL extends t.Component{constructor(){super(),this.handleClickDelete=async e=>{try{await Wk.collection("users").doc(this.props.currentUser.id).collection("books").doc(e).delete();const t=this.state.books.filter((t=>t.id!==e));this.setState({books:t})}catch(t){console.error("Error deleting a document: ",t)}},this.handleClickUpdateRead=async(e,t)=>{try{await Wk.collection("users").doc(this.props.currentUser.id).collection("books").doc(e).update({hasRated:t});const n=this.state.books.map((n=>n.id===e?{...n,hasRated:t}:n));this.setState({books:n})}catch(n){console.error("Error updating a document: ",n)}},this.handleSearch=e=>{const t=e.target.value;this.setState({searchQuery:t},(()=>{if(""===t.trim())this.setState({filteredBooks:this.state.books});else{const e=new gL(this.state.books,{keys:["title"]}).search(t).map((e=>e.item));this.setState({filteredBooks:e})}}))},this.handleSort=e=>{this.setState({sort:e},this.sortBooks)},this.sortBooks=()=>{let e=[...this.state.books];switch(this.state.sort){case"date":e.sort(((e,t)=>t.createdAt-e.createdAt));break;case"rating":e.sort(((e,t)=>t.hasRated-e.hasRated));break;case"alpha":e.sort(((e,t)=>e.title.localeCompare(t.title)));break;case"random":e.sort((()=>.5-Math.random()))}this.setState({filteredBooks:e})},this.state={books:[],hasHoveredOver:!1,searchQuery:"",filteredBooks:[],sort:"Title"}}async componentDidMount(){try{if(!this.props.currentUser)return;const e=(await Wk.collection("users").doc(this.props.currentUser.id).collection("books").get()).docs.map((e=>{const t=e.data();return t.hasRated=t.hasRated||0,{id:e.id,...t}}));this.setState({books:e,filteredBooks:e},this.sortBooks)}catch(e){console.error("Error fetching books:",e)}}render(){const{books:e}=this.state;return this.props.currentUser?(0,lr.jsxs)(BL,{children:[(0,lr.jsxs)(qL,{children:[(0,lr.jsx)(WL,{children:(0,lr.jsx)(SD,{children:(0,lr.jsx)(SD.Group,{controlId:"search",children:(0,lr.jsx)(SD.Control,{type:"text",placeholder:"Search...",className:"font11",value:this.state.searchQuery,onChange:this.handleSearch})})})}),(0,lr.jsx)(KL,{children:(0,lr.jsxs)(wO,{variant:"btn-sm",children:[(0,lr.jsx)(wO.Toggle,{variant:"secondary btn-sm",children:(0,lr.jsx)(_L,{})}),(0,lr.jsxs)(wO.Menu,{className:"font12",children:[(0,lr.jsxs)(wO.Item,{onClick:()=>this.handleSort("date"),className:"font12",children:[" ",(0,lr.jsx)(TL,{}),"  Created"]}),(0,lr.jsxs)(wO.Item,{onClick:()=>this.handleSort("rating"),className:"font12",children:[" ",(0,lr.jsx)(IL,{}),"  Rating"]}),(0,lr.jsxs)(wO.Item,{onClick:()=>this.handleSort("alpha"),className:"font12",children:[" ",(0,lr.jsx)(SL,{}),"  Alphabetical"]}),(0,lr.jsxs)(wO.Item,{onClick:()=>this.handleSort("random"),className:"font12",children:[" ",(0,lr.jsx)(vL,{}),"  Random"]})]})]})})]}),(0,lr.jsx)(UL,{children:this.props.currentUser&&e.length>0?this.state.filteredBooks.map((e=>(0,lr.jsxs)("div",{children:[(0,lr.jsx)(TT,{className:"book",title:e.title,authors:e.authors,subject:e.subject,genre:e.genre,background:e.background},e.id),(0,lr.jsxs)(zL,{children:[(0,lr.jsx)(GL,{children:(0,lr.jsx)(qO.G,{onClick:t=>this.handleClickUpdateRead(e.id,t),ratingValue:e.hasRated,initialValue:e.hasRated,size:"28px"})}),(0,lr.jsx)(HL,{onClick:()=>this.handleClickDelete(e.id),children:(0,lr.jsx)(wL,{})})]})]},e.id))):(0,lr.jsx)(VL,{children:(0,lr.jsxs)("div",{className:"flexColumn flexCenter",children:[(0,lr.jsx)(zO,{}),(0,lr.jsx)("span",{className:"font20",children:"No books found"})]})})})]}):(0,lr.jsx)(UL,{children:(0,lr.jsx)(VL,{children:(0,lr.jsxs)("div",{className:"flexColumn flexCenter",children:[(0,lr.jsx)(zO,{}),(0,lr.jsx)("span",{className:"font20",children:"No books found"})]})})})}}const jL=FL,UL=ar.div(CL||(CL=me(["\n    width: 55vw;\n    margin: 50px auto 60px;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center; \n    gap: 40px;\n    min-height: 70vh;\n"]))),VL=ar.div(NL||(NL=me(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%; \n"]))),BL=ar.div(AL||(AL=me(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    margin-top: 120px;\n"]))),zL=ar.div(PL||(PL=me(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-top: 10px;\n    width: 100%; \n    gap: 20px;\n"]))),qL=ar.div(RL||(RL=me(["\n    width: 90vw;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n"]))),WL=ar.div(OL||(OL=me(["\n    width: 30%; \n"]))),KL=ar.div(DL||(DL=me(["\n    margin-left: 20px;\n"]))),HL=ar.div(LL||(LL=me(["\n    cursor: pointer;\n    transition: color 0.3s;\n    &:hover {\n        color: #ff0000;\n        opacity: 0.7;\n    }\n"]))),GL=ar.div(ML||(ML=me(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    transition: opacity 0.3s;\n    color: white;\n    &:hover {\n        opacity: 0.7;\n    }\n"])));var QL,$L,YL;class JL extends t.Component{constructor(e){super(e),this.handleSubmit=async e=>{e.preventDefault();const{email:t,password:n}=this.state;try{await qk.signInWithEmailAndPassword(t,n),this.setState({email:"",password:"",showAlert:!0}),this.props.history.push("/")}catch(r){console.log(r),this.setState({errorMessage:"Invalid email or password!",showAlert:!0})}},this.handleChange=e=>{const{value:t,name:n}=e.target;this.setState({[n]:t})},this.state={email:"",password:"",errorMessage:""}}render(){return(0,lr.jsxs)(ZL,{className:"font12",children:[(0,lr.jsx)(tM,{children:(0,lr.jsx)("h5",{children:"Sign In"})}),(0,lr.jsxs)(SD,{className:"font12",onSubmit:this.handleSubmit,children:[(0,lr.jsxs)(SD.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,lr.jsx)(SD.Label,{children:"Email address"}),(0,lr.jsx)(SD.Control,{type:"email",name:"email",label:"email",placeholder:"Enter email",value:this.state.email,onChange:this.handleChange,className:"form-control-sm",required:!0})]}),(0,lr.jsxs)(SD.Group,{className:"mb-3",controlId:"formBasicPassword",children:[(0,lr.jsx)(SD.Label,{children:"Password"}),(0,lr.jsx)(SD.Control,{type:"password",name:"password",placeholder:"Enter password",value:this.state.password,onChange:this.handleChange,className:"form-control-sm",label:"password",required:!0})]}),(0,lr.jsx)("button",{className:"btn btn-dark font12",type:"submit",style:{width:"100%"},children:"Login"})]}),this.state.showAlert&&(0,lr.jsx)(eM,{className:"alert alert-danger font12",role:"alert",children:this.state.errorMessage})]})}}const XL=ie(JL),ZL=ar.div(QL||(QL=me(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    text-align: start;\n"]))),eM=ar.div($L||($L=me(["\n    margin-top: 20px;\n    max-width: 100%;\n"]))),tM=ar.div(YL||(YL=me(["\n    text-align: center;\n"])));var nM,rM,iM;class sM extends t.Component{constructor(e){super(e),this.handleSubmit=async e=>{e.preventDefault();const{displayName:t,email:n,password:r,confirmPassword:i}=this.state;if(r===i)try{const e=this.props.history,{user:i}=await qk.createUserWithEmailAndPassword(n,r);await zk(i,{displayName:t}),this.setState({displayName:"",email:"",password:"",confirmPassword:"",showAlert:!1}),e.push("/")}catch(s){console.error(s.message),s.message.toString().includes("auth/email-already-in-use")&&this.setState({showAlert:!0})}else alert("Passwords don't match!")},this.handleChange=e=>{const{name:t,value:n}=e.target;this.setState({[t]:n})},this.state={displayName:"",email:"",password:"",confirmPassword:"",showAlert:!1}}render(){const{displayName:e,email:t,password:n,confirmPassword:r,showAlert:i}=this.state;return(0,lr.jsxs)(aM,{children:[(0,lr.jsx)(lM,{children:(0,lr.jsx)("h5",{children:"Sign Up"})}),(0,lr.jsxs)(SD,{className:"font12",onSubmit:this.handleSubmit,children:[(0,lr.jsxs)(SD.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,lr.jsx)(SD.Label,{className:"font12",children:"Username"}),(0,lr.jsx)(SD.Control,{type:"text",name:"displayName",label:"Display Name",placeholder:"Username",value:e,onChange:this.handleChange,className:"form-control-sm",required:!0})]}),(0,lr.jsxs)(SD.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,lr.jsx)(SD.Label,{className:"font12",children:"Email address"}),(0,lr.jsx)(SD.Control,{type:"email",name:"email",label:"email",placeholder:"Enter email",value:t,onChange:this.handleChange,className:"form-control-sm",required:!0})]}),(0,lr.jsxs)(SD.Group,{className:"mb-3",controlId:"formBasicPassword",children:[(0,lr.jsx)(SD.Label,{className:"font12",children:"Password"}),(0,lr.jsx)(SD.Control,{type:"password",name:"password",placeholder:"Enter password",value:n,minLength:"6",onChange:this.handleChange,className:"form-control-sm",label:"password",required:!0})]}),(0,lr.jsxs)(SD.Group,{className:"mb-3",controlId:"formBasicPassword",children:[(0,lr.jsx)(SD.Label,{className:"font12",children:"Confirm Password"}),(0,lr.jsx)(SD.Control,{type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:r,minLength:"6",onChange:this.handleChange,className:"form-control-sm",label:"Confirm Password",required:!0})]}),(0,lr.jsx)("button",{type:"submit",className:"btn btn-dark font12",style:{width:"100%"},children:"Sign Up"})]}),(0,lr.jsx)(cM,{children:i&&(0,lr.jsx)("div",{className:"alert alert-danger font12",role:"alert",children:"The email address is already in use by another account."})})]})}}const oM=ie(sM),aM=ar.div(nM||(nM=me(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    text-align: start;\n"]))),cM=ar.div(rM||(rM=me(["\n    margin-top: 20px;\n    max-width: 100%;\n"]))),lM=ar.div(iM||(iM=me(["\n    text-align: center;\n"])));var uM,hM,dM;const fM=()=>{const[e,n]=(0,t.useState)(!0);return(0,lr.jsx)(pM,{children:(0,lr.jsxs)("div",{className:"content",children:[(0,lr.jsx)("div",{className:"form",children:e?(0,lr.jsx)(XL,{}):(0,lr.jsx)(oM,{})}),(0,lr.jsx)("div",{className:"toggleButton font12",children:(0,lr.jsxs)(mM,{children:[e?"Don't have an account? ":"Already have an account? ",(0,lr.jsx)(gM,{onClick:()=>{n(!e)},children:e?"Sign Up":"Sign In"})]})})]})})},pM=ar.div(uM||(uM=me(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100vh;\n    .content {\n        text-align: center;\n        width: 90%;\n        max-width: 350px;\n        border: 1px solid #ccc;\n        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n        border-radius: 5px;\n        padding: 20px;\n    }\n    .form {\n        width: 100%;\n    }\n    .toggleButton {\n        text-align: center;\n    }\n    @media (max-width: 1400px) {\n        margin-top: 40px;\n      }\n"]))),mM=ar.div(hM||(hM=me(["\n    text-align: center;\n"]))),gM=ar.button(dM||(dM=me(["\n  margin-right: 5px;\n  border: none;\n  border-radius: 10px;\n  color: black;\n  padding: 8px 16px;\n  text-align: center;\n  text-decoration: none;\n  font-weight: 600;\n  display: inline-block;\n  margin: 4px 10px;\n  cursor: pointer;\n  background-color: #fff;\n\n  &:hover {\n    transition: 0.2s ease-in-out;\n    text-decoration: underline;\n  }\n"])));var vM;function yM(e){let{title:t,action:n,border:r}=e;return(0,lr.jsx)(wM,{className:"animate pointer radius8 font14",onClick:n?()=>n():null,border:r,children:t})}const wM=ar.button(vM||(vM=me(["\n  border: 3px solid #025464;\n  background-color: ",";\n  width: fit-content;\n  padding: 15px;\n  outline: none;\n  color: #025464;\n  transition: background-color 0.3s ease-in-out;\n  &:hover {\n    background-color: #025464;\n    color: #fff;\n    transform: scale(1.1);\n  }\n"])),(e=>e.border?"transparent":"#FFF"));const bM=n.p+"static/media/rocket.221d381235cff4046dd599afbc8b06c0.svg";const _M=n.p+"static/media/wave.37fab2d601686a1f5ce01566429757d9.svg";const EM=function(e){return(0,lr.jsx)("img",{src:_M,alt:""})};var SM,xM,IM,kM,TM,CM,NM;function AM(){return(0,lr.jsxs)(PM,{id:"home",className:"container flexSpaceCenter",children:[(0,lr.jsx)(RM,{className:"flexCenter flexColumn flex",style:{zIndex:9},children:(0,lr.jsxs)("div",{children:[(0,lr.jsx)("h1",{className:"extraBold font60",children:"Explore infinite worlds\u2014your perfect book awaits!"}),(0,lr.jsx)(DM,{className:"font14 semiBold",children:"Experience the literary exploration with BookSuggester. Delve into the diverse offerings of the Gutenberg library, where each click unveils a random literary gem waiting to be discovered."}),(0,lr.jsx)(pe,{className:"pointer extraBold",to:"/discover",children:(0,lr.jsx)(yM,{className:"semiBold",title:"Get Started"})})]})}),(0,lr.jsx)(OM,{children:(0,lr.jsx)(MM,{children:(0,lr.jsx)(FM,{className:"radius8",src:bM,alt:"office",style:{zIndex:9,width:"60%"}})})}),(0,lr.jsx)(LM,{children:(0,lr.jsx)("div",{className:"wave-container",children:(0,lr.jsx)(EM,{})})})]})}const PM=ar.section(SM||(SM=me(["\n  display: flex;\n  flex-direction: row;  \n  overflow: auto;\n  width: 100%;\n  min-height: 100vh;\n  height: -moz-fit-content;\n  height: -webkit-fit-content;\n  height: -fit-content;\n  @media (max-width: 960px) {\n    flex-direction: column;\n    padding-top: 50px;\n  }\n  @media (max-width: 550px) {\n    padding-top: 50px;\n  }\n"]))),RM=ar.div(xM||(xM=me(["\n  width: 50%;\n  height: 100%;\n  @media (max-width: 960px) {\n    width: 75%;\n    order: 2;\n    padding-bottom: 150px;\n    text-align: left;\n  }\n  @media (max-width: 560px) {\n    width: 95%;\n    margin-bottom: 50px;\n  }\n"]))),OM=ar.div(IM||(IM=me(["\n  width: 50%;\n  height: 100%;\n  @media (max-width: 960px) {\n    width: 60%;\n    order: 1;\n    margin-top: 20px;\n  }\n"]))),DM=ar.div(kM||(kM=me(["\n  max-width: 470px;\n  padding: 12px 0 12px 0;\n  line-height: 1.5rem;\n  @media (max-width: 960px) {\n    padding: 0px 0 20px 0;\n    text-align: left;\n    max-width: 100%;\n  }\n"]))),LM=ar.div(TM||(TM=me([" \n.wave-container {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    overflow: hidden;\n    line-height: 0;\n  } \n"]))),MM=ar.div(CM||(CM=me(["\n  display: flex;\n  justify-content: flex-end;\n  position: relative;\n  z-index: 9;\n  @media (max-width: 960px) {\n    width: 100%;\n    justify-content: center;\n  }\n"]))),FM=ar.img(NM||(NM=me(["\n  @media (max-width: 560px) {\n    width: 80%;\n    height: auto;\n  }\n"])));class jM extends t.Component{constructor(){super(),this.unsubscribeFromAuth=null,this.state={currentUser:null}}componentDidMount(){this.unsubscribeFromAuth=qk.onAuthStateChanged((async e=>{if(e){(await zk(e)).onSnapshot((e=>{this.setState({currentUser:{id:e.id,...e.data()}})}))}else this.setState({currentUser:e})}))}componentWillUnmount(){this.unsubscribeFromAuth()}render(){return(0,lr.jsx)("div",{children:(0,lr.jsxs)(se,{basename:"/booksuggester",children:[(0,lr.jsx)(hT,{currentUser:this.state.currentUser}),(0,lr.jsxs)(re,{children:[(0,lr.jsx)(J,{exact:!0,path:"/",children:(0,lr.jsx)(AM,{currentUser:this.state.currentUser})}),(0,lr.jsx)(J,{exact:!0,path:"/discover",children:(0,lr.jsx)(VO,{currentUser:this.state.currentUser})}),(0,lr.jsx)(J,{exact:!0,path:"/bookshelf",children:(0,lr.jsx)(jL,{currentUser:this.state.currentUser})}),(0,lr.jsx)(J,{exact:!0,path:"/login",children:(0,lr.jsx)(fM,{})})]})]})})}}const UM=jM;const VM=function(){return(0,lr.jsx)("div",{className:"App",children:(0,lr.jsx)(UM,{})})};r.render((0,lr.jsx)(t.StrictMode,{children:(0,lr.jsx)(VM,{})}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.1f56836b.js.map